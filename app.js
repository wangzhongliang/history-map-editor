!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=143)}([function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return c}),n.d(e,"h",function(){return h}),n.d(e,"i",function(){return v}),n.d(e,"j",function(){return p}),n.d(e,"k",function(){return w}),n.d(e,"l",function(){return f}),n.d(e,"m",function(){return d}),n.d(e,"n",function(){return g}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return b}),n.d(e,"r",function(){return x}),n.d(e,"s",function(){return O}),n.d(e,"t",function(){return S}),n.d(e,"u",function(){return I}),n.d(e,"v",function(){return T}),n.d(e,"w",function(){return R}),n.d(e,"x",function(){return L}),n.d(e,"y",function(){return N}),n.d(e,"z",function(){return P}),n.d(e,"A",function(){return M}),n.d(e,"B",function(){return j}),n.d(e,"C",function(){return A}),n.d(e,"D",function(){return F}),n.d(e,"E",function(){return D}),n.d(e,"F",function(){return k}),n.d(e,"H",function(){return G}),n.d(e,"I",function(){return z}),n.d(e,"J",function(){return U}),n.d(e,"G",function(){return B}),n.d(e,"a",function(){return Y});var r=n(11),i=n(85),_=n(36);function o(t){for(var e=p(),n=0,r=t.length;n<r;++n)x(e,t[n]);return e}function s(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function a(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function u(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function l(t,e){return h(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function h(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function v(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=_.a.UNKNOWN;return s<n?u|=_.a.LEFT:i<s&&(u|=_.a.RIGHT),a<r?u|=_.a.BELOW:o<a&&(u|=_.a.ABOVE),u===_.a.UNKNOWN&&(u=_.a.INTERSECTING),u}function p(){return[1/0,1/0,-1/0,-1/0]}function w(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function f(t){return w(1/0,1/0,-1/0,-1/0,t)}function d(t,e){var n=t[0],r=t[1];return w(n,r,n,r,e)}function g(t,e){return E(f(e),t)}function y(t,e,n,r,i){return O(f(i),t,e,n,r)}function m(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function b(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function x(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function E(t,e){for(var n=0,r=e.length;n<r;++n)x(t,e[n]);return t}function O(t,e,n,r,i){for(;n<r;n+=i)C(t,e[n],e[n+1]);return t}function C(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function S(t,e,n){var r;return(r=e.call(n,T(t)))?r:(r=e.call(n,R(t)))?r:(r=e.call(n,F(t)))?r:(r=e.call(n,A(t)))||!1}function I(t){var e=0;return G(t)||(e=D(t)*M(t)),e}function T(t){return[t[0],t[1]]}function R(t){return[t[2],t[1]]}function L(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function N(t,e){var n;return e===i.a.BOTTOM_LEFT?n=T(t):e===i.a.BOTTOM_RIGHT?n=R(t):e===i.a.TOP_LEFT?n=A(t):e===i.a.TOP_RIGHT?n=F(t):Object(r.a)(!1,13),n}function P(t,e,n,r,i){var o=e*r[0]/2,s=e*r[1]/2,a=Math.cos(n),u=Math.sin(n),l=o*a,c=o*u,h=s*a,p=s*u,f=t[0],d=t[1],g=f-l+p,y=f-l-p,_=f+l-p,v=f+l+p,m=d-c-h,b=d-c+h,x=d+c+h,E=d+c-h;return w(Math.min(g,y,_,v),Math.min(m,b,x,E),Math.max(g,y,_,v),Math.max(m,b,x,E),i)}function M(t){return t[3]-t[1]}function j(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return k(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):f(r),r}function A(t){return[t[0],t[3]]}function F(t){return[t[2],t[3]]}function D(t){return t[2]-t[0]}function k(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function G(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function U(t,e){var n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}function B(t,e,n){var r=!1,i=v(t,e),o=v(t,n);if(i===_.a.INTERSECTING||o===_.a.INTERSECTING)r=!0;else{var s,a,u=t[0],l=t[1],c=t[2],h=t[3],p=e[0],f=e[1],d=n[0],g=n[1],y=(g-f)/(d-p);o&_.a.ABOVE&&!(i&_.a.ABOVE)&&(r=u<=(s=d-(g-h)/y)&&s<=c),r||!(o&_.a.RIGHT)||i&_.a.RIGHT||(r=l<=(a=g-(d-c)*y)&&a<=h),r||!(o&_.a.BELOW)||i&_.a.BELOW||(r=u<=(s=d-(g-l)/y)&&s<=c),r||!(o&_.a.LEFT)||i&_.a.LEFT||(r=l<=(a=g-(d-u)*y)&&a<=h)}return r}function Y(t,e,n){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(r,r,2),function(t,e,n){return w(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}([r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]],n)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"e",function(){return h}),n.d(e,"d",function(){return p});var s=n(7);function u(t,e,n,r){for(var i,o=0,s=t.length;o<s;++o)if((i=t[o]).listener===e&&i.bindTo===n)return r&&(i.deleteIndex=o),i}function a(t,e){var n=l(t);return n?n[e]:void 0}function l(t,e){var n=t.ol_lm;return!n&&e&&(n=t.ol_lm={}),n}function r(t,e){var n=a(t,e);if(n){for(var r=0,i=n.length;r<i;++r)t.removeEventListener(e,n[r].boundListener),Object(s.b)(n[r]);n.length=0;var o=l(t);o&&(delete o[e],0===Object.keys(o).length&&function(t){delete t.ol_lm}(t))}}function i(t,e,n,r,i){var o=l(t,!0),s=o[e],a=u(s=s||(o[e]=[]),n,r,!1);return a?i||(a.callOnce=!1):(a={bindTo:r,callOnce:!!i,listener:n,target:t,type:e},t.addEventListener(e,function(r){function t(t){var e=r.listener,n=r.bindTo||r.target;return r.callOnce&&h(r),e.call(n,t)}return r.boundListener=t}(a)),s.push(a)),a}function o(t,e,n,r){return i(t,e,n,r,!0)}function c(t,e,n,r){var i=a(t,e);if(i){var o=u(i,n,r,!0);o&&h(o)}}function h(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=a(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&r(t.target,t.type)}Object(s.b)(t)}}function p(t){var e=l(t);if(e)for(var n in e)r(t,n)}},function(t,e,n){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return s});var i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}var s="5.3.2"},function(t,e,n){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,n){"use strict";e.a={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e,n){"use strict";n.d(e,"c",function(){return y}),n.d(e,"b",function(){return _}),n.d(e,"d",function(){return v}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return b}),n.d(e,"g",function(){return x}),n.d(e,"i",function(){return E}),n.d(e,"k",function(){return w}),n.d(e,"l",function(){return O}),n.d(e,"m",function(){return C}),n.d(e,"j",function(){return S}),n.d(e,"h",function(){return I}),n.d(e,"o",function(){return T}),n.d(e,"a",function(){return N}),n.d(e,"p",function(){return D}),n.d(e,"q",function(){return k}),n.d(e,"s",function(){return G}),n.d(e,"r",function(){return z}),n.d(e,"n",function(){return U});var o,u,s,a,l,c,h,p,f=n(39),r=n(14),i=n(7),d=n(121),g=n(12),y="10px sans-serif",_=[0,0,0,1],v="round",m=[],b=0,x="round",E=10,w=[0,0,0,1],O="center",C="middle",S=[0,0,0,0],I=1,T=new d.a,R=null,L={},N=(s=60,a={},l="32px ",h=(c=["monospace","serif"]).length,p="wmytzilWMYTZIL@#/&?$%10ï€“",function(t){var e=Object(f.e)(t);if(e)for(var n=0,r=e.length;n<r;++n){var i=e[n];i in a||(a[i]=s,P(i)||void(a[i]=0)===o&&(o=setInterval(M,32)))}});function P(t){for(var e=j(),n=100;n<=700;n+=300){for(var r=n+" ",i=!0,o=0;o<h;++o){var s=c[o];if(e.font=r+l+s,u=e.measureText(p).width,t!=s){e.font=r+l+t+","+s;var a=e.measureText(p).width;i=i&&a!=u}}if(i)return!0}return!1}function M(){var t=!0;for(var e in a)a[e]<s&&(P(e)?(a[e]=s,Object(i.b)(L),R=null,T.clear()):(++a[e],t=!1));t&&(clearInterval(o),o=void 0)}function j(){return R=R||Object(r.a)(1,1)}var A,F,D=(F=L,function(t){var e=F[t];return null==e&&(A||((A=document.createElement("span")).textContent="M",A.style.margin=A.style.padding="0 !important",A.style.position="absolute !important",A.style.left="-99999px !important"),A.style.font=t,document.body.appendChild(A),e=F[t]=A.offsetHeight,document.body.removeChild(A)),e});function k(t,e){var n=j();return t!=n.font&&(n.font=t),n.measureText(e).width}function G(t,e,n,r){0!==e&&(t.translate(n,r),t.rotate(e),t.translate(-n,-r))}var z=Object(g.c)();function U(t,e,n,r,i,o,s,a,u,l,c){var h;1!=n&&(h=t.globalAlpha,t.globalAlpha=h*n),e&&t.setTransform.apply(t,e),t.drawImage(r,i,o,s,a,u,l,s*c,a*c),h&&(t.globalAlpha=h),e&&t.setTransform.apply(t,z)}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s});var r="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1,o=arguments.length;i<o;++i){var s=n[i];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])}return r};function i(t){for(var e in t)delete t[e]}function o(t){var e=[];for(var n in t)e.push(t[n]);return e}function s(t){var e;for(e in t)return!1;return!e}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"f",function(){return l}),n.d(e,"e",function(){return s}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return h});n(11);function r(t,e,n){return Math.min(Math.max(t,e),n)}var i="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function o(t,e,n,r,i,o){var s=i-n,a=o-r;if(0!=s||0!=a){var u=((t-n)*s+(e-r)*a)/(s*s+a*a);1<u?(n=i,r=o):0<u&&(n+=s*u,r+=a*u)}return l(t,e,n,r)}function l(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function s(t){for(var e=t.length,n=0;n<e;n++){for(var r=n,i=Math.abs(t[n][n]),o=n+1;o<e;o++){var s=Math.abs(t[o][n]);i<s&&(i=s,r=o)}if(0===i)return null;var a=t[r];t[r]=t[n],t[n]=a;for(var u=n+1;u<e;u++)for(var l=-t[u][n]/t[n][n],c=n;c<e+1;c++)n==c?t[u][c]=0:t[u][c]+=l*t[n][c]}for(var h=new Array(e),p=e-1;0<=p;p--){h[p]=t[p][e]/t[p][p];for(var f=p-1;0<=f;f--)t[f][e]-=t[f][p]*h[p]}return h}function a(t){return 180*t/Math.PI}function u(t){return t*Math.PI/180}function c(t,e){var n=t%e;return n*e<0?n+e:n}function h(t,e,n){return t+n*(e-t)}},function(t,e,n){"use strict";function r(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}var l=n(102),i=n(0),o=n(8),c=n(37);r.prototype.canWrapX=function(){return this.canWrapX_},r.prototype.getCode=function(){return this.code_},r.prototype.getExtent=function(){return this.extent_},r.prototype.getUnits=function(){return this.units_},r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||c.a[this.units_]},r.prototype.getWorldExtent=function(){return this.worldExtent_},r.prototype.getAxisOrientation=function(){return this.axisOrientation_},r.prototype.isGlobal=function(){return this.global_},r.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},r.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},r.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},r.prototype.setWorldExtent=function(t){this.worldExtent_=t},r.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var s=r,h=6378137,p=Math.PI*h,a=[-p,-p,p,p],u=[-180,-85,180,85],f=function(e){function t(t){e.call(this,{code:t,units:c.b.METERS,extent:a,global:!0,worldExtent:u,getPointResolution:function(t,e){return t/Object(o.b)(e[1]/h)}})}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(s),d=[new f("EPSG:3857"),new f("EPSG:102100"),new f("EPSG:102113"),new f("EPSG:900913"),new f("urn:ogc:def:crs:EPSG:6.18:3:3857"),new f("urn:ogc:def:crs:EPSG::3857"),new f("http://www.opengis.net/gml/srs/epsg.xml#3857")];function g(t,e,n){var r=t.length,i=1<n?n:2,o=e;void 0===o&&(o=2<i?t.slice():new Array(r));for(var s=p,a=0;a<r;a+=i){o[a]=s*t[a]/180;var u=h*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));s<u?u=s:u<-s&&(u=-s),o[a+1]=u}return o}function y(t,e,n){var r=t.length,i=1<n?n:2,o=e;void 0===o&&(o=2<i?t.slice():new Array(r));for(var s=0;s<r;s+=i)o[s]=180*t[s]/p,o[s+1]=360*Math.atan(Math.exp(t[s+1]/h))/Math.PI-90;return o}var _=[-180,-90,180,90],v=6378137*Math.PI/180,m=function(n){function t(t,e){n.call(this,{code:t,units:c.b.DEGREES,extent:_,axisOrientation:e,global:!0,metersPerUnit:v,worldExtent:_})}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(s),b=[new m("CRS:84"),new m("EPSG:4326","neu"),new m("urn:ogc:def:crs:EPSG::4326","neu"),new m("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new m("urn:ogc:def:crs:OGC:1.3:CRS84"),new m("urn:ogc:def:crs:OGC:2:84"),new m("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m("urn:x-ogc:def:crs:EPSG:4326","neu")],x={};n(7);var E,w,O,C={};function S(t,e,n){var r=t.getCode(),i=e.getCode();r in C||(C[r]={}),C[r][i]=n}function I(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function T(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function R(t){!function(t,e){x[t]=e}(t.getCode(),t),S(t,t,I)}function L(t){return"string"==typeof t?function(t){return x[t]||null}(t):t||null}function N(t,e,n,r){var i,o=(t=L(t)).getPointResolutionFunc();if(o)i=o(e,n);else if(t.getUnits()==c.b.DEGREES&&!r||r==c.b.DEGREES)i=e;else{var s=A(t,L("EPSG:4326")),a=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];a=s(a,a,2),i=(Object(l.a)(a.slice(0,2),a.slice(2,4))+Object(l.a)(a.slice(4,6),a.slice(6,8)))/2;var u=r?c.a[r]:t.getMetersPerUnit();void 0!==u&&(i/=u)}return i}function P(t){!function(t){t.forEach(R)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&S(e,t,I)})})}function M(t,e){return t?"string"==typeof t?L(t):t:L(e)}function j(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?n:A(t,e)===I&&n}function A(t,e){var n=function(t,e){var n;return t in C&&e in C[t]&&(n=C[t][e]),n}(t.getCode(),e.getCode());return n=n||T}function F(t,e){return A(L(t),L(e))}function D(t,e,n){return F(e,n)(t,void 0,t.length)}function k(t,e,n){var r=F(e,n);return Object(i.a)(t,r)}n.d(e,"d",function(){return L}),n.d(e,"e",function(){return N}),n.d(e,"b",function(){return M}),n.d(e,"c",function(){return j}),n.d(e,"g",function(){return A}),n.d(e,"f",function(){return F}),n.d(e,"h",function(){return D}),n.d(e,"i",function(){return k}),n.d(e,"a",function(){return c.a}),P(d),P(b),E=d,w=g,O=y,b.forEach(function(e){E.forEach(function(t){S(e,t,w),S(t,e,O)})})},function(t,e,n){"use strict";function r(t,e,n){for(var r,i,o=n||l,s=0,a=t.length,u=!1;s<a;)(i=+o(t[r=s+(a-s>>1)],e))<0?s=r+1:(a=r,u=!i);return u?s:~s}function l(t,e){return e<t?1:t<e?-1:0}function i(t,e){return 0<=t.indexOf(e)}function o(t,e,n){var r,i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;if(0<n){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function s(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function a(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function u(t,e){var n=t.indexOf(e),r=-1<n;return r&&t.splice(n,1),r}function c(t,e){for(var n,r=t.length>>>0,i=0;i<r;i++)if(e(n=t[i],i,t))return n;return null}function h(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function p(t,n){var e,r=t.length,i=Array(t.length);for(e=0;e<r;e++)i[e]={index:e,value:t[e]};for(i.sort(function(t,e){return n(t.value,e.value)||t.index-e.index}),e=0;e<t.length;e++)t[e]=i[e].value}function f(n,r){var i;return!n.every(function(t,e){return!r(t,i=e,n)})?i:-1}function d(r,t,i){var o=t||l;return r.every(function(t,e){if(0===e)return!0;var n=o(r[e-1],t);return!(0<n||i&&0===n)})}n.d(e,"a",function(){return r}),n.d(e,"i",function(){return l}),n.d(e,"f",function(){return i}),n.d(e,"h",function(){return o}),n.d(e,"k",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"j",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"b",function(){return h}),n.d(e,"l",function(){return p}),n.d(e,"e",function(){return f}),n.d(e,"g",function(){return d})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(114);function i(t,e){if(!t)throw new r.a(e)}},function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"g",function(){return l}),n.d(e,"a",function(){return c}),n.d(e,"f",function(){return h}),n.d(e,"h",function(){return p}),n.d(e,"b",function(){return f}),n.d(e,"d",function(){return d});var u=n(11),r=new Array(6);function i(){return[1,0,0,1,0,0]}function o(t){return a(t,1,0,0,1,0,0)}function s(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=e[0],l=e[1],c=e[2],h=e[3],p=e[4],f=e[5];return t[0]=n*u+i*l,t[1]=r*u+o*l,t[2]=n*c+i*h,t[3]=r*c+o*h,t[4]=n*p+i*f+s,t[5]=r*p+o*f+a,t}function a(t,e,n,r,i,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function h(t,e,n){return s(t,a(r,e,0,0,n,0,0))}function p(t,e,n){return s(t,a(r,1,0,0,1,e,n))}function f(t,e,n,r,i,o,s,a){var u=Math.sin(o),l=Math.cos(o);return t[0]=r*l,t[1]=i*u,t[2]=-r*u,t[3]=i*l,t[4]=s*r*l-a*r*u+e,t[5]=s*i*u+a*i*l+n,t}function d(t){var e=function(t){return t[0]*t[3]-t[1]*t[2]}(t);Object(u.a)(0!==e,32);var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5];return t[0]=o/e,t[1]=-r/e,t[2]=-i/e,t[3]=n/e,t[4]=(i*a-o*s)/e,t[5]=-(n*a-r*s)/e,t}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,n){"use strict";function r(t,e){var n=document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function i(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function o(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function s(t){for(;t.lastChild;)t.removeChild(t.lastChild)}n.d(e,"a",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s})},function(t,e,n){"use strict";function r(){return!0}function i(){return!1}function o(){}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return o})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"i",function(){return h});n(8),n(80);function r(t,e){return t[0]+=e[0],t[1]+=e[1],t}function i(t,e){var n=e.getRadius(),r=e.getCenter(),i=r[0],o=r[1],s=t[0]-i,a=t[1]-o;0===s&&0==a&&(s=1);var u=Math.sqrt(s*s+a*a);return[i+n*s/u,o+n*a/u]}function o(t,e){var n,r,i=t[0],o=t[1],s=e[0],a=e[1],u=s[0],l=s[1],c=a[0],h=a[1],p=c-u,f=h-l,d=0==p&&0==f?0:(p*(i-u)+f*(o-l))/(p*p+f*f||0);return r=d<=0?(n=u,l):1<=d?(n=c,h):(n=u+d*p,l+d*f),[n,r]}function s(t,e){for(var n=!0,r=t.length-1;0<=r;--r)if(t[r]!=e[r]){n=!1;break}return n}function a(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function u(t,e){return t[0]*=e,t[1]*=e,t}function l(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function c(t,e){return Math.sqrt(l(t,e))}function h(t,e){return l(t,o(t,e))}},function(t,e,n){"use strict";var r=n(4);e.a={SINGLECLICK:"singleclick",CLICK:r.a.CLICK,DBLCLICK:r.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,n){"use strict";n.r(e),n.d(e,"altKeyOnly",function(){return a}),n.d(e,"altShiftKeysOnly",function(){return u}),n.d(e,"focus",function(){return l}),n.d(e,"always",function(){return c}),n.d(e,"click",function(){return h}),n.d(e,"mouseActionButton",function(){return p}),n.d(e,"never",function(){return f}),n.d(e,"pointerMove",function(){return d}),n.d(e,"singleClick",function(){return g}),n.d(e,"doubleClick",function(){return y}),n.d(e,"noModifierKeys",function(){return _}),n.d(e,"platformModifierKeyOnly",function(){return v}),n.d(e,"shiftKeyOnly",function(){return m}),n.d(e,"targetNotEditable",function(){return b}),n.d(e,"mouseOnly",function(){return x}),n.d(e,"primaryAction",function(){return E});var r=n(17),i=n(11),o=n(15),s=n(28),a=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},u=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},l=function(t){return t.target.getTargetElement()===document.activeElement},c=o.b,h=function(t){return t.type==r.a.CLICK},p=function(t){var e=t.originalEvent;return 0==e.button&&!(s.i&&s.d&&e.ctrlKey)},f=o.a,d=function(t){return"pointermove"==t.type},g=function(t){return t.type==r.a.SINGLECLICK},y=function(t){return t.type==r.a.DBLCLICK},_=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},v=function(t){var e=t.originalEvent;return!e.altKey&&(s.d?e.metaKey:e.ctrlKey)&&!e.shiftKey},m=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},b=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},x=function(t){var e=t.pointerEvent;return Object(i.a)(void 0!==e,56),"mouse"==e.pointerType},E=function(t){var e=t.pointerEvent;return Object(i.a)(void 0!==e,56),e.isPrimary&&0===e.button}},function(t,e,n){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e,n){"use strict";n.d(e,"b",function(){return h});var r=n(2),i=n(64),o=n(115),s=n(21),a=n(7),u=function(r){function t(t,e,n){r.call(this,t),this.key=e,this.oldValue=n}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t}(s.a),l=function(e){function t(t){e.call(this),Object(r.c)(this),this.values_={},void 0!==t&&this.setProperties(t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},t.prototype.getKeys=function(){return Object.keys(this.values_)},t.prototype.getProperties=function(){return Object(a.a)({},this.values_)},t.prototype.notify=function(t,e){var n;n=h(t),this.dispatchEvent(new u(n,t,e)),n=i.a.PROPERTYCHANGE,this.dispatchEvent(new u(n,t,e))},t.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var r=this.values_[t];r!==(this.values_[t]=e)&&this.notify(t,r)}},t.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},t.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},t}(o.a),c={};function h(t){return c.hasOwnProperty(t)?c[t]:c[t]="change:"+t}e.a=l},function(t,e,n){"use strict";n.d(e,"b",function(){return i});function r(t){this.propagationStopped,this.type=t,this.target=null}function i(t){t.stopPropagation()}r.prototype.preventDefault=function(){this.propagationStopped=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},e.a=r},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return p}),n.d(e,"g",function(){return f});var r=n(20),a=n(35),i=n(79),l=n(8),o=function(e){function t(t){e.call(this),t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getActive=function(){return this.get(i.a.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(t){return!0},t.prototype.setActive=function(t){this.set(i.a.ACTIVE,t)},t.prototype.setMap=function(t){this.map_=t},t}(r.a);function s(t,e,n){var r=t.getCenter();if(r){var i=t.constrainCenter([r[0]+e[0],r[1]+e[1]]);n?t.animate({duration:n,easing:a.d,center:i}):t.setCenter(i)}}function u(t,e,n,r){e=t.constrainRotation(e,0),c(t,e,n,r)}function c(t,e,n,r){if(void 0!==e){var i=t.getRotation(),o=t.getCenter();void 0!==i&&o&&0<r?t.animate({rotation:e,anchor:n,duration:r,easing:a.b}):t.rotate(e,n)}}function h(t,e,n,r,i){e=t.constrainResolution(e,0,i),f(t,e,n,r)}function p(t,e,n,r){var i=t.getResolution(),o=t.constrainResolution(i,e,0);if(void 0!==o){var s=t.getResolutions();o=Object(l.a)(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(n&&void 0!==o&&o!==i){var a=t.getCenter(),u=t.calculateCenterZoom(o,n);u=t.constrainCenter(u),n=[(o*a[0]-i*u[0])/(o-i),(o*a[1]-i*u[1])/(o-i)]}f(t,o,n,r)}function f(t,e,n,r){if(e){var i=t.getResolution(),o=t.getCenter();if(void 0!==i&&o&&e!==i&&r)t.animate({resolution:e,anchor:n,duration:r,easing:a.b});else{if(n){var s=t.calculateCenterZoom(e,n);t.setCenter(s)}t.setResolution(e)}}}e.a=o},function(t,e,n){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,n){"use strict";function r(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function i(t,e,n){return t+"/"+e+"/"+n}function o(t){return i(t[0],t[1],t[2])}function s(t){return t.split("/").map(Number)}function a(t){return(t[1]<<t[0])+t[2]}function u(t){var e,n,r=t[0],i=new Array(r),o=1<<r-1;for(e=0;e<r;++e)n=48,t[1]&o&&(n+=1),t[2]&o&&(n+=2),i[e]=String.fromCharCode(n),o>>=1;return i.join("")}function l(t,e){var n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,n):e.getFullTileRange(n))||o.containsXY(r,i)}n.d(e,"a",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return a}),n.d(e,"f",function(){return u}),n.d(e,"g",function(){return l})},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]+2*e,n[1]=t[1]+2*e,n}function i(t){return 0<t[0]&&0<t[1]}function o(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function s(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s})},function(t,e,n){"use strict";e.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(17),r=n(22),o=n(7),s=function(n){function t(t){var e=t||{};n.call(this,e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.handleDownEvent=function(t){return!1},t.prototype.handleDragEvent=function(t){},t.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==i.a.POINTERDRAG)this.handleDragEvent(t);else if(t.type==i.a.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&0<this.targetPointers.length}}else if(t.type==i.a.POINTERDOWN){var r=this.handleDownEvent(t);r&&t.preventDefault(),this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==i.a.POINTERMOVE&&this.handleMoveEvent(t);return!e},t.prototype.handleMoveEvent=function(t){},t.prototype.handleUpEvent=function(t){return!1},t.prototype.stopDown=function(t){return t},t.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===i.a.POINTERDOWN||e===i.a.POINTERDRAG||e===i.a.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==i.a.POINTERUP?delete this.trackedPointers_[n]:t.type==i.a.POINTERDOWN?this.trackedPointers_[n]=e:n in this.trackedPointers_&&(this.trackedPointers_[n]=e),this.targetPointers=Object(o.c)(this.trackedPointers_)}},t}(r.a);function a(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}e.b=s},function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"i",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return h}),n.d(e,"e",function(){return p});var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=-1!==r.indexOf("firefox"),o=-1!==r.indexOf("safari")&&-1==r.indexOf("chrom"),s=-1!==r.indexOf("webkit")&&-1==r.indexOf("edge"),a=-1!==r.indexOf("macintosh"),u=window.devicePixelRatio||1,l=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),c=(navigator,"ontouchstart"in window),h="PointerEvent"in window,p=!!navigator.msPointerEnabled},function(t,e,n){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,n){"use strict";n.r(e);var a=n(10),o=n(0),u=n(26),s=n(3),r=n(41),l=n(93),c=n(51),h=n(44),p=n(46),f=n(58),d=function(n){function r(t,e){n.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout)},r.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))},r.prototype.getArea=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinates=function(){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new r(e,u.a.XY)},r.prototype.getType=function(){return s.a.LINEAR_RING},r.prototype.intersectsExtent=function(t){return!1},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(h.b)(this.flatCoordinates,0,t,this.stride),this.changed()},r}(r.a),g=n(40),y=n(102),_=n(60),v=n(117),m=n(73),b=n(78),x=n(8);n.d(e,"circular",function(){return i}),n.d(e,"fromExtent",function(){return w}),n.d(e,"fromCircle",function(){return O}),n.d(e,"makeRegular",function(){return C});var E=function(r){function i(t,e,n){r.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}return r&&(i.__proto__=r),((i.prototype=Object.create(r&&r.prototype)).constructor=i).prototype.appendLinearRing=function(t){this.flatCoordinates?Object(a.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},i.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))},i.prototype.containsXY=function(t,e){return Object(_.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},i.prototype.getArea=function(){return Object(l.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},i.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(b.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(p.b)(e,0,this.ends_,this.stride)},i.prototype.getEnds=function(){return this.ends_},i.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(o.x)(this.getExtent());this.flatInteriorPoint_=Object(v.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},i.prototype.getInteriorPoint=function(){return new g.a(this.getFlatInteriorPoint(),u.a.XYM)},i.prototype.getLinearRingCount=function(){return this.ends_.length},i.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new d(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},i.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],i=0,o=0,s=n.length;o<s;++o){var a=n[o],u=new d(e.slice(i,a),t);r.push(u),i=a}return r},i.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(b.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(b.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},i.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];return e.length=Object(f.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new i(e,u.a.XY,n)},i.prototype.getType=function(){return s.a.POLYGON},i.prototype.intersectsExtent=function(t){return Object(m.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},i.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(h.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},i}(r.a);e.default=E;function i(t,e,n,r){for(var i=n||32,o=[],s=0;s<i;++s)Object(a.c)(o,Object(y.b)(t,e,2*Math.PI*s/i,r));return o.push(o[0],o[1]),new E(o,u.a.XY,[o.length])}function w(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new E(o,u.a.XY,[o.length])}function O(t,e,n){for(var r=e||32,i=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=i*(r+1),u=new Array(a),l=0;l<a;l+=i){u[l]=0,u[l+1]=0;for(var c=2;c<i;c++)u[l+c]=s[c]}var h=[u.length],p=new E(u,o,h);return C(p,s,t.getRadius(),n),p}function C(t,e,n,r){for(var i=t.getFlatCoordinates(),o=t.getStride(),s=i.length/o-1,a=r||0,u=0;u<=s;++u){var l=u*o,c=a+2*Object(x.d)(u,s)*Math.PI/s;i[l]=e[0]+n*Math.cos(c),i[1+l]=e[1]+n*Math.sin(c)}t.changed()}},function(t,e,n){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,n){"use strict";var i=n(114),s=n(29),r=n(20),o=n(21),a="length",u=function(n){function t(t,e){n.call(this,t),this.element=e}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(o.a),l=function(o){function t(t,e){o.call(this);var n=e||{};if(this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(var r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.clear=function(){for(;0<this.getLength();)this.pop()},t.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},t.prototype.forEach=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)t(e[n],n,e)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(t){return this.array_[t]},t.prototype.getLength=function(){return this.get(a)},t.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u(s.a.ADD,e))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},t.prototype.remove=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)},t.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(s.a.REMOVE,e)),e},t.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u(s.a.REMOVE,r)),this.dispatchEvent(new u(s.a.ADD,e))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},t.prototype.updateLength_=function(){this.set(a,this.array_.length)},t.prototype.assertUnique_=function(t,e){for(var n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new i.a(58)},t}(r.a);e.a=l},function(t,e,n){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"e",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return g});var h=n(70),p=n(25),f=n(0),s=n(85),i=n(9),r=n(37),a=n(84);function o(t){var e=t.getDefaultTileGrid();return e||(e=d(t),t.setDefaultTileGrid(e)),e}function u(t,e,n){var r=e[0],i=t.getTileCoordCenter(e),o=g(n);if(Object(f.f)(o,i))return e;var s=Object(f.E)(o),a=Math.ceil((o[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,r)}function l(t){var e=t||{},n=e.extent||Object(i.d)("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:c(n,e.maxZoom,e.tileSize)};return new a.a(r)}function c(t,e,n){for(var r=void 0!==e?e:h.a,i=Object(f.A)(t),o=Object(f.E)(t),s=Object(p.d)(void 0!==n?n:h.b),a=Math.max(o/s[0],i/s[1]),u=r+1,l=new Array(u),c=0;c<u;++c)l[c]=a/Math.pow(2,c);return l}function d(t,e,n,r){return function(t,e,n,r){var i=void 0!==r?r:s.a.TOP_LEFT,o=c(t,e,n);return new a.a({extent:t,origin:Object(f.y)(t,i),resolutions:o,tileSize:n})}(g(t),e,n,r)}function g(t){var e=(t=Object(i.d)(t)).getExtent();if(!e){var n=180*i.a[r.b.DEGREES]/t.getMetersPerUnit();e=Object(f.k)(-n,-n,n,n)}return e}},function(t,e,n){"use strict";function r(t){return Math.pow(t,3)}function i(t){return 1-r(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s})},function(t,e,n){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},i={};i[r.DEGREES]=2*Math.PI*6370997/360,i[r.FEET]=.3048,i[r.METERS]=1,i[r.USFEET]=1200/3937,e.b=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return c});var l=n(11),s=n(8),a=n(24);function o(r,i){var o=/\{z\}/g,s=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(n,t,e){return n?r.replace(o,n[0].toString()).replace(s,n[1].toString()).replace(a,function(){return(-n[2]-1).toString()}).replace(u,function(){var t=n[0],e=i.getFullTileRange(t);return Object(l.a)(e,55),(e.getHeight()+n[2]).toString()}):void 0}}function r(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=o(t[i],e);return u(r)}function u(o){return 1===o.length?o[0]:function(t,e,n){if(t){var r=Object(a.e)(t),i=Object(s.d)(r,o.length);return o[i](t,e,n)}}}function i(t,e,n){}function c(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r,i=n[1].charCodeAt(0),o=n[2].charCodeAt(0);for(r=i;r<=o;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u}),n.d(e,"e",function(){return l});var r,i,o="ol-hidden",s="ol-unselectable",a="ol-control",u="ol-collapsed",l=(i={},function(t){if(r=r||document.createElement("div").style,!(t in i)){r.font=t;var e=r.fontFamily;if(r.font="",!e)return null;i[t]=e.split(/,\s?/)}return i[t]})},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(41),s=n(44),u=n(8),a=function(n){function t(t,e){n.call(this),this.setCoordinates(t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=Object(u.f)(t,e,i[0],i[1]);if(o<r){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,o}return r},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(t){return Object(r.m)(this.flatCoordinates,t)},t.prototype.getType=function(){return i.a.POINT},t.prototype.intersectsExtent=function(t){return Object(r.h)(t,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(s.a)(this.flatCoordinates,0,t,this.stride),this.changed()},t}(o.a);e.a=a},function(t,e,n){"use strict";n.d(e,"b",function(){return h});var r=n(2),a=n(0),i=n(87),o=n(26),u=n(52),s=n(7),l=function(t){function e(){t.call(this),this.layout=o.a.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeExtent=function(t){return Object(a.o)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(r.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(s.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?this.simplifiedGeometryCache[e]=n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=c(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(r.b)()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=c(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=o.a.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=o.a.XY:3==t?e=o.a.XYZ:4==t&&(e=o.a.XYZM);return e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Object(u.a)(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i=i||Object(a.x)(this.getExtent());var o=this.getFlatCoordinates();if(o){var s=this.getStride();Object(u.b)(o,0,o.length,s,t,r,i,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Object(u.d)(n,0,n.length,r,t,e,n),this.changed()}},e}(i.a);function c(t){var e;return t==o.a.XY?e=2:t==o.a.XYZ||t==o.a.XYM?e=3:t==o.a.XYZM&&(e=4),e}function h(t,e,n){var r=t.getFlatCoordinates();if(r){var i=t.getStride();return Object(u.c)(r,0,r.length,i,e,n)}return null}e.a=l},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r=.5,i=!0},function(t,e,n){"use strict";var S=n(42),i=n(2),r=n(130),s=n(131),I=n(5),c=n(1),h=n(4),g=n(9),o=n(59),T=n(0),R=n(8),L=n(65),N=n(132),y=function(C){function t(t,e,n,r,i,o,s,a,u,l,c){C.call(this,i,I.a.IDLE),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=o||i,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var h=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),d=p?Object(T.B)(h,p):h;if(0!==Object(T.u)(d)){var g=t.getExtent();g&&(f=f?Object(T.B)(f,g):g);var y=r.getResolution(this.wrappedTileCoord_[0]),_=Object(T.x)(d),v=Object(L.a)(t,n,_,y);if(!isFinite(v)||v<=0)this.state=I.a.EMPTY;else{var m=void 0!==l?l:S.b;if(this.triangulation_=new N.a(t,n,d,f,v*m),0!==this.triangulation_.getTriangles().length){this.sourceZ_=e.getZForResolution(v);var b=this.triangulation_.calculateSourceExtent();if(f&&(t.canWrapX()?(b[1]=Object(R.a)(b[1],f[1],f[3]),b[3]=Object(R.a)(b[3],f[1],f[3])):b=Object(T.B)(b,f)),Object(T.u)(b)){for(var x=e.getTileRangeForExtentAndZ(b,this.sourceZ_),E=x.minX;E<=x.maxX;E++)for(var w=x.minY;w<=x.maxY;w++){var O=u(this.sourceZ_,E,w,s);O&&this.sourceTiles_.push(O)}0===this.sourceTiles_.length&&(this.state=I.a.EMPTY)}else this.state=I.a.EMPTY}else this.state=I.a.EMPTY}}else this.state=I.a.EMPTY}return C&&(t.__proto__=C),((t.prototype=Object.create(C&&C.prototype)).constructor=t).prototype.disposeInternal=function(){this.state==I.a.LOADING&&this.unlistenSources_(),C.prototype.disposeInternal.call(this)},t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(t,e,n){t&&t.getState()==I.a.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),(this.sourceTiles_.length=0)===r.length)this.state=I.a.ERROR;else{var t=this.wrappedTileCoord_[0],e=this.targetTileGrid_.getTileSize(t),n="number"==typeof e?e:e[0],i="number"==typeof e?e:e[1],o=this.targetTileGrid_.getResolution(t),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(L.b)(n,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,r,this.gutter_,this.renderEdges_),this.state=I.a.LOADED}this.changed()},t.prototype.load=function(){if(this.state==I.a.IDLE){this.state=I.a.LOADING,this.changed();var o=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,t,e){var r=n.getState();if(r==I.a.IDLE||r==I.a.LOADING){o++;var i=Object(c.a)(n,h.a.CHANGE,function(t){var e=n.getState();e!=I.a.LOADED&&e!=I.a.ERROR&&e!=I.a.EMPTY||(Object(c.e)(i),0===--o&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,n){t.getState()==I.a.IDLE&&t.load()}),0===o&&setTimeout(this.reproject_.bind(this),0)}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(c.e),this.sourcesListenerKeys_=null},t}(o.a),a=n(90),_=n(24),u=n(34),l=function(o){function t(t){o.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:p,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:r.a,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.canExpireCache=function(){if(!S.a)return o.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},t.prototype.expireCache=function(t,e){if(S.a){var n=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?e:{})}}else o.prototype.expireCache.call(this,t,e)},t.prototype.getGutterForProjection=function(t){return S.a&&this.getProjection()&&t&&!Object(g.c)(this.getProjection(),t)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getOpaque=function(t){return!(S.a&&this.getProjection()&&t&&!Object(g.c)(this.getProjection(),t))&&o.prototype.getOpaque.call(this,t)},t.prototype.getTileGridForProjection=function(t){if(!S.a)return o.prototype.getTileGridForProjection.call(this,t);var e=this.getProjection();if(!this.tileGrid||e&&!Object(g.c)(e,t)){var n=Object(i.c)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Object(u.d)(t)),this.tileGridForProjection[n]}return this.tileGrid},t.prototype.getTileCacheForProjection=function(t){if(!S.a)return o.prototype.getTileCacheForProjection.call(this,t);var e=this.getProjection();if(!e||Object(g.c)(e,t))return this.tileCache;var n=Object(i.c)(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new s.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},t.prototype.createTile_=function(t,e,n,r,i,o){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),u=a?this.tileUrlFunction(a,r,i):void 0,l=new this.tileClass(s,void 0!==u?I.a.IDLE:I.a.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,Object(c.a)(l,h.a.CHANGE,this.handleTileChange,this),l},t.prototype.getTile=function(t,e,n,r,i){var o=this.getProjection();if(S.a&&o&&i&&!Object(g.c)(o,i)){var s,a=this.getTileCacheForProjection(i),u=[t,e,n],l=Object(_.c)(u);a.containsKey(l)&&(s=a.get(l));var c=this.getKey();if(s&&s.key==c)return s;var h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(i),f=this.getTileCoordForTileUrlFunction(u,i),d=new y(o,h,i,p,u,f,this.getTilePixelRatio(r),this.getGutter(),function(t,e,n,r){return this.getTileInternal(t,e,n,r,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,s?(d.interimTile=s,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,n,r,o||i)},t.prototype.getTileInternal=function(t,e,n,r,i){var o=null,s=Object(_.d)(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var u=o;o=this.createTile_(t,e,n,r,i,a),u.getState()==I.a.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,r,i,a),this.tileCache.set(s,o);return o},t.prototype.setRenderReprojectionEdges=function(t){if(S.a&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},t.prototype.setTileGridForProjection=function(t,e){if(S.a){var n=Object(g.d)(t);if(n){var r=Object(i.c)(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}}},t}(a.a);function p(t,e){t.getImage().src=e}e.a=l},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function c(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var s=n[i],a=0;a<r;++a)t[e++]=s[a];return e}function h(t,e,n,r,i){for(var o=i||[],s=0,a=0,u=n.length;a<u;++a){var l=c(t,e,n[a],r);e=o[s++]=l}return o.length=s,o}function i(t,e,n,r,i){for(var o=i||[],s=0,a=0,u=n.length;a<u;++a){var l=h(t,e,n[a],r,o[s]);e=(o[s++]=l)[l.length-1]}return o.length=s,o}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return i})},function(t,e,n){"use strict";n.d(e,"d",function(){return l}),n.d(e,"a",function(){return h}),n.d(e,"b",function(){return p});var r=n(11),i=n(3),o=n(100),s=n(74),a=n(81),u=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=f,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function l(t){var e;if("function"==typeof t)e=t;else{var n;if(Array.isArray(t))n=t;else Object(r.a)("function"==typeof t.getZIndex,41),n=[t];e=function(){return n}}return e}u.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new u({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},u.prototype.getRenderer=function(){return this.renderer_},u.prototype.setRenderer=function(t){this.renderer_=t},u.prototype.getGeometry=function(){return this.geometry_},u.prototype.getGeometryFunction=function(){return this.geometryFunction_},u.prototype.getFill=function(){return this.fill_},u.prototype.setFill=function(t){this.fill_=t},u.prototype.getImage=function(){return this.image_},u.prototype.setImage=function(t){this.image_=t},u.prototype.getStroke=function(){return this.stroke_},u.prototype.setStroke=function(t){this.stroke_=t},u.prototype.getText=function(){return this.text_},u.prototype.setText=function(t){this.text_=t},u.prototype.getZIndex=function(){return this.zIndex_},u.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=f,this.geometry_=e},u.prototype.setZIndex=function(t){this.zIndex_=t};var c=null;function h(t,e){if(!c){var n=new s.a({color:"rgba(255,255,255,0.4)"}),r=new a.a({color:"#3399CC",width:1.25});c=[new u({image:new o.a({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return c}function p(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t[i.a.POLYGON]=[new u({fill:new s.a({color:[255,255,255,.5]})})],t[i.a.MULTI_POLYGON]=t[i.a.POLYGON],t[i.a.LINE_STRING]=[new u({stroke:new a.a({color:e,width:5})}),new u({stroke:new a.a({color:n,width:3})})],t[i.a.MULTI_LINE_STRING]=t[i.a.LINE_STRING],t[i.a.CIRCLE]=t[i.a.POLYGON].concat(t[i.a.LINE_STRING]),t[i.a.POINT]=[new u({image:new o.a({radius:6,fill:new s.a({color:n}),stroke:new a.a({color:e,width:1.5})}),zIndex:1/0})],t[i.a.MULTI_POINT]=t[i.a.POINT],t[i.a.GEOMETRY_COLLECTION]=t[i.a.POLYGON].concat(t[i.a.LINE_STRING],t[i.a.POINT]),t}function f(t){return t.getGeometry()}e.c=u},function(t,e,n){"use strict";function c(t,e,n,r,i){for(var o=void 0!==i?i:[],s=0,a=e;a<n;a+=r)o[s++]=t.slice(a,a+r);return o.length=s,o}function h(t,e,n,r,i){for(var o=void 0!==i?i:[],s=0,a=0,u=n.length;a<u;++a){var l=n[a];o[s++]=c(t,e,l,r,o[s]),e=l}return o.length=s,o}function r(t,e,n,r,i){for(var o=void 0!==i?i:[],s=0,a=0,u=n.length;a<u;++a){var l=n[a];o[s++]=h(t,e,l,r,o[s]),e=l[l.length-1]}return o.length=s,o}n.d(e,"a",function(){return c}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return r})},function(t,e,n){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},function(t,e,n){"use strict";n.r(e),n.d(e,"createStyleFunction",function(){return u});var r=n(11),o=n(1),s=n(4),a=n(20),i=function(r){function i(t){if(r.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(o.a)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),t)if("function"==typeof t.getSimplifiedGeometry){var e=t;this.setGeometry(e)}else{var n=t;this.setProperties(n)}}return r&&(i.__proto__=r),((i.prototype=Object.create(r&&r.prototype)).constructor=i).prototype.clone=function(){var t=new i(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var n=this.getStyle();return n&&t.setStyle(n),t},i.prototype.getGeometry=function(){return this.get(this.geometryName_)},i.prototype.getId=function(){return this.id_},i.prototype.getGeometryName=function(){return this.geometryName_},i.prototype.getStyle=function(){return this.style_},i.prototype.getStyleFunction=function(){return this.styleFunction_},i.prototype.handleGeometryChange_=function(){this.changed()},i.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(o.e)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(o.a)(t,s.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},i.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},i.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?u(t):void 0,this.changed()},i.prototype.setId=function(t){this.id_=t,this.changed()},i.prototype.setGeometryName=function(t){Object(o.c)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(o.a)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},i}(a.a);function u(t){return"function"==typeof t?t:(e=Array.isArray(t)?t:(Object(r.a)("function"==typeof t.getZIndex,41),[t]),function(){return e});var e}e.default=i},function(t,e,n){"use strict";n.d(e,"b",function(){return f});var i=n(1),o=n(4),s=n(2),a=n(20),r=n(116),u=n(33),l=n(7),c=n(47),h=n(23),p=function(r){function t(t){var e=Object(l.a)({},t);delete e.source,r.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),Object(i.a)(this,Object(a.b)(u.a.SOURCE),this.handleSourcePropertyChange_,this);var n=t.source?t.source:null;this.setSource(n)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},t.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},t.prototype.getSource=function(){return this.get(u.a.SOURCE)||null},t.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():h.a.UNDEFINED},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(i.e)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(i.a)(t,o.a.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(i.e)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(i.e)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(i.a)(t,c.a.PRECOMPOSE,function(t){var e=t,n=this.getLayerState();n.managed=!1,void 0===this.getZIndex()&&(n.zIndex=1/0),e.frameState.layerStatesArray.push(n),e.frameState.layerStates[Object(s.c)(this)]=n},this),this.mapRenderKey_=Object(i.a)(this,o.a.CHANGE,t.render,t),this.changed())},t.prototype.setSource=function(t){this.set(u.a.SOURCE,t)},t}(r.a);function f(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}e.a=p},function(t,e,n){"use strict";var i=n(31),r=n(49),o=n(120),s=n(7),a=n(45),u="renderOrder",l=function(r){function t(t){var e=t||{},n=Object(s.a)({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,r.call(this,n),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||o.a.VECTOR,this.type=i.a.VECTOR}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getDeclutter=function(){return this.declutter_},t.prototype.setDeclutter=function(t){this.declutter_=t},t.prototype.getRenderBuffer=function(){return this.renderBuffer_},t.prototype.getRenderOrder=function(){return this.get(u)},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},t.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},t.prototype.setRenderOrder=function(t){this.set(u,t)},t.prototype.setStyle=function(t){this.style_=void 0!==t?t:a.a,this.styleFunction_=null===t?void 0:Object(a.d)(this.style_),this.changed()},t.prototype.getRenderMode=function(){return this.renderMode_},t}(r.a);l.prototype.getSource,e.a=l},function(t,e,n){"use strict";n.d(e,"e",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"f",function(){return r}),n.d(e,"d",function(){return _}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return i});var g=n(8);function y(t,e,n,r,i,o,s){var a,u=t[e],l=t[e+1],c=t[n]-u,h=t[n+1]-l;if(0==c&&0==h)a=e;else{var p=((i-u)*c+(o-l)*h)/(c*c+h*h);if(1<p)a=n;else{if(0<p){for(var f=0;f<r;++f)s[f]=Object(g.c)(t[e+f],t[n+f],p);return void(s.length=r)}a=e}}for(var d=0;d<r;++d)s[d]=t[a+d];s.length=r}function u(t,e,n,r,i){var o=t[e],s=t[e+1];for(e+=r;e<n;e+=r){var a=t[e],u=t[e+1],l=Object(g.f)(o,s,a,u);i<l&&(i=l),o=a,s=u}return i}function l(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];i=u(t,e,a,r,i),e=a}return i}function r(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];i=l(t,e,a,r,i),e=a[a.length-1]}return i}function _(t,e,n,r,i,o,s,a,u,l,c){if(e==n)return l;var h,p;if(0===i){if((p=Object(g.f)(s,a,t[e],t[e+1]))<l){for(h=0;h<r;++h)u[h]=t[e+h];return u.length=r,p}return l}for(var f=c||[NaN,NaN],d=e+r;d<n;)if(y(t,d-r,d,r,s,a,f),(p=Object(g.f)(s,a,f[0],f[1]))<l){for(l=p,h=0;h<r;++h)u[h]=f[h];d+=u.length=r}else d+=r*Math.max((Math.sqrt(p)-Math.sqrt(l))/i|0,1);if(o&&(y(t,n-r,e,r,s,a,f),(p=Object(g.f)(s,a,f[0],f[1]))<l)){for(l=p,h=0;h<r;++h)u[h]=f[h];u.length=r}return l}function v(t,e,n,r,i,o,s,a,u,l,c){for(var h=c||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];l=_(t,e,d,r,i,o,s,a,u,l,h),e=d}return l}function i(t,e,n,r,i,o,s,a,u,l,c){for(var h=c||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];l=v(t,e,d,r,i,o,s,a,u,l,h),e=d[d.length-1]}return l}},function(t,e,n){"use strict";function r(t,e,n,r,i,o){for(var s=o||[],a=0,u=e;u<n;u+=r){var l=t[u],c=t[u+1];s[a++]=i[0]*l+i[2]*c+i[4],s[a++]=i[1]*l+i[3]*c+i[5]}return o&&s.length!=a&&(s.length=a),s}function i(t,e,n,r,i,o,s){for(var a=s||[],u=Math.cos(i),l=Math.sin(i),c=o[0],h=o[1],p=0,f=e;f<n;f+=r){var d=t[f]-c,g=t[f+1]-h;a[p++]=c+d*u-g*l,a[p++]=h+d*l+g*u;for(var y=f+2;y<f+r;++y)a[p++]=t[y]}return s&&a.length!=p&&(a.length=p),a}function o(t,e,n,r,i,o,s,a){for(var u=a||[],l=s[0],c=s[1],h=0,p=e;p<n;p+=r){var f=t[p]-l,d=t[p+1]-c;u[h++]=l+i*f,u[h++]=c+o*d;for(var g=p+2;g<p+r;++g)u[h++]=t[g]}return a&&u.length!=h&&(u.length=h),u}function s(t,e,n,r,i,o,s){for(var a=s||[],u=0,l=e;l<n;l+=r){a[u++]=t[l]+i,a[u++]=t[l+1]+o;for(var c=l+2;c<l+r;++c)a[u++]=t[c]}return s&&a.length!=u&&(a.length=u),a}n.d(e,"c",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"d",function(){return s})},function(t,e,n){"use strict";var r=n(92),i=n(1),u=n(15),l=n(21),o=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.addEventListener=function(t,e){var n=this.listeners_[t];-1===(n=n||(this.listeners_[t]=[])).indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e,n="string"==typeof t?new l.a(t):t,r=n.type,i=(n.target=this).listeners_[r];if(i){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var o=0,s=i.length;o<s;++o)if(!1===i[o].call(this,n)||n.propagationStopped){e=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var a=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];a--;)this.removeEventListener(r,u.c);delete this.dispatching_[r]}return e}},e.prototype.disposeInternal=function(){Object(i.d)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:0<Object.keys(this.listeners_).length},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var r=n.indexOf(e);t in this.pendingRemovals_?(n[r]=u.c,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t])}},e}(r.a);e.a=o},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return u}),n.d(e,"c",function(){return f});var l=n(11),r=n(8),c=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,h=/^([a-z]*)$/i;function i(t){return"string"==typeof t?t:f(t)}var o,s,a=(o={},s=0,function(t){var e;if(o.hasOwnProperty(t))e=o[t];else{if(1024<=s){var n=0;for(var r in o)0==(3&n++)&&(delete o[r],--s)}e=function(t){var e,n,r,i,o;if(h.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""===e.style.color)return"";document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}(t)),c.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var u=4==a||8==a;e=parseInt(t.substr(1+0*s,s),16),n=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),i=u?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,u&&(i=(i<<4)+i)),o=[e,n,r,i/255]}else 0==t.indexOf("rgba(")?p(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),p(o)):Object(l.a)(!1,14);return o}(t),o[t]=e,++s}return e});function u(t){return Array.isArray(t)?t:a(t)}function p(t){return t[0]=Object(r.a)(t[0]+.5|0,0,255),t[1]=Object(r.a)(t[1]+.5|0,0,255),t[2]=Object(r.a)(t[2]+.5|0,0,255),t[3]=Object(r.a)(t[3],0,1),t}function f(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+n+","+r+","+(void 0===t[3]?1:t[3])+")"}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(54);function i(t){return Array.isArray(t)?Object(r.c)(t):t}},function(t,e,n){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e,n){"use strict";var y=n(2),s=n(32),r=n(29),i=n(64),a=n(10),u=n(11),l=n(1),o=n(21),c=n(4),h=n(0),p=n(122),f=n(15);function d(t,e){return[[-1/0,-1/0,1/0,1/0]]}var g=n(7),_=n(71),v=n(23),m=n(56),b=n(82),x=function(n){function t(t,e){n.call(this,t),this.feature=e}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(o.a),E=function(o){function t(t){var e=t||{};o.call(this,{attributions:e.attributions,projection:void 0,state:v.a.READY,wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=f.c,this.format_=e.format,this.overlaps_=null==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Object(u.a)(this.format_,7),this.loader_=Object(p.b)(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:d;var n,r,i=void 0===e.useSpatialIndex||e.useSpatialIndex;this.featuresRtree_=i?new b.a:null,this.loadedExtentsRtree_=new b.a,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(r=(n=e.features).getArray()),i||void 0!==n||(n=new s.a(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==n&&this.bindFeaturesCollection_(n)}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},t.prototype.addFeatureInternal=function(t){var e=Object(y.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new x(m.a.ADDFEATURE,t))}},t.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(l.a)(e,c.a.CHANGE,this.handleFeatureChange_,this),Object(l.a)(e,i.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(t,e){var n=!0,r=e.getId();return void 0!==r?r.toString()in this.idIndex_?n=!1:this.idIndex_[r.toString()]=e:(Object(u.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},t.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},t.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],r=[],i=0,o=t.length;i<o;i++){var s=t[i],a=Object(y.c)(s);this.addToIndex_(a,s)&&n.push(s)}for(var u=0,l=n.length;u<l;u++){var c=n[u],h=Object(y.c)(c);this.setupChangeEvents_(h,c);var p=c.getGeometry();if(p){var f=p.getExtent();e.push(f),r.push(c)}else this.nullGeometryFeatures_[h]=c}this.featuresRtree_&&this.featuresRtree_.load(e,r);for(var d=0,g=n.length;d<g;d++)this.dispatchEvent(new x(m.a.ADDFEATURE,n[d]))},t.prototype.bindFeaturesCollection_=function(e){var n=!1;Object(l.a)(this,m.a.ADDFEATURE,function(t){n||(n=!0,e.push(t.feature),n=!1)}),Object(l.a)(this,m.a.REMOVEFEATURE,function(t){n||(n=!0,e.remove(t.feature),n=!1)}),Object(l.a)(e,r.a.ADD,function(t){n||(n=!0,this.addFeature(t.element),n=!1)},this),Object(l.a)(e,r.a.REMOVE,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)},this),this.featuresCollection_=e},t.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(l.e)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var r=new x(m.a.CLEAR);this.dispatchEvent(r),this.changed()},t.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,n){var t=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(t,function(t){return t.getGeometry().intersectsCoordinate(e)?n(t):void 0})},t.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureIntersectingExtent=function(n,r){return this.forEachFeatureInExtent(n,function(t){if(t.getGeometry().intersectsExtent(n)){var e=r(t);if(e)return e}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(g.d)(this.nullGeometryFeatures_)||Object(a.c)(t,Object(g.c)(this.nullGeometryFeatures_))),t},t.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},t.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},t.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],o=t[1],s=null,a=[NaN,NaN],u=1/0,l=[-1/0,-1/0,1/0,1/0],c=e||f.b;return this.featuresRtree_.forEachInExtent(l,function(t){if(c(t)){var e=t.getGeometry(),n=u;if((u=e.closestPointXY(i,o,a,u))<n){s=t;var r=Math.sqrt(u);l[0]=i-r,l[1]=o-r,l[2]=i+r,l[3]=o+r}}}),s},t.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},t.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(t){var e=t.target,n=Object(y.c)(e),r=e.getGeometry();if(r){var i=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var o=e.getId();if(void 0!==o){var s=o.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[n]=e);this.changed(),this.dispatchEvent(new x(m.a.CHANGEFEATURE,e))},t.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(y.c)(t)in this.undefIdIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(g.d)(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(t,r,i){var o=this,s=this.loadedExtentsRtree_,a=this.strategy_(t,r);this.loading=!1;for(var e=function(t,e){var n=a[t];s.forEachInExtent(n,function(t){return Object(h.g)(t.extent,n)})||(o.loader_.call(o,n,r,i),s.insert(n,{extent:n.slice()}),o.loading=o.loader_!==f.c)},n=0,u=a.length;n<u;++n)e(n)},t.prototype.removeLoadedExtent=function(e){var n,t=this.loadedExtentsRtree_;t.forEachInExtent(e,function(t){if(Object(h.p)(t.extent,e))return n=t,!0}),n&&t.remove(n)},t.prototype.removeFeature=function(t){var e=Object(y.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},t.prototype.removeFeatureInternal=function(t){var e=Object(y.c)(t);this.featureChangeKeys_[e].forEach(l.e),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new x(m.a.REMOVEFEATURE,t))},t.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},t.prototype.setLoader=function(t){this.loader_=t},t}(_.a);e.a=E},function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return r}),n.d(e,"e",function(){return _}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return i});var w=n(8);function h(t,e,n,r,i,o,s){var a=(n-e)/r;if(a<3){for(;e<n;e+=r)o[s++]=t[e],o[s++]=t[e+1];return s}var u=new Array(a);u[0]=1,u[a-1]=1;for(var l=[e,n-r],c=0;0<l.length;){for(var h=l.pop(),p=l.pop(),f=0,d=t[p],g=t[p+1],y=t[h],_=t[h+1],v=p+r;v<h;v+=r){var m=t[v],b=t[v+1],x=Object(w.g)(m,b,d,g,y,_);f<x&&(c=v,f=x)}i<f&&(u[(c-e)/r]=1,p+r<c&&l.push(p,c),c+r<h&&l.push(c,h))}for(var E=0;E<a;++E)u[E]&&(o[s++]=t[e+E*r],o[s++]=t[e+E*r+1]);return s}function r(t,e,n,r,i,o,s,a){for(var u=0,l=n.length;u<l;++u){var c=n[u];s=h(t,e,c,r,i,o,s),a.push(s),e=c}return s}function _(t,e){return e*Math.round(t/e)}function p(t,e,n,r,i,o,s){if(e==n)return s;var a,u,l=_(t[e],i),c=_(t[e+1],i);e+=r,o[s++]=l,o[s++]=c;do{if(a=_(t[e],i),u=_(t[e+1],i),(e+=r)==n)return o[s++]=a,o[s++]=u,s}while(a==l&&u==c);for(;e<n;){var h=_(t[e],i),p=_(t[e+1],i);if(e+=r,h!=a||p!=u){var f=a-l,d=u-c,g=h-l,y=p-c;u=(a=(f*y==d*g&&(f<0&&g<f||f==g||0<f&&f<g)&&(d<0&&y<d||d==y||0<d&&d<y)||(l=o[s++]=a,c=o[s++]=u),h),p)}}return o[s++]=a,o[s++]=u,s}function f(t,e,n,r,i,o,s,a){for(var u=0,l=n.length;u<l;++u){var c=n[u];s=p(t,e,c,r,i,o,s),a.push(s),e=c}return s}function i(t,e,n,r,i,o,s,a){for(var u=0,l=n.length;u<l;++u){var c=n[u],h=[];s=f(t,e,c,r,i,o,s,h),a.push(h),e=c[c.length-1]}return s}},function(t,e,n){"use strict";var r=n(5),o=n(35),i=n(53),s=n(4),a=function(i){function t(t,e,n){i.call(this);var r=n||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===r.transition?250:r.transition,this.transitionStarts_={}}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.changed=function(){this.dispatchEvent(s.a.CHANGE)},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==r.a.LOADED)return t;t=t.interimTile}while(t);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==r.a.LOADED){t.interimTile=null;break}t.getState()==r.a.LOADING?e=t:t.getState()==r.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(t){this.state=t,this.changed()},t.prototype.load=function(){},t.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var r=e-n+1e3/60;return r>=this.transition_?1:Object(o.a)(r/this.transition_)},t.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},t.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},t}(i.a);e.a=a},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"d",function(){return i});var o=n(0);function r(e,n,r,i,t){return!Object(o.t)(t,function(t){return!u(e,n,r,i,t[0],t[1])})}function u(t,e,n,r,i,o){for(var s=0,a=t[n-r],u=t[n-r+1];e<n;e+=r){var l=t[e],c=t[e+1];u<=o?o<c&&0<(l-a)*(o-u)-(i-a)*(c-u)&&s++:c<=o&&(l-a)*(o-u)-(i-a)*(c-u)<0&&s--,a=l,u=c}return 0!==s}function l(t,e,n,r,i,o){if(0===n.length)return!1;if(!u(t,e,n[0],r,i,o))return!1;for(var s=1,a=n.length;s<a;++s)if(u(t,n[s-1],n[s],r,i,o))return!1;return!0}function i(t,e,n,r,i,o){if(0===n.length)return!1;for(var s=0,a=n.length;s<a;++s){var u=n[s];if(l(t,e,u,r,i,o))return!0;e=u[u.length-1]}return!1}},function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n(8);function i(t,e){return void 0!==t?0:void 0}function o(t,e){return void 0!==t?t+e:void 0}function s(t){var n=2*Math.PI/t;return function(t,e){return void 0!==t?t=Math.floor((t+e)/n+.5)*n:void 0}}function a(t){var n=t||Object(r.i)(5);return function(t,e){return void 0!==t?Math.abs(t+e)<=n?0:t+e:void 0}}},function(t,e,n){"use strict";var i=n(10),o=n(0),s=n(26),a=n(3),r=n(41),u=n(51),l=n(44),c=n(46),h=n(97),p=n(73),f=n(119),d=n(118),g=n(58),y=function(n){function r(t,e){n.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.appendCoordinate=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout)},r.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))},r.prototype.forEachSegment=function(t){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinateAtM=function(t,e){if(this.layout!=s.a.XYM&&this.layout!=s.a.XYZM)return null;var n=void 0!==e&&e;return Object(h.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},r.prototype.getCoordinates=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinateAt=function(t,e){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},r.prototype.getLength=function(){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new r(e,s.a.XY)},r.prototype.getType=function(){return a.a.LINE_STRING},r.prototype.intersectsExtent=function(t){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.b)(this.flatCoordinates,0,t,this.stride),this.changed()},r}(r.a);e.a=y},function(t,e,n){"use strict";e.a={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var h=n(14),p=n(0),M=n(8),c=n(9);function r(t,e,n,r){var i=Object(c.h)(n,e,t),o=Object(c.e)(e,r,n),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var u=t.getExtent();if(!u||Object(p.f)(u,i)){var l=Object(c.e)(t,o,i)/o;isFinite(l)&&0<l&&(o/=l)}return o}function j(t,e,n,r){var i=n-t,o=r-e,s=Math.sqrt(i*i+o*o);return[Math.round(n+i/s),Math.round(r+o/s)]}function i(t,e,S,I,n,T,r,i,o,a,s){var R=Object(h.a)(Math.round(S*t),Math.round(S*e));if(0===o.length)return R.canvas;R.scale(S,S);var L=Object(p.j)();o.forEach(function(t,e,n){Object(p.q)(L,t.extent)});var u=Object(p.E)(L),l=Object(p.A)(L),N=Object(h.a)(Math.round(S*u/I),Math.round(S*l/I)),c=S/I;o.forEach(function(t,e,n){var r=t.extent[0]-L[0],i=-(t.extent[3]-L[3]),o=Object(p.E)(t.extent),s=Object(p.A)(t.extent);N.drawImage(t.image,a,a,t.image.width-2*a,t.image.height-2*a,r*c,i*c,o*c,s*c)});var P=Object(p.C)(r);return i.getTriangles().forEach(function(t,e,n){var r=t.source,i=t.target,o=r[0][0],s=r[0][1],a=r[1][0],u=r[1][1],l=r[2][0],c=r[2][1],h=(i[0][0]-P[0])/T,p=-(i[0][1]-P[1])/T,f=(i[1][0]-P[0])/T,d=-(i[1][1]-P[1])/T,g=(i[2][0]-P[0])/T,y=-(i[2][1]-P[1])/T,_=o,v=s,m=[[a-=_,u-=v,s=o=0,0,f-h],[l-=_,c-=v,0,0,g-h],[0,0,a,u,d-p],[0,0,l,c,y-p]],b=Object(M.e)(m);if(b){R.save(),R.beginPath();var x=(h+f+g)/3,E=(p+d+y)/3,w=j(x,E,h,p),O=j(x,E,f,d),C=j(x,E,g,y);R.moveTo(O[0],O[1]),R.lineTo(w[0],w[1]),R.lineTo(C[0],C[1]),R.clip(),R.transform(b[0],b[2],b[1],b[3],h,p),R.translate(L[0]-_,L[3]-v),R.scale(I/S,-I/S),R.drawImage(N.canvas,0,0),R.restore()}}),s&&(R.save(),R.strokeStyle="black",R.lineWidth=1,i.getTriangles().forEach(function(t,e,n){var r=t.target,i=(r[0][0]-P[0])/T,o=-(r[0][1]-P[1])/T,s=(r[1][0]-P[0])/T,a=-(r[1][1]-P[1])/T,u=(r[2][0]-P[0])/T,l=-(r[2][1]-P[1])/T;R.beginPath(),R.moveTo(s,a),R.lineTo(i,o),R.lineTo(u,l),R.closePath(),R.stroke()}),R.restore()),R.canvas}},function(t,e,n){"use strict";var r=function(o){function t(t,e,n,r,i){o.call(this,t,e,n.originalEvent,r,i),this.pointerEvent=n}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t}(n(123).a);e.a=r},function(t,e,n){"use strict";e.a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},function(t,e,n){"use strict";n.r(e);var r=n(43),o=n(34),i=function(i){function t(t){var e=t||{},n=void 0!==e.projection?e.projection:"EPSG:3857",r=void 0!==e.tileGrid?e.tileGrid:Object(o.b)({extent:Object(o.c)(n),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible})}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(r.a);e.default=i},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var o=n(2),r=n(131),h=n(5),i=n(21),s=n(9),a=n(25),u=n(71),p=n(24),l=n(34),c=function(e){function t(t){e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new r.a(t.cacheSize),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition}}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},t.prototype.forEachLoadedTile=function(t,e,n,r){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,s,a,u=!0,l=n.minX;l<=n.maxX;++l)for(var c=n.minY;c<=n.maxY;++c)s=Object(p.d)(e,l,c),a=!1,i.containsKey(s)&&(a=(a=(o=i.get(s)).getState()===h.a.LOADED)&&!1!==r(o)),a||(u=!1);return u},t.prototype.getGutterForProjection=function(t){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},t.prototype.getOpaque=function(t){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},t.prototype.getTile=function(t,e,n,r,i){return Object(o.b)()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(l.d)(t)},t.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(s.c)(e,t)?null:this.tileCache},t.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=this.getTilePixelRatio(e),o=Object(a.d)(r.getTileSize(t),this.tmpSize);return 1==i?o:Object(a.c)(o,i,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=Object(l.e)(r,t,n)),Object(p.g)(t,r)?t:null},t.prototype.refresh=function(){this.tileCache.clear(),this.changed()},t.prototype.useTile=function(t,e,n,r){},t}(u.a),f=function(n){function t(t,e){n.call(this,t),this.tile=e}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(i.a);e.b=c},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=42,i=256},function(t,e,n){"use strict";var r=n(2),i=n(20),o=n(9),s=n(23),a=function(e){function t(t){e.call(this),this.projection_=Object(o.d)(t.projection),this.attributions_=u(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:s.a.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolutions=function(){return Object(r.b)()},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(t){this.attributions_=u(t),this.changed()},t.prototype.setState=function(t){this.state_=t,this.changed()},t}(i.a);function u(e){return e?Array.isArray(e)?function(t){return e}:"function"==typeof e?e:function(t){return[e]}:null}e.a=a},function(t,e,n){"use strict";var r=n(10),c=n(0),i=n(3),a=n(40),o=n(41),s=n(44),u=n(46),h=n(8),l=function(n){function t(t,e){n.call(this),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.appendPoint=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(t,e,n,r){if(r<Object(c.e)(this.getExtent(),t,e))return r;for(var i=this.flatCoordinates,o=this.stride,s=0,a=i.length;s<a;s+=o){var u=Object(h.f)(t,e,i[s],i[s+1]);if(u<r){r=u;for(var l=0;l<o;++l)n[l]=i[s+l];n.length=o}}return r},t.prototype.getCoordinates=function(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new a.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},t.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,o=t.length;i<o;i+=n){var s=new a.a(t.slice(i,i+n),e);r.push(s)}return r},t.prototype.getType=function(){return i.a.MULTI_POINT},t.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,r=0,i=e.length;r<i;r+=n){var o=e[r],s=e[r+1];if(Object(c.h)(t,o,s))return!0}return!1},t.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(s.b)(this.flatCoordinates,0,t,this.stride),this.changed()},t}(o.a);e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return i});var s=n(0),a=n(60),u=n(118);function l(t,e,n,r,i){var o=Object(s.s)(Object(s.j)(),t,e,n,r);return!!Object(s.F)(i,o)&&(!!Object(s.g)(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||Object(u.a)(t,e,n,r,function(t,e){return Object(s.G)(i,t,e)}))))}function r(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){if(l(t,e,n[o],r,i))return!0;e=n[o]}return!1}function c(t,e,n,r,i){if(!function(t,e,n,r,i){return!!l(t,e,n,r,i)||(!!Object(a.b)(t,e,n,r,i[0],i[1])||(!!Object(a.b)(t,e,n,r,i[0],i[3])||(!!Object(a.b)(t,e,n,r,i[2],i[1])||!!Object(a.b)(t,e,n,r,i[2],i[3]))))}(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var o=1,s=n.length;o<s;++o)if(Object(a.a)(t,n[o-1],n[o],r,i)&&!l(t,n[o-1],n[o],r,i))return!1;return!0}function i(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];if(c(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}},function(t,e,n){"use strict";function r(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0}var i=n(2),o=n(54);r.prototype.clone=function(){var t=this.getColor();return new r({color:Array.isArray(t)?t.slice():t||void 0})},r.prototype.getColor=function(){return this.color_},r.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},r.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+Object(o.b)(t):this.checksum_=Object(i.c)(this.color_):this.checksum_="f-"}return this.checksum_},e.a=r},function(t,e,n){"use strict";function r(t,e){this.dispatcher=t,this.mapping_=e}r.prototype.getEvents=function(){return Object.keys(this.mapping_)},r.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"d",function(){return p});var r=n(75),i=1,o="mouse";function s(t){if(!this.isEventSimulatedFromTouch_(t)){i.toString()in this.pointerMap&&this.cancel(t);var e=p(t,this.dispatcher);this.pointerMap[i.toString()]=t,this.dispatcher.down(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=p(t,this.dispatcher);this.dispatcher.move(e,t)}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[i.toString()];if(e&&e.button===t.button){var n=p(t,this.dispatcher);this.dispatcher.up(n,t),this.cleanupMouse()}}}function l(t){if(!this.isEventSimulatedFromTouch_(t)){var e=p(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function c(t){if(!this.isEventSimulatedFromTouch_(t)){var e=p(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var h=function(n){function t(t){var e={mousedown:s,mousemove:a,mouseup:u,mouseover:l,mouseout:c};n.call(this,t,e),this.pointerMap=t.pointerMap,this.lastTouches=[]}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,n=t.clientX,r=t.clientY,i=0,o=e.length,s=void 0;i<o&&(s=e[i]);i++){var a=Math.abs(n-s[0]),u=Math.abs(r-s[1]);if(a<=25&&u<=25)return!0}return!1},t.prototype.cancel=function(t){var e=p(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},t.prototype.cleanupMouse=function(){delete this.pointerMap[i.toString()]},t}(r.a);function p(t,e){var n=e.cloneEvent(t,t),r=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),r()},n.pointerId=i,n.isPrimary=!0,n.pointerType=o,n}e.c=h},function(t,e,n){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,n){"use strict";function c(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function h(t,e,n,r){for(var i=0,o=t[n-r],s=t[n-r+1];e<n;e+=r){var a=t[e],u=t[e+1];i+=(a-o)*(u+s),o=a,s=u}return 0<i}function a(t,e,n,r,i){for(var o=void 0!==i&&i,s=0,a=n.length;s<a;++s){var u=n[s],l=h(t,e,u,r);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}function r(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o)if(!a(t,e,n[o],r,i))return!1;return!0}function u(t,e,n,r,i){for(var o=void 0!==i&&i,s=0,a=n.length;s<a;++s){var u=n[s],l=h(t,e,u,r);(0===s?o&&l||!o&&!l:o&&!l||!o&&l)&&c(t,e,u,r),e=u}return e}function i(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o)e=u(t,e,n[o],r,i);return e}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return i})},function(t,e,n){"use strict";e.a={ACTIVE:"active"}},function(t,e,n){"use strict";function r(t,e,n){var r=void 0!==n?t.toFixed(n):""+t,i=r.indexOf(".");return e<(i=-1===i?r.length:i)?r:new Array(1+e-i).join("0")+r}function i(t,e){for(var n=(""+t).split("."),r=(""+e).split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),s=parseInt(r[i]||"0",10);if(s<o)return 1;if(o<s)return-1}return 0}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function r(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0}var i=n(2);r.prototype.clone=function(){var t=this.getColor();return new r({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},r.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},r.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},r.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},r.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},r.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},r.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},r.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(i.c)(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.a=r},function(t,e,n){"use strict";function r(t){this.rbush_=o()(t,void 0),this.items_={}}var u=n(2),i=n(94),o=n.n(i),s=n(0),a=n(7);r.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(u.c)(e)]=n},r.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++){var o=t[r],s=e[r],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[r]=a,this.items_[Object(u.c)(s)]=a}this.rbush_.load(n)},r.prototype.remove=function(t){var e=Object(u.c)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},r.prototype.update=function(t,e){var n=this.items_[Object(u.c)(e)],r=[n.minX,n.minY,n.maxX,n.maxY];Object(s.p)(r,t)||(this.remove(e),this.insert(t,e))},r.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},r.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},r.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},r.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},r.prototype.forEach_=function(t,e,n){for(var r,i=0,o=t.length;i<o;i++)if(r=e.call(n,t[i]))return r;return r},r.prototype.isEmpty=function(){return Object(a.d)(this.items_)},r.prototype.clear=function(){this.rbush_.clear(),this.items_={}},r.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(s.k)(e.minX,e.minY,e.maxX,e.maxY,t)},r.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},e.a=r},function(t,e,n){"use strict";var Q=n(2),r=n(31),i=n(86),$=n(5),tt=n(19),o=n(14),et=n(0),s=n(127),nt=n(12),a=function(n){function t(t,e){n.call(this,t),this.context=e?null:Object(o.a)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(et.j)(),this.tmpTileRange_=new i.b(0,0,0,0),this.imageTransform_=Object(nt.c)(),this.zDirection=0}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.isDrawableTile_=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==$.a.LOADED||n==$.a.EMPTY||n==$.a.ERROR&&!r},t.prototype.getTile=function(t,e,n,r,i){var o=this.getLayer(),s=o.getSource().getTile(t,e,n,r,i);return s.getState()==$.a.ERROR&&(o.getUseInterimTilesOnError()?0<o.getPreload()&&(this.newTiles_=!0):s.setState($.a.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},t.prototype.prepareFrame=function(t,e){var n=t.pixelRatio,r=t.size,i=t.viewState,o=i.projection,s=i.resolution,a=i.center,u=this.getLayer(),l=u.getSource(),c=l.getRevision(),h=l.getTileGridForProjection(o),p=h.getZForResolution(s,this.zDirection),f=h.getResolution(p),d=Math.round(s/f)||1,g=t.extent;if(void 0!==e.extent&&(g=Object(et.B)(g,e.extent)),Object(et.H)(g))return!1;var y=h.getTileRangeForExtentAndZ(g,p),_=h.getTileRangeExtent(p,y),v=l.getTilePixelRatio(n),m={};m[p]={};var b,x,E,w=this.createLoadedTileFinder(l,o,m),O=t.viewHints,C=O[tt.a.ANIMATING]||O[tt.a.INTERACTING],S=this.tmpExtent,I=this.tmpTileRange_;for(this.newTiles_=!1,x=y.minX;x<=y.maxX;++x)for(E=y.minY;E<=y.maxY;++E)if(!(16<Date.now()-t.time&&C)){if(b=this.getTile(p,x,E,n,o),this.isDrawableTile_(b)){var T=Object(Q.c)(this);if(b.getState()==$.a.LOADED){var R=(m[p][b.tileCoord.toString()]=b).inTransition(T);this.newTiles_||!R&&-1!==this.renderedTiles.indexOf(b)||(this.newTiles_=!0)}if(1===b.getAlpha(T,t.time))continue}var L=h.getTileCoordChildTileRange(b.tileCoord,I,S),N=!1;L&&(N=w(p+1,L)),N||h.forEachTileCoordParentTileRange(b.tileCoord,w,null,I,S)}var P=f*n/v*d;if(!(this.renderedResolution&&16<Date.now()-t.time&&C)&&(this.newTiles_||!this.renderedExtent_||!Object(et.g)(this.renderedExtent_,g)||this.renderedRevision!=c||d!=this.oversampling_||!C&&P!=this.renderedResolution)){var M=this.context;if(M){var j=l.getTilePixelSize(p,n,o),A=Math.round(y.getWidth()*j[0]/d),F=Math.round(y.getHeight()*j[1]/d),D=M.canvas;D.width!=A||D.height!=F?(this.oversampling_=d,D.width=A,D.height=F):((this.renderedExtent_&&!Object(et.p)(_,this.renderedExtent_)||this.renderedRevision!=c)&&M.clearRect(0,0,A,F),d=this.oversampling_)}this.renderedTiles.length=0;var k,G,z,U,B,Y,X,q,V,W,K=Object.keys(m).map(Number);for(K.sort(function(t,e){return t===p?1:e===p?-1:e<t?1:t<e?-1:0}),U=0,B=K.length;U<B;++U)for(var H in z=K[U],G=l.getTilePixelSize(z,n,o),k=h.getResolution(z)/f,X=v*l.getGutterForProjection(o),q=m[z])b=q[H],x=((Y=h.getTileCoordExtent(b.getTileCoord(),S))[0]-_[0])/f*v/d,E=(_[3]-Y[3])/f*v/d,V=G[0]*k/d,W=G[1]*k/d,this.drawTileImage(b,t,e,x,E,V,W,X,p===z),this.renderedTiles.push(b);this.renderedRevision=c,this.renderedResolution=f*n/v*d,this.renderedExtent_=_}var Z=this.renderedResolution/s,J=Object(nt.b)(this.imageTransform_,n*r[0]/2,n*r[1]/2,Z,Z,0,(this.renderedExtent_[0]-a[0])/this.renderedResolution*n,(a[1]-this.renderedExtent_[3])/this.renderedResolution*n);return Object(nt.b)(this.coordinateToCanvasPixelTransform,n*r[0]/2-J[4],n*r[1]/2-J[5],n/s,-n/s,0,-a[0],-a[1]),this.updateUsedTiles(t.usedTiles,l,p,y),this.manageTilePyramid(t,l,h,n,o,g,p,u.getPreload()),this.scheduleExpireCache(t,l),0<this.renderedTiles.length},t.prototype.drawTileImage=function(t,e,n,r,i,o,s,a,u){var l=this.getTileImage(t);if(l){var c=Object(Q.c)(this),h=u?t.getAlpha(c,e.time):1,p=this.getLayer().getSource();1!==h||p.getOpaque(e.viewState.projection)||this.context.clearRect(r,i,o,s);var f=h!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,i,o,s),f&&this.context.restore(),1!==h?e.animate=!0:u&&t.endTransition(c)}},t.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},t.prototype.getImageTransform=function(){return this.imageTransform_},t.prototype.getTileImage=function(t){return t.getImage()},t}(s.a);a.handles=function(t){return t.getType()===r.a.TILE},a.create=function(t,e){return new a(e)},a.prototype.getLayer,e.a=a},function(t,e,n){"use strict";function r(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(s.a)(Object(a.g)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var n=0,r=this.resolutions_.length-1;n<r;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(s.a)(this.origins_.length==this.resolutions_.length,20));var i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=Object(h.C)(i)),Object(s.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(s.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:o.b,Object(s.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new c.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):i&&this.calculateTileRanges_(i)}var o=n(70),s=n(11),c=n(86),a=n(10),h=n(0),i=n(8),g=n(25),y=n(24),u=[0,0,0];r.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var s=r.minY,a=r.maxY;s<=a;++s)n([e,i,s])},r.prototype.forEachTileCoordParentTileRange=function(t,e,n,r,i){var o,s,a,u=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):u=this.getTileCoordExtent(t,i);l>=this.minZoom;){if(o=2===this.zoomFactor_?(s=Math.floor(s/2),a=Math.floor(a/2),Object(c.a)(s,s,a,a,r)):this.getTileRangeForExtentAndZ(u,l,r),e.call(n,l,o))return!0;--l}return!1},r.prototype.getExtent=function(){return this.extent_},r.prototype.getMaxZoom=function(){return this.maxZoom},r.prototype.getMinZoom=function(){return this.minZoom},r.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},r.prototype.getResolution=function(t){return this.resolutions_[t]},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],i=2*t[2];return Object(c.a)(r,1+r,i,1+i,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},r.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),i=this.getResolution(t),o=Object(g.d)(this.getTileSize(t),this.tmpSize_),s=r[0]+e.minX*o[0]*i,a=r[0]+(e.maxX+1)*o[0]*i,u=r[1]+e.minY*o[1]*i,l=r[1]+(e.maxY+1)*o[1]*i;return Object(h.k)(s,u,a,l,n)},r.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=u;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r);var i=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,r),Object(c.a)(i,r[1],o,r[2],n)},r.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Object(g.d)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]+(t[2]+.5)*r[1]*n]},r.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=Object(g.d)(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*i[0]*r,s=n[1]+t[2]*i[1]*r,a=o+i[0]*r,u=s+i[1]*r;return Object(h.k)(o,s,a,u,e)},r.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},r.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,i){var o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),u=Object(g.d)(this.getTileSize(o),this.tmpSize_),l=r?.5:0,c=r?0:.5,h=Math.floor((t-a[0])/n+l),p=Math.floor((e-a[1])/n+c),f=s*h/u[0],d=s*p/u[1];return d=r?(f=Math.ceil(f)-1,Math.ceil(d)-1):(f=Math.floor(f),Math.floor(d)),Object(y.a)(o,f,d,i)},r.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,i){var o=this.getOrigin(n),s=this.getResolution(n),a=Object(g.d)(this.getTileSize(n),this.tmpSize_),u=r?.5:0,l=r?0:.5,c=Math.floor((t-o[0])/s+u),h=Math.floor((e-o[1])/s+l),p=c/a[0],f=h/a[1];return f=r?(p=Math.ceil(p)-1,Math.ceil(f)-1):(p=Math.floor(p),Math.floor(f)),Object(y.a)(n,p,f,i)},r.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},r.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},r.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},r.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},r.prototype.getZForResolution=function(t,e){var n=Object(a.h)(this.resolutions_,t,e||0);return Object(i.a)(n,this.minZoom,this.maxZoom)},r.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},e.a=r},function(t,e,n){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=function(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r};function r(t,e,n,r,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new o(t,e,n,r)}o.prototype.contains=function(t){return this.containsXY(t[1],t[2])},o.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},o.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},o.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},o.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},o.prototype.getHeight=function(){return this.maxY-this.minY+1},o.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},o.prototype.getWidth=function(){return this.maxX-this.minX+1},o.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=o},function(t,e,n){"use strict";var i=n(2),r=n(20),u=n(0),l=n(52),c=n(9),o=n(37),h=n(12),p=Object(h.c)(),s=function(t){function e(){t.call(this),this.extent_=Object(u.j)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){return Object(i.b)()},e.prototype.closestPointXY=function(t,e,n,r){return Object(i.b)()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(i.b)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(u.I)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(i.b)()},e.prototype.scale=function(t,e,n){Object(i.b)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(i.b)()},e.prototype.getType=function(){return Object(i.b)()},e.prototype.applyTransform=function(t){Object(i.b)()},e.prototype.intersectsExtent=function(t){return Object(i.b)()},e.prototype.translate=function(t,e){Object(i.b)()},e.prototype.transform=function(t,s){var a=Object(c.d)(t),e=a.getUnits()==o.b.TILE_PIXELS?function(t,e,n){var r=a.getExtent(),i=a.getWorldExtent(),o=Object(u.A)(i)/Object(u.A)(r);return Object(h.b)(p,i[0],i[3],o,-o,0,0,0),Object(l.c)(t,0,t.length,n,p,e),Object(c.f)(a,s)(t,e,n)}:Object(c.f)(a,s);return this.applyTransform(e),this},e}(r.a);e.a=s},function(t,e,n){"use strict";function r(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale}var i=n(2);r.prototype.clone=function(){return new r({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},r.prototype.getOpacity=function(){return this.opacity_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getSnapToPixel=function(){return!1},r.prototype.getAnchor=function(){return Object(i.b)()},r.prototype.getImage=function(t){return Object(i.b)()},r.prototype.getHitDetectionImage=function(t){return Object(i.b)()},r.prototype.getImageState=function(){return Object(i.b)()},r.prototype.getImageSize=function(){return Object(i.b)()},r.prototype.getHitDetectionImageSize=function(){return Object(i.b)()},r.prototype.getOrigin=function(){return Object(i.b)()},r.prototype.getSize=function(){return Object(i.b)()},r.prototype.setOpacity=function(t){this.opacity_=t},r.prototype.setRotateWithView=function(t){this.rotateWithView_=t},r.prototype.setRotation=function(t){this.rotation_=t},r.prototype.setScale=function(t){this.scale_=t},r.prototype.setSnapToPixel=function(t){},r.prototype.listenImageChange=function(t,e){return Object(i.b)()},r.prototype.load=function(){Object(i.b)()},r.prototype.unlistenImageChange=function(t,e){Object(i.b)()},e.a=r},function(t,e,n){"use strict";var h=n(10),i=n(0),o=n(26),s=n(3),l=n(62),r=n(41),a=n(51),u=n(44),p=n(46),f=n(97),d=n(73),g=n(58),c=function(c){function r(t,e,n){if(c.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{for(var r=this.getLayout(),i=t,o=[],s=[],a=0,u=i.length;a<u;++a){var l=i[a];0===a&&(r=l.getLayout()),Object(h.c)(o,l.getFlatCoordinates()),s.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=s}}return c&&(r.__proto__=c),((r.prototype=Object.create(c&&c.prototype)).constructor=r).prototype.appendLineString=function(t){this.flatCoordinates?Object(h.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},r.prototype.closestPointXY=function(t,e,n,r){return r<Object(i.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(a.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(a.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))},r.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=o.a.XYM&&this.layout!=o.a.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,i=void 0!==n&&n;return Object(f.c)(this.flatCoordinates,0,this.ends_,this.stride,t,r,i)},r.prototype.getCoordinates=function(){return Object(p.b)(this.flatCoordinates,0,this.ends_,this.stride)},r.prototype.getEnds=function(){return this.ends_},r.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new l.a(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},r.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[],i=0,o=0,s=e.length;o<s;++o){var a=e[o],u=new l.a(t.slice(i,a),n);r.push(u),i=a}return r},r.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.ends_,i=this.stride,o=0,s=r.length;o<s;++o){var a=r[o],u=Object(f.a)(e,n,a,i,.5);Object(h.c)(t,u),n=a}return t},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];return e.length=Object(g.b)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new r(e,o.a.XY,n)},r.prototype.getType=function(){return s.a.MULTI_LINE_STRING},r.prototype.intersectsExtent=function(t){return Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(u.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},r}(r.a);e.a=c},function(t,e,n){"use strict";var o=n(2),s=n(5),r=n(38),a=n(69),u="tileloadstart",l="tileloadend",c="tileloaderror",i=n(24),h=function(e){function t(t){e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible}),this.generateTileUrlFunction_=!t.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=t.tileUrlFunction?t.tileUrlFunction.bind(this):r.d,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(t){var e,n=t.target,r=Object(o.c)(n),i=n.getState();i==s.a.LOADING?(this.tileLoadingKeys_[r]=!0,e=u):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=i==s.a.ERROR?c:i==s.a.LOADED||i==s.a.ABORT?l:void 0),null!=e&&this.dispatchEvent(new a.a(e,n))},t.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},t.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},t.prototype.setUrl=function(t){var e=this.urls=Object(r.c)(t);this.setUrls(e)},t.prototype.setUrls=function(t){var e=(this.urls=t).join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Object(r.a)(t,this.tileGrid),e):this.setKey(e)},t.prototype.useTile=function(t,e,n){var r=Object(i.d)(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},t}(a.b);e.a=h},function(t,e,n){"use strict";var g=n(10),l=n(0),i=n(26),o=n(3),s=n(72),p=n(30),r=n(41),a=n(93);var u=n(51),c=n(60),h=n(44),f=n(46),y=n(117),_=n(73),v=n(78),m=n(58),d=function(d){function r(t,e,n){if(d.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){for(var r=this.getLayout(),i=t,o=[],s=[],a=0,u=i.length;a<u;++a){var l=i[a];0===a&&(r=l.getLayout());for(var c=o.length,h=l.getEnds(),p=0,f=h.length;p<f;++p)h[p]+=c;Object(g.c)(o,l.getFlatCoordinates()),s.push(h)}e=r,t=o,n=s}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}return d&&(r.__proto__=d),((r.prototype=Object.create(d&&d.prototype)).constructor=r).prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;Object(g.c)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,i=(e=t.getEnds().slice()).length;r<i;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},r.prototype.clone=function(){for(var t=this.endss_.length,e=new Array(t),n=0;n<t;++n)e[n]=this.endss_[n].slice();return new r(this.flatCoordinates.slice(),this.layout,e)},r.prototype.closestPointXY=function(t,e,n,r){return r<Object(l.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,r))},r.prototype.containsXY=function(t,e){return Object(c.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},r.prototype.getArea=function(){return Object(a.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},r.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(v.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(f.c)(e,0,this.endss_,this.stride)},r.prototype.getEndss=function(){return this.endss_},r.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,n,r){for(var i=[],o=Object(l.j)(),s=0,a=n.length;s<a;++s){var u=n[s];o=Object(l.o)(t,e,u[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(y.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},r.prototype.getInteriorPoints=function(){return new s.a(this.getFlatInteriorPoints().slice(),i.a.XYM)},r.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(v.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(v.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];return e.length=Object(m.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new r(e,i.a.XY,n)},r.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var r=this.endss_[t].slice(),i=r[r.length-1];if(0!==e)for(var o=0,s=r.length;o<s;++o)r[o]-=e;return new p.default(this.flatCoordinates.slice(e,i),this.layout,r)},r.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[],i=0,o=0,s=n.length;o<s;++o){var a=n[o].slice(),u=a[a.length-1];if(0!==i)for(var l=0,c=a.length;l<c;++l)a[l]-=i;var h=new p.default(e.slice(i,u),t,a);r.push(h),i=u}return r},r.prototype.getType=function(){return o.a.MULTI_POLYGON},r.prototype.intersectsExtent=function(t){return Object(_.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(h.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},r}(r.a);e.a=d},function(t,e,n){"use strict";function r(){this.disposed_=!1}r.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},e.a=r},function(t,e,n){"use strict";function u(t,e,n,r){for(var i=0,o=t[n-r],s=t[n-r+1];e<n;e+=r){var a=t[e],u=t[e+1];i+=s*a-o*u,o=a,s=u}return i/2}function l(t,e,n,r){for(var i=0,o=0,s=n.length;o<s;++o){var a=n[o];i+=u(t,e,a,r),e=a}return i}function r(t,e,n,r){for(var i=0,o=0,s=n.length;o<s;++o){var a=n[o];i+=l(t,e,a,r),e=a[a.length-1]}return i}n.d(e,"a",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return r})},function(t,e,n){"use strict";t.exports=r,t.exports.default=r;var a=n(152);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function c(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function f(t,e){_(t,0,t.children.length,e,t)}function _(t,e,n,r,i){(i=i||g(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],h(i,t.leaf?r(o):o);return i}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function v(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function l(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,a(t,o,e,n,i),s.push(e,o,o,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!l(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],l(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):d(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!l(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],l(t,s=e.leaf?n(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=c(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!d(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:o,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return f(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var a,u,l,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(y(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(y(t,a,l=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return f(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,c,h,p,f;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=v(s=e.children[i]),p=t,f=s,(l=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),h(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,f(n,this.toBBox),f(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,c,h,p,f,d,g,y;for(u=l=1/0,r=e;r<=n-e;r++)i=_(t,0,r,this.toBBox),o=_(t,r,n,this.toBBox),h=i,p=o,void 0,f=Math.max(h.minX,p.minX),d=Math.max(h.minY,p.minY),g=Math.min(h.maxX,p.maxX),y=Math.min(h.maxY,p.maxY),s=Math.max(0,g-f)*Math.max(0,y-d),a=v(i)+v(o),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:o,i=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=_(t,0,e,s),u=_(t,n-e,n,s),l=p(a)+p(u);for(i=e;i<n-e;i++)o=t.children[i],h(a,t.leaf?s(o):o),l+=p(a);for(i=n-e-1;e<=i;i--)o=t.children[i],h(u,t.leaf?s(o):o),l+=p(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)h(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():f(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){"use strict";var r=n(96),a=n(13),i=function(s){function t(t,e,n,r,i){var o=void 0!==i?a.a.IDLE:a.a.LOADED;s.call(this,t,e,n,o),this.loader_=void 0!==i?i:null,this.canvas_=r,this.error_=null}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.getError=function(){return this.error_},t.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=a.a.ERROR):this.state=a.a.LOADED,this.changed()},t.prototype.load=function(){this.state==a.a.IDLE&&(this.state=a.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},t.prototype.getImage=function(){return this.canvas_},t}(r.a);e.a=i},function(t,e,n){"use strict";var r=n(2),i=n(53),o=n(4),s=function(i){function t(t,e,n,r){i.call(this),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=r}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.changed=function(){this.dispatchEvent(o.a.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Object(r.b)()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Object(r.b)()},t}(i.a);e.a=s},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return i});var b=n(10),x=n(8);function r(t,e,n,r,i,o){var s=NaN,a=NaN,u=(n-e)/r;if(1==u)s=t[e],a=t[e+1];else if(2==u)s=(1-i)*t[e]+i*t[e+r],a=(1-i)*t[e+1]+i*t[e+r+1];else if(0!=u){for(var l=t[e],c=t[e+1],h=0,p=[0],f=e+r;f<n;f+=r){var d=t[f],g=t[f+1];h+=Math.sqrt((d-l)*(d-l)+(g-c)*(g-c)),p.push(h),l=d,c=g}var y=i*h,_=Object(b.a)(p,y);if(_<0){var v=(y-p[-_-2])/(p[-_-1]-p[-_-2]),m=e+(-_-2)*r;s=Object(x.c)(t[m],t[m+r],v),a=Object(x.c)(t[m+1],t[m+r+1],v)}else s=t[e+_*r],a=t[e+_*r+1]}return o?(o[0]=s,o[1]=a,o):[s,a]}function h(t,e,n,r,i,o){if(n==e)return null;var s;if(i<t[e+r-1])return o?((s=t.slice(e,e+r))[r-1]=i,s):null;if(t[n-1]<i)return o?((s=t.slice(n-r,n))[r-1]=i,s):null;if(i==t[e+r-1])return t.slice(e,e+r);for(var a=e/r,u=n/r;a<u;){var l=a+u>>1;i<t[(1+l)*r-1]?u=l:a=1+l}var c=t[a*r-1];if(i==c)return t.slice((a-1)*r,(a-1)*r+r);var h=(i-c)/(t[(a+1)*r-1]-c);s=[];for(var p=0;p<r-1;++p)s.push(Object(x.c)(t[(a-1)*r+p],t[a*r+p],h));return s.push(i),s}function i(t,e,n,r,i,o,s){if(s)return h(t,e,n[n.length-1],r,i,o);var a;if(i<t[r-1])return o?((a=t.slice(0,r))[r-1]=i,a):null;if(t[t.length-1]<i)return o?((a=t.slice(t.length-r))[r-1]=i,a):null;for(var u=0,l=n.length;u<l;++u){var c=n[u];if(e!=c){if(i<t[e+r-1])return null;if(i<=t[c-1])return h(t,e,c,r,i,!1);e=c}}return null}},function(t,e,n){"use strict";var r=function(r){function t(t,e,n){r.call(this,t),this.map=e,this.frameState=void 0!==n?n:null}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t}(n(21).a);e.a=r},function(t,e,n){"use strict";var r=n(0),o=n(3),i=n(41),a=n(44),s=function(i){function t(t,e,n){if(i.call(this),void 0!==n&&void 0===e)this.setFlatCoordinates(n,t);else{var r=e||0;this.setCenterAndRadius(t,r,n)}}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.clone=function(){return new t(this.flatCoordinates.slice(),void 0,this.layout)},t.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=t-i[0],s=e-i[1],a=o*o+s*s;if(a<r){if(0==a)for(var u=0;u<this.stride;++u)n[u]=i[u];else{var l=this.getRadius()/Math.sqrt(a);n[0]=i[0]+l*o,n[1]=i[1]+l*s;for(var c=2;c<this.stride;++c)n[c]=i[c]}return n.length=this.stride,a}return r},t.prototype.containsXY=function(t,e){var n=this.flatCoordinates,r=t-n[0],i=e-n[1];return r*r+i*i<=this.getRadiusSquared_()},t.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Object(r.k)(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},t.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},t.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},t.prototype.getType=function(){return o.a.CIRCLE},t.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(r.F)(t,e)){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Object(r.t)(t,this.intersectsCoordinate,this))}return!1},t.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+n;for(var i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()},t.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,i=Object(a.a)(r,0,t,this.stride);r[i++]=r[0]+e;for(var o=1,s=this.stride;o<s;++o)r[i++]=r[o];r.length=i,this.changed()},t.prototype.getCoordinates=function(){return null},t.prototype.setCoordinates=function(t,e){},t.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},t}(i.a);s.prototype.transform,e.a=s},function(t,e,n){"use strict";var r=function(n){function e(t){var e=t||{};n.call(this,{points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,atlasManager:e.atlasManager})}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(n(108).a);e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=["experimental-webgl","webgl","webkit-3d","moz-webgl"];var r;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var i=function(t,e){for(var n=o.length,r=0;r<n;++r)try{var i=t.getContext(o[r],e);if(i)return i}catch(t){}return null}(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});i&&(!0,r=i.getParameter(i.MAX_TEXTURE_SIZE),i.getSupportedExtensions())}catch(t){}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var c=n(8),h=(n(3),6371008.8);function r(t,e,n){var r=n||h,i=Object(c.i)(t[1]),o=Object(c.i)(e[1]),s=(o-i)/2,a=Object(c.i)(e[0]-t[0])/2,u=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function i(t,e,n,r){var i=r||h,o=Object(c.i)(t[1]),s=Object(c.i)(t[0]),a=e/i,u=Math.asin(Math.sin(o)*Math.cos(a)+Math.cos(o)*Math.sin(a)*Math.cos(n)),l=s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(o),Math.cos(a)-Math.sin(o)*Math.sin(u));return[Object(c.h)(l),Object(c.h)(u)]}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});function r(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}var i=n(54);function o(t,e,n){return e+":"+t+":"+(n?Object(i.b)(n):"null")}r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},r.prototype.get=function(t,e,n){var r=o(t,e,n);return r in this.cache_?this.cache_[r]:null},r.prototype.set=function(t,e,n,r){var i=o(t,e,n);this.cache_[i]=r,++this.cacheSize_},r.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var s=new r},function(t,e,n){"use strict";var w=n(42),O=n(95),s=n(31),C=n(19),S=n(10),I=n(0),r=n(120),T=n(7),a=n(106),i=n(127),R=n(12),o=function(i){function o(t){if(i.call(this,t),this.image_=null,this.imageTransform_=Object(R.c)(),this.skippedFeatures_=[],this.vectorRenderer_=null,t.getType()===s.a.VECTOR)for(var e=0,n=a.b.length;e<n;++e){var r=a.b[e];if(r!==o&&r.handles(t)){this.vectorRenderer_=new r(t);break}}}return i&&(o.__proto__=i),((o.prototype=Object.create(i&&i.prototype)).constructor=o).prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),i.prototype.disposeInternal.call(this)},o.prototype.getImage=function(){return this.image_?this.image_.getImage():null},o.prototype.getImageTransform=function(){return this.imageTransform_},o.prototype.prepareFrame=function(t,e){var n,r=t.pixelRatio,i=t.size,o=t.viewState,s=o.center,a=o.resolution,u=this.getLayer().getSource(),l=t.viewHints,c=this.vectorRenderer_,h=t.extent;if(c||void 0===e.extent||(h=Object(I.B)(h,e.extent)),!l[C.a.ANIMATING]&&!l[C.a.INTERACTING]&&!Object(I.H)(h)){var p=o.projection;if(!w.a){var f=u.getProjection();f&&(p=f)}var d=this.skippedFeatures_;if(c){var g=c.context,y=Object(T.a)({},t,{size:[Object(I.E)(h)/a,Object(I.A)(h)/a],viewState:Object(T.a)({},t.viewState,{rotation:0})}),_=Object.keys(y.skippedFeatureUids).sort();n=new O.a(h,a,r,g.canvas,function(t){!c.prepareFrame(y,e)||!c.replayGroupChanged&&Object(S.b)(d,_)||(g.canvas.width=y.size[0]*r,g.canvas.height=y.size[1]*r,c.compose(g,y,e),d=_,t())})}else n=u.getImage(h,a,r,p);n&&this.loadImage(n)&&(this.image_=n,this.skippedFeatures_=d)}if(this.image_){var v=(n=this.image_).getExtent(),m=n.getResolution(),b=n.getPixelRatio(),x=r*m/(a*b),E=Object(R.b)(this.imageTransform_,r*i[0]/2,r*i[1]/2,x,x,0,b*(v[0]-s[0])/m,b*(s[1]-v[3])/m);Object(R.b)(this.coordinateToCanvasPixelTransform,r*i[0]/2-E[4],r*i[1]/2-E[5],r/a,-r/a,0,-s[0],-s[1]),this.renderedResolution=m*r/b}return!!this.image_},o.prototype.forEachFeatureAtCoordinate=function(t,e,n,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,r):i.prototype.forEachFeatureAtCoordinate.call(this,t,e,n,r)},o}(i.a);o.handles=function(t){return t.getType()===s.a.IMAGE||t.getType()===s.a.VECTOR&&t.getRenderMode()===r.a.IMAGE},o.create=function(t,e){return new o(e)},e.a=o},function(t,e,n){"use strict";n.d(e,"a",function(){return u});function r(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}var i=n(11),o=n(7),u=1/0;r.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(o.b)(this.queuedElements_)},r.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},r.prototype.enqueue=function(t){Object(i.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=u&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},r.prototype.getCount=function(){return this.elements_.length},r.prototype.getLeftChildIndex_=function(t){return 2*t+1},r.prototype.getRightChildIndex_=function(t){return 2*t+2},r.prototype.getParentIndex_=function(t){return t-1>>1},r.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;0<=t;t--)this.siftUp_(t)},r.prototype.isEmpty=function(){return 0===this.elements_.length},r.prototype.isKeyQueued=function(t){return t in this.queuedElements_},r.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},r.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,i=e[t],o=n[t],s=t;t<r>>1;){var a=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<r&&n[u]<n[a]?u:a;e[t]=e[l],n[t]=n[l],t=l}e[t]=i,n[t]=o,this.siftDown_(s,t)},r.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,i=n[e],o=r[e];t<e;){var s=this.getParentIndex_(e);if(!(r[s]>o))break;n[e]=n[s],r[e]=r[s],e=s}n[e]=i,r[e]=o},r.prototype.reprioritize=function(){var t,e,n,r=this.priorityFunction_,i=this.elements_,o=this.priorities_,s=0,a=i.length;for(e=0;e<a;++e)(n=r(t=i[e]))==u?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=n,i[s++]=t);i.length=s,o.length=s,this.heapify_()},e.b=r},function(t,e,n){"use strict";var g=n(12),f=n(10),r=n(39),o=n(14),E=n(49),c=n(126),d=n(47),y=n(6),h=n(124),w=n(2),i=n(92),s=n(1),a=n(4),O=n(0),u=n(15),l=n(103);function p(t,e){l.a.expire()}function _(t,e){return t.zIndex-e.zIndex}var v=function(e){function t(t){e.call(this),this.map_=t,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.dispatchRenderEvent=function(t,e){Object(w.b)()},t.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},t.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Object(g.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(g.d)(Object(g.g)(r,n))},t.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},t.prototype.forEachFeatureAtCoordinate=function(t,r,e,i,o,n,s){var a,u=r.viewState,l=u.resolution;function c(t,e){var n=r.layerStates[Object(w.c)(e)].managed;if(!(Object(w.c)(t)in r.skippedFeatureUids)||n)return i.call(o,t,n?e:null)}var h=u.projection,p=t;if(h.canWrapX()){var f=h.getExtent(),d=Object(O.E)(f),g=t[0];if(g<f[0]||g>f[2])p=[g+d*Math.ceil((f[0]-g)/d),t[1]]}var y,_=r.layerStatesArray;for(y=_.length-1;0<=y;--y){var v=_[y],m=v.layer;if(Object(E.b)(v,l)&&n.call(s,m)){var b=this.getLayerRenderer(m),x=m.getSource();if(x&&(a=b.forEachFeatureAtCoordinate(x.getWrapX()?p:t,r,e,c)),a)return a}}},t.prototype.forEachLayerAtPixel=function(t,e,n,r,i,o,s){return Object(w.b)()},t.prototype.hasFeatureAtCoordinate=function(t,e,n,r,i){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,u.b,this,r,i)},t.prototype.getLayerRenderer=function(t){var e=Object(w.c)(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var n,r=0,i=this.layerRendererConstructors_.length;r<i;++r){var o=this.layerRendererConstructors_[r];if(o.handles(t)){n=o.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=Object(s.a)(n,a.a.CHANGE,this.handleLayerRendererChange_,this),n},t.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},t.prototype.getLayerRenderers=function(){return this.layerRenderers_},t.prototype.getMap=function(){return this.map_},t.prototype.handleLayerRendererChange_=function(){this.map_.render()},t.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(s.e)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},t.prototype.removeUnusedLayerRenderers_=function(t,e){for(var n in this.layerRenderers_)e&&n in e.layerStates||this.removeLayerRendererByKey_(n).dispose()},t.prototype.renderFrame=function(t){Object(w.b)()},t.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(p)},t.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},t}(i.a),m=n(23);n.d(e,"b",function(){return b});var b=[],x=function(i){function t(t){i.call(this,t);var e=t.getViewport();this.context_=Object(o.a)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=r.d,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(g.c)()}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.dispatchRenderEvent=function(t,e){var n=this.getMap(),r=this.context_;if(n.hasListener(t)){var i=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),u=new h.a(r,o,i,a,s),l=new c.a(t,u,e,r,null);n.dispatchEvent(l)}},t.prototype.getTransform=function(t){var e=t.viewState,n=this.canvas_.width/2,r=this.canvas_.height/2,i=t.pixelRatio/e.resolution,o=-i,s=-e.rotation,a=-e.center[0],u=-e.center[1];return Object(g.b)(this.transform_,n,r,i,o,s,a,u)},t.prototype.renderFrame=function(t){if(t){var e=this.context_,n=t.pixelRatio,r=Math.round(t.size[0]*n),i=Math.round(t.size[1]*n);this.canvas_.width!=r||this.canvas_.height!=i?(this.canvas_.width=r,this.canvas_.height=i):e.clearRect(0,0,r,i);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(d.a.PRECOMPOSE,t);var s=t.layerStatesArray;Object(f.l)(s,_),o&&(e.save(),Object(y.s)(e,o,r/2,i/2));var a,u,l=t.viewState.resolution;for(a=0,u=s.length;a<u;++a){var c=s[a],h=c.layer,p=this.getLayerRenderer(h);Object(E.b)(c,l)&&c.sourceState==m.a.READY&&p.prepareFrame(t,c)&&p.composeFrame(t,c,e)}o&&e.restore(),this.dispatchRenderEvent(d.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},t.prototype.forEachLayerAtPixel=function(t,e,n,r,i,o,s){var a,u,l=e.viewState.resolution,c=e.layerStatesArray,h=c.length,p=Object(g.a)(e.pixelToCoordinateTransform,t.slice());for(u=h-1;0<=u;--u){var f=c[u],d=f.layer;if(Object(E.b)(f,l)&&o.call(s,d))if(a=this.getLayerRenderer(d).forEachLayerAtCoordinate(p,e,n,r,i))return a}},t.prototype.registerLayerRenderers=function(t){i.prototype.registerLayerRenderers.call(this,t);for(var e=0,n=t.length;e<n;++e){var r=t[e];Object(f.f)(b,r)||b.push(r)}},t}(v);e.a=x},function(t,e,n){"use strict";t.exports=n(144)},function(t,e,n){"use strict";var l=n(54),y=n(55),_=n(14),v=n(28),r=n(13),m=n(6),i=function(n){function e(t){var e=void 0!==t.rotateWithView&&t.rotateWithView;n.call(this,{opacity:1,rotateWithView:e,rotation:void 0!==t.rotation?t.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_)}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return r.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,n,r="",i="",o=0,s=null,a=0,u=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=m.k),n=Object(y.a)(n),void 0===(u=this.stroke_.getWidth())&&(u=m.h),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),v.a||(s=null,a=0),void 0===(i=this.stroke_.getLineJoin())&&(i=m.g),void 0===(r=this.stroke_.getLineCap())&&(r=m.d),void 0===(o=this.stroke_.getMiterLimit())&&(o=m.i));var l=2*(this.radius_+u)+1,c={strokeStyle:n,strokeWidth:u,size:l,lineCap:r,lineDash:s,lineDashOffset:a,lineJoin:i,miterLimit:o};if(void 0===t){var h=Object(_.a)(l,l);this.canvas_=h.canvas,e=l=this.canvas_.width,this.draw_(c,h,0,0),this.createHitDetectionCanvas_(c)}else{l=Math.round(l);var p,f=!this.fill_;f&&(p=this.drawHitDetectionCanvas_.bind(this,c));var d=this.getChecksum(),g=t.add(d,l,l,this.draw_.bind(this,c),p);this.canvas_=g.image,this.origin_=[g.offsetX,g.offsetY],e=g.image.width,f?(this.hitDetectionCanvas_=g.hitImage,this.hitDetectionImageSize_=[g.hitImage.width,g.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[l/2,l/2],this.size_=[l,l],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,n,r){var i,o,s;e.setTransform(1,0,0,1,0,0),e.translate(n,r),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(a*=2),i=0;i<=a;i++)o=2*i*Math.PI/a-Math.PI/2+this.angle_,s=i%2==0?this.radius_:u,e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l=m.b),e.fillStyle=Object(y.a)(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Object(_.a)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,n,r){e.setTransform(1,0,0,1,0,0),e.translate(n,r),e.beginPath();var i=this.points_;if(i===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,s,a,u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(i*=2),o=0;o<=i;o++)a=2*o*Math.PI/i-Math.PI/2+this.angle_,s=o%2==0?this.radius_:u,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=Object(l.b)(m.b),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var n="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[n,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(n(88).a);e.a=i},function(t,e,n){"use strict";var s=n(2),o=n(32),a=n(29),u=n(20),l=n(64),c=n(11),h=n(1),p=n(4),f=n(0),r=n(116),d=n(7),g=n(23),y="layers",i=function(i){function t(t){var e=t||{},n=Object(d.a)({},e);delete n.layers;var r=e.layers;i.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},Object(h.a)(this,Object(u.b)(y),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new o.a(r.slice(),{unique:!0}):Object(c.a)("function"==typeof r.getArray,43):r=new o.a(void 0,{unique:!0}),this.setLayers(r)}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(h.e),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(h.a)(t,a.a.ADD,this.handleLayersAdd_,this),Object(h.a)(t,a.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(h.e);Object(d.b)(this.listenerKeys_);for(var n=t.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.listenerKeys_[Object(s.c)(o)]=[Object(h.a)(o,l.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(h.a)(o,p.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},t.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Object(s.c)(e)]=[Object(h.a)(e,l.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(h.a)(e,p.a.CHANGE,this.handleLayerChange_,this)],this.changed()},t.prototype.handleLayersRemove_=function(t){var e=t.element,n=Object(s.c)(e);this.listenerKeys_[n].forEach(h.e),delete this.listenerKeys_[n],this.changed()},t.prototype.getLayers=function(){return this.get(y)},t.prototype.setLayers=function(t){this.set(y,t)},t.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},t.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var r=this.getLayerState(),i=n,o=e.length;i<o;i++){var s=e[i];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==s.extent?s.extent=Object(f.B)(s.extent,r.extent):s.extent=r.extent)}return e},t.prototype.getSourceState=function(){return g.a.READY},t}(r.a);e.a=i},function(t,e,n){"use strict";var r=n(31),i=function(n){function t(t){var e=t||{};n.call(this,e),this.type=r.a.IMAGE}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(n(49).a);i.prototype.getSource,e.a=i},function(t,e,n){"use strict";var i=n(31),r=n(49),o=n(67),s=n(7),a=function(r){function t(t){var e=t||{},n=Object(s.a)({},e);delete n.preload,delete n.useInterimTilesOnError,r.call(this,n),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=i.a.TILE}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getPreload=function(){return this.get(o.a.PRELOAD)},t.prototype.setPreload=function(t){this.set(o.a.PRELOAD,t)},t.prototype.getUseInterimTilesOnError=function(){return this.get(o.a.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(t){this.set(o.a.USE_INTERIM_TILES_ON_ERROR,t)},t}(r.a);a.prototype.getSource,e.a=a},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(14),r=n(1),o=n(53),a=n(4),u=n(13),l=n(103),c=function(s){function t(t,e,n,r,i,o){s.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=o?document.createElement("canvas"):null,this.color_=o,this.imageListenerKeys_=null,this.imageState_=i,this.size_=n,this.src_=e,this.tainted_}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===u.a.LOADED){this.tainted_=!1;var t=Object(i.a)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},t.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(a.a.CHANGE)},t.prototype.handleImageError_=function(){this.imageState_=u.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.handleImageLoad_=function(){this.imageState_=u.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},t.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},t.prototype.getImageState=function(){return this.imageState_},t.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],n=this.size_[1],r=Object(i.a)(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},t.prototype.getSize=function(){return this.size_},t.prototype.getSrc=function(){return this.src_},t.prototype.load=function(){if(this.imageState_==u.a.IDLE){this.imageState_=u.a.LOADING,this.imageListenerKeys_=[Object(r.b)(this.image_,a.a.ERROR,this.handleImageError_,this),Object(r.b)(this.image_,a.a.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},t.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),n=e.data,r=this.color_[0]/255,i=this.color_[1]/255,o=this.color_[2]/255,s=0,a=n.length;s<a;s+=4)n[s]*=r,n[s+1]*=i,n[s+2]*=o;t.putImageData(e,0,0)}},t.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(r.e),this.imageListenerKeys_=null},t}(o.a);function s(t,e,n,r,i,o){var s=l.a.get(e,r,o);return s||(s=new c(t,e,n,r,i,o),l.a.set(e,r,o,s)),s}e.a=c},function(t,e,n){"use strict";var h=n(2),p=n(13),f=n(11),d=n(54),r=n(1),i=n(4),g="fraction",y=n(112),o="bottom-left",s="bottom-right",_="top-left",a="top-right",u=function(c){function t(t){var e=t||{},n=void 0!==e.opacity?e.opacity:1,r=void 0!==e.rotation?e.rotation:0,i=void 0!==e.scale?e.scale:1,o=void 0!==e.rotateWithView&&e.rotateWithView;c.call(this,{opacity:n,rotation:r,scale:i,rotateWithView:o}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:_,this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:g,this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:g,this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var s=void 0!==e.img?e.img:null,a=void 0!==e.imgSize?e.imgSize:null,u=e.src;Object(f.a)(!(void 0!==u&&s),4),Object(f.a)(!s||s&&a,5),void 0!==u&&0!==u.length||!s||(u=s.src||Object(h.c)(s)),Object(f.a)(void 0!==u&&0<u.length,6);var l=void 0!==e.src?p.a.IDLE:p.a.LOADED;this.color_=void 0!==e.color?Object(d.a)(e.color):null,this.iconImage_=Object(y.b)(s,u,a,this.crossOrigin_,l,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:_,this.origin_=null,this.size_=void 0!==e.size?e.size:null}return c&&(t.__proto__=c),((t.prototype=Object.create(c&&c.prototype)).constructor=t).prototype.clone=function(){return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==g||this.anchorYUnits_==g){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==g&&(t[0]*=e[0]),this.anchorYUnits_==g&&(t[1]*=e[1])}if(this.anchorOrigin_!=_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=a&&this.anchorOrigin_!=s||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=o&&this.anchorOrigin_!=s||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},t.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(t){return this.iconImage_.getImage(t)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=_){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),this.offsetOrigin_!=a&&this.offsetOrigin_!=s||(t[0]=n[0]-e[0]-t[0]),this.offsetOrigin_!=o&&this.offsetOrigin_!=s||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(t,e){return Object(r.a)(this.iconImage_,i.a.CHANGE,t,e)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(t,e){Object(r.c)(this.iconImage_,i.a.CHANGE,t,e)},t}(n(88).a);e.a=u},function(t,e,n){"use strict";var r=n(2),i=function(n){function t(t){var e="Assertion failed. See https://openlayers.org/en/"+("latest"===r.a?r.a:"v"+r.a.split("-")[0])+"/doc/errors/#"+t+" for details.";n.call(this,e),this.code=t,this.name="AssertionError",this.message=e}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(Error);e.a=i},function(t,e,n){"use strict";var o=n(1),r=n(53),i=n(4),s=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.changed=function(){++this.revision_,this.dispatchEvent(i.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Object(o.a)(this,t[i],e);return r}return Object(o.a)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Object(o.b)(this,t[i],e);return r}return Object(o.b)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)Object(o.c)(this,t[n],e);else Object(o.c)(this,t,e)},e}(r.a);e.a=s},function(t,e,n){"use strict";var r=n(2),i=n(20),o=n(33),s=n(8),a=n(7),u=function(n){function t(t){n.call(this);var e=Object(a.a)({},t);e[o.a.OPACITY]=void 0!==t.opacity?t.opacity:1,e[o.a.VISIBLE]=void 0===t.visible||t.visible,e[o.a.Z_INDEX]=t.zIndex,e[o.a.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[o.a.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_=null,this.type}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getType=function(){return this.type},t.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=Object(s.a)(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t},t.prototype.getLayersArray=function(t){return Object(r.b)()},t.prototype.getLayerStatesArray=function(t){return Object(r.b)()},t.prototype.getExtent=function(){return this.get(o.a.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(o.a.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(o.a.MIN_RESOLUTION)},t.prototype.getOpacity=function(){return this.get(o.a.OPACITY)},t.prototype.getSourceState=function(){return Object(r.b)()},t.prototype.getVisible=function(){return this.get(o.a.VISIBLE)},t.prototype.getZIndex=function(){return this.get(o.a.Z_INDEX)},t.prototype.setExtent=function(t){this.set(o.a.EXTENT,t)},t.prototype.setMaxResolution=function(t){this.set(o.a.MAX_RESOLUTION,t)},t.prototype.setMinResolution=function(t){this.set(o.a.MIN_RESOLUTION,t)},t.prototype.setOpacity=function(t){this.set(o.a.OPACITY,t)},t.prototype.setVisible=function(t){this.set(o.a.VISIBLE,t)},t.prototype.setZIndex=function(t){this.set(o.a.Z_INDEX,t)},t}(i.a);e.a=u},function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return r});var E=n(10),w=n(60);function l(t,e,n,r,i,o,s){for(var a,u,l,c,h,p,f,d=i[o+1],g=[],y=0,_=n.length;y<_;++y){var v=n[y];for(c=t[v-r],p=t[v-r+1],a=e;a<v;a+=r)h=t[a],f=t[a+1],(d<=p&&f<=d||p<=d&&d<=f)&&(l=(d-p)/(f-p)*(h-c)+c,g.push(l)),c=h,p=f}var m=NaN,b=-1/0;for(g.sort(E.i),c=g[0],a=1,u=g.length;a<u;++a){h=g[a];var x=Math.abs(h-c);b<x&&(l=(c+h)/2,Object(w.c)(t,e,n,r,l,d)&&(m=l,b=x)),c=h}return isNaN(m)&&(m=i[o]),s?(s.push(m,d,b),s):[m,d,b]}function r(t,e,n,r,i){for(var o=[],s=0,a=n.length;s<a;++s){var u=n[s];o=l(t,e,u,r,i,2*s,o),e=u[u.length-1]}return o}},function(t,e,n){"use strict";function r(t,e,n,r,i,o){for(var s,a=[t[e],t[e+1]],u=[];e+r<n;e+=r){if(u[0]=t[e+r],u[1]=t[e+r+1],s=i.call(o,a,u))return s;a[0]=u[0],a[1]=u[1]}return!1}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=t[e],o=t[e+1],s=0,a=e+r;a<n;a+=r){var u=t[a],l=t[a+1];s+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return s}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},function(t,e,n){"use strict";var r=n(11),i=n(53),o=n(4),s=function(e){function t(t){e.call(this),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(o.a.CLEAR)},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t,e){for(var n=this.oldest_;n;)t.call(e,n.value_,n.key_,this),n=n.newer},t.prototype.get=function(t){var e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,(this.newest_=e).value_)},t.prototype.remove=function(t){var e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Object(r.a)(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},t}(i.a);e.a=s},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(15),u=n(77);function i(n,o,s,a){return function(t,e,r){var i=new XMLHttpRequest;i.open("GET","function"==typeof n?n(t,e,r):n,!0),o.getType()==u.a.ARRAY_BUFFER&&(i.responseType="arraybuffer"),i.onload=function(t){if(!i.status||200<=i.status&&i.status<300){var e,n=o.getType();n==u.a.JSON||n==u.a.TEXT?e=i.responseText:n==u.a.XML?e=(e=i.responseXML)||(new DOMParser).parseFromString(i.responseText,"application/xml"):n==u.a.ARRAY_BUFFER&&(e=i.response),e?s.call(this,o.readFeatures(e,{featureProjection:r}),o.readProjection(e),o.getLastExtent()):a.call(this)}else a.call(this)}.bind(this),i.onerror=function(){a.call(this)}.bind(this),i.send()}}function o(t,e){return i(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},r.c)}},function(t,e,n){"use strict";var r=function(o){function t(t,e,n,r,i){o.call(this,t,e,i),this.originalEvent=n,this.pixel=e.getEventPixel(n),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.preventDefault=function(){o.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){o.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},t}(n(98).a);e.a=r},function(t,e,n){"use strict";var r=n(10),b=n(55),c=n(0),i=n(3),s=n(41),g=n(52),a=n(28),o=n(125),x=n(6),y=n(12),u=function(o){function t(t,e,n,r,i){o.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=r,this.viewRotation_=i,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(y.c)()}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.drawImages_=function(t,e,n,r){if(this.image_){var i=Object(g.c)(t,e,n,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=i.length;l<c;l+=2){var h=i[l]-this.imageAnchorX_,p=i[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var f=h+this.imageAnchorX_,d=p+this.imageAnchorY_;Object(y.b)(s,f,d,this.imageScale_,this.imageScale_,u,-f,-d),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,p,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},t.prototype.drawText_=function(t,e,n,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Object(g.c)(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=r){var a=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var l=Object(y.b)(this.tmpLocalTransform_,a,u,this.textScale_,this.textScale_,s,-a,-u);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,a,u),this.textFillState_&&o.fillText(this.text_,a,u)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},t.prototype.moveToLineTo_=function(t,e,n,r,i){var o=this.context_,s=Object(g.c)(t,e,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;i&&(a-=2);for(var u=2;u<a;u+=2)o.lineTo(s[u],s[u+1]);return i&&o.closePath(),n},t.prototype.drawRings_=function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.moveToLineTo_(t,e,n[i],r,!0);return e},t.prototype.drawCircle=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(s.b)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],i=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},t.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},t.prototype.drawGeometry=function(t){switch(t.getType()){case i.a.POINT:this.drawPoint(t);break;case i.a.LINE_STRING:this.drawLineString(t);break;case i.a.POLYGON:this.drawPolygon(t);break;case i.a.MULTI_POINT:this.drawMultiPoint(t);break;case i.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case i.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case i.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case i.a.CIRCLE:this.drawCircle(t)}},t.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&Object(c.F)(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},t.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])},t.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},t.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},t.prototype.drawLineString=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},t.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Object(c.F)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getFlatCoordinates(),i=0,o=t.getEnds(),s=t.getStride();n.beginPath();for(var a=0,u=o.length;a<u;++a)i=this.moveToLineTo_(r,i,o[a],s,!1);n.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},t.prototype.drawPolygon=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},t.prototype.drawMultiPolygon=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),r=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=i.length;s<a;++s){var u=i[s];r=this.drawRings_(n,r,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},t.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},t.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),a.a&&(Object(r.b)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,a.a&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},t.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:x.l;n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=r&&(n.textAlign=e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},t.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:Object(b.a)(n||x.b)}}else this.fillState_=null;if(e){var r=e.getColor(),i=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:x.d,lineDash:o||x.e,lineDashOffset:s||x.f,lineJoin:void 0!==a?a:x.g,lineWidth:this.pixelRatio_*(void 0!==u?u:x.h),miterLimit:void 0!==l?l:x.i,strokeStyle:Object(b.a)(r||x.k)}}else this.strokeState_=null},t.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),r=t.getOrigin(),i=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=i[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=i[0]}else this.image_=null},t.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:Object(b.a)(n||x.b)}}else this.textFillState_=null;var r=t.getStroke();if(r){var i=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),a=r.getLineDashOffset(),u=r.getLineJoin(),l=r.getWidth(),c=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:x.d,lineDash:s||x.e,lineDashOffset:a||x.f,lineJoin:void 0!==u?u:x.g,lineWidth:void 0!==l?l:x.h,miterLimit:void 0!==c?c:x.i,strokeStyle:Object(b.a)(i||x.k)}}else this.textStrokeState_=null;var h=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScale(),_=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==h?h:x.c,textAlign:void 0!==v?v:x.l,textBaseline:void 0!==m?m:x.m},this.text_=void 0!==_?_:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},t}(o.a);e.a=u},function(t,e,n){"use strict";function r(){}r.prototype.drawCustom=function(t,e,n){},r.prototype.drawGeometry=function(t){},r.prototype.setStyle=function(t){},r.prototype.drawCircle=function(t,e){},r.prototype.drawFeature=function(t,e){},r.prototype.drawGeometryCollection=function(t,e){},r.prototype.drawLineString=function(t,e){},r.prototype.drawMultiLineString=function(t,e){},r.prototype.drawMultiPoint=function(t,e){},r.prototype.drawMultiPolygon=function(t,e){},r.prototype.drawPoint=function(t,e){},r.prototype.drawPolygon=function(t,e){},r.prototype.drawText=function(t,e){},r.prototype.setFillStrokeStyle=function(t,e){},r.prototype.setImageStyle=function(t,e){},r.prototype.setTextStyle=function(t,e){},e.a=r},function(t,e,n){"use strict";var r=function(o){function t(t,e,n,r,i){o.call(this,t),this.vectorContext=e,this.frameState=n,this.context=r,this.glContext=i}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t}(n(21).a);e.a=r},function(t,e,n){"use strict";var r=n(2),a=n(16),u=n(14),p=n(0),i=n(133),l=n(12),o=function(e){function t(t){e.call(this,t),this.coordinateToCanvasPixelTransform=Object(l.c)(),this.hitCanvasContext_=null}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.composeFrame=function(t,e,n){this.preCompose(n,t);var r=this.getImage();if(r){var i=e.extent,o=void 0!==i&&!Object(p.g)(i,t.extent)&&Object(p.F)(i,t.extent);o&&this.clip(n,t,i);var s=this.getImageTransform(),a=n.globalAlpha;n.globalAlpha=e.opacity;var u=s[4],l=s[5],c=r.width*s[0],h=r.height*s[3];.5<=c&&.5<=h&&n.drawImage(r,0,0,+r.width,+r.height,Math.round(u),Math.round(l),Math.round(c),Math.round(h)),n.globalAlpha=a,o&&n.restore()}this.postCompose(n,t,e)},t.prototype.getImage=function(){return Object(r.b)()},t.prototype.getImageTransform=function(){return Object(r.b)()},t.prototype.forEachLayerAtCoordinate=function(t,e,n,r,i){if(this.getImage()){var o=Object(l.a)(this.coordinateToCanvasPixelTransform,t.slice());Object(a.g)(o,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(u.a)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return 0<s[3]?r.call(i,this.getLayer(),s):void 0}},t}(i.a);e.a=o},function(t,e,n){"use strict";e.a={POINT:"point",LINE:"line"}},function(t,e,n){"use strict";var a=n(5),i=n(1),o=n(4),r=function(r){function t(e,t){r.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.enqueue=function(t){var e=r.prototype.enqueue.call(this,t);if(e){var n=t[0];Object(i.a)(n,o.a.CHANGE,this.handleTileChange,this)}return e},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(n===a.a.LOADED||n===a.a.ERROR||n===a.a.EMPTY||n===a.a.ABORT){Object(i.c)(e,o.a.CHANGE,this.handleTileChange,this);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(t,e){for(var n,r,i,o=0,s=!1;this.tilesLoading_<t&&o<e&&0<this.getCount();)i=(r=this.dequeue()[0]).getKey(),(n=r.getState())===a.a.ABORT?s=!0:n!==a.a.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,r.load());0===o&&s&&this.tileChangeCallback_()},t}(n(105).b);e.a=r},function(t,e,n){"use strict";var r=n(59),i=n(5),o=n(14),a=n(1),u=n(4),s=function(s){function t(t,e,n,r,i,o){s.call(this,t,e,o),this.crossOrigin_=r,this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=i}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.disposeInternal=function(){this.state==i.a.LOADING&&(this.unlistenImage_(),this.image_=l()),this.interimTile&&this.interimTile.dispose(),this.state=i.a.ABORT,this.changed(),s.prototype.disposeInternal.call(this)},t.prototype.getImage=function(){return this.image_},t.prototype.getKey=function(){return this.src_},t.prototype.handleImageError_=function(){this.state=i.a.ERROR,this.unlistenImage_(),this.image_=l(),this.changed()},t.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=i.a.LOADED:this.state=i.a.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==i.a.ERROR&&(this.state=i.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==i.a.IDLE&&(this.state=i.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(a.b)(this.image_,u.a.ERROR,this.handleImageError_,this),Object(a.b)(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},t.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.e),this.imageListenerKeys_=null},t}(r.a);function l(){var t=Object(o.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}e.a=s},function(t,e,n){"use strict";var r=n(121),i=n(24),o=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord))break;this.pop().dispose()}},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=Object(i.b)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(i.c)(t.tileCoord)),t.dispose())},this)}},t}(r.a);e.a=o},function(t,e,n){"use strict";function r(t,e,n,r,i){this.sourceProj_=t,this.targetProj_=e;var o={},s=Object(y.f)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Object(I.E)(r)==Object(I.E)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(I.E)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(I.E)(this.targetProj_.getExtent()):null;var a=Object(I.C)(n),u=Object(I.D)(n),l=Object(I.w)(n),c=Object(I.v)(n),h=this.transformInv_(a),p=this.transformInv_(u),f=this.transformInv_(l),d=this.transformInv_(c);if(this.addQuad_(a,u,l,c,h,p,f,d,10),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach(function(t,e,n){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}}var I=n(0),T=n(8),y=n(9);r.prototype.addTriangle_=function(t,e,n,r,i,o){this.triangles_.push({source:[r,i,o],target:[t,e,n]})},r.prototype.addQuad_=function(t,e,n,r,i,o,s,a,u){var l=Object(I.b)([i,o,s,a]),c=this.sourceWorldWidth_?Object(I.E)(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&.5<c&&c<1,f=!1;if(0<u){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var d=Object(I.b)([t,e,n,r]);f=.25<Object(I.E)(d)/this.targetWorldWidth_||f}!p&&this.sourceProj_.isGlobal()&&c&&(f=.25<c||f)}if(f||!this.maxSourceExtent_||Object(I.F)(l,this.maxSourceExtent_)){if(!(f||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(0<u))return;f=!0}if(0<u){if(!f){var g,y=[(t[0]+n[0])/2,(t[1]+n[1])/2],_=this.transformInv_(y);if(p)g=(Object(T.d)(i[0],h)+Object(T.d)(s[0],h))/2-Object(T.d)(_[0],h);else g=(i[0]+s[0])/2-_[0];var v=(i[1]+s[1])/2-_[1];f=g*g+v*v>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],b=this.transformInv_(m),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],E=this.transformInv_(x);this.addQuad_(t,e,m,x,i,o,b,E,u-1),this.addQuad_(x,m,n,r,E,b,s,a,u-1)}else{var w=[(t[0]+e[0])/2,(t[1]+e[1])/2],O=this.transformInv_(w),C=[(n[0]+r[0])/2,(n[1]+r[1])/2],S=this.transformInv_(C);this.addQuad_(t,w,C,r,i,O,S,a,u-1),this.addQuad_(w,e,n,C,O,o,s,S,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,r,i,s,a),this.addTriangle_(t,e,n,i,o,s)}},r.prototype.calculateSourceExtent=function(){var i=Object(I.j)();return this.triangles_.forEach(function(t,e,n){var r=t.source;Object(I.r)(i,r[0]),Object(I.r)(i,r[1]),Object(I.r)(i,r[2])}),i},r.prototype.getTriangles=function(){return this.triangles_},e.a=r},function(t,e,n){"use strict";var m=n(2),h=n(0),o=n(15),p=n(126),i=n(47),f=n(6),d=n(124),r=n(13),s=n(115),b=n(5),a=n(1),u=n(4),l=n(23),c=function(e){function t(t){e.call(this),this.layer_=t}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createLoadedTileFinder=function(n,r,i){return function(e,t){return n.forEachLoadedTile(r,e,t,function(t){i[e]||(i[e]={}),i[e][t.tileCoord.toString()]=t})}},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r){},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleImageChange_=function(t){t.target.getState()===r.a.LOADED&&this.renderIfReadyAndVisible()},t.prototype.hasFeatureAtCoordinate=function(t,e){return!1},t.prototype.loadImage=function(t){var e=t.getState();return e!=r.a.LOADED&&e!=r.a.ERROR&&Object(a.a)(t,u.a.CHANGE,this.handleImageChange_,this),e==r.a.IDLE&&(t.load(),e=t.getState()),e==r.a.LOADED},t.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==l.a.READY&&this.changed()},t.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=Object(m.c)(t);r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},t.prototype.updateUsedTiles=function(t,e,n,r){var i=Object(m.c)(e),o=n.toString();i in t?o in t[i]?t[i][o].extend(r):t[i][o]=r:(t[i]={},t[i][o]=r)},t.prototype.manageTilePyramid=function(t,e,n,r,i,o,s,a,u,l){var c=Object(m.c)(e);c in t.wantedTiles||(t.wantedTiles[c]={});var h,p,f,d,g,y,_=t.wantedTiles[c],v=t.tileQueue;for(y=n.getMinZoom();y<=s;++y)for(p=n.getTileRangeForExtentAndZ(o,y,p),f=n.getResolution(y),d=p.minX;d<=p.maxX;++d)for(g=p.minY;g<=p.maxY;++g)s-y<=a?((h=e.getTile(y,d,g,r,i)).getState()==b.a.IDLE&&(_[h.getKey()]=!0,v.isKeyQueued(h.getKey())||v.enqueue([h,c,n.getTileCoordCenter(h.tileCoord),f])),void 0!==u&&u.call(l,h)):e.useTile(y,d,g,i)},t}(s.a),g=n(12),y=function(e){function t(t){e.call(this,t),this.renderedResolution,this.transform_=Object(g.c)()}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.clip=function(t,e,n){var r=e.pixelRatio,i=e.size[0]*r,o=e.size[1]*r,s=e.viewState.rotation,a=Object(h.C)(n),u=Object(h.D)(n),l=Object(h.w)(n),c=Object(h.v)(n);Object(g.a)(e.coordinateToPixelTransform,a),Object(g.a)(e.coordinateToPixelTransform,u),Object(g.a)(e.coordinateToPixelTransform,l),Object(g.a)(e.coordinateToPixelTransform,c),t.save(),Object(f.s)(t,-s,i/2,o/2),t.beginPath(),t.moveTo(a[0]*r,a[1]*r),t.lineTo(u[0]*r,u[1]*r),t.lineTo(l[0]*r,l[1]*r),t.lineTo(c[0]*r,c[1]*r),t.clip(),Object(f.s)(t,s,i/2,o/2)},t.prototype.dispatchComposeEvent_=function(t,e,n,r){var i=this.getLayer();if(i.hasListener(t)){var o=n.size[0]*n.pixelRatio,s=n.size[1]*n.pixelRatio,a=n.viewState.rotation;Object(f.s)(e,-a,o/2,s/2);var u=void 0!==r?r:this.getTransform(n,0),l=new d.a(e,n.pixelRatio,n.extent,u,n.viewState.rotation),c=new p.a(t,l,n,e,null);i.dispatchEvent(c),Object(f.s)(e,a,o/2,s/2)}},t.prototype.forEachLayerAtCoordinate=function(t,e,n,r,i){return this.forEachFeatureAtCoordinate(t,e,n,o.b)?r.call(i,this.getLayer(),null):void 0},t.prototype.postCompose=function(t,e,n,r){this.dispatchComposeEvent_(i.a.POSTCOMPOSE,t,e,r)},t.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_(i.a.PRECOMPOSE,t,e,n)},t.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_(i.a.RENDER,t,e,n)},t.prototype.getTransform=function(t,e){var n=t.viewState,r=t.pixelRatio,i=r*t.size[0]/2,o=r*t.size[1]/2,s=r/n.resolution,a=-s,u=-n.rotation,l=-n.center[0]+e,c=-n.center[1];return Object(g.b)(this.transform_,i,o,s,a,u,l,c)},t.prototype.composeFrame=function(t,e,n){Object(m.b)()},t.prototype.prepareFrame=function(t,e){return Object(m.b)()},t}(c);e.a=y},function(t,e,n){"use strict";n.r(e),n.d(e,"createRegularPolygon",function(){return M}),n.d(e,"createBox",function(){return j});var r=n(4),a=n(48),i=n(17),s=n(66),u=n(20),h=n(16),l=n(1),o=n(21),c=n(18),p=n(0),f=n(15),d=n(99),g=n(3),y=n(62),_=n(89),v=n(72),m=n(91),b=n(76),x=n(40),E=n(30),w=n(27),O=n(79),C=n(50),S=n(57),I=n(45),T={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},R="drawstart",L="drawend",N=function(n){function t(t,e){n.call(this,t),this.feature=e}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(o.a),P=function(o){function t(t){var e=t;e.stopDown||(e.stopDown=f.a),o.call(this,e),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){var e;t===g.a.POINT||t===g.a.MULTI_POINT?e=T.POINT:t===g.a.LINE_STRING||t===g.a.MULTI_LINE_STRING?e=T.LINE_STRING:t===g.a.POLYGON||t===g.a.MULTI_POLYGON?e=T.POLYGON:t===g.a.CIRCLE&&(e=T.CIRCLE);return e}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===T.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:f.b;var n=t.geometryFunction;if(!n)if(this.type_===g.a.CIRCLE)n=function(t,e){var n=e||new d.a([NaN,NaN]),r=Object(h.h)(t[0],t[1]);return n.setCenterAndRadius(t[0],Math.sqrt(r)),n};else{var r,i=this.mode_;i===T.POINT?r=x.a:i===T.LINE_STRING?r=y.a:i===T.POLYGON&&(r=E.default),n=function(t,e){var n=e;return n?i===T.POLYGON?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new r(t),n}}this.geometryFunction_=n,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new C.a({source:new S.a({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:function(){var n=Object(I.b)();return function(t,e){return n[t.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:c.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=c.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:c.shiftKeyOnly,Object(l.a)(this,Object(u.b)(O.a.ACTIVE),this.updateState_,this)}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.setMap=function(t){o.prototype.setMap.call(this,t),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(t){t.originalEvent.type===r.a.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==T.POINT&&this.freehandCondition_(t);var e=t.type===i.a.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&t.type===i.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===i.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),n=!1):this.freehand_&&t.type===i.a.POINTERDOWN?n=!1:e?(n=t.type===i.a.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(t):(t.pointerEvent.pointerType==b.b||t.type===i.a.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===i.a.DBLCLICK&&(n=!1),o.prototype.handleEvent.call(this,t)&&n},t.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.a(i.a.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},t.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var n=this.mode_===T.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||n?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===T.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},t.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,r=e[0]-n[0],i=e[1]-n[1],o=r*r+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},t.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,r=[this.finishCoordinate_];if(this.mode_===T.LINE_STRING)n=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===T.POLYGON){var i=this.sketchCoords_;n=i[0].length>this.minPoints_,r=[i[0][0],i[0][i[0].length-2]]}if(n)for(var o=t.map,s=0,a=r.length;s<a;s++){var u=r[s],l=o.getPixelFromCoordinate(u),c=t.pixel,h=c[0]-l[0],p=c[1]-l[1],f=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+p*p)<=f){this.finishCoordinate_=u;break}}}return e},t.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new a.default(new x.a(e)),this.updateSketchFeatures_())},t.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===T.POINT?this.sketchCoords_=e.slice():this.mode_===T.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new a.default(new y.a(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new a.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new N(R,this.sketchFeature_))},t.prototype.modifyDrawing_=function(t){var e,n,r,i=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===T.POINT?n=this.sketchCoords_:this.mode_===T.POLYGON?(n=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(i=this.finishCoordinate_.slice())):n=(e=this.sketchCoords_)[e.length-1],n[0]=i[0],n[1]=i[1],this.geometryFunction_(this.sketchCoords_,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(i);if(o.getType()==g.a.POLYGON&&this.mode_!==T.POLYGON){this.sketchLine_||(this.sketchLine_=new a.default);var s=o.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),r.changed()):(r=new y.a(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(t){var e,n,r=t.coordinate,i=this.sketchFeature_.getGeometry();this.mode_===T.LINE_STRING?(this.finishCoordinate_=r.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(r.slice()),this.geometryFunction_(n,i)):this.mode_===T.POLYGON&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(r.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===T.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),2<=t.length&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===T.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry();this.mode_===T.LINE_STRING?(e.pop(),this.geometryFunction_(e,n)):this.mode_===T.POLYGON&&(e[0].pop(),this.geometryFunction_(e,n),e=n.getCoordinates()),this.type_===g.a.MULTI_POINT?t.setGeometry(new v.a([e])):this.type_===g.a.MULTI_LINE_STRING?t.setGeometry(new _.a([e])):this.type_===g.a.MULTI_POLYGON&&t.setGeometry(new m.a([e])),this.dispatchEvent(new N(L,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},t.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new N(R,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},t.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},t}(w.b);function M(l,c){return function(t,e){var n=t[0],r=t[1],i=Math.sqrt(Object(h.h)(n,r)),o=e||Object(E.fromCircle)(new d.a(n),l),s=c;if(!c){var a=r[0]-n[0],u=r[1]-n[1];s=Math.atan(u/a)-(a<0?Math.PI:0)}return Object(E.makeRegular)(o,n,i,s),o}}function j(){return function(t,e){var n=Object(p.b)(t),r=[[Object(p.v)(n),Object(p.w)(n),Object(p.D)(n),Object(p.C)(n),Object(p.v)(n)]],i=e;return i?i.setCoordinates(r):i=new E.default(r),i}}e.default=P},function(t,e,n){"use strict";n.r(e);function r(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}var o=n(32);r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[2+e]<t)return!1;for(var n=e-3;0<n&&this.points_[n+2]>t;)n-=3;var r=this.points_[2+e]-this.points_[n+2];if(r<1e3/60)return!1;var i=this.points_[e]-this.points_[n],o=this.points_[1+e]-this.points_[n+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/r,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_};var i=r,a=n(17),g=n(22);function s(t){var e=!1;if(t.type==a.a.DBLCLICK){var n=t.originalEvent,r=t.map,i=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,s=r.getView();Object(g.f)(s,o,i,this.duration_),t.preventDefault(),e=!0}return!e}var u=function(n){function t(t){n.call(this,{handleEvent:s});var e=t||{};this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(g.a),f=n(19),v=n(16),d=n(35),y=n(18),l=n(15),_=n(27),c=function(n){function t(t){n.call(this,{stopDown:l.a});var e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=e.condition?e.condition:y.noModifierKeys,this.noKinetic_=!1}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(f.a.INTERACTING,1));var e=this.targetPointers,n=Object(_.a)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var r=this.lastCentroid[0]-n[0],i=n[1]-this.lastCentroid[1],o=t.map.getView(),s=[r,i];Object(v.g)(s,o.getResolution()),Object(v.f)(s,o.getRotation()),Object(v.a)(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length},t.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0!==this.targetPointers.length)return this.kinetic_&&this.kinetic_.begin(),!(this.lastCentroid=null);if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-r*Math.cos(i),s[1]-r*Math.sin(i)]);n.animate({center:n.constrainCenter(a),duration:500,easing:d.b})}return this.panning_&&(this.panning_=!1,n.setHint(f.a.INTERACTING,-1)),!1},t.prototype.handleDownEvent=function(t){if(0<this.targetPointers.length&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=1<this.targetPointers.length,!0}return!1},t}(_.b),h=n(61),p=function(n){function t(t){var e=t||{};n.call(this,{stopDown:l.a}),this.condition_=e.condition?e.condition:y.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.handleDragEvent=function(t){if(Object(y.mouseOnly)(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==h.c){var r=e.getSize(),i=t.pixel,o=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_,a=n.getRotation();Object(g.d)(n,a-s)}this.lastAngle_=o}}},t.prototype.handleUpEvent=function(t){if(!Object(y.mouseOnly)(t))return!0;var e=t.map.getView();e.setHint(f.a.INTERACTING,-1);var n=e.getRotation();return Object(g.c)(e,n,void 0,this.duration_),!1},t.prototype.handleDownEvent=function(t){return!!Object(y.mouseOnly)(t)&&(!(!Object(y.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().setHint(f.a.INTERACTING,1),!(this.lastAngle_=void 0)))},t}(_.b),m=n(0),b=n(21),x=n(92),E=n(30),w=function(e){function t(t){e.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},t.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new E.default([n])},t.prototype.getGeometry=function(){return this.geometry_},t}(x.a),O="boxstart",C="boxdrag",S="boxend",I=function(r){function t(t,e,n){r.call(this,t),this.coordinate=e,this.mapBrowserEvent=n}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t}(b.a),T=function(n){function t(t){n.call(this);var e=t||{};this.box_=new w(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.onBoxEnd_=e.onBoxEnd?e.onBoxEnd:l.c,this.startPixel_=null,this.condition_=e.condition?e.condition:y.always,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],i=n[1]-e[1];return r*r+i*i>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(t){Object(y.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new I(C,t.coordinate,t)))},t.prototype.handleUpEvent=function(t){return!Object(y.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new I(S,t.coordinate,t))),!1)},t.prototype.handleDownEvent=function(t){return!!Object(y.mouseOnly)(t)&&(!(!Object(y.mouseActionButton)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new I(O,t.coordinate,t)),!0))},t}(_.b);function R(){var t=this.getMap(),e=t.getView(),n=t.getSize(),r=this.getGeometry().getExtent();if(this.out_){var i=e.calculateExtent(n),o=Object(m.n)([t.getPixelFromCoordinate(Object(m.v)(r)),t.getPixelFromCoordinate(Object(m.D)(r))]),s=e.getResolutionForExtent(o,n);Object(m.J)(i,1/s),r=i}var a=e.constrainResolution(e.getResolutionForExtent(r,n)),u=Object(m.x)(r);u=e.constrainCenter(u),e.animate({resolution:a,center:u,duration:this.duration_,easing:d.b})}var L=function(r){function t(t){var e=t||{},n=e.condition?e.condition:y.shiftKeyOnly;r.call(this,{condition:n,className:e.className||"ol-dragzoom",onBoxEnd:R}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t}(T),N=n(4),P={LEFT:37,UP:38,RIGHT:39,DOWN:40};function M(t){var e=!1;if(t.type==N.a.KEYDOWN){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==P.DOWN||n==P.LEFT||n==P.RIGHT||n==P.UP)){var r=t.map.getView(),i=r.getResolution()*this.pixelDelta_,o=0,s=0;n==P.DOWN?s=-i:n==P.LEFT?o=-i:n==P.RIGHT?o=i:s=i;var a=[o,s];Object(v.f)(a,r.getRotation()),Object(g.b)(r,a,this.duration_),t.preventDefault(),e=!0}}return!e}var j=function(n){function t(t){n.call(this,{handleEvent:M});var e=t||{};this.defaultCondition_=function(t){return Object(y.noModifierKeys)(t)&&Object(y.targetNotEditable)(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(g.a);function A(t){var e=!1;if(t.type==N.a.KEYDOWN||t.type==N.a.KEYPRESS){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var r=t.map,i=n=="+".charCodeAt(0)?this.delta_:-this.delta_,o=r.getView();Object(g.f)(o,i,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var F=function(n){function t(t){n.call(this,{handleEvent:A});var e=t||{};this.condition_=e.condition?e.condition:y.targetNotEditable,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(g.a),D=n(28),k=n(8),G="trackpad",z="wheel",U=function(n){function t(t){var e=t||{};n.call(this,e),this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.condition_=e.condition?e.condition:y.always,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(f.a.INTERACTING,-1)},t.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==N.a.WHEEL&&e!==N.a.MOUSEWHEEL)return!0;t.preventDefault();var n,r=t.map,i=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==N.a.WHEEL?(n=i.deltaY,D.c&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=D.b),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):t.type==N.a.MOUSEWHEEL&&(n=-i.wheelDeltaY,D.g&&(n/=3)),0===n)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?G:z),this.mode_===G){var s=r.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(f.a.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_),u=s.getMinResolution(),l=s.getMaxResolution(),c=0;if(a<u?(a=Math.max(a,u/this.trackpadZoomBuffer_),c=1):l<a&&(a=Math.min(a,l*this.trackpadZoomBuffer_),c=-1),this.lastAnchor_){var h=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(h))}return s.setResolution(a),0===c&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,0<n?-1:1),easing:d.b,anchor:this.lastAnchor_,duration:this.duration_}),0<c?s.animate({resolution:u,easing:d.b,anchor:this.lastAnchor_,duration:500}):c<0&&s.animate({resolution:l,easing:d.b,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=n;var p=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),p),!1},t.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=Object(k.a)(this.delta_,-1,1);Object(g.f)(e,-n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(t){(this.useAnchor_=t)||(this.lastAnchor_=null)},t}(g.a),B=function(r){function t(t){var e=t||{},n=e;n.stopDown||(n.stopDown=l.a),r.call(this,n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==h.c){var u=s.getViewport().getBoundingClientRect(),l=Object(_.a)(this.targetPointers);if(l[0]-=u.left,l[1]-=u.top,this.anchor_=s.getCoordinateFromPixel(l),this.rotating_){var c=a.getRotation();s.render(),Object(g.d)(a,c+e,this.anchor_)}}},t.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(f.a.INTERACTING,-1),this.rotating_){var n=e.getRotation();Object(g.c)(e,n,this.anchor_,this.duration_)}return!1}return!0},t.prototype.handleDownEvent=function(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(f.a.INTERACTING,1),!0}return!1},t}(_.b),Y=function(r){function t(t){var e=t||{},n=e;n.stopDown||(n.stopDown=l.a),r.call(this,n),this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],i=n.clientX-r.clientX,o=n.clientY-r.clientY,s=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,u=a.getView(),l=u.getResolution(),c=u.getMaxResolution(),h=u.getMinResolution(),p=l*e;c<p?(e=c/l,p=c):p<h&&(e=h/l,p=h),1!=e&&(this.lastScaleDelta_=e);var f=a.getViewport().getBoundingClientRect(),d=Object(_.a)(this.targetPointers);d[0]-=f.left,d[1]-=f.top,this.anchor_=a.getCoordinateFromPixel(d),a.render(),Object(g.g)(u,p,this.anchor_)},t.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(f.a.INTERACTING,-1);var n=e.getResolution();if(this.constrainResolution_||n<e.getMinResolution()||n>e.getMaxResolution()){var r=this.lastScaleDelta_-1;Object(g.e)(e,n,this.anchor_,this.duration_,r)}return!1}return!0},t.prototype.handleDownEvent=function(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(f.a.INTERACTING,1),!0}return!1},t}(_.b),X=n(1),q=n(9),V="addfeatures",W=function(i){function t(t,e,n,r){i.call(this,t),this.features=n,this.file=e,this.projection=r}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(b.a);function K(t){for(var e=t.dataTransfer.files,n=0,r=e.length;n<r;++n){var i=e.item(n),o=new FileReader;o.addEventListener(N.a.LOAD,this.handleResult_.bind(this,i)),o.readAsText(i)}}function H(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var Z=function(n){function t(t){var e=t||{};n.call(this,{handleEvent:l.b}),this.formatConstructors_=e.formatConstructors?e.formatConstructors:[],this.projection_=e.projection?Object(q.d)(e.projection):null,this.dropListenKeys_=null,this.source_=e.source||null,this.target=e.target?e.target:null}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.handleResult_=function(t,e){var n=e.target.result,r=this.getMap(),i=this.projection_;i=i||r.getView().getProjection();for(var o=this.formatConstructors_,s=[],a=0,u=o.length;a<u;++a){var l=new o[a];if((s=this.tryReadFeatures_(l,n,{featureProjection:i}))&&0<s.length)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new W(V,t,s,i))},t.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(X.a)(e,N.a.DROP,K,this),Object(X.a)(e,N.a.DRAGENTER,H,this),Object(X.a)(e,N.a.DRAGOVER,H,this),Object(X.a)(e,N.a.DROP,H,this)]}},t.prototype.setActive=function(t){n.prototype.setActive.call(this,t),t?this.registerListeners_():this.unregisterListeners_()},t.prototype.setMap=function(t){this.unregisterListeners_(),n.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},t.prototype.tryReadFeatures_=function(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}},t.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(X.e),this.dropListenKeys_=null)},t}(g.a),J=function(n){function t(t){var e=t||{};n.call(this,e),this.condition_=e.condition?e.condition:y.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==e.duration?e.duration:400}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.handleDragEvent=function(t){if(Object(y.mouseOnly)(t)){var e=t.map,n=e.getSize(),r=t.pixel,i=r[0]-n[0]/2,o=n[1]/2-r[1],s=Math.atan2(o,i),a=Math.sqrt(i*i+o*o),u=e.getView();if(u.getConstraints().rotation!==h.c&&void 0!==this.lastAngle_){var l=s-this.lastAngle_;Object(g.d)(u,u.getRotation()-l)}if(this.lastAngle_=s,void 0!==this.lastMagnitude_){var c=this.lastMagnitude_*(u.getResolution()/a);Object(g.g)(u,c)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}},t.prototype.handleUpEvent=function(t){if(!Object(y.mouseOnly)(t))return!0;var e=t.map.getView();e.setHint(f.a.INTERACTING,-1);var n=this.lastScaleDelta_-1;return Object(g.c)(e,e.getRotation()),Object(g.e)(e,e.getResolution(),void 0,this.duration_,n),this.lastScaleDelta_=0,!1},t.prototype.handleDownEvent=function(t){return!!Object(y.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(f.a.INTERACTING,1),this.lastAngle_=void 0,!(this.lastMagnitude_=void 0)))},t}(_.b),Q=n(134),$=n(48),tt=n(3),et=n(40),nt=n(50),rt=n(57),it=n(45),ot="extentchanged",st=function(e){function t(t){e.call(this,ot),this.extent=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(b.a);function at(e){return function(t){return Object(m.b)([e,t])}}function ut(e,n){return e[0]==n[0]?function(t){return Object(m.b)([e,[t[0],n[1]]])}:e[1]==n[1]?function(t){return Object(m.b)([e,[n[0],t[1]]])}:null}var lt=function(n){function t(t){var e=t||{};n.call(this,e),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t=t||{},this.extentOverlay_=new nt.a({source:new rt.a({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:function(){var n=Object(it.b)();return function(t,e){return n[tt.a.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new nt.a({source:new rt.a({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:function(){var n=Object(it.b)();return function(t,e){return n[tt.a.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.snapToVertex_=function(t,e){var n=e.getCoordinateFromPixel(t),r=this.getExtent();if(r){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);i.sort(function(t,e){return Object(v.i)(n,t)-Object(v.i)(n,e)});var o=i[0],s=Object(v.c)(n,o),a=e.getPixelFromCoordinate(s);if(Object(v.d)(t,a)<=this.pixelTolerance_){var u=e.getPixelFromCoordinate(o[0]),l=e.getPixelFromCoordinate(o[1]),c=Object(v.h)(a,u),h=Object(v.h)(a,l),p=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(s=h<c?o[1]:o[0]),s}}return null},t.prototype.handlePointerMove_=function(t){var e=t.pixel,n=t.map,r=this.snapToVertex_(e,n);r=r||n.getCoordinateFromPixel(e),this.createOrUpdatePointerFeature_(r)},t.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Object(E.fromExtent)(t)):e.setGeometry(void 0):(e=t?new $.default(Object(E.fromExtent)(t)):new $.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},t.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new $.default(new et.a(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},t.prototype.handleEvent=function(t){return!t.pointerEvent||(t.type!=a.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),n.prototype.handleEvent.call(this,t),!1)},t.prototype.handleDownEvent=function(t){function e(t){var e=null,n=null;return t[0]==i[0]?e=i[2]:t[0]==i[2]&&(e=i[0]),t[1]==i[1]?n=i[3]:t[1]==i[3]&&(n=i[1]),null!==e&&null!==n?[e,n]:null}var n=t.pixel,r=t.map,i=this.getExtent(),o=this.snapToVertex_(n,r);if(o&&i){var s=o[0]==i[0]||o[0]==i[2]?o[0]:null,a=o[1]==i[1]||o[1]==i[3]?o[1]:null;null!==s&&null!==a?this.pointerHandler_=at(e(o)):null!==s?this.pointerHandler_=ut(e([s,i[1]]),e([s,i[3]])):null!==a&&(this.pointerHandler_=ut(e([i[0],a]),e([i[2],a])))}else o=r.getCoordinateFromPixel(n),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=at(o);return!0},t.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},t.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==Object(m.u)(e)||this.setExtent(null),!1},t.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),n.prototype.setMap.call(this,t)},t.prototype.getExtent=function(){return this.extent_},t.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new st(this.extent_))},t}(_.b),ct=n(2),ht=n(29),pt=n(10),ft=n(56),dt=n(82),gt=1,yt="modifystart",_t="modifyend",vt=function(r){function t(t,e,n){r.call(this,t),this.features=e,this.mapBrowserEvent=n}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t}(b.a);function mt(t,e){return t.index-e.index}function bt(t,e){var n=e.geometry;if(n.getType()===tt.a.CIRCLE){var r=n;if(e.index===gt){var i=Object(v.h)(r.getCenter(),t),o=Math.sqrt(i)-r.getRadius();return o*o}}return Object(v.i)(t,e.segment)}function xt(t,e){var n=e.geometry;return n.getType()===tt.a.CIRCLE&&e.index===gt?n.getClosestPoint(t):Object(v.c)(t,e.segment)}var Et=function(n){function t(t){var e;if(n.call(this,t),this.condition_=t.condition?t.condition:y.primaryAction,this.defaultDeleteCondition_=function(t){return Object(y.altKeyOnly)(t)&&Object(y.singleClick)(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:y.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new dt.a,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new nt.a({source:new rt.a({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:function(){var n=Object(it.b)();return function(t,e){return n[tt.a.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,e=new o.a(this.source_.getFeatures()),Object(X.a)(this.source_,ft.a.ADDFEATURE,this.handleSourceAdd_,this),Object(X.a)(this.source_,ft.a.REMOVEFEATURE,this.handleSourceRemove_,this)):e=t.features,!e)throw new Error("The modify interaction requires features or a source");this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),Object(X.a)(this.features_,ht.a.ADD,this.handleFeatureAdd_,this),Object(X.a)(this.features_,ht.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),Object(X.a)(t,N.a.CHANGE,this.handleFeatureChange_,this)},t.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new vt(yt,this.features_,t)))},t.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(X.c)(t,N.a.CHANGE,this.handleFeatureChange_,this)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,n=[];t.forEach(function(t){e===t.feature&&n.push(t)});for(var r=n.length-1;0<=r;--r)t.remove(n[r])},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),n.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),n.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},t.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},t.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},t.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},t.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},t.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),r={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),r)},t.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r){var o=n[r],s={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},t.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length-1;r<i;++r){var o=n.slice(r,r+2),s={feature:t,geometry:e,index:r,segment:o};this.rBush_.insert(Object(m.b)(o),s)}},t.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[r],index:s,segment:u};this.rBush_.insert(Object(m.b)(u),l)}},t.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[r],index:s,segment:u};this.rBush_.insert(Object(m.b)(u),l)}},t.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length;s<a;++s)for(var u=o[s],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),p={feature:t,geometry:e,depth:[s,r],index:l,segment:h};this.rBush_.insert(Object(m.b)(h),p)}},t.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[n,n]},i={feature:t,geometry:e,index:gt,segment:[n,n]},o=[r,i];r.featureSegments=i.featureSegments=o,this.rBush_.insert(Object(m.m)(n),r),this.rBush_.insert(e.getExtent(),i)},t.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),r=0;r<n.length;++r)this.SEGMENT_WRITERS_[n[r].getType()].call(this,t,n[r])},t.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new $.default(new et.a(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},t.prototype.handleEvent=function(t){return!t.pointerEvent||((this.lastPointerEvent_=t).map.getView().getInteracting()||t.type!=a.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=a.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==a.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),n.prototype.handleEvent.call(this,t)&&!e);var e},t.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,n=0,r=this.dragSegments_.length;n<r;++n){for(var i=this.dragSegments_[n],o=i[0],s=o.depth,a=o.geometry,u=void 0,l=o.segment,c=i[1];e.length<a.getStride();)e.push(l[c][e.length]);switch(a.getType()){case tt.a.POINT:u=e,l[0]=l[1]=e;break;case tt.a.MULTI_POINT:(u=a.getCoordinates())[o.index]=e,l[0]=l[1]=e;break;case tt.a.LINE_STRING:(u=a.getCoordinates())[o.index+c]=e,l[c]=e;break;case tt.a.MULTI_LINE_STRING:case tt.a.POLYGON:(u=a.getCoordinates())[s[0]][o.index+c]=e,l[c]=e;break;case tt.a.MULTI_POLYGON:(u=a.getCoordinates())[s[1]][s[0]][o.index+c]=e,l[c]=e;break;case tt.a.CIRCLE:l[0]=l[1]=e,0===o.index?(this.changingFeature_=!0,a.setCenter(e)):(this.changingFeature_=!0,a.setRadius(Object(v.d)(a.getCenter(),e))),this.changingFeature_=!1}u&&this.setGeometryCoordinates_(a,u)}this.createOrUpdateVertexFeature_(e)},t.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var n=this.vertexFeature_;if(n){var r=[],i=n.getGeometry().getCoordinates(),o=Object(m.b)([i]),s=this.rBush_.getInExtent(o),a={};s.sort(mt);for(var u=0,l=s.length;u<l;++u){var c=s[u],h=c.segment,p=Object(ct.c)(c.feature),f=c.depth;if(f&&(p+="-"+f.join("-")),a[p]||(a[p]=new Array(2)),c.geometry.getType()===tt.a.CIRCLE&&c.index===gt){var d=xt(e,c);Object(v.e)(d,i)&&!a[p][0]&&(this.dragSegments_.push([c,0]),a[p][0]=c)}else if(Object(v.e)(h[0],i)&&!a[p][0])this.dragSegments_.push([c,0]),a[p][0]=c;else if(Object(v.e)(h[1],i)&&!a[p][1]){if((c.geometry.getType()===tt.a.LINE_STRING||c.geometry.getType()===tt.a.MULTI_LINE_STRING)&&a[p][0]&&0===a[p][0].index)continue;this.dragSegments_.push([c,1]),a[p][1]=c}else this.insertVertexCondition_(t)&&Object(ct.c)(h)in this.vertexSegments_&&!a[p][0]&&!a[p][1]&&r.push([c,i])}r.length&&this.willModifyFeatures_(t);for(var g=r.length-1;0<=g;--g)this.insertVertex_.apply(this,r[g])}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;0<=e;--e){var n=this.dragSegments_[e][0],r=n.geometry;if(r.getType()===tt.a.CIRCLE){var i=r.getCenter(),o=n.featureSegments[0],s=n.featureSegments[1];o.segment[0]=o.segment[1]=i,s.segment[0]=s.segment[1]=i,this.rBush_.update(Object(m.m)(i),o),this.rBush_.update(r.getExtent(),s)}else this.rBush_.update(Object(m.b)(n.segment),n)}return this.modified_&&(this.dispatchEvent(new vt(_t,this.features_,t)),this.modified_=!1),!1},t.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},t.prototype.handlePointerAtPixel_=function(t,e){var n=e.getCoordinateFromPixel(t),r=Object(m.c)(Object(m.m)(n),e.getView().getResolution()*this.pixelTolerance_),i=this.rBush_.getInExtent(r);if(0<i.length){i.sort(function(t,e){return bt(n,t)-bt(n,e)});var o=i[0],s=o.segment,a=xt(n,o),u=e.getPixelFromCoordinate(a),l=Object(v.d)(t,u);if(l<=this.pixelTolerance_){var c={};if(o.geometry.getType()===tt.a.CIRCLE&&o.index===gt)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(a);else{var h=e.getPixelFromCoordinate(s[0]),p=e.getPixelFromCoordinate(s[1]),f=Object(v.h)(u,h),d=Object(v.h)(u,p);l=Math.sqrt(Math.min(f,d)),this.snappedToVertex_=l<=this.pixelTolerance_,this.snappedToVertex_&&(a=d<f?s[1]:s[0]),this.createOrUpdateVertexFeature_(a);for(var g=1,y=i.length;g<y;++g){var _=i[g].segment;if(!(Object(v.e)(s[0],_[0])&&Object(v.e)(s[1],_[1])||Object(v.e)(s[0],_[1])&&Object(v.e)(s[1],_[0])))break;c[Object(ct.c)(_)]=!0}}return c[Object(ct.c)(s)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(t,e){for(var n,r=t.segment,i=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case tt.a.MULTI_LINE_STRING:case tt.a.POLYGON:(n=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case tt.a.MULTI_POLYGON:(n=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case tt.a.LINE_STRING:(n=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,n);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,a,s,1);var l={segment:[r[0],e],feature:i,geometry:o,depth:s,index:a};u.insert(Object(m.b)(l.segment),l),this.dragSegments_.push([l,1]);var c={segment:[e,r[1]],feature:i,geometry:o,depth:s,index:a+1};u.insert(Object(m.b)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.a.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new vt(_t,this.features_,t)),!(this.modified_=!1)}return!1},t.prototype.removeVertex_=function(){var t,e,n,r,i,o,s,a,u,l,c,h=this.dragSegments_,p={},f=!1;for(i=h.length-1;0<=i;--i)l=(n=h[i])[0],c=Object(ct.c)(l.feature),l.depth&&(c+="-"+l.depth.join("-")),c in p||(p[c]={}),0===n[1]?(p[c].right=l,p[c].index=l.index):1==n[1]&&(p[c].left=l,p[c].index=l.index+1);for(c in p){switch(u=p[c].right,s=p[c].left,(a=(o=p[c].index)-1)<0&&(a=0),t=e=(r=(l=void 0!==s?s:u).geometry).getCoordinates(),f=!1,r.getType()){case tt.a.MULTI_LINE_STRING:2<e[l.depth[0]].length&&(e[l.depth[0]].splice(o,1),f=!0);break;case tt.a.LINE_STRING:2<e.length&&(e.splice(o,1),f=!0);break;case tt.a.MULTI_POLYGON:t=t[l.depth[1]];case tt.a.POLYGON:4<(t=t[l.depth[0]]).length&&(o==t.length-1&&(o=0),t.splice(o,1),f=!0,0===o&&(t.pop(),t.push(t[0]),a=t.length-1))}if(f){this.setGeometryCoordinates_(r,e);var d=[];if(void 0!==s&&(this.rBush_.remove(s),d.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),d.push(u.segment[1])),void 0!==s&&void 0!==u){var g={depth:l.depth,feature:l.feature,geometry:l.geometry,index:a,segment:d};this.rBush_.insert(Object(m.b)(g.segment),g)}this.updateSegmentIndices_(r,o,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return f},t.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,n,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(t){t.geometry===e&&(void 0===r||void 0===t.depth||Object(pt.b)(t.depth,r))&&t.index>n&&(t.index+=i)})},t}(_.b),wt=n(7),Ot={SELECT:"select"},Ct=function(i){function t(t,e,n,r){i.call(this,t),this.selected=e,this.deselected=n,this.mapBrowserEvent=r}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(b.a);function St(t){if(!this.condition_(t))return!0;var n=this.addCondition_(t),r=this.removeCondition_(t),i=this.toggleCondition_(t),e=!n&&!r&&!i,o=t.map,s=this.getFeatures(),a=[],u=[];if(e){Object(wt.b)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return u.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=s.getLength()-1;0<=l;--l){var c=s.item(l),h=u.indexOf(c);-1<h?u.splice(h,1):(s.remove(c),a.push(c))}0!==u.length&&s.extend(u)}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return!n&&!i||Object(pt.f)(s.getArray(),t)?(r||i)&&Object(pt.f)(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(u.push(t),this.addFeatureLayerAssociation_(t,e)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=a.length-1;0<=p;--p)s.remove(a[p]);s.extend(u)}return(0<u.length||0<a.length)&&this.dispatchEvent(new Ct(Ot.SELECT,u,a,t)),Object(y.pointerMove)(t)}var It=function(s){function t(t){s.call(this,{handleEvent:St});var e=t||{};this.condition_=e.condition?e.condition:y.singleClick,this.addCondition_=e.addCondition?e.addCondition:y.never,this.removeCondition_=e.removeCondition?e.removeCondition:y.never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:y.shiftKeyOnly,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:l.b,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0;var n,r=new nt.a({source:new rt.a({useSpatialIndex:!1,features:e.features,wrapX:e.wrapX}),style:e.style?e.style:function(){var n=Object(it.b)();return Object(pt.c)(n[tt.a.POLYGON],n[tt.a.LINE_STRING]),Object(pt.c)(n[tt.a.GEOMETRY_COLLECTION],n[tt.a.LINE_STRING]),function(t,e){return t.getGeometry()?n[t.getGeometry().getType()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=r,e.layers)if("function"==typeof e.layers)n=e.layers;else{var i=e.layers;n=function(t){return Object(pt.f)(i,t)}}else n=l.b;this.layerFilter_=n,this.featureLayerAssociation_={};var o=this.getFeatures();Object(X.a)(o,ht.a.ADD,this.addFeature_,this),Object(X.a)(o,ht.a.REMOVE,this.removeFeature_,this)}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[Object(ct.c)(t)]=e},t.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(t){return this.featureLayerAssociation_[Object(ct.c)(t)]},t.prototype.getOverlay=function(){return this.featureOverlay_},t.prototype.setHitTolerance=function(t){this.hitTolerance_=t},t.prototype.setMap=function(t){var e=this.getMap(),n=this.getFeatures();e&&n.forEach(e.unskipFeature.bind(e)),s.prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&n.forEach(t.skipFeature.bind(t))},t.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},t.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},t.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Object(ct.c)(t)]},t}(g.a);function Tt(t){return t.feature?t.feature:t.element?t.element:void 0}var Rt=function(i){function t(t){var e=t||{},n=e;n.handleDownEvent||(n.handleDownEvent=l.b),n.stopDown||(n.stopDown=l.a),i.call(this,n),this.source_=e.source?e.source:null,this.vertex_=void 0===e.vertex||e.vertex,this.edge_=void 0===e.edge||e.edge,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.sortByDistance_=function(t,e){var n=Object(v.i)(this.pixelCoordinate_,t.segment),r=Object(v.i)(this.pixelCoordinate_,e.segment);return n-r}.bind(this),this.rBush_=new dt.a,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.addFeature=function(t,e){var n=void 0===e||e,r=Object(ct.c)(t),i=t.getGeometry();if(i){var o=this.SEGMENT_WRITERS_[i.getType()];o&&(this.indexedFeaturesExtents_[r]=i.getExtent(Object(m.j)()),o.call(this,t,i))}n&&(this.featureChangeListenerKeys_[r]=Object(X.a)(t,N.a.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},t.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},t.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},t.prototype.handleEvent=function(t){var e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),i.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(t){var e=Tt(t);this.addFeature(e)},t.prototype.handleFeatureRemove_=function(t){var e=Tt(t);this.removeFeature(e)},t.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var n=Object(ct.c)(e);n in this.pendingFeatures_||(this.pendingFeatures_[n]=e)}else this.updateFeature_(e)},t.prototype.handleUpEvent=function(t){var e=Object(wt.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var n=void 0===t||t,r=Object(ct.c)(e),i=this.indexedFeaturesExtents_[r];if(i){var o=this.rBush_,s=[];o.forEachInExtent(i,function(t){e===t.feature&&s.push(t)});for(var a=s.length-1;0<=a;--a)o.remove(s[a])}n&&(Object(X.e)(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},t.prototype.setMap=function(t){var e=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();e&&(n.forEach(X.e),n.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),i.prototype.setMap.call(this,t),t&&(this.features_?n.push(Object(X.a)(this.features_,ht.a.ADD,this.handleFeatureAdd_,this),Object(X.a)(this.features_,ht.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(Object(X.a)(this.source_,ft.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(X.a)(this.source_,ft.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(t,e,n){var r=n.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i=n.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(m.b)([r,i]),s=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(s=s.filter(function(t){return t.feature.getGeometry().getType()!==tt.a.CIRCLE}));var a,u,l,c,h=!1,p=null,f=null;if(0<s.length){this.pixelCoordinate_=e,s.sort(this.sortByDistance_);var d=s[0].segment,g=s[0].feature.getGeometry().getType()===tt.a.CIRCLE;this.vertex_&&!this.edge_?(a=n.getPixelFromCoordinate(d[0]),u=n.getPixelFromCoordinate(d[1]),l=Object(v.h)(t,a),c=Object(v.h)(t,u),Math.sqrt(Math.min(l,c))<=this.pixelTolerance_&&(h=!0,p=c<l?d[1]:d[0],f=n.getPixelFromCoordinate(p))):this.edge_&&(p=g?Object(v.b)(e,s[0].feature.getGeometry()):Object(v.c)(e,d),f=n.getPixelFromCoordinate(p),Object(v.d)(t,f)<=this.pixelTolerance_&&(h=!0,this.vertex_&&!g&&(a=n.getPixelFromCoordinate(d[0]),u=n.getPixelFromCoordinate(d[1]),l=Object(v.h)(f,a),c=Object(v.h)(f,u),Math.sqrt(Math.min(l,c))<=this.pixelTolerance_&&(p=c<l?d[1]:d[0],f=n.getPixelFromCoordinate(p))))),h&&(f=[Math.round(f[0]),Math.round(f[1])])}return{snapped:h,vertex:p,vertexPixel:f}},t.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},t.prototype.writeCircleGeometry_=function(t,e){for(var n=Object(E.fromCircle)(e).getCoordinates()[0],r=0,i=n.length-1;r<i;++r){var o=n.slice(r,r+2),s={feature:t,segment:o};this.rBush_.insert(Object(m.b)(o),s)}},t.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),r=0;r<n.length;++r){var i=this.SEGMENT_WRITERS_[n[r].getType()];i&&i.call(this,t,n[r])}},t.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length-1;r<i;++r){var o=n.slice(r,r+2),s={feature:t,segment:o};this.rBush_.insert(Object(m.b)(o),s)}},t.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,segment:u};this.rBush_.insert(Object(m.b)(u),l)}},t.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r){var o=n[r],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},t.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length;s<a;++s)for(var u=o[s],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),p={feature:t,segment:h};this.rBush_.insert(Object(m.b)(h),p)}},t.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),r={feature:t,segment:[n,n]};this.rBush_.insert(e.getExtent(),r)},t.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,segment:u};this.rBush_.insert(Object(m.b)(u),l)}},t}(_.b),Lt=n(20),Nt=n(79),Pt="translatestart",Mt="translating",jt="translateend",At=function(r){function t(t,e,n){r.call(this,t),this.features=e,this.coordinate=n}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t}(b.a),Ft=function(i){function t(t){var e,n=t||{};if(i.call(this,n),this.lastCoordinate_=null,this.features_=void 0!==n.features?n.features:null,n.layers)if("function"==typeof n.layers)e=n.layers;else{var r=n.layers;e=function(t){return Object(pt.f)(r,t)}}else e=l.b;this.layerFilter_=e,this.hitTolerance_=n.hitTolerance?n.hitTolerance:0,this.lastFeature_=null,Object(X.a)(this,Object(Lt.b)(Nt.a.ACTIVE),this.handleActiveChanged_,this)}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),this.lastCoordinate_||!this.lastFeature_)return!1;this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new o.a([this.lastFeature_]);return this.dispatchEvent(new At(Pt,e,t.coordinate)),!0},t.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new o.a([this.lastFeature_]);return this.dispatchEvent(new At(jt,e,t.coordinate)),!0}return!1},t.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,n=e[0]-this.lastCoordinate_[0],r=e[1]-this.lastCoordinate_[1],i=this.features_||new o.a([this.lastFeature_]);i.forEach(function(t){var e=t.getGeometry();e.translate(n,r),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new At(Mt,i,e))}},t.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},t.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(pt.f)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.setHitTolerance=function(t){this.hitTolerance_=t},t.prototype.setMap=function(t){var e=this.getMap();i.prototype.setMap.call(this,t),this.updateState_(e)},t.prototype.handleActiveChanged_=function(){this.updateState_(null)},t.prototype.updateState_=function(t){var e=this.getMap(),n=this.getActive();e&&n||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},t}(_.b);function Dt(t){var e=t||{},n=new o.a,r=new i(-.005,.05,100);return void 0!==e.altShiftDragRotate&&!e.altShiftDragRotate||n.push(new p),void 0!==e.doubleClickZoom&&!e.doubleClickZoom||n.push(new u({delta:e.zoomDelta,duration:e.zoomDuration})),void 0!==e.dragPan&&!e.dragPan||n.push(new c({condition:e.onFocusOnly?y.focus:void 0,kinetic:r})),void 0!==e.pinchRotate&&!e.pinchRotate||n.push(new B),void 0!==e.pinchZoom&&!e.pinchZoom||n.push(new Y({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),void 0!==e.keyboard&&!e.keyboard||(n.push(new j),n.push(new F({delta:e.zoomDelta,duration:e.zoomDuration}))),void 0!==e.mouseWheelZoom&&!e.mouseWheelZoom||n.push(new U({condition:e.onFocusOnly?y.focus:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),void 0!==e.shiftDragZoom&&!e.shiftDragZoom||n.push(new L({duration:e.zoomDuration})),n}n.d(e,"defaults",function(){return Dt}),n.d(e,"DoubleClickZoom",function(){return u}),n.d(e,"DragAndDrop",function(){return Z}),n.d(e,"DragBox",function(){return T}),n.d(e,"DragPan",function(){return c}),n.d(e,"DragRotate",function(){return p}),n.d(e,"DragRotateAndZoom",function(){return J}),n.d(e,"DragZoom",function(){return L}),n.d(e,"Draw",function(){return Q.default}),n.d(e,"Extent",function(){return lt}),n.d(e,"Interaction",function(){return g.a}),n.d(e,"KeyboardPan",function(){return j}),n.d(e,"KeyboardZoom",function(){return F}),n.d(e,"Modify",function(){return Et}),n.d(e,"MouseWheelZoom",function(){return U}),n.d(e,"PinchRotate",function(){return B}),n.d(e,"PinchZoom",function(){return Y}),n.d(e,"Pointer",function(){return _.b}),n.d(e,"Select",function(){return It}),n.d(e,"Snap",function(){return Rt}),n.d(e,"Translate",function(){return Ft})},function(t,e,n){"use strict";n.r(e);var p=n(70),i=n(2),T=n(15),v=n(8);function r(t){return t}var o=n(20),f=n(10);var s=n(61),m=n(19),b="center",x="resolution",E="rotation",R=n(11),a=n(16),d=n(35),L=n(0),N=n(3),P=n(30),u=n(7),g=n(9),y=n(37);n.d(e,"createCenterConstraint",function(){return c}),n.d(e,"createResolutionConstraint",function(){return h}),n.d(e,"createRotationConstraint",function(){return w}),n.d(e,"isNoopAnimation",function(){return O});var _=0,l=function(n){function t(t){n.call(this);var e=Object(u.a)({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(g.b)(e.projection,"EPSG:3857"),this.applyOptions_(e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.applyOptions_=function(t){var e={};e[b]=void 0!==t.center?t.center:null;var n=h(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;var r=c(t),i=n.constraint,o=w(t);this.constraints_={center:r,resolution:i,rotation:o},void 0!==t.resolution?e[x]=t.resolution:void 0!==t.zoom&&(e[x]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[x]=Object(v.a)(Number(this.getResolution()||e[x]),this.minResolution_,this.maxResolution_))),e[E]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},t.prototype.getUpdatedOptions_=function(t){var e=Object(u.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(u.a)({},e,t)},t.prototype.animate=function(t){var e,n=arguments,r=arguments.length;if(1<r&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var i=arguments[r-1];return i.center&&this.setCenter(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(e&&M(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),u=this.getRotation(),l=[],c=0;c<r;++c){var h=n[c],p={start:o,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||d.c};if(h.center&&(p.sourceCenter=s,p.targetCenter=h.center,s=p.targetCenter),void 0!==h.zoom?(p.sourceResolution=a,p.targetResolution=this.constrainResolution(this.maxResolution_,h.zoom-this.minZoom_,0),a=p.targetResolution):h.resolution&&(p.sourceResolution=a,p.targetResolution=h.resolution,a=p.targetResolution),void 0!==h.rotation){p.sourceRotation=u;var f=Object(v.d)(h.rotation-u+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=u+f,u=p.targetRotation}p.callback=e,O(p)?p.complete=!0:o+=p.duration,l.push(p)}this.animations_.push(l),this.setHint(m.a.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return 0<this.hints_[m.a.ANIMATING]},t.prototype.getInteracting=function(){return 0<this.hints_[m.a.INTERACTING]},t.prototype.cancelAnimations=function(){this.setHint(m.a.ANIMATING,-this.hints_[m.a.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];n[0].callback&&M(n[0].callback,!1)}this.animations_.length=0},t.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;0<=n;--n){for(var r=this.animations_[n],i=!0,o=0,s=r.length;o<s;++o){var a=r[o];if(!a.complete){var u=t-a.start,l=0<a.duration?u/a.duration:1;1<=l?(a.complete=!0,l=1):i=!1;var c=a.easing(l);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],f=h+c*(a.targetCenter[0]-h),d=p+c*(a.targetCenter[1]-p);this.set(b,[f,d])}if(a.sourceResolution&&a.targetResolution){var g=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(b,this.calculateCenterZoom(g,a.anchor)),this.set(x,g)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var y=1===c?Object(v.d)(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(b,this.calculateCenterRotate(y,a.anchor)),this.set(E,y)}if(e=!0,!a.complete)break}}if(i){this.animations_[n]=null,this.setHint(m.a.ANIMATING,-1);var _=r[0].callback;_&&M(_,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},t.prototype.calculateCenterRotate=function(t,e){var n,r=this.getCenter();return void 0!==r&&(n=[r[0]-e[0],r[1]-e[1]],Object(a.f)(n,t-this.getRotation()),Object(a.a)(n,e)),n},t.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenter(),i=this.getResolution();void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]);return n},t.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Object(i.c)(this)+'"]',n=document.querySelector(e);if(n){var r=getComputedStyle(n);t[0]=parseInt(r.width,10),t[1]=parseInt(r.height,10)}return t},t.prototype.constrainCenter=function(t){return this.constraints_.center(t)},t.prototype.constrainResolution=function(t,e,n){var r=e||0,i=n||0;return this.constraints_.resolution(t,r,i)},t.prototype.constrainRotation=function(t,e){var n=e||0;return this.constraints_.rotation(t,n)},t.prototype.getCenter=function(){return this.get(b)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},t.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenter();Object(R.a)(n,1);var r=this.getResolution();Object(R.a)(void 0!==r,2);var i=this.getRotation();return Object(R.a)(void 0!==i,3),Object(L.z)(n,r,i,e)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(x)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(t,e){var n=e||this.getSizeFromViewport_(),r=Object(L.E)(t)/n[0],i=Object(L.A)(t)/n[1];return Math.max(r,i)},t.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},t.prototype.getRotation=function(){return this.get(E)},t.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/i}},t.prototype.getState=function(t){var e=this.getCenter(),n=this.getProjection(),r=this.getResolution(),i=r/t,o=this.getRotation();return{center:[Math.round(e[0]/i)*i,Math.round(e[1]/i)*i],projection:void 0!==n?n:null,resolution:r,rotation:o,zoom:this.getZoom()}},t.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},t.prototype.getZoomForResolution=function(t){var e,n,r=this.minZoom_||0;if(this.resolutions_){var i=Object(f.h)(this.resolutions_,t,1);r=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)},t.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},t.prototype.fit=function(t,e){var n,r=e||{},i=r.size;i=i||this.getSizeFromViewport_(),Object(R.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(Object(R.a)(!Object(L.H)(t),25),n=Object(P.fromExtent)(t)):t.getType()===N.a.CIRCLE?(t=t.getExtent(),(n=Object(P.fromExtent)(t)).rotate(this.getRotation(),Object(L.x)(t))):n=t;var o,s=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0===r.constrainResolution||r.constrainResolution,u=void 0!==r.nearest&&r.nearest;o=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0):0;for(var l=n.getFlatCoordinates(),c=this.getRotation(),h=Math.cos(-c),p=Math.sin(-c),f=1/0,d=1/0,g=-1/0,y=-1/0,_=n.getStride(),v=0,m=l.length;v<m;v+=_){var b=l[v]*h-l[v+1]*p,x=l[v]*p+l[v+1]*h;f=Math.min(f,b),d=Math.min(d,x),g=Math.max(g,b),y=Math.max(y,x)}var E=this.getResolutionForExtent([f,d,g,y],[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);if(E=isNaN(E)?o:Math.max(E,o),a){var w=this.constrainResolution(E,0,0);!u&&w<E&&(w=this.constrainResolution(w,-1,0)),E=w}p=-p;var O=(f+g)/2,C=(d+y)/2,S=[(O+=(s[1]-s[3])/2*E)*h-(C+=(s[0]-s[2])/2*E)*p,C*h+O*p],I=r.callback?r.callback:T.c;void 0!==r.duration?this.animate({resolution:E,center:S,duration:r.duration,easing:r.easing},I):(this.setResolution(E),this.setCenter(S),M(I,!0))},t.prototype.centerOn=function(t,e,n){var r=this.getRotation(),i=Math.cos(-r),o=Math.sin(-r),s=t[0]*i-t[1]*o,a=t[1]*i+t[0]*o,u=this.getResolution(),l=(s+=(e[0]/2-n[0])*u)*i-(a+=(n[1]-e[1]/2)*u)*(o=-o),c=a*i+s*o;this.setCenter([l,c])},t.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},t.prototype.rotate=function(t,e){if(void 0!==e){var n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)},t.prototype.setCenter=function(t){this.set(b,t),this.getAnimating()&&this.cancelAnimations()},t.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},t.prototype.setResolution=function(t){this.set(x,t),this.getAnimating()&&this.cancelAnimations()},t.prototype.setRotation=function(t){this.set(E,t),this.getAnimating()&&this.cancelAnimations()},t.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},t}(o.a);function M(t,e){setTimeout(function(){t(e)},0)}function c(t){return void 0!==t.extent?function(e){return function(t){return t?[Object(v.a)(t[0],e[0],e[2]),Object(v.a)(t[1],e[1],e[3])]:void 0}}(t.extent):r}function h(t){var e,n,r,i=void 0!==t.minZoom?t.minZoom:_,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;n=a[i],r=void 0!==a[o]?a[o]:a[a.length-1],e=function(s){return function(t,e,n){if(void 0!==t){var r=Object(f.h)(s,t,n);r=Object(v.a)(r+e,0,s.length-1);var i=Math.floor(r);if(r!=i&&i<s.length-1){var o=s[i]/s[i+1];return s[i]/Math.pow(o,r-i)}return s[i]}}}(a)}else{var u=Object(g.b)(t.projection,"EPSG:3857"),l=u.getExtent(),c=(l?Math.max(Object(L.E)(l),Object(L.A)(l)):360*g.a[y.b.DEGREES]/u.getMetersPerUnit())/p.b/Math.pow(2,_),h=c/Math.pow(2,28-_);void 0!==(n=t.maxResolution)?i=0:n=c/Math.pow(s,i),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(s,o):c/Math.pow(s,o):h),o=i+Math.floor(Math.log(n/r)/Math.log(s)),r=n/Math.pow(s,o-i),e=function(s,a,u){return function(t,e,n){if(void 0!==t){var r=-n/2+.5,i=Math.floor(Math.log(a/t)/Math.log(s)+r),o=Math.max(i+e,0);return void 0!==u&&(o=Math.min(o,u)),a/Math.pow(s,o)}}}(s,n,o-i)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:s}}function w(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(s.b)():!1===e?s.d:"number"==typeof e?Object(s.a)(e):s.d}return s.c}function O(t){return!(t.sourceCenter&&t.targetCenter&&!Object(a.e)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}e.default=l},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))l.call(n,s)&&(i[s]=n[s]);if(u){r=u(n);for(var a=0;a<r.length;a++)c.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i}},function(r,t,i){!function(){"use strict";function C(t){var e=t&&t.forEach?t:[].slice.call(arguments),n=!1;if("object"==typeof e[0]){n=e.length;var r=[];e.forEach(function(e){["x","y","z"].forEach(function(t){void 0!==e[t]&&r.push(e[t])})}),e=r}var i=!1,o=e.length;if(n){if(4<n){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var s=!i&&(9===o||12===o)||t&&t[0]&&void 0!==t[0].z,a=[],u=0,l=(this._3d=s)?3:2;u<o;u+=l){var c={x:e[u],y:e[u+1]};s&&(c.z=e[u+2]),a.push(c)}this.order=a.length-1,this.points=a;var h=["x","y"];s&&h.push("z"),this.dims=h,this.dimlen=h.length,function(t){for(var e=t.order,n=t.points,r=S.align(n,{p1:n[0],p2:n[e]}),i=0;i<r.length;i++)if(1e-4<p(r[i].y))return t._linear=!1;t._linear=!0}(this),this._t1=0,this._t2=1,this.update()}var p=Math.abs,e=Math.min,a=Math.max,y=Math.cos,_=Math.sin,o=Math.acos,f=Math.sqrt,s=Math.PI,u={x:0,y:0,z:0},S=i(139),x=i(158),n=i(159);function I(t,e,n,r,i){void 0===i&&(i=.5);var o=S.projectionratio(i,t),s=1-o,a={x:o*e.x+s*r.x,y:o*e.y+s*r.y},u=S.abcratio(i,t);return{A:{x:n.x+(n.x-a.x)/u,y:n.y+(n.y-a.y)/u},B:n,C:a}}C.SVGtoBeziers=function(t){return n(C,t)},C.quadraticFromPoints=function(t,e,n,r){if(void 0===r&&(r=.5),0===r)return new C(e,e,n);if(1===r)return new C(t,e,e);var i=I(2,t,e,n,r);return new C(t,i.A,n)},C.cubicFromPoints=function(t,e,n,r,i){void 0===r&&(r=.5);var o=I(3,t,e,n,r);void 0===i&&(i=S.dist(e,o.C));var s=i*(1-r)/r,a=S.dist(t,n),u=(n.x-t.x)/a,l=(n.y-t.y)/a,c=i*u,h=i*l,p=s*u,f=s*l,d=e.x-c,g=e.y-h,y=e.x+p,_=e.y+f,v=o.A,m=v.x+(d-v.x)/(1-r),b=v.y+(g-v.y)/(1-r),x=v.x+(y-v.x)/r,E=v.y+(_-v.y)/r,w={x:t.x+(m-t.x)/r,y:t.y+(b-t.y)/r},O={x:n.x+(x-n.x)/(1-r),y:n.y+(E-n.y)/(1-r)};return new C(t,w,O,n)};function t(){return S}C.getUtils=t,C.PolyBezier=x,C.prototype={getUtils:t,valueOf:function(){return this.toString()},toString:function(){return S.pointsToString(this.points)},toSVG:function(t){if(this._3d)return!1;for(var e=this.points,n=["M",e[0].x,e[0].y,2===this.order?"Q":"C"],r=1,i=e.length;r<i;r++)n.push(e[r].x),n.push(e[r].y);return n.join(" ")},update:function(){this._lut=[],this.dpoints=S.derive(this.points,this._3d),this.computedirection()},computedirection:function(){var t=this.points,e=S.angle(t[0],t[this.order],t[1]);this.clockwise=0<e},length:function(){return S.length(this.derivative.bind(this))},_lut:[],getLUT:function(t){if(t=t||100,this._lut.length===t)return this._lut;this._lut=[],t--;for(var e=0;e<=t;e++)this._lut.push(this.compute(e/t));return this._lut},on:function(t,e){e=e||5;for(var n,r=this.getLUT(),i=[],o=0,s=0;s<r.length;s++)n=r[s],S.dist(n,t)<e&&(i.push(n),o+=s/r.length);return!!i.length&&o/i.length},project:function(t){var e=this.getLUT(),n=e.length-1,r=S.closest(e,t),i=r.mdist,o=r.mpos;if(0===o||o===n){var s=o/n,a=this.compute(s);return a.t=s,a.d=i,a}var u,l,c,h=(o+1)/n,p=.1/n;for(i+=1,u=s=(o-1)/n;s<h+p;s+=p)l=this.compute(s),(c=S.dist(t,l))<i&&(i=c,u=s);return(l=this.compute(u)).t=u,l.d=i,l},get:function(t){return this.compute(t)},point:function(t){return this.points[t]},compute:function(t){return S.compute(t,this.points,this._3d)},raise:function(){for(var t,e,n=this.points,r=[n[0]],i=n.length,o=1;o<i;o++)t=n[o],e=n[o-1],r[o]={x:(i-o)/i*t.x+o/i*e.x,y:(i-o)/i*t.y+o/i*e.y};return r[i]=n[i-1],new C(r)},derivative:function(t){var e,n,r=1-t,i=0,o=this.dpoints[0];2===this.order&&(o=[o[0],o[1],u],e=r,n=t),3===this.order&&(e=r*r,n=r*t*2,i=t*t);var s={x:e*o[0].x+n*o[1].x+i*o[2].x,y:e*o[0].y+n*o[1].y+i*o[2].y};return this._3d&&(s.z=e*o[0].z+n*o[1].z+i*o[2].z),s},curvature:function(t){return S.curvature(t,this.points,this._3d)},inflections:function(){return S.inflections(this.points)},normal:function(t){return this._3d?this.__normal3(t):this.__normal2(t)},__normal2:function(t){var e=this.derivative(t),n=f(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}},__normal3:function(t){var e=this.derivative(t),n=this.derivative(t+.01),r=f(e.x*e.x+e.y*e.y+e.z*e.z),i=f(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=r,e.y/=r,e.z/=r,n.x/=i,n.y/=i,n.z/=i;var o={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},s=f(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=s,o.y/=s,o.z/=s;var a=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:a[0]*e.x+a[1]*e.y+a[2]*e.z,y:a[3]*e.x+a[4]*e.y+a[5]*e.z,z:a[6]*e.x+a[7]*e.y+a[8]*e.z}},hull:function(t){var e,n=this.points,r=[],i=[],o=0,s=0,a=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],3===this.order&&(i[o++]=n[3]);1<n.length;){for(r=[],s=0,a=n.length-1;s<a;s++)e=S.lerp(t,n[s],n[s+1]),i[o++]=e,r.push(e);n=r}return i},split:function(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;var n=this.hull(t),r={left:2===this.order?new C([n[0],n[3],n[5]]):new C([n[0],n[4],n[7],n[9]]),right:2===this.order?new C([n[5],n[4],n[2]]):new C([n[9],n[8],n[6],n[3]]),span:n};return r.left._t1=S.map(0,0,1,this._t1,this._t2),r.left._t2=S.map(t,0,1,this._t1,this._t2),r.right._t1=S.map(t,0,1,this._t1,this._t2),r.right._t2=S.map(1,0,1,this._t1,this._t2),e?(e=S.map(e,t,1,0,1),r.right.split(e).left):r},extrema:function(){var t,n,e=this.dims,r={},i=[];return e.forEach(function(e){n=function(t){return t[e]},t=this.dpoints[0].map(n),r[e]=S.droots(t),3===this.order&&(t=this.dpoints[1].map(n),r[e]=r[e].concat(S.droots(t))),r[e]=r[e].filter(function(t){return 0<=t&&t<=1}),i=i.concat(r[e].sort(S.numberSort))}.bind(this)),i=i.sort(S.numberSort).filter(function(t,e){return i.indexOf(t)===e}),r.values=i,r},bbox:function(){var e=this.extrema(),n={};return this.dims.forEach(function(t){n[t]=S.getminmax(this,t,e[t])}.bind(this)),n},overlaps:function(t){var e=this.bbox(),n=t.bbox();return S.bboxoverlap(e,n)},offset:function(n,t){if(void 0!==t){var e=this.get(n),r=this.normal(n),i={c:e,n:r,x:e.x+r.x*t,y:e.y+r.y*t};return this._3d&&(i.z=e.z+r.z*t),i}if(this._linear){var o=this.normal(0),s=this.points.map(function(t){var e={x:t.x+n*o.x,y:t.y+n*o.y};return t.z&&r.z&&(e.z=t.z+n*o.z),e});return[new C(s)]}return this.reduce().map(function(t){return t.scale(n)})},simple:function(){if(3===this.order){var t=S.angle(this.points[0],this.points[3],this.points[1]),e=S.angle(this.points[0],this.points[3],this.points[2]);if(0<t&&e<0||t<0&&0<e)return!1}var n=this.normal(0),r=this.normal(1),i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),p(o(i))<s/3},reduce:function(){var t,e,n=0,r=0,i=[],o=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],t=1;t<s.length;t++)r=s[t],(e=this.split(n,r))._t1=n,e._t2=r,i.push(e),n=r;return i.forEach(function(t){for(r=n=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(e=t.split(n,r)).simple()){if(p(n-(r-=.01))<.01)return[];(e=t.split(n,r))._t1=S.map(n,0,1,t._t1,t._t2),e._t2=S.map(r,0,1,t._t1,t._t2),o.push(e),n=r;break}n<1&&((e=t.split(n,1))._t1=S.map(n,0,1,t._t1,t._t2),e._t2=t._t2,o.push(e))}),o},scale:function(o){var s=this.order,a=!1;if("function"==typeof o&&(a=o),a&&2===s)return this.raise().scale(a);var u=this.clockwise,n=a?a(0):o,r=a?a(1):o,i=[this.offset(0,10),this.offset(1,10)],l=S.lli4(i[0],i[0].c,i[1],i[1].c);if(!l)throw new Error("cannot scale this curve. Try reducing it first.");var c=this.points,h=[];return[0,1].forEach(function(t){var e=h[t*s]=S.copy(c[t*s]);e.x+=(t?r:n)*i[t].n.x,e.y+=(t?r:n)*i[t].n.y}.bind(this)),[0,1].forEach(a?function(t){if(2!==this.order||!t){var e=c[t+1],n={x:e.x-l.x,y:e.y-l.y},r=a?a((t+1)/s):o;a&&!u&&(r=-r);var i=f(n.x*n.x+n.y*n.y);n.x/=i,n.y/=i,h[t+1]={x:e.x+r*n.x,y:e.y+r*n.y}}}.bind(this):function(t){if(2!==this.order||!t){var e=h[t*s],n=this.derivative(t),r={x:e.x+n.x,y:e.y+n.y};h[t+1]=S.lli4(e,r,l,c[t+1])}}.bind(this)),new C(h)},outline:function(e,n,r,i){n=void 0===n?e:n;var o,t=this.reduce(),s=t.length,a=[],u=[],l=0,c=this.length(),h=void 0!==r&&void 0!==i;function p(i,o,s,a,u){return function(t){var e=a/s,n=(a+u)/s,r=o-i;return S.map(t,0,1,i+e*r,i+n*r)}}t.forEach(function(t){b=t.length(),h?(a.push(t.scale(p(e,r,c,l,b))),u.push(t.scale(p(-n,-i,c,l,b)))):(a.push(t.scale(e)),u.push(t.scale(-n))),l+=b}),u=u.map(function(t){return(o=t.points)[3]?t.points=[o[3],o[2],o[1],o[0]]:t.points=[o[2],o[1],o[0]],t}).reverse();var f=a[0].points[0],d=a[s-1].points[a[s-1].points.length-1],g=u[s-1].points[u[s-1].points.length-1],y=u[0].points[0],_=S.makeline(g,f),v=S.makeline(d,y),m=[_].concat(a).concat([v]).concat(u),b=m.length;return new x(m)},outlineshapes:function(t,e,n){e=e||t;for(var r=this.outline(t,e).curves,i=[],o=1,s=r.length;o<s/2;o++){var a=S.makeshape(r[o],r[s-o],n);a.startcap.virtual=1<o,a.endcap.virtual=o<s/2-1,i.push(a)}return i},intersects:function(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof C&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)},lineIntersects:function(t){var n=e(t.p1.x,t.p2.x),r=e(t.p1.y,t.p2.y),i=a(t.p1.x,t.p2.x),o=a(t.p1.y,t.p2.y),s=this;return S.roots(this.points,t).filter(function(t){var e=s.get(t);return S.between(e.x,n,i)&&S.between(e.y,r,o)})},selfintersects:function(t){var e,n,r,i,o=this.reduce(),s=o.length-2,a=[];for(e=0;e<s;e++)r=o.slice(e,e+1),i=o.slice(e+2),n=this.curveintersects(r,i,t),a=a.concat(n);return a},curveintersects:function(t,n,r){var i=[];t.forEach(function(e){n.forEach(function(t){e.overlaps(t)&&i.push({left:e,right:t})})});var o=[];return i.forEach(function(t){var e=S.pairiteration(t.left,t.right,r);0<e.length&&(o=o.concat(e))}),o},arcs:function(t){t=t||.5;return this._iterate(t,[])},_error:function(t,e,n,r){var i=(r-n)/4,o=this.get(n+i),s=this.get(r-i),a=S.dist(t,e),u=S.dist(t,o),l=S.dist(t,s);return p(u-a)+p(l-a)},_iterate:function(t,e){var n,r=0,i=1;do{n=0,i=1;var o,s,a,u,l,c=this.get(r),h=!1,p=!1,f=i,d=1;do{if(p=h,u=a,f=(r+i)/2,0,o=this.get(f),s=this.get(i),(a=S.getccenter(c,o,s)).interval={start:r,end:i},h=this._error(a,c,r,i)<=t,(l=p&&!h)||(d=i),h){if(1<=i){if(a.interval.end=d=1,u=a,1<i){var g={x:a.x+a.r*y(a.e),y:a.y+a.r*_(a.e)};a.e+=S.angle({x:a.x,y:a.y},g,this.get(1))}break}i+=(i-r)/2}else i=f}while(!l&&n++<100);if(100<=n)break;u=u||a,e.push(u),r=d}while(i<1);return e}},r.exports=C}()},function(e,t,f){!function(){"use strict";function S(t){return t<0?-c(-t,1/3):c(t,1/3)}var l=Math.abs,I=Math.cos,C=Math.sin,T=Math.acos,R=Math.atan2,L=Math.sqrt,c=Math.pow,t=Math.PI,N=2*t,P=t/2,h=Number.MAX_SAFE_INTEGER||9007199254740991,p=Number.MIN_SAFE_INTEGER||-9007199254740991,g={x:0,y:0,z:0},M={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){var n=e(t),r=n.x*n.x+n.y*n.y;return void 0!==n.z&&(r+=n.z*n.z),L(r)},compute:function(t,e,n){if(0===t)return e[0];var r=e.length-1;if(1===t)return e[r];var i=e,o=1-t;if(0==r)return e[0];if(1==r)return p={x:o*i[0].x+t*i[1].x,y:o*i[0].y+t*i[1].y},n&&(p.z=o*i[0].z+t*i[1].z),p;if(r<4){var s,a,u,l=o*o,c=t*t,h=0;2==r?(i=[i[0],i[1],i[2],g],s=l,a=o*t*2,u=c):3==r&&(s=l*o,a=l*t*3,u=o*c*3,h=t*c);var p={x:s*i[0].x+a*i[1].x+u*i[2].x+h*i[3].x,y:s*i[0].y+a*i[1].y+u*i[2].y+h*i[3].y};return n&&(p.z=s*i[0].z+a*i[1].z+u*i[2].z+h*i[3].z),p}for(var f=JSON.parse(JSON.stringify(e));1<f.length;){for(var d=0;d<f.length-1;d++)f[d]={x:f[d].x+(f[d+1].x-f[d].x)*t,y:f[d].y+(f[d+1].y-f[d].y)*t},void 0!==f[d].z&&(f[d]=f[d].z+(f[d+1].z-f[d].z)*t);f.splice(f.length-1,1)}return f[0]},derive:function(t,e){for(var n=[],r=t,i=r.length,o=i-1;1<i;i--,o--){for(var s,a=[],u=0;u<o;u++)s={x:o*(r[u+1].x-r[u].x),y:o*(r[u+1].y-r[u].y)},e&&(s.z=o*(r[u+1].z-r[u].z)),a.push(s);n.push(a),r=a}return n},between:function(t,e,n){return e<=t&&t<=n||M.approximately(t,e)||M.approximately(t,n)},approximately:function(t,e,n){return l(t-e)<=(n||1e-6)},length:function(t){var e,n,r=0,i=M.Tvalues.length;for(e=0;e<i;e++)n=.5*M.Tvalues[e]+.5,r+=M.Cvalues[e]*M.arcfn(n,t);return.5*r},map:function(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))},lerp:function(t,e,n){var r={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return e.z&&n.z&&(r.z=e.z+t*(n.z-e.z)),r},pointToString:function(t){var e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(M.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,s=n.y-t.y;return R(r*s-i*o,r*o+i*s)},round:function(t,e){var n=""+t,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+e))},dist:function(t,e){var n=t.x-e.x,r=t.y-e.y;return L(n*n+r*r)},closest:function(t,n){var r,i,o=c(2,63);return t.forEach(function(t,e){(i=M.dist(n,t))<o&&(o=i,r=e)}),{mdist:o,mpos:r}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var n=c(t,e)+c(1-t,e);return l((n-1)/n)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var n=c(1-t,e);return n/(c(t,e)+n)},lli8:function(t,e,n,r,i,o,s,a){var u=(t-n)*(o-a)-(e-r)*(i-s);return 0!=u&&{x:((t*r-e*n)*(i-s)-(t-n)*(i*a-o*s))/u,y:((t*r-e*n)*(o-a)-(e-r)*(i*a-o*s))/u}},lli4:function(t,e,n,r){var i=t.x,o=t.y,s=e.x,a=e.y,u=n.x,l=n.y,c=r.x,h=r.y;return M.lli8(i,o,s,a,u,l,c,h)},lli:function(t,e){return M.lli4(t,t.c,e,e.c)},makeline:function(t,e){var n=f(138),r=t.x,i=t.y,o=e.x,s=e.y,a=(o-r)/3,u=(s-i)/3;return new n(r,i,r+a,i+u,r+2*a,i+2*u,o,s)},findbbox:function(t){var n=h,r=h,i=p,o=p;return t.forEach(function(t){var e=t.bbox();n>e.x.min&&(n=e.x.min),r>e.y.min&&(r=e.y.min),i<e.x.max&&(i=e.x.max),o<e.y.max&&(o=e.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(r,t,i,e,o){if(!M.bboxoverlap(t,e))return[];var s=[],n=[r.startcap,r.forward,r.back,r.endcap],a=[i.startcap,i.forward,i.back,i.endcap];return n.forEach(function(n){n.virtual||a.forEach(function(t){if(!t.virtual){var e=n.intersects(t,o);0<e.length&&(e.c1=n,e.c2=t,e.s1=r,e.s2=i,s.push(e))}})}),s},makeshape:function(t,e,n){var r=e.points.length,i=t.points.length,o=M.makeline(e.points[r-1],t.points[0]),s=M.makeline(t.points[i-1],e.points[0]),a={startcap:o,forward:t,back:e,endcap:s,bbox:M.findbbox([o,t,e,s])},u=M;return a.intersections=function(t){return u.shapeintersections(a,a.bbox,t,t.bbox,n)},a},getminmax:function(t,e,n){if(!n)return{min:0,max:0};var r,i,o=h,s=p;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(var a=0,u=n.length;a<u;a++)r=n[a],(i=t.get(r))[e]<o&&(o=i[e]),i[e]>s&&(s=i[e]);return{min:o,mid:(o+s)/2,max:s,size:s-o}},align:function(t,e){var n=e.p1.x,r=e.p1.y,i=-R(e.p2.y-r,e.p2.x-n);return t.map(function(t){return{x:(t.x-n)*I(i)-(t.y-r)*C(i),y:(t.x-n)*C(i)+(t.y-r)*I(i)}})},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};function n(t){return 0<=t&&t<=1}var r=t.length-1,i=M.align(t,e);if(2==r){if(0===(c=(h=i[0].y)-2*(p=i[1].y)+(f=i[2].y)))return p!==f&&0===c?[(2*p-f)/(2*p-2*f)].filter(n):[];var o=-L(p*p-h*f),s=-h+p;return[-(o+s)/c,-(-o+s)/c].filter(n)}var a=i[0].y,u=i[1].y,l=i[2].y,c=3*u-a-3*l+i[3].y,h=3*a-6*u+3*l,p=-3*a+3*u,f=a;if(M.approximately(c,0)){if(M.approximately(h,0))return M.approximately(p,0)?[]:[-f/p].filter(n);var d=2*h;return[((g=L(p*p-4*h*f))-p)/d,(-p-g)/d].filter(n)}var g,y,_=(i=(3*(p/=c)-(h/=c)*h)/3)/3,v=(g=(2*h*h*h-9*h*p+27*(f/=c))/27)/2,m=v*v+_*_*_;if(m<0){var b=-i/3,x=L(b*b*b),E=-g/(2*x),w=T(E<-1?-1:1<E?1:E),O=2*S(x);return[O*I(w/3)-h/3,O*I((w+N)/3)-h/3,O*I((w+2*N)/3)-h/3].filter(n)}if(0==m)return[2*(y=v<0?S(-v):-S(v))-h/3,-y-h/3].filter(n);var C=L(m);return[(y=S(-v+C))-S(v+C)-h/3].filter(n)},droots:function(t){if(3===t.length){var e=t[0],n=t[1],r=t[2],i=e-2*n+r;if(0===i)return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[];var o=-L(n*n-e*r),s=-e+n;return[-(o+s)/i,-(-o+s)/i]}if(2===t.length)return(e=t[0])!==(n=t[1])?[e/(e-n)]:[]},curvature:function(t,e,n){var r,i,o=M.derive(e),s=o[0],a=o[1],u=M.compute(t,s),l=M.compute(t,a);return i=n?(r=L(c(u.y*l.z-l.y*u.z,2)+c(u.z*l.x-l.z*u.x,2)+c(u.x*l.y-l.x*u.y,2)),c(u.x*u.x+u.y*u.y+u.z*u.z,1.5)):(r=u.x*l.y-u.y*l.x,c(u.x*u.x+u.y*u.y,1.5)),0===r||0===i?{k:0,r:0}:{k:r/i,r:i/r}},inflections:function(t){if(t.length<4)return[];var e=M.align(t,{p1:t[0],p2:t.slice(-1)[0]}),n=e[2].x*e[1].y,r=e[3].x*e[1].y,i=e[1].x*e[2].y,o=18*(-3*n+2*r+3*i-(h=e[3].x*e[2].y)),s=18*(3*n-r-3*i),a=18*(i-n);if(M.approximately(o,0)){if(!M.approximately(s,0)){var u=-a/s;if(0<=u&&u<=1)return[u]}return[]}var l=s*s-4*o*a,c=Math.sqrt(l),h=2*o;return M.approximately(h,0)?[]:[(c-s)/h,-(s+c)/h].filter(function(t){return 0<=t&&t<=1})},bboxoverlap:function(t,e){var n,r,i,o,s,a=["x","y"],u=a.length;for(n=0;n<u;n++)if(i=t[r=a[n]].mid,o=e[r].mid,s=(t[r].size+e[r].size)/2,l(i-o)>=s)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,n){var r=t.bbox(),i=e.bbox(),o=n||.5;if(r.x.size+r.y.size<o&&i.x.size+i.y.size<o)return[(1e5*(t._t1+t._t2)/2|0)/1e5+"/"+(1e5*(e._t1+e._t2)/2|0)/1e5];var s=t.split(.5),a=e.split(.5),u=[{left:s.left,right:a.left},{left:s.left,right:a.right},{left:s.right,right:a.right},{left:s.right,right:a.left}];u=u.filter(function(t){return M.bboxoverlap(t.left.bbox(),t.right.bbox())});var l=[];return 0===u.length?l:(u.forEach(function(t){l=l.concat(M.pairiteration(t.left,t.right,o))}),l=l.filter(function(t,e){return l.indexOf(t)===e}))},getccenter:function(t,e,n){var r,i=e.x-t.x,o=e.y-t.y,s=n.x-e.x,a=n.y-e.y,u=i*I(P)-o*C(P),l=i*C(P)+o*I(P),c=s*I(P)-a*C(P),h=s*C(P)+a*I(P),p=(t.x+e.x)/2,f=(t.y+e.y)/2,d=(e.x+n.x)/2,g=(e.y+n.y)/2,y=p+u,_=f+l,v=d+c,m=g+h,b=M.lli8(p,f,y,_,d,g,v,m),x=M.dist(b,t),E=R(t.y-b.y,t.x-b.x),w=R(e.y-b.y,e.x-b.x),O=R(n.y-b.y,n.x-b.x);return E<O?((w<E||O<w)&&(E+=N),O<E&&(r=O,O=E,E=r)):O<w&&w<E?(r=O,O=E,E=r):O+=N,b.s=E,b.e=O,b.r=x,b},numberSort:function(t,e){return t-e}};e.exports=M}()},function(t,e){t.exports=function(n){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(n[i]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),s.push(o))}},s}},function(t,e,n){var r,i,o,u={},l=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=(o={},function(t){if("function"==typeof t)return t();if(void 0===o[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}o[t]=e}return o[t]}),a=null,c=0,h=[],p=n(163);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=u[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(m(r.parts[o],e))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(m(r.parts[o],e));u[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function g(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function _(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),v(e,t.attrs),g(t,e),e}function v(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function m(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var s=c++;n=a=a||_(t),r=E.bind(null,n,s,!1),i=E.bind(null,n,s,!0)}else i=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),g(t,e),e}(t),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=p(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,t),function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=_(t),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=l()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=d(t,s);return f(a,s),function(t){for(var e=[],n=0;n<a.length;n++){var r=a[n];(i=u[r.id]).refs--,e.push(i)}t&&f(d(t,s),s);for(n=0;n<e.length;n++){var i;if(0===(i=e[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete u[i.id]}}}};var b,x=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function E(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=x(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},function(t,e,n){var r=n(153);e.Processor=r},function(t,e,n){"use strict";var r=s(n(107)),i=s(n(145)),o=s(n(150));function s(t){return t&&t.__esModule?t:{default:t}}i.default.render(r.default.createElement(o.default,null),document.getElementById("root"))},function(t,e,n){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c=n(137),r="function"==typeof Symbol&&Symbol.for,h=r?Symbol.for("react.element"):60103,l=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,a=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,_="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,s,a){if(!t){if((t=void 0)===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,a],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function x(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}function E(){}function w(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&v("85"),this.updater.enqueueSetState(this,t,e,"setState")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},E.prototype=x.prototype;var O=w.prototype=new E;O.constructor=w,c(O,x.prototype),O.isPureReactComponent=!0;var C={current:null},S={current:null},I=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function R(t,e,n){var r=void 0,i={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)I.call(e,r)&&!T.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:h,type:t,key:o,ref:s,props:i,_owner:S.current}}function L(t){return"object"==typeof t&&null!==t&&t.$$typeof===h}var N=/\/+/g,P=[];function M(t,e,n,r){if(P.length){var i=P.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function j(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,P.length<10&&P.push(t)}function A(t,e,n){return null==t?0:function t(e,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var s=!1;if(null===e)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case h:case l:s=!0}}if(s)return r(i,e,""===n?"."+F(e,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(e))for(var a=0;a<e.length;a++){var u=n+F(o=e[a],a);s+=t(o,u,r,i)}else if("function"==typeof(u=null===e||"object"!=typeof e?null:"function"==typeof(u=_&&e[_]||e["@@iterator"])?u:null))for(e=u.call(e),a=0;!(o=e.next()).done;)s+=t(o=o.value,u=n+F(o,a++),r,i);else"object"===o&&v("31","[object Object]"==(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return s}(t,"",e,n)}function F(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function D(t,e){t.func.call(t.context,e,t.count++)}function k(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?G(t,r,n,function(t){return t}):null!=t&&(L(t)&&(t=function(t,e){return{$$typeof:h,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(N,"$&/")+"/")+n)),r.push(t))}function G(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(N,"$&/")+"/"),A(t,k,e=M(e,o,r,i)),j(e)}function z(){var t=C.current;return null===t&&v("321"),t}var U={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return G(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;A(t,D,e=M(null,null,e,n)),j(e)},count:function(t){return A(t,function(){return null},null)},toArray:function(t){var e=[];return G(t,e,null,function(t){return t}),e},only:function(t){return L(t)||v("143"),t}},createRef:function(){return{current:null}},Component:x,PureComponent:w,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:u,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:g,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return z().useCallback(t,e)},useContext:function(t,e){return z().useContext(t,e)},useEffect:function(t,e){return z().useEffect(t,e)},useImperativeHandle:function(t,e,n){return z().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return z().useLayoutEffect(t,e)},useMemo:function(t,e){return z().useMemo(t,e)},useReducer:function(t,e,n){return z().useReducer(t,e,n)},useRef:function(t){return z().useRef(t)},useState:function(t){return z().useState(t)},Fragment:i,StrictMode:o,Suspense:d,createElement:R,cloneElement:function(t,e,n){null==t&&v("267",t);var r=void 0,i=c({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){void 0!==e.ref&&(s=e.ref,a=S.current),void 0!==e.key&&(o=""+e.key);var u=void 0;for(r in t.type&&t.type.defaultProps&&(u=t.type.defaultProps),e)I.call(e,r)&&!T.hasOwnProperty(r)&&(i[r]=void 0===e[r]&&void 0!==u?u[r]:e[r])}if(1===(r=arguments.length-2))i.children=n;else if(1<r){u=Array(r);for(var l=0;l<r;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:h,type:t.type,key:o,ref:s,props:i,_owner:a}},createFactory:function(t){var e=R.bind(null,t);return e.type=t,e},isValidElement:L,version:"16.8.6",unstable_ConcurrentMode:p,unstable_Profiler:s,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:C,ReactCurrentOwner:S,assign:c}},B=U;t.exports=B.default||B},function(t,e,n){"use strict";(function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}})(),t.exports=n(146)},function(t,e,n){"use strict";
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(107),v=n(137),a=n(147);function m(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,s,a){if(!t){if((t=void 0)===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,a],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||m("227");var c=!1,h=null,p=!1,f=null,l={onError:function(t){c=!0,h=t}};function d(t,e,n,r,i,o,s,a,u){c=!1,h=null,function(t,e,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}.apply(l,arguments)}var g=null,y={};function i(){if(g)for(var t in y){var e=y[t],n=g.indexOf(t);if(-1<n||m("96",t),!b[n])for(var r in e.extractEvents||m("97",t),n=(b[n]=e).eventTypes){var i=void 0,o=n[r],s=e,a=r;x.hasOwnProperty(a)&&m("99",a);var u=(x[a]=o).phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&_(u[i],s,a);i=!0}else i=!!o.registrationName&&(_(o.registrationName,s,a),!0);i||m("98",r,t)}}}function _(t,e,n){E[t]&&m("100",t),E[t]=e,u[t]=e.eventTypes[n].dependencies}var b=[],x={},E={},u={},o=null,s=null,w=null;function O(t,e,n){var r=t.type||"unknown-event";t.currentTarget=w(n),function(t,e,n,r,i,o,s,a,u){if(d.apply(this,arguments),c){if(c){var l=h;c=!1,h=null}else m("198"),l=void 0;p||(p=!0,f=l)}}(r,e,void 0,t),t.currentTarget=null}function C(t,e){return null==e&&m("30"),null==t?e:Array.isArray(t)?(Array.isArray(e)?t.push.apply(t,e):t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function S(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var I=null;function T(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)O(t,e[r],n[r]);else e&&O(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var R={injectEventPluginOrder:function(t){g&&m("101"),g=Array.prototype.slice.call(t),i()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];y.hasOwnProperty(e)&&y[e]===r||(y[e]&&m("102",e),y[e]=r,n=!0)}n&&i()}};function L(t,e){var n=t.stateNode;if(!n)return null;var r=o(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!=typeof n&&m("231",e,typeof n),n)}function N(t){if(null!==t&&(I=C(I,t)),t=I,I=null,t&&(S(t,T),I&&m("95"),p))throw t=f,p=!1,f=null,t}var P=Math.random().toString(36).slice(2),M="__reactInternalInstance$"+P,j="__reactEventHandlers$"+P;function A(t){if(t[M])return t[M];for(;!t[M];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[M]).tag||6===t.tag?t:null}function F(t){return!(t=t[M])||5!==t.tag&&6!==t.tag?null:t}function D(t){if(5===t.tag||6===t.tag)return t.stateNode;m("33")}function k(t){return t[j]||null}function G(t){for(;(t=t.return)&&5!==t.tag;);return t||null}function z(t,e,n){(e=L(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=C(n._dispatchListeners,e),n._dispatchInstances=C(n._dispatchInstances,t))}function U(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=G(e);for(e=n.length;0<e--;)z(n[e],"captured",t);for(e=0;e<n.length;e++)z(n[e],"bubbled",t)}}function B(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=L(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=C(n._dispatchListeners,e),n._dispatchInstances=C(n._dispatchInstances,t))}function Y(t){t&&t.dispatchConfig.registrationName&&B(t._targetInst,null,t)}function X(t){S(t,U)}var q=!("undefined"==typeof window||!window.document||!window.document.createElement);function V(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var W={animationend:V("Animation","AnimationEnd"),animationiteration:V("Animation","AnimationIteration"),animationstart:V("Animation","AnimationStart"),transitionend:V("Transition","TransitionEnd")},K={},H={};function Z(t){if(K[t])return K[t];if(!W[t])return t;var e,n=W[t];for(e in n)if(n.hasOwnProperty(e)&&e in H)return K[t]=n[e];return t}q&&(H=document.createElement("div").style,"AnimationEvent"in window||(delete W.animationend.animation,delete W.animationiteration.animation,delete W.animationstart.animation),"TransitionEvent"in window||delete W.transitionend.transition);var J=Z("animationend"),Q=Z("animationiteration"),$=Z("animationstart"),tt=Z("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nt=null,rt=null,it=null;function ot(){if(it)return it;var t,e,n=rt,r=n.length,i="value"in nt?nt.value:nt.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return it=i.slice(t,1<e?1-e:void 0)}function st(){return!0}function at(){return!1}function ut(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?st:at,this.isPropagationStopped=at,this}function lt(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ct(t){t instanceof this||m("279"),t.destructor(),this.eventPool.length<10&&this.eventPool.push(t)}function ht(t){t.eventPool=[],t.getPooled=lt,t.release=ct}v(ut.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=st)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=st)},persist:function(){this.isPersistent=st},isPersistent:at,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=at,this._dispatchInstances=this._dispatchListeners=null}}),ut.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ut.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var i=new e;return v(i,n.prototype),((n.prototype=i).constructor=n).Interface=v({},r.Interface,t),n.extend=r.extend,ht(n),n},ht(ut);var pt=ut.extend({data:null}),ft=ut.extend({data:null}),dt=[9,13,27,32],gt=q&&"CompositionEvent"in window,yt=null;q&&"documentMode"in document&&(yt=document.documentMode);var _t=q&&"TextEvent"in window&&!yt,vt=q&&(!gt||yt&&8<yt&&yt<=11),mt=String.fromCharCode(32),bt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xt=!1;function Et(t,e){switch(t){case"keyup":return-1!==dt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function wt(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Ot=!1;var Ct={eventTypes:bt,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(gt)t:{switch(t){case"compositionstart":i=bt.compositionStart;break t;case"compositionend":i=bt.compositionEnd;break t;case"compositionupdate":i=bt.compositionUpdate;break t}i=void 0}else Ot?Et(t,n)&&(i=bt.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=bt.compositionStart);return o=i?(vt&&"ko"!==n.locale&&(Ot||i!==bt.compositionStart?i===bt.compositionEnd&&Ot&&(o=ot()):(rt="value"in(nt=r)?nt.value:nt.textContent,Ot=!0)),i=pt.getPooled(i,e,n,r),o?i.data=o:null!==(o=wt(n))&&(i.data=o),X(i),i):null,(t=_t?function(t,e){switch(t){case"compositionend":return wt(e);case"keypress":return 32!==e.which?null:(xt=!0,mt);case"textInput":return(t=e.data)===mt&&xt?null:t;default:return null}}(t,n):function(t,e){if(Ot)return"compositionend"===t||!gt&&Et(t,e)?(t=ot(),it=rt=nt=null,Ot=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=ft.getPooled(bt.beforeInput,e,n,r)).data=t,X(e)):e=null,null===o?e:null===e?o:[o,e]}},St=null,It=null,Tt=null;function Rt(t){if(t=s(t)){"function"!=typeof St&&m("280");var e=o(t.stateNode);St(t.stateNode,t.type,e)}}function Lt(t){It?Tt?Tt.push(t):Tt=[t]:It=t}function Nt(){if(It){var t=It,e=Tt;if(Tt=It=null,Rt(t),e)for(t=0;t<e.length;t++)Rt(e[t])}}function Pt(t,e){return t(e)}function Mt(t,e,n){return t(e,n)}function jt(){}var At=!1;function Ft(t,e){if(At)return t(e);At=!0;try{return Pt(t,e)}finally{At=!1,null===It&&null===Tt||(jt(),Nt())}}var Dt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Dt[t.type]:"textarea"===e}function Gt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function zt(t){if(!q)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function Ut(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Bt(t){t._valueTracker||(t._valueTracker=function(t){var e=Ut(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Yt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ut(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var Xt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Xt.hasOwnProperty("ReactCurrentDispatcher")||(Xt.ReactCurrentDispatcher={current:null});var qt=/^(.*)[\\\/]/,Vt="function"==typeof Symbol&&Symbol.for,Wt=Vt?Symbol.for("react.element"):60103,Kt=Vt?Symbol.for("react.portal"):60106,Ht=Vt?Symbol.for("react.fragment"):60107,Zt=Vt?Symbol.for("react.strict_mode"):60108,Jt=Vt?Symbol.for("react.profiler"):60114,Qt=Vt?Symbol.for("react.provider"):60109,$t=Vt?Symbol.for("react.context"):60110,te=Vt?Symbol.for("react.concurrent_mode"):60111,ee=Vt?Symbol.for("react.forward_ref"):60112,ne=Vt?Symbol.for("react.suspense"):60113,re=Vt?Symbol.for("react.memo"):60115,ie=Vt?Symbol.for("react.lazy"):60116,oe="function"==typeof Symbol&&Symbol.iterator;function se(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function ae(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case te:return"ConcurrentMode";case Ht:return"Fragment";case Kt:return"Portal";case Jt:return"Profiler";case Zt:return"StrictMode";case ne:return"Suspense"}if("object"==typeof t)switch(t.$$typeof){case $t:return"Context.Consumer";case Qt:return"Context.Provider";case ee:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case re:return ae(t.type);case ie:if(t=1===t._status?t._result:null)return ae(t)}return null}function ue(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=ae(t.type);n=null,r&&(n=ae(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(qt,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}var le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,he={},pe={};function fe(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){de[t]=new fe(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];de[e]=new fe(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){de[t]=new fe(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){de[t]=new fe(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){de[t]=new fe(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){de[t]=new fe(t,3,!0,t,null)}),["capture","download"].forEach(function(t){de[t]=new fe(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){de[t]=new fe(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){de[t]=new fe(t,5,!1,t.toLowerCase(),null)});var ge=/[\-:]([a-z])/g;function ye(t){return t[1].toUpperCase()}function _e(t,e,n,r){var i=de.hasOwnProperty(e)?de[e]:null;(null!==i?0!==i.type:r||(!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1]))&&(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||e<1}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!ce.call(pe,t)||!ce.call(he,t)&&(le.test(t)?pe[t]=!0:!(he[t]=!0))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ve(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function me(t,e){var n=e.checked;return v({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function be(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=ve(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function xe(t,e){null!=(e=e.checked)&&_e(t,"checked",e,!1)}function Ee(t,e){xe(t,e);var n=ve(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Oe(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oe(t,e.type,ve(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function we(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Oe(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ge,ye);de[e]=new fe(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ge,ye);de[e]=new fe(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ge,ye);de[e]=new fe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(t){de[t]=new fe(t,1,!1,t.toLowerCase(),null)});var Ce={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Se(t,e,n){return(t=ut.getPooled(Ce.change,t,e,n)).type="change",Lt(n),X(t),t}var Ie=null,Te=null;function Re(t){N(t)}function Le(t){if(Yt(D(t)))return t}function Ne(t,e){if("change"===t)return e}var Pe=!1;function Me(){Ie&&(Ie.detachEvent("onpropertychange",je),Te=Ie=null)}function je(t){"value"===t.propertyName&&Le(Te)&&Ft(Re,t=Se(Te,t,Gt(t)))}function Ae(t,e,n){"focus"===t?(Me(),Te=n,(Ie=e).attachEvent("onpropertychange",je)):"blur"===t&&Me()}function Fe(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Le(Te)}function De(t,e){if("click"===t)return Le(e)}function ke(t,e){if("input"===t||"change"===t)return Le(e)}q&&(Pe=zt("input")&&(!document.documentMode||9<document.documentMode));var Ge={eventTypes:Ce,_isInputEventSupported:Pe,extractEvents:function(t,e,n,r){var i=e?D(e):window,o=void 0,s=void 0,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type?o=Ne:kt(i)?Pe?o=ke:(o=Fe,s=Ae):!(a=i.nodeName)||"input"!==a.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(o=De),o=o&&o(t,e))return Se(o,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Oe(i,"number",i.value)}},ze=ut.extend({view:null,detail:null}),Ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Be(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ue[t])&&!!e[t]}function Ye(){return Be}var Xe=0,qe=0,Ve=!1,We=!1,Ke=ze.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ye,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Xe;return Xe=t.screenX,Ve?"mousemove"===t.type?t.screenX-e:0:(Ve=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=qe;return qe=t.screenY,We?"mousemove"===t.type?t.screenY-e:0:(We=!0,0)}}),He=Ke.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ze={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Je={eventTypes:Ze,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?A(e):null):o=null,o===e)return null;var s=void 0,a=void 0,u=void 0,l=void 0;"mouseout"===t||"mouseover"===t?(s=Ke,a=Ze.mouseLeave,u=Ze.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(s=He,a=Ze.pointerLeave,u=Ze.pointerEnter,l="pointer");var c=null==o?i:D(o);if(i=null==e?i:D(e),(t=s.getPooled(a,o,n,r)).type=l+"leave",t.target=c,t.relatedTarget=i,(n=s.getPooled(u,e,n,r)).type=l+"enter",n.target=i,n.relatedTarget=c,r=e,o&&r)t:{for(i=r,l=0,s=e=o;s;s=G(s))l++;for(s=0,u=i;u;u=G(u))s++;for(;0<l-s;)e=G(e),l--;for(;0<s-l;)i=G(i),s--;for(;l--;){if(e===i||e===i.alternate)break t;e=G(e),i=G(i)}e=null}else e=null;for(i=e,e=[];o&&o!==i&&(null===(l=o.alternate)||l!==i);)e.push(o),o=G(o);for(o=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)o.push(r),r=G(r);for(r=0;r<e.length;r++)B(e[r],"bubbled",t);for(r=o.length;0<r--;)B(o[r],"captured",n);return[t,n]}};function Qe(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e}var $e=Object.prototype.hasOwnProperty;function tn(t,e){if(Qe(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!$e.call(e,n[r])||!Qe(t[n[r]],e[n[r]]))return!1;return!0}function en(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function nn(t){2!==en(t)&&m("188")}function rn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=en(t))&&m("188"),1===e?null:t;for(var n=t,r=e;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return nn(i),t;if(s===r)return nn(i),e;s=s.sibling}m("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}s||m("189")}}n.alternate!==r&&m("190")}return 3!==n.tag&&m("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e=(e.child.return=e).child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var on=ut.extend({animationName:null,elapsedTime:null,pseudoElement:null}),sn=ut.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),an=ze.extend({relatedTarget:null});function un(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn=ze.extend({key:function(t){if(t.key){var e=ln[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=un(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?cn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ye,charCode:function(t){return"keypress"===t.type?un(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?un(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),pn=Ke.extend({dataTransfer:null}),fn=ze.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ye}),dn=ut.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),gn=Ke.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),yn=[["abort","abort"],[J,"animationEnd"],[Q,"animationIteration"],[$,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[tt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],_n={},vn={};function mn(t,e){var n=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},_n[t]=e,vn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){mn(t,!0)}),yn.forEach(function(t){mn(t,!1)});var bn={eventTypes:_n,isInteractiveTopLevelEventType:function(t){return void 0!==(t=vn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=vn[t];if(!i)return null;switch(t){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":t=hn;break;case"blur":case"focus":t=an;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ke;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=fn;break;case J:case Q:case $:t=on;break;case tt:t=dn;break;case"scroll":t=ze;break;case"wheel":t=gn;break;case"copy":case"cut":case"paste":t=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=He;break;default:t=ut}return X(e=t.getPooled(i,e,n,r)),e}},xn=bn.isInteractiveTopLevelEventType,En=[];function wn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=A(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Gt(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,s=null,a=0;a<b.length;a++){var u=b[a];(u=u&&u.extractEvents(r,e,o,i))&&(s=C(s,u))}N(s)}}var On=!0;function Cn(t,e){if(!e)return null;var n=(xn(t)?In:Tn).bind(null,t);e.addEventListener(t,n,!1)}function Sn(t,e){if(!e)return null;var n=(xn(t)?In:Tn).bind(null,t);e.addEventListener(t,n,!0)}function In(t,e){Mt(Tn,t,e)}function Tn(t,e){if(On){var n=Gt(e);if(null===(n=A(n))||"number"!=typeof n.tag||2===en(n)||(n=null),En.length){var r=En.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Ft(wn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,En.length<10&&En.push(t)}}}var Rn={},Ln=0,Nn="_reactListenersID"+(""+Math.random()).slice(2);function Pn(t){return Object.prototype.hasOwnProperty.call(t,Nn)||(t[Nn]=Ln++,Rn[t[Nn]]={}),Rn[t[Nn]]}function Mn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function jn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function An(t,e){var n,r=jn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&e<=n)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=jn(r)}}function Fn(){for(var t=window,e=Mn();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Mn((t=e.contentWindow).document)}return e}function Dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function kn(t){var e=Fn(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Dn(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&r<o&&(i=r,r=o,o=i),i=An(n,o);var s=An(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),r<o?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gn=q&&"documentMode"in document&&document.documentMode<=11,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Un=null,Bn=null,Yn=null,Xn=!1;function qn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Xn||null==Un||Un!==Mn(n)?null:(n="selectionStart"in(n=Un)&&Dn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Yn&&tn(Yn,n)?null:(Yn=n,(t=ut.getPooled(zn.select,Bn,t,e)).type="select",t.target=Un,X(t),t))}var Vn={eventTypes:zn,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=Pn(o),i=u.onSelect;for(var s=0;s<i.length;s++){var a=i[s];if(!o.hasOwnProperty(a)||!o[a]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?D(e):window,t){case"focus":!kt(o)&&"true"!==o.contentEditable||(Un=o,Bn=e,Yn=null);break;case"blur":Yn=Bn=Un=null;break;case"mousedown":Xn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Xn=!1,qn(n,r);case"selectionchange":if(Gn)break;case"keydown":case"keyup":return qn(n,r)}return null}};function Wn(t,e){return t=v({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function Kn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ve(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Hn(t,e){return null!=e.dangerouslySetInnerHTML&&m("91"),v({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zn(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&m("92"),Array.isArray(e)&&(e.length<=1||m("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:ve(n)}}function Jn(t,e){var n=ve(e.value),r=ve(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Qn(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}R.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),o=k,s=F,w=D,R.injectEventPluginsByName({SimpleEventPlugin:bn,EnterLeaveEventPlugin:Je,ChangeEventPlugin:Ge,SelectEventPlugin:Vn,BeforeInputEventPlugin:Ct});var $n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function tr(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?tr(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var nr,rr=void 0,ir=(nr=function(t,e){if(t.namespaceURI!==$n.svg||"innerHTML"in t)t.innerHTML=e;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=rr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(t,e)})}:nr);function or(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var sr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ar=["Webkit","ms","Moz","O"];function ur(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||sr.hasOwnProperty(t)&&sr[t]?(""+e).trim():e+"px"}function lr(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ur(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(sr).forEach(function(e){ar.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sr[t]=sr[e]})});var cr=v({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(t,e){e&&(cr[t]&&(null==e.children&&null==e.dangerouslySetInnerHTML||m("137",t,"")),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&m("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||m("61")),null!=e.style&&"object"!=typeof e.style&&m("62",""))}function pr(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fr(t,e){var n=Pn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=u[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Sn("scroll",t);break;case"focus":case"blur":Sn("focus",t),Sn("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":zt(i)&&Sn(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(i)&&Cn(i,t)}n[i]=!0}}}function dr(){}var gr=null,yr=null;function _r(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var mr="function"==typeof setTimeout?setTimeout:void 0,br="function"==typeof clearTimeout?clearTimeout:void 0,xr=a.unstable_scheduleCallback,Er=a.unstable_cancelCallback;function wr(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Or(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var Cr=[],Sr=-1;function Ir(t){Sr<0||(t.current=Cr[Sr],Cr[Sr]=null,Sr--)}function Tr(t,e){Cr[++Sr]=t.current,t.current=e}var Rr={},Lr={current:Rr},Nr={current:!1},Pr=Rr;function Mr(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function jr(t){return null!=(t=t.childContextTypes)}function Ar(){Ir(Nr),Ir(Lr)}function Fr(){Ir(Nr),Ir(Lr)}function Dr(t,e,n){Lr.current!==Rr&&m("168"),Tr(Lr,e),Tr(Nr,n)}function kr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in t||m("108",ae(e)||"Unknown",i);return v({},n,r)}function Gr(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Rr,Pr=Lr.current,Tr(Lr,e),Tr(Nr,Nr.current),!0}function zr(t,e,n){var r=t.stateNode;r||m("169"),n?(e=kr(t,e,Pr),r.__reactInternalMemoizedMergedChildContext=e,Ir(Nr),Ir(Lr),Tr(Lr,e)):Ir(Nr),Tr(Nr,n)}var Ur=null,Br=null;function Yr(e){return function(t){try{return e(t)}catch(t){}}}function Xr(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function qr(t,e,n,r){return new Xr(t,e,n,r)}function Vr(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Wr(t,e){var n=t.alternate;return null===n?((n=qr(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,(n.alternate=t).alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.contextDependencies=t.contextDependencies,n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kr(t,e,n,r,i,o){var s=2;if("function"==typeof(r=t))Vr(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case Ht:return Hr(n.children,i,o,e);case te:return Zr(n,3|i,o,e);case Zt:return Zr(n,2|i,o,e);case Jt:return(t=qr(12,n,e,4|i)).elementType=Jt,t.type=Jt,t.expirationTime=o,t;case ne:return(t=qr(13,n,e,i)).elementType=ne,t.type=ne,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case Qt:s=10;break t;case $t:s=9;break t;case ee:s=11;break t;case re:s=14;break t;case ie:s=16,r=null;break t}m("130",null==t?t:typeof t,"")}return(e=qr(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Hr(t,e,n,r){return(t=qr(7,t,r,e)).expirationTime=n,t}function Zr(t,e,n,r){return t=qr(8,t,r,e),e=0==(1&e)?Zt:te,t.elementType=e,t.type=e,t.expirationTime=n,t}function Jr(t,e,n){return(t=qr(6,t,null,e)).expirationTime=n,t}function Qr(t,e,n){return(e=qr(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $r(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),ni(e,t)}function ti(t,e){t.didError=!1,t.latestPingedTime>=e&&(t.latestPingedTime=0);var n=t.earliestPendingTime,r=t.latestPendingTime;n===e?t.earliestPendingTime=r===e?t.latestPendingTime=0:r:r===e&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,r=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=e:n<e?t.earliestSuspendedTime=e:e<r&&(t.latestSuspendedTime=e),ni(e,t)}function ei(t,e){var n=t.earliestPendingTime;return e<n&&(e=n),e<(t=t.earliestSuspendedTime)&&(e=t),e}function ni(t,e){var n=e.earliestSuspendedTime,r=e.latestSuspendedTime,i=e.earliestPendingTime,o=e.latestPingedTime;0===(i=0!==i?i:o)&&(0===t||r<t)&&(i=r),0!==(t=i)&&t<n&&(t=n),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}function ri(t,e){if(t&&t.defaultProps)for(var n in e=v({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var ii=(new r.Component).refs;function oi(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:v({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var si={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===en(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Ea(),i=Zo(r=Hs(r,t));i.payload=e,null!=n&&(i.callback=n),Ys(),Qo(t,i),Qs(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Ea(),i=Zo(r=Hs(r,t));i.tag=Xo,i.payload=e,null!=n&&(i.callback=n),Ys(),Qo(t,i),Qs(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ea(),r=Zo(n=Hs(n,t));r.tag=qo,null!=e&&(r.callback=e),Ys(),Qo(t,r),Qs(t,n)}};function ai(t,e,n,r,i,o,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!tn(n,r)||!tn(i,o))}function ui(t,e,n){var r=!1,i=Rr,o=e.contextType;return e=new e(n,o="object"==typeof o&&null!==o?Bo(o):(i=jr(e)?Pr:Lr.current,(r=null!=(r=e.contextTypes))?Mr(t,i):Rr)),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=si,(t.stateNode=e)._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function li(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&si.enqueueReplaceState(e,e.state,null)}function ci(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ii;var o=e.contextType;"object"==typeof o&&null!==o?i.context=Bo(o):(o=jr(e)?Pr:Lr.current,i.context=Mr(t,o)),null!==(o=t.updateQueue)&&(ns(t,o,n,i,r),i.state=t.memoizedState),"function"==typeof(o=e.getDerivedStateFromProps)&&(oi(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&si.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(ns(t,o,n,i,r),i.state=t.memoizedState)),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var hi=Array.isArray;function pi(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&m("309"),r=n.stateNode),r||m("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===ii&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!=typeof t&&m("284"),n._owner||m("290",t)}return t}function fi(t,e){"textarea"!==t.type&&m("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function di(h){function p(t,e){if(h){var n=t.lastEffect;null!==n?(n.nextEffect=e,t.lastEffect=e):t.firstEffect=t.lastEffect=e,e.nextEffect=null,e.effectTag=8}}function f(t,e){if(!h)return null;for(;null!==e;)p(t,e),e=e.sibling;return null}function d(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(t,e){return(t=Wr(t,e)).index=0,t.sibling=null,t}function g(t,e,n){return t.index=n,h?null!==(n=t.alternate)?(n=n.index)<e?(t.effectTag=2,e):n:(t.effectTag=2,e):e}function a(t){return h&&null===t.alternate&&(t.effectTag=2),t}function o(t,e,n,r){return null===e||6!==e.tag?(e=Jr(n,t.mode,r)).return=t:(e=s(e,n)).return=t,e}function u(t,e,n,r){return null!==e&&e.elementType===n.type?(r=s(e,n.props)).ref=pi(t,e,n):(r=Kr(n.type,n.key,n.props,null,t.mode,r)).ref=pi(t,e,n),r.return=t,r}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=Qr(n,t.mode,r)).return=t:(e=s(e,n.children||[])).return=t,e}function c(t,e,n,r,i){return null===e||7!==e.tag?(e=Hr(n,t.mode,r,i)).return=t:(e=s(e,n)).return=t,e}function y(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Jr(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Wt:return(n=Kr(e.type,e.key,e.props,null,t.mode,n)).ref=pi(t,null,e),n.return=t,n;case Kt:return(e=Qr(e,t.mode,n)).return=t,e}if(hi(e)||se(e))return(e=Hr(e,t.mode,n,null)).return=t,e;fi(t,e)}return null}function _(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:o(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Wt:return n.key===i?n.type===Ht?c(t,e,n.props.children,r,i):u(t,e,n,r):null;case Kt:return n.key===i?l(t,e,n,r):null}if(hi(n)||se(n))return null!==i?null:c(t,e,n,r,null);fi(t,n)}return null}function v(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return o(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Wt:return t=t.get(null===r.key?n:r.key)||null,r.type===Ht?c(e,t,r.props.children,i,r.key):u(e,t,r,i);case Kt:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(hi(r)||se(r))return c(e,t=t.get(n)||null,r,i,null);fi(e,r)}return null}return function(t,e,n,r){var i="object"==typeof n&&null!==n&&n.type===Ht&&null===n.key;i&&(n=n.props.children);var o="object"==typeof n&&null!==n;if(o)switch(n.$$typeof){case Wt:t:{for(o=n.key,i=e;null!==i;){if(i.key===o){if(7===i.tag?n.type===Ht:i.elementType===n.type){f(t,i.sibling),(e=s(i,n.type===Ht?n.props.children:n.props)).ref=pi(t,i,n),e.return=t,t=e;break t}f(t,i);break}p(t,i),i=i.sibling}t=n.type===Ht?((e=Hr(n.props.children,t.mode,r,n.key)).return=t,e):((r=Kr(n.type,n.key,n.props,null,t.mode,r)).ref=pi(t,e,n),r.return=t,r)}return a(t);case Kt:t:{for(i=n.key;null!==e;){if(e.key===i){if(4===e.tag&&e.stateNode.containerInfo===n.containerInfo&&e.stateNode.implementation===n.implementation){f(t,e.sibling),(e=s(e,n.children||[])).return=t,t=e;break t}f(t,e);break}p(t,e),e=e.sibling}(e=Qr(n,t.mode,r)).return=t,t=e}return a(t)}if("string"==typeof n||"number"==typeof n)return n=""+n,a(t=((e=null!==e&&6===e.tag?(f(t,e.sibling),s(e,n)):(f(t,e),Jr(n,t.mode,r))).return=t,e));if(hi(n))return function(e,t,n,r){for(var i=null,o=null,s=t,a=t=0,u=null;null!==s&&a<n.length;a++){s.index>a?(u=s,s=null):u=s.sibling;var l=_(e,s,n[a],r);if(null===l){null===s&&(s=u);break}h&&s&&null===l.alternate&&p(e,s),t=g(l,t,a),null===o?i=l:o.sibling=l,o=l,s=u}if(a===n.length)return f(e,s),i;if(null===s){for(;a<n.length;a++)(s=y(e,n[a],r))&&(t=g(s,t,a),null===o?i=s:o.sibling=s,o=s);return i}for(s=d(e,s);a<n.length;a++)(u=v(s,e,a,n[a],r))&&(h&&null!==u.alternate&&s.delete(null===u.key?a:u.key),t=g(u,t,a),null===o?i=u:o.sibling=u,o=u);return h&&s.forEach(function(t){return p(e,t)}),i}(t,e,n,r);if(se(n))return function(e,t,n,r){var i=se(n);"function"!=typeof i&&m("150"),null==(n=i.call(n))&&m("151");for(var o=i=null,s=t,a=t=0,u=null,l=n.next();null!==s&&!l.done;a++,l=n.next()){s.index>a?(u=s,s=null):u=s.sibling;var c=_(e,s,l.value,r);if(null===c){s=s||u;break}h&&s&&null===c.alternate&&p(e,s),t=g(c,t,a),null===o?i=c:o.sibling=c,o=c,s=u}if(l.done)return f(e,s),i;if(null===s){for(;!l.done;a++,l=n.next())null!==(l=y(e,l.value,r))&&(t=g(l,t,a),null===o?i=l:o.sibling=l,o=l);return i}for(s=d(e,s);!l.done;a++,l=n.next())null!==(l=v(s,e,a,l.value,r))&&(h&&null!==l.alternate&&s.delete(null===l.key?a:l.key),t=g(l,t,a),null===o?i=l:o.sibling=l,o=l);return h&&s.forEach(function(t){return p(e,t)}),i}(t,e,n,r);if(o&&fi(t,n),void 0===n&&!i)switch(t.tag){case 1:case 0:m("152",(r=t.type).displayName||r.name||"Component")}return f(t,e)}}var gi=di(!0),yi=di(!1),_i={},vi={current:_i},mi={current:_i},bi={current:_i};function xi(t){return t===_i&&m("174"),t}function Ei(t,e){Tr(bi,e),Tr(mi,t),Tr(vi,_i);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:er(null,"");break;default:e=er(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}Ir(vi),Tr(vi,e)}function wi(){Ir(vi),Ir(mi),Ir(bi)}function Oi(t){xi(bi.current);var e=xi(vi.current),n=er(e,t.type);e!==n&&(Tr(mi,t),Tr(vi,n))}function Ci(t){mi.current===t&&(Ir(vi),Ir(mi))}var Si=0,Ii=2,Ti=4,Ri=8,Li=16,Ni=32,Pi=64,Mi=128,ji=Xt.ReactCurrentDispatcher,Ai=0,Fi=null,Di=null,ki=null,Gi=null,zi=null,Ui=null,Bi=0,Yi=null,Xi=0,qi=!1,Vi=null,Wi=0;function Ki(){m("321")}function Hi(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qe(t[n],e[n]))return!1;return!0}function Zi(t,e,n,r,i,o){if(Ai=o,Fi=e,ki=null!==t?t.memoizedState:null,ji.current=null===ki?lo:co,e=n(r,i),qi){for(;qi=!1,Wi+=1,ki=null!==t?t.memoizedState:null,Ui=Gi,Yi=zi=Di=null,ji.current=co,e=n(r,i),qi;);Vi=null,Wi=0}return ji.current=uo,(t=Fi).memoizedState=Gi,t.expirationTime=Bi,t.updateQueue=Yi,t.effectTag|=Xi,t=null!==Di&&null!==Di.next,Ui=zi=Gi=ki=Di=Fi=null,Yi=null,Xi=Bi=Ai=0,t&&m("300"),e}function Ji(){ji.current=uo,Ui=zi=Gi=ki=Di=Fi=null,qi=!1,Vi=Yi=null,Wi=Xi=Bi=Ai=0}function Qi(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===zi?Gi=zi=t:zi=zi.next=t,zi}function $i(){if(null!==Ui)Ui=(zi=Ui).next,ki=null!==(Di=ki)?Di.next:null;else{null===ki&&m("310");var t={memoizedState:(Di=ki).memoizedState,baseState:Di.baseState,queue:Di.queue,baseUpdate:Di.baseUpdate,next:null};zi=null===zi?Gi=t:zi.next=t,ki=Di.next}return zi}function to(t,e){return"function"==typeof e?e(t):e}function eo(t){var e=$i(),n=e.queue;if(null===n&&m("311"),n.lastRenderedReducer=t,0<Wi){var r=n.dispatch;if(null!==Vi){var i=Vi.get(n);if(void 0!==i){Vi.delete(n);for(var o=e.memoizedState;o=t(o,i.action),null!==(i=i.next););return Qe(o,e.memoizedState)||(Eo=!0),e.memoizedState=o,e.baseUpdate===n.last&&(e.baseState=o),[n.lastRenderedState=o,r]}}return[e.memoizedState,r]}r=n.last;var s=e.baseUpdate;if(o=e.baseState,null!==(r=null!==s?(null!==r&&(r.next=null),s.next):null!==r?r.next:null)){var a=i=null,u=r,l=!1;do{var c=u.expirationTime;c<Ai?(l||(l=!0,a=s,i=o),Bi<c&&(Bi=c)):o=u.eagerReducer===t?u.eagerState:t(o,u.action),u=(s=u).next}while(null!==u&&u!==r);l||(a=s,i=o),Qe(o,e.memoizedState)||(Eo=!0),e.memoizedState=o,e.baseUpdate=a,e.baseState=i,n.lastRenderedState=o}return[e.memoizedState,n.dispatch]}function no(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===Yi?(Yi={lastEffect:null}).lastEffect=t.next=t:null===(e=Yi.lastEffect)?Yi.lastEffect=t.next=t:(n=e.next,(e.next=t).next=n,Yi.lastEffect=t),t}function ro(t,e,n,r){var i=Qi();Xi|=t,i.memoizedState=no(e,n,void 0,void 0===r?null:r)}function io(t,e,n,r){var i=$i();r=void 0===r?null:r;var o=void 0;if(null!==Di){var s=Di.memoizedState;if(o=s.destroy,null!==r&&Hi(r,s.deps))return void no(Si,n,o,r)}Xi|=t,i.memoizedState=no(e,n,o,r)}function oo(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function so(){}function ao(t,e,n){Wi<25||m("301");var r=t.alternate;if(t===Fi||null!==r&&r===Fi)if(qi=!0,t={expirationTime:Ai,action:n,eagerReducer:null,eagerState:null,next:null},null===Vi&&(Vi=new Map),void 0===(n=Vi.get(e)))Vi.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{Ys();var i=Ea(),o={expirationTime:i=Hs(i,t),action:n,eagerReducer:null,eagerState:null,next:null},s=e.last;if(null===s)o.next=o;else{var a=s.next;null!==a&&(o.next=a),s.next=o}if(e.last=o,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var u=e.lastRenderedState,l=r(u,n);if(o.eagerReducer=r,Qe(o.eagerState=l,u))return}catch(t){}Qs(t,i)}}var uo={readContext:Bo,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useLayoutEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki},lo={readContext:Bo,useCallback:function(t,e){return Qi().memoizedState=[t,void 0===e?null:e],t},useContext:Bo,useEffect:function(t,e){return ro(516,Mi|Pi,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,ro(4,Ti|Ni,oo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ro(4,Ti|Ni,t,e)},useMemo:function(t,e){var n=Qi();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qi();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ao.bind(null,Fi,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Qi().memoizedState=t},useState:function(t){var e=Qi();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:to,lastRenderedState:t}).dispatch=ao.bind(null,Fi,t),[e.memoizedState,t]},useDebugValue:so},co={readContext:Bo,useCallback:function(t,e){var n=$i();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Hi(e,r[1])?r[0]:(n.memoizedState=[t,e],t)},useContext:Bo,useEffect:function(t,e){return io(516,Mi|Pi,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,io(4,Ti|Ni,oo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return io(4,Ti|Ni,t,e)},useMemo:function(t,e){var n=$i();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Hi(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:eo,useRef:function(){return $i().memoizedState},useState:function(t){return eo(to)},useDebugValue:so},ho=null,po=null,fo=!1;function go(t,e){var n=qr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function yo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function _o(t){if(fo){var e=po;if(e){var n=e;if(!yo(t,e)){if(!(e=wr(n))||!yo(t,e))return t.effectTag|=2,fo=!1,void(ho=t);go(ho,n)}ho=t,po=Or(e)}else t.effectTag|=2,fo=!1,ho=t}}function vo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;ho=t}function mo(t){if(t!==ho)return!1;if(!fo)return vo(t),!(fo=!0);var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vr(e,t.memoizedProps))for(e=po;e;)go(t,e),e=wr(e);return vo(t),po=ho?wr(t.stateNode):null,!0}function bo(){po=ho=null,fo=!1}var xo=Xt.ReactCurrentOwner,Eo=!1;function wo(t,e,n,r){e.child=null===t?yi(e,null,n,r):gi(e,t.child,n,r)}function Oo(t,e,n,r,i){n=n.render;var o=e.ref;return Uo(e,i),r=Zi(t,e,n,r,o,i),null===t||Eo?(e.effectTag|=1,wo(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Mo(t,e,i))}function Co(t,e,n,r,i,o){if(null!==t)return s=t.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:tn)(i,r)&&t.ref===e.ref)?Mo(t,e,o):(e.effectTag|=1,(t=Wr(s,r)).ref=e.ref,(t.return=e).child=t);var s=n.type;return"function"!=typeof s||Vr(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Kr(n.type,null,r,null,e.mode,o)).ref=e.ref,(t.return=e).child=t):(e.tag=15,e.type=s,So(t,e,s,r,i,o))}function So(t,e,n,r,i,o){return null!==t&&tn(t.memoizedProps,r)&&t.ref===e.ref&&(Eo=!1,i<o)?Mo(t,e,o):To(t,e,n,r,o)}function Io(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function To(t,e,n,r,i){var o=jr(n)?Pr:Lr.current;return o=Mr(e,o),Uo(e,i),n=Zi(t,e,n,r,o,i),null===t||Eo?(e.effectTag|=1,wo(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Mo(t,e,i))}function Ro(t,e,n,r,i){if(jr(n)){var o=!0;Gr(e)}else o=!1;if(Uo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),ui(e,n,r),ci(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=n.contextType;l="object"==typeof l&&null!==l?Bo(l):Mr(e,l=jr(n)?Pr:Lr.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||a===r&&u===l||li(e,s,r,l),Wo=!1;var p=e.memoizedState;u=s.state=p;var f=e.updateQueue;null!==f&&(ns(e,f,r,s,i),u=e.memoizedState),r=a!==r||p!==u||Nr.current||Wo?("function"==typeof c&&(oi(e,n,c,r),u=e.memoizedState),(a=Wo||ai(e,n,a,r,p,u,l))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.effectTag|=4)):("function"==typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,a):("function"==typeof s.componentDidMount&&(e.effectTag|=4),!1)}else s=e.stateNode,a=e.memoizedProps,s.props=e.type===e.elementType?a:ri(e.type,a),u=s.context,l="object"==typeof(l=n.contextType)&&null!==l?Bo(l):Mr(e,l=jr(n)?Pr:Lr.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a===r&&u===l||li(e,s,r,l)),Wo=!1,u=e.memoizedState,p=s.state=u,null!==(f=e.updateQueue)&&(ns(e,f,r,s,i),p=e.memoizedState),r=a!==r||u!==p||Nr.current||Wo?("function"==typeof c&&(oi(e,n,c,r),p=e.memoizedState),(c=Wo||ai(e,n,a,r,u,p,l))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(e.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,c):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),!1);return Lo(t,e,n,r,o,i)}function Lo(t,e,n,r,i,o){Io(t,e);var s=0!=(64&e.effectTag);if(!r&&!s)return i&&zr(e,n,!1),Mo(t,e,o);r=e.stateNode,xo.current=e;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&s?(e.child=gi(e,t.child,null,o),e.child=gi(e,null,a,o)):wo(t,e,a,o),e.memoizedState=r.state,i&&zr(e,n,!0),e.child}function No(t){var e=t.stateNode;e.pendingContext?Dr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Dr(0,e.context,!1),Ei(t,e.containerInfo)}function Po(t,e,n){var r=e.mode,i=e.pendingProps,o=e.memoizedState;if(0==(64&e.effectTag)){o=null;var s=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},s=!0,e.effectTag&=-65;if(null===t)if(s){var a=i.fallback;t=Hr(null,r,0,null),0==(1&e.mode)&&(t.child=null!==e.memoizedState?e.child.child:e.child),r=Hr(a,r,n,null),t.sibling=r,(n=t).return=r.return=e}else n=r=yi(e,null,i.children,n);else null!==t.memoizedState?(a=(r=t.child).sibling,s?(n=i.fallback,i=Wr(r,r.pendingProps),0==(1&e.mode)&&((s=null!==e.memoizedState?e.child.child:e.child)!==r.child&&(i.child=s)),r=i.sibling=Wr(a,n,a.expirationTime),(n=i).childExpirationTime=0,n.return=r.return=e):n=r=gi(e,r.child,i.children,n)):(a=t.child,s?(s=i.fallback,(i=Hr(null,r,0,null)).child=a,0==(1&e.mode)&&(i.child=null!==e.memoizedState?e.child.child:e.child),(r=i.sibling=Hr(s,r,n,null)).effectTag|=2,(n=i).childExpirationTime=0,n.return=r.return=e):r=n=gi(e,a,i.children,n)),e.stateNode=t.stateNode;return e.memoizedState=o,e.child=n,r}function Mo(t,e,n){if(null!==t&&(e.contextDependencies=t.contextDependencies),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child&&m("153"),null!==e.child){for(n=Wr(t=e.child,t.pendingProps,t.expirationTime),(e.child=n).return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Wr(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function jo(t,e,n){var r=e.expirationTime;if(null!==t){if(t.memoizedProps!==e.pendingProps||Nr.current)Eo=!0;else if(r<n){switch(Eo=!1,e.tag){case 3:No(e),bo();break;case 5:Oi(e);break;case 1:jr(e.type)&&Gr(e);break;case 4:Ei(e,e.stateNode.containerInfo);break;case 10:Go(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&n<=r?Po(t,e,n):null!==(e=Mo(t,e,n))?e.sibling:null}return Mo(t,e,n)}}else Eo=!1;switch(e.expirationTime=0,e.tag){case 2:r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var i=Mr(e,Lr.current);if(Uo(e,n),i=Zi(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,Ji(),jr(r)){var o=!0;Gr(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&oi(e,r,s,t),i.updater=si,ci((e.stateNode=i)._reactInternalFiber=e,r,t,n),e=Lo(null,e,r,!0,o,n)}else e.tag=0,wo(null,e,i,n),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),o=e.pendingProps,t=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t}}(i),e.type=t,i=e.tag=function(t){if("function"==typeof t)return Vr(t)?1:0;if(null!=t){if((t=t.$$typeof)===ee)return 11;if(t===re)return 14}return 2}(t),o=ri(t,o),s=void 0,i){case 0:s=To(null,e,t,o,n);break;case 1:s=Ro(null,e,t,o,n);break;case 11:s=Oo(null,e,t,o,n);break;case 14:s=Co(null,e,t,ri(t.type,o),r,n);break;default:m("306",t,"")}return s;case 0:return r=e.type,i=e.pendingProps,To(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ro(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 3:return No(e),null===(r=e.updateQueue)&&m("282"),i=null!==(i=e.memoizedState)?i.element:null,ns(e,r,e.pendingProps,null,n),e=(r=e.memoizedState.element)===i?(bo(),Mo(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(po=Or(e.stateNode.containerInfo),ho=e,i=fo=!0),i?(e.effectTag|=2,e.child=yi(e,null,r,n)):(wo(t,e,r,n),bo()),e.child);case 5:return Oi(e),null===t&&_o(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,vr(r,i)?s=null:null!==o&&vr(r,o)&&(e.effectTag|=16),Io(t,e),e=1!==n&&1&e.mode&&i.hidden?(e.expirationTime=e.childExpirationTime=1,null):(wo(t,e,s,n),e.child);case 6:return null===t&&_o(e),null;case 13:return Po(t,e,n);case 4:return Ei(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=gi(e,null,r,n):wo(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Oo(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 7:return wo(t,e,e.pendingProps,n),e.child;case 8:case 12:return wo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,Go(e,o=i.value),null!==s){var a=s.value;if(0===(o=Qe(a,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(a,o):1073741823))){if(s.children===i.children&&!Nr.current){e=Mo(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var u=a.contextDependencies;if(null!==u){s=a.child;for(var l=u.first;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===a.tag&&((l=Zo(n)).tag=qo,Qo(a,l)),a.expirationTime<n&&(a.expirationTime=n),null!==(l=a.alternate)&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var c=a.return;null!==c;){var h=c.alternate;if(c.childExpirationTime<l)c.childExpirationTime=l,null!==h&&h.childExpirationTime<l&&(h.childExpirationTime=l);else{if(!(null!==h&&h.childExpirationTime<l))break;h.childExpirationTime=l}c=c.return}u.expirationTime<n&&(u.expirationTime=n);break}l=l.next}}else s=10===a.tag&&a.type===e.type?null:a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}wo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,Uo(e,n),r=r(i=Bo(i,o.unstable_observedBits)),e.effectTag|=1,wo(t,e,r,n),e.child;case 14:return o=ri(i=e.type,e.pendingProps),Co(t,e,i,o=ri(i.type,o),r,n);case 15:return So(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ri(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,jr(r)?(t=!0,Gr(e)):t=!1,Uo(e,n),ui(e,r,i),ci(e,r,i,n),Lo(null,e,r,!0,t,n)}m("156")}var Ao={current:null},Fo=null,Do=null,ko=null;function Go(t,e){var n=t.type._context;Tr(Ao,n._currentValue),n._currentValue=e}function zo(t){var e=Ao.current;Ir(Ao),t.type._context._currentValue=e}function Uo(t,e){ko=Do=null;var n=(Fo=t).contextDependencies;null!==n&&n.expirationTime>=e&&(Eo=!0),t.contextDependencies=null}function Bo(t,e){return ko!==t&&!1!==e&&0!==e&&("number"==typeof e&&1073741823!==e||(ko=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Do?(null===Fo&&m("308"),Do=e,Fo.contextDependencies={first:e,expirationTime:0}):Do=Do.next=e),t._currentValue}var Yo=0,Xo=1,qo=2,Vo=3,Wo=!1;function Ko(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ho(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Zo(t){return{expirationTime:t,tag:Yo,payload:null,callback:null,next:null,nextEffect:null}}function Jo(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Qo(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=Ko(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=Ko(t.memoizedState),i=n.updateQueue=Ko(n.memoizedState)):r=t.updateQueue=Ho(i):null===i&&(i=n.updateQueue=Ho(r));null===i||r===i?Jo(r,e):null===r.lastUpdate||null===i.lastUpdate?(Jo(r,e),Jo(i,e)):(Jo(r,e),i.lastUpdate=e)}function $o(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Ko(t.memoizedState):ts(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function ts(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Ho(e)),e}function es(t,e,n,r,i,o){switch(n.tag){case Xo:return"function"==typeof(t=n.payload)?t.call(o,r,i):t;case Vo:t.effectTag=-2049&t.effectTag|64;case Yo:if(null==(i="function"==typeof(t=n.payload)?t.call(o,r,i):t))break;return v({},r,i);case qo:Wo=!0}return r}function ns(t,e,n,r,i){Wo=!1;for(var o=(e=ts(t,e)).baseState,s=null,a=0,u=e.firstUpdate,l=o;null!==u;){var c=u.expirationTime;c<i?(null===s&&(s=u,o=l),a<c&&(a=c)):(l=es(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,(u.nextEffect=null)===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(c=null,u=e.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===c&&(c=u,null===s&&(o=l)),a<h&&(a=h)):(l=es(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,(u.nextEffect=null)===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===s&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===s&&null===c&&(o=l),e.baseState=o,e.firstUpdate=s,e.firstCapturedUpdate=c,t.expirationTime=a,t.memoizedState=l}function rs(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),is(e.firstEffect,n),e.firstEffect=e.lastEffect=null,is(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function is(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;"function"!=typeof n&&m("191",n),n.call(r)}t=t.nextEffect}}function os(t,e){return{value:t,source:e,stack:ue(e)}}function ss(t){t.effectTag|=4}var as=void 0,us=void 0,ls=void 0,cs=void 0;as=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},us=function(){},ls=function(t,e,n,r,i){var o=t.memoizedProps;if(o!==r){var s=e.stateNode;switch(xi(vi.current),t=null,n){case"input":o=me(s,o),r=me(s,r),t=[];break;case"option":o=Wn(s,o),r=Wn(s,r),t=[];break;case"select":o=v({},o,{value:void 0}),r=v({},r,{value:void 0}),t=[];break;case"textarea":o=Hn(s,o),r=Hn(s,r),t=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(s.onclick=dr)}hr(n,r),s=n=void 0;var a=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(s in u)u.hasOwnProperty(s)&&((a=a||{})[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(E.hasOwnProperty(n)?t=t||[]:(t=t||[]).push(n,null));for(n in r){var l=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&l!==u&&(null!=l||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||((a=a||{})[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&((a=a||{})[s]=l[s])}else a||(t=t||[]).push(n,a),a=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(t=t||[]).push(n,""+l)):"children"===n?u===l||"string"!=typeof l&&"number"!=typeof l||(t=t||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(E.hasOwnProperty(n)?(null!=l&&fr(i,n),t||u===l||(t=[])):(t=t||[]).push(n,l))}a&&(t=t||[]).push("style",a),i=t,(e.updateQueue=i)&&ss(e)}},cs=function(t,e,n,r){n!==r&&ss(e)};var hs="function"==typeof WeakSet?WeakSet:Set;function ps(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=ue(n)),null!==n&&ae(n.type),e=e.value,null!==t&&1===t.tag&&ae(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function fs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ks(e,t)}else t.current=null}function ds(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&t)!==Si){var i=r.destroy;(r.destroy=void 0)!==i&&i()}(r.tag&e)!==Si&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function gs(e){switch("function"==typeof Br&&Br(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(t){Ks(i,t)}}n=n.next}while(n!==t)}break;case 1:if(fs(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ks(e,t)}break;case 5:fs(e);break;case 4:vs(e)}}function ys(t){return 5===t.tag||3===t.tag||4===t.tag}function _s(t){t:{for(var e=t.return;null!==e;){if(ys(e)){var n=e;break t}e=e.return}m("160"),n=void 0}var r=e=void 0;switch(n.tag){case 5:e=n.stateNode,r=!1;break;case 3:case 4:e=n.stateNode.containerInfo,r=!0;break;default:m("161")}16&n.effectTag&&(or(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ys(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=e,s=i.stateNode,a=n;8===o.nodeType?o.parentNode.insertBefore(s,a):o.insertBefore(s,a)}else e.insertBefore(i.stateNode,n);else r?(s=e,a=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(a,s):(o=s).appendChild(a),null!=(s=s._reactRootContainer)||null!==o.onclick||(o.onclick=dr)):e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function vs(t){for(var e=t,n=!1,r=void 0,i=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&m("160"),n.tag){case 5:r=n.stateNode,i=!1;break t;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var o=e,s=o;;)if(gs(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=e.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(e.stateNode)}else if(4===e.tag){if(null!==e.child){r=e.stateNode.containerInfo,i=!0,e=(e.child.return=e).child;continue}}else if(gs(e),null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function ms(t,n){switch(n.tag){case 0:case 11:case 14:case 15:ds(Ti,Ri,n);break;case 1:break;case 5:var e=n.stateNode;if(null!=e){var r=n.memoizedProps;t=null!==t?t.memoizedProps:r;var i=n.type,o=n.updateQueue;(n.updateQueue=null)!==o&&function(t,e,n,r,i){t[j]=i,"input"===n&&"radio"===i.type&&null!=i.name&&xe(t,i),pr(n,r),r=pr(n,i);for(var o=0;o<e.length;o+=2){var s=e[o],a=e[o+1];"style"===s?lr(t,a):"dangerouslySetInnerHTML"===s?ir(t,a):"children"===s?or(t,a):_e(t,s,a,r)}switch(n){case"input":Ee(t,i);break;case"textarea":Jn(t,i);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Kn(t,!!i.multiple,n,!1):e!==!!i.multiple&&(null!=i.defaultValue?Kn(t,!!i.multiple,i.defaultValue,!0):Kn(t,!!i.multiple,i.multiple?[]:"",!1))}}(e,o,i,t,r)}break;case 6:null===n.stateNode&&m("162"),n.stateNode.nodeValue=n.memoizedProps;break;case 3:case 12:break;case 13:if(e=n.memoizedState,r=void 0,t=n,null===e?r=!1:(r=!0,t=n.child,0===e.timedOutAt&&(e.timedOutAt=Ea())),null!==t&&function(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ur("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n=(n.child.return=n).child;continue}}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(t,r),null!==(e=n.updateQueue)){n.updateQueue=null;var s=n.stateNode;null===s&&(s=n.stateNode=new hs),e.forEach(function(t){var e=function(t,e){var n=t.stateNode;null!==n&&n.delete(e),e=Hs(e=Ea(),t),null!==(t=Js(t,e))&&($r(t,e),0!==(e=t.expirationTime)&&wa(t,e))}.bind(null,n,t);s.has(t)||(s.add(t),t.then(e,e))})}break;case 17:break;default:m("163")}}var bs="function"==typeof WeakMap?WeakMap:Map;function xs(t,e,n){(n=Zo(n)).tag=Vo,n.payload={element:null};var r=e.value;return n.callback=function(){Pa(r),ps(t,e)},n}function Es(n,r,t){(t=Zo(t)).tag=Vo;var i=n.type.getDerivedStateFromError;if("function"==typeof i){var e=r.value;t.payload=function(){return i(e)}}var o=n.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(t.callback=function(){"function"!=typeof i&&(null===ks?ks=new Set([this]):ks.add(this));var t=r.value,e=r.stack;ps(n,r),this.componentDidCatch(t,{componentStack:null!==e?e:""})}),t}function ws(t){switch(t.tag){case 1:jr(t.type)&&Ar();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return wi(),Fr(),0!=(64&(e=t.effectTag))&&m("285"),t.effectTag=-2049&e|64,t;case 5:return Ci(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 4:return wi(),null;case 10:return zo(t),null;default:return null}}var Os=Xt.ReactCurrentDispatcher,Cs=Xt.ReactCurrentOwner,Ss=1073741822,Is=!1,Ts=null,Rs=null,Ls=0,Ns=-1,Ps=!1,Ms=null,js=!1,As=null,Fs=null,Ds=null,ks=null;function Gs(){if(null!==Ts)for(var t=Ts.return;null!==t;){var e=t;switch(e.tag){case 1:var n=e.type.childContextTypes;null!=n&&Ar();break;case 3:wi(),Fr();break;case 5:Ci(e);break;case 4:wi();break;case 10:zo(e)}t=t.return}Ls=0,Ps=!(Ns=-1),Ts=Rs=null}function zs(){for(;null!==Ms;){var t=Ms.effectTag;if(16&t&&or(Ms.stateNode,""),128&t){var e=Ms.alternate;null!==e&&(null!==(e=e.ref)&&("function"==typeof e?e(null):e.current=null))}switch(14&t){case 2:_s(Ms),Ms.effectTag&=-3;break;case 6:_s(Ms),Ms.effectTag&=-3,ms(Ms.alternate,Ms);break;case 4:ms(Ms.alternate,Ms);break;case 8:vs(t=Ms),t.return=null,t.child=null,t.memoizedState=null,(t.updateQueue=null)!==(t=t.alternate)&&(t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null)}Ms=Ms.nextEffect}}function Us(){for(;null!==Ms;){if(256&Ms.effectTag)t:{var t=Ms.alternate,e=Ms;switch(e.tag){case 0:case 11:case 15:ds(Ii,Si,e);break t;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:ri(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}break t;case 3:case 5:case 6:case 4:case 17:break t;default:m("163")}}Ms=Ms.nextEffect}}function Bs(t,e){for(;null!==Ms;){var n=Ms.effectTag;if(36&n){var r=Ms.alternate,i=Ms,o=e;switch(i.tag){case 0:case 11:case 15:ds(Li,Ni,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var a=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&rs(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if((s=null)!==i.child)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}rs(0,r,s)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&_r(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:m("163")}}128&n&&(null!==(i=Ms.ref)&&(o=Ms.stateNode,"function"==typeof i?i(o):i.current=o)),512&n&&(As=t),Ms=Ms.nextEffect}}function Ys(){null!==Fs&&Er(Fs),null!==Ds&&Ds()}function Xs(t,e){js=Is=!0,t.current===e&&m("177");var n=t.pendingCommitExpirationTime;0===n&&m("261"),t.pendingCommitExpirationTime=0;var r=e.expirationTime,i=e.childExpirationTime;for(function(t,e){if(t.didError=!1,0===e)t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0;else{e<t.latestPingedTime&&(t.latestPingedTime=0);var n=t.latestPendingTime;0!==n&&(e<n?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>e&&(t.earliestPendingTime=t.latestPendingTime)),0===(n=t.earliestSuspendedTime)?$r(t,e):e<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,$r(t,e)):n<e&&$r(t,e)}ni(0,t)}(t,r<i?i:r),Cs.current=null,r=void 0,r=1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e).firstEffect:e:e.firstEffect,gr=On,yr=function(){var t=Fn();if(Dn(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(e=(e=t.ownerDocument)&&e.defaultView||window).getSelection&&e.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{e.nodeType,i.nodeType}catch(t){e=null;break t}var o=0,s=-1,a=-1,u=0,l=0,c=t,h=null;e:for(;;){for(var p;c!==e||0!==r&&3!==c.nodeType||(s=o+r),c!==i||0!==n&&3!==c.nodeType||(a=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(p=c.firstChild);)h=c,c=p;for(;;){if(c===t)break e;if(h===e&&++u===r&&(s=o),h===i&&++l===n&&(a=o),null!==(p=c.nextSibling))break;h=(c=h).parentNode}c=p}e=-1===s||-1===a?null:{start:s,end:a}}else e=null}e=e||{start:0,end:0}}else e=null;return{focusedElem:t,selectionRange:e}}(),On=!1,Ms=r;null!==Ms;){i=!1;var o=void 0;try{Us()}catch(t){i=!0,o=t}i&&(null===Ms&&m("178"),Ks(Ms,o),null!==Ms&&(Ms=Ms.nextEffect))}for(Ms=r;null!==Ms;){i=!1,o=void 0;try{zs()}catch(t){i=!0,o=t}i&&(null===Ms&&m("178"),Ks(Ms,o),null!==Ms&&(Ms=Ms.nextEffect))}for(kn(yr),On=!!gr,gr=yr=null,t.current=e,Ms=r;null!==Ms;){i=!1,o=void 0;try{Bs(t,n)}catch(t){i=!0,o=t}i&&(null===Ms&&m("178"),Ks(Ms,o),null!==Ms&&(Ms=Ms.nextEffect))}if(null!==r&&null!==As){var s=function(t,e){Ds=Fs=As=null;var n=ia;ia=!0;do{if(512&e.effectTag){var r=!1,i=void 0;try{var o=e;ds(Mi,Si,o),ds(Si,Pi,o)}catch(t){r=!0,i=t}r&&Ks(e,i)}e=e.nextEffect}while(null!==e);ia=n,0!==(n=t.expirationTime)&&wa(t,n),ca||ia||Ta(1073741823,!1)}.bind(null,t,r);Fs=a.unstable_runWithPriority(a.unstable_NormalPriority,function(){return xr(s)}),Ds=s}Is=js=!1,"function"==typeof Ur&&Ur(e.stateNode),0===(e=(n=e.expirationTime)<(e=e.childExpirationTime)?e:n)&&(ks=null),function(t,e){t.expirationTime=e,t.finishedWork=null}(t,e)}function qs(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0==(1024&t.effectTag)){t:{var i=e,o=Ls,s=(e=Ts=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:jr(e.type)&&Ar();break;case 3:wi(),Fr(),(s=e.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==i&&null!==i.child||(mo(e),e.effectTag&=-3),us(e);break;case 5:Ci(e);var a=xi(bi.current);if(o=e.type,null!==i&&null!=e.stateNode)ls(i,e,o,s,a),i.ref!==e.ref&&(e.effectTag|=128);else if(s){var u=xi(vi.current);if(mo(e)){i=(s=e).stateNode;var l=s.type,c=s.memoizedProps,h=a;switch(i[M]=s,i[j]=c,o=void 0,a=l){case"iframe":case"object":Cn("load",i);break;case"video":case"audio":for(l=0;l<et.length;l++)Cn(et[l],i);break;case"source":Cn("error",i);break;case"img":case"image":case"link":Cn("error",i),Cn("load",i);break;case"form":Cn("reset",i),Cn("submit",i);break;case"details":Cn("toggle",i);break;case"input":be(i,c),Cn("invalid",i),fr(h,"onChange");break;case"select":i._wrapperState={wasMultiple:!!c.multiple},Cn("invalid",i),fr(h,"onChange");break;case"textarea":Zn(i,c),Cn("invalid",i),fr(h,"onChange")}for(o in hr(a,c),l=null,c)c.hasOwnProperty(o)&&(u=c[o],"children"===o?"string"==typeof u?i.textContent!==u&&(l=["children",u]):"number"==typeof u&&i.textContent!==""+u&&(l=["children",""+u]):E.hasOwnProperty(o)&&null!=u&&fr(h,o));switch(a){case"input":Bt(i),we(i,c,!0);break;case"textarea":Bt(i),Qn(i);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(i.onclick=dr)}o=l,s.updateQueue=o,(s=null!==o)&&ss(e)}else{c=e,h=o,i=s,l=9===a.nodeType?a:a.ownerDocument,u===$n.html&&(u=tr(h)),u===$n.html?"script"===h?((i=l.createElement("div")).innerHTML="<script><\/script>",l=i.removeChild(i.firstChild)):"string"==typeof i.is?l=l.createElement(h,{is:i.is}):(l=l.createElement(h),"select"===h&&(h=l,i.multiple?h.multiple=!0:i.size&&(h.size=i.size))):l=l.createElementNS(u,h),(i=l)[M]=c,i[j]=s,as(i,e,!1,!1),h=i;var p=a,f=pr(l=o,c=s);switch(l){case"iframe":case"object":Cn("load",h),a=c;break;case"video":case"audio":for(a=0;a<et.length;a++)Cn(et[a],h);a=c;break;case"source":Cn("error",h),a=c;break;case"img":case"image":case"link":Cn("error",h),Cn("load",h),a=c;break;case"form":Cn("reset",h),Cn("submit",h),a=c;break;case"details":Cn("toggle",h),a=c;break;case"input":be(h,c),a=me(h,c),Cn("invalid",h),fr(p,"onChange");break;case"option":a=Wn(h,c);break;case"select":h._wrapperState={wasMultiple:!!c.multiple},a=v({},c,{value:void 0}),Cn("invalid",h),fr(p,"onChange");break;case"textarea":Zn(h,c),a=Hn(h,c),Cn("invalid",h),fr(p,"onChange");break;default:a=c}hr(l,a),u=void 0;var d=l,g=h,y=a;for(u in y)if(y.hasOwnProperty(u)){var _=y[u];"style"===u?lr(g,_):"dangerouslySetInnerHTML"===u?null!=(_=_?_.__html:void 0)&&ir(g,_):"children"===u?"string"==typeof _?"textarea"===d&&""===_||or(g,_):"number"==typeof _&&or(g,""+_):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(E.hasOwnProperty(u)?null!=_&&fr(p,u):null!=_&&_e(g,u,_,f))}switch(l){case"input":Bt(h),we(h,c,!1);break;case"textarea":Bt(h),Qn(h);break;case"option":null!=c.value&&h.setAttribute("value",""+ve(c.value));break;case"select":(a=h).multiple=!!c.multiple,null!=(h=c.value)?Kn(a,!!c.multiple,h,!1):null!=c.defaultValue&&Kn(a,!!c.multiple,c.defaultValue,!0);break;default:"function"==typeof a.onClick&&(h.onclick=dr)}(s=_r(o,s))&&ss(e),e.stateNode=i}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&m("166");break;case 6:i&&null!=e.stateNode?cs(i,e,i.memoizedProps,s):("string"==typeof s||null===e.stateNode&&m("166"),i=xi(bi.current),xi(vi.current),mo(e)?(o=(s=e).stateNode,i=s.memoizedProps,o[M]=s,(s=o.nodeValue!==i)&&ss(e)):(o=e,(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[M]=e,o.stateNode=s));break;case 11:break;case 13:if(s=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=o,Ts=e;break t}s=null!==s,o=null!==i&&null!==i.memoizedState,null!==i&&!s&&o&&(null!==(i=i.child.sibling)&&(null!==(a=e.firstEffect)?(e.firstEffect=i).nextEffect=a:(e.firstEffect=e.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(s||o)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:wi(),us(e);break;case 10:zo(e);break;case 9:case 14:break;case 17:jr(e.type)&&Ar();break;case 18:break;default:m("156")}Ts=null}if(e=t,1===Ls||1!==e.childExpirationTime){for(s=0,o=e.child;null!==o;)s<(i=o.expirationTime)&&(s=i),s<(a=o.childExpirationTime)&&(s=a),o=o.sibling;e.childExpirationTime=s}if(null!==Ts)return Ts;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=ws(t)))return t.effectTag&=1023,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;t=n}return null}function Vs(t){var e=jo(t.alternate,t,Ls);return t.memoizedProps=t.pendingProps,null===e&&(e=qs(t)),Cs.current=null,e}function Ws(e,t){Is&&m("243"),Ys(),Is=!0;var n=Os.current;Os.current=uo;var r=e.nextExpirationTimeToWorkOn;r===Ls&&e===Rs&&null!==Ts||(Gs(),Ls=r,Ts=Wr((Rs=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Ts&&!Sa();)Ts=Vs(Ts);else for(;null!==Ts;)Ts=Vs(Ts)}catch(t){if(ko=Do=Fo=null,Ji(),null===Ts)i=!0,Pa(t);else{null===Ts&&m("271");var o=Ts,s=o.return;if(null!==s){t:{var a=e,u=s,l=o,c=t;if(s=Ls,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var h=c;c=u;var p=-1,f=-1;do{if(13===c.tag){var d=c.alternate;if(null!==d&&null!==(d=d.memoizedState)){f=10*(1073741822-d.timedOutAt);break}"number"==typeof(d=c.pendingProps.maxDuration)&&(d<=0?p=0:(-1===p||d<p)&&(p=d))}c=c.return}while(null!==c);c=u;do{if((d=13===c.tag)&&(d=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),d){if(null===(u=c.updateQueue)?((u=new Set).add(h),c.updateQueue=u):u.add(h),0==(1&c.mode)){c.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((s=Zo(1073741823)).tag=qo,Qo(l,s))),l.expirationTime=1073741823;break t}u=s;var g=(l=a).pingCache;null===g?(g=l.pingCache=new bs,d=new Set,g.set(h,d)):void 0===(d=g.get(h))&&(d=new Set,g.set(h,d)),d.has(u)||(d.add(u),l=Zs.bind(null,l,h,u),h.then(l,l)),0<=(a=-1===p?1073741823:(-1===f&&(f=10*(1073741822-ei(a,s))-5e3),f+p))&&Ns<a&&(Ns=a),c.effectTag|=2048,c.expirationTime=s;break t}c=c.return}while(null!==c);c=Error((ae(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ue(l))}Ps=!0,c=os(c,l),a=u;do{switch(a.tag){case 3:a.effectTag|=2048,a.expirationTime=s,$o(a,s=xs(a,c,s));break t;case 1:if(p=c,f=a.type,l=a.stateNode,0==(64&a.effectTag)&&("function"==typeof f.getDerivedStateFromError||null!==l&&"function"==typeof l.componentDidCatch&&(null===ks||!ks.has(l)))){a.effectTag|=2048,a.expirationTime=s,$o(a,s=Es(a,p,s));break t}}a=a.return}while(null!==a)}Ts=qs(o);continue}i=!0,Pa(t)}}break}if(Is=!1,Os.current=n,ko=Do=Fo=null,Ji(),i)Rs=null,e.finishedWork=null;else if(null!==Ts)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&m("281"),Rs=null,Ps){if(i=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==s&&s<r)return ti(e,r),void xa(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void xa(e,n,r,t,-1)}t&&-1!==Ns?(ti(e,r),(t=10*(1073741822-ei(e,r)))<Ns&&(Ns=t),t=10*(1073741822-Ea()),t=Ns-t,xa(e,n,r,e.expirationTime,t<0?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Ks(t,e){for(var n=t.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ks||!ks.has(r)))return Qo(n,t=Es(n,t=os(e,t),1073741823)),void Qs(n,1073741823);break;case 3:return Qo(n,t=xs(n,t=os(e,t),1073741823)),void Qs(n,1073741823)}n=n.return}3===t.tag&&(Qo(t,n=xs(t,n=os(e,t),1073741823)),Qs(t,1073741823))}function Hs(t,e){var n=a.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&e.mode))r=1073741823;else if(Is&&!js)r=Ls;else{switch(n){case a.unstable_ImmediatePriority:r=1073741823;break;case a.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-t+15)/10|0));break;case a.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-t+500)/25|0));break;case a.unstable_LowPriority:case a.unstable_IdlePriority:r=1;break;default:m("313")}null!==Rs&&r===Ls&&--r}return n===a.unstable_UserBlockingPriority&&(0===aa||r<aa)&&(aa=r),r}function Zs(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),null!==Rs&&Ls===n?Rs=null:(e=t.earliestSuspendedTime,r=t.latestSuspendedTime,0!==e&&n<=e&&r<=n&&(t.didError=!1,(0===(e=t.latestPingedTime)||n<e)&&(t.latestPingedTime=n),ni(n,t),0!==(n=t.expirationTime)&&wa(t,n)))}function Js(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Qs(t,e){null!==(t=Js(t,e))&&(!Is&&0!==Ls&&Ls<e&&Gs(),$r(t,e),Is&&!js&&Rs===t||wa(t,t.expirationTime),ya<_a&&(_a=0,m("185")))}function $s(t,e,n,r,i){return a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){return t(e,n,r,i)})}var ta=null,ea=null,na=0,ra=void 0,ia=!1,oa=null,sa=0,aa=0,ua=!1,la=null,ca=!1,ha=!1,pa=null,fa=a.unstable_now(),da=1073741822-(fa/10|0),ga=da,ya=50,_a=0,va=null;function ma(){da=1073741822-((a.unstable_now()-fa)/10|0)}function ba(t,e){if(0!==na){if(e<na)return;null!==ra&&a.unstable_cancelCallback(ra)}na=e,t=a.unstable_now()-fa,ra=a.unstable_scheduleCallback(Ia,{timeout:10*(1073741822-e)-t})}function xa(t,e,n,r,i){t.expirationTime=r,0!==i||Sa()?0<i&&(t.timeoutHandle=mr(function(t,e,n){t.pendingCommitExpirationTime=n,t.finishedWork=e,ma(),ga=da,Ra(t,n)}.bind(null,t,e,n),i)):(t.pendingCommitExpirationTime=n,t.finishedWork=e)}function Ea(){return ia||(Oa(),0!==sa&&1!==sa||(ma(),ga=da)),ga}function wa(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===ea?(ta=ea=t,t.nextScheduledRoot=t):(ea=ea.nextScheduledRoot=t).nextScheduledRoot=ta):e>t.expirationTime&&(t.expirationTime=e),ia||(ca?ha&&La(oa=t,sa=1073741823,!1):1073741823===e?Ta(1073741823,!1):ba(t,e))}function Oa(){var t=0,e=null;if(null!==ea)for(var n=ea,r=ta;null!==r;){var i=r.expirationTime;if(0===i){if(null!==n&&null!==ea||m("244"),r===r.nextScheduledRoot){ta=ea=r.nextScheduledRoot=null;break}if(r===ta)ta=i=r.nextScheduledRoot,ea.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ea){(ea=n).nextScheduledRoot=ta,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(t<i&&(t=i,e=r),r===ea)break;if(1073741823===t)break;r=(n=r).nextScheduledRoot}}oa=e,sa=t}var Ca=!1;function Sa(){return!!Ca||!!a.unstable_shouldYield()&&(Ca=!0)}function Ia(){try{if(!Sa()&&null!==ta){ma();var t=ta;do{var e=t.expirationTime;0!==e&&da<=e&&(t.nextExpirationTimeToWorkOn=da),t=t.nextScheduledRoot}while(t!==ta)}Ta(0,!0)}finally{Ca=!1}}function Ta(t,e){if(Oa(),e)for(ma(),ga=da;null!==oa&&0!==sa&&t<=sa&&!(Ca&&sa<da);)La(oa,sa,sa<da),Oa(),ma(),ga=da;else for(;null!==oa&&0!==sa&&t<=sa;)La(oa,sa,!1),Oa();if(e&&(na=0,ra=null),0!==sa&&ba(oa,sa),_a=0,(va=null)!==pa)for(t=pa,pa=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){ua||(ua=!0,la=t)}}if(ua)throw t=la,la=null,ua=!1,t}function Ra(t,e){ia&&m("253"),La(oa=t,sa=e,!1),Ta(1073741823,!1)}function La(t,e,n){if(ia&&m("245"),ia=!0,n){var r=t.finishedWork;null!==r?Na(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,br(r)),Ws(t,n),null!==(r=t.finishedWork)&&(Sa()?t.finishedWork=r:Na(t,r,e)))}else null!==(r=t.finishedWork)?Na(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,br(r)),Ws(t,n),null!==(r=t.finishedWork)&&Na(t,r,e));ia=!1}function Na(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===pa?pa=[r]:pa.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===va?_a++:(va=t,_a=0),a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){Xs(t,e)})}function Pa(t){null===oa&&m("246"),oa.expirationTime=0,ua||(ua=!0,la=t)}function Ma(t,e){var n=ca;ca=!0;try{return t(e)}finally{(ca=n)||ia||Ta(1073741823,!1)}}function ja(t,e){if(ca&&!ha){ha=!0;try{return t(e)}finally{ha=!1}}return t(e)}function Aa(t,e,n){ca||ia||0===aa||(Ta(aa,!1),aa=0);var r=ca;ca=!0;try{return a.unstable_runWithPriority(a.unstable_UserBlockingPriority,function(){return t(e,n)})}finally{(ca=r)||ia||Ta(1073741823,!1)}}function Fa(t,e,n,r,i){var o=e.current;t:if(n){e:{2===en(n=n._reactInternalFiber)&&1===n.tag||m("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(jr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);m("171"),s=void 0}if(1===n.tag){var a=n.type;if(jr(a)){n=kr(n,a,s);break t}}n=s}else n=Rr;return null===e.context?e.context=n:e.pendingContext=n,e=i,(i=Zo(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Ys(),Qo(o,i),Qs(o,r),r}function Da(t,e,n,r){var i=e.current;return Fa(t,e,n,i=Hs(Ea(),i),r)}function ka(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Ga(t){var e=1073741822-25*(1+((1073741822-Ea()+500)/25|0));Ss<=e&&(e=Ss-1),this._expirationTime=Ss=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function za(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ua(t,e,n){t={current:e=qr(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function Ba(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ya(t,e,n,r,i){var o=n._reactRootContainer;if(o){if("function"==typeof i){var s=i;i=function(){var t=ka(o._internalRoot);s.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Ua(t,!1,e)}(n,r),"function"==typeof i){var a=i;i=function(){var t=ka(o._internalRoot);a.call(t)}}ja(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)})}return ka(o._internalRoot)}function Xa(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ba(e)||m("200"),function(t,e,n,r){var i=3<arguments.length&&void 0!==r?r:null;return{$$typeof:Kt,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}St=function(t,e,n){switch(e){case"input":if(Ee(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=k(r);i||m("90"),Yt(r),Ee(r,i)}}}break;case"textarea":Jn(t,n);break;case"select":null!=(e=n.value)&&Kn(t,!!n.multiple,e,!1)}},Ga.prototype.render=function(t){this._defer||m("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new za;return Fa(t,e,null,n,r._onCommit),r},Ga.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Ga.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||m("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)i=(r=i)._next;null===r&&m("251"),r._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,Ra(t,n),e=this._next,(this._next=null)!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},Ga.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},za.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},za.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!=typeof n&&m("191",n),n()}}},Ua.prototype.render=function(t,e){var n=this._internalRoot,r=new za;return null!==(e=void 0===e?null:e)&&r.then(e),Da(t,n,null,r._onCommit),r},Ua.prototype.unmount=function(t){var e=this._internalRoot,n=new za;return null!==(t=void 0===t?null:t)&&n.then(t),Da(null,e,null,n._onCommit),n},Ua.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new za;return null!==(n=void 0===n?null:n)&&i.then(n),Da(e,r,t,i._onCommit),i},Ua.prototype.createBatch=function(){var t=new Ga(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)(n.firstBatch=t)._next=null;else{for(n=null;null!==r&&r._expirationTime>=e;)r=(n=r)._next;t._next=r,null!==n&&(n._next=t)}return t},jt=function(){ia||0===aa||(Ta(aa,!1),aa=0)};var qa,Va,Wa={createPortal:Xa,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"==typeof t.render?m("188"):m("268",Object.keys(t))),t=null===(t=rn(e))?null:t.stateNode},hydrate:function(t,e,n){return Ba(e)||m("200"),Ya(null,t,e,!0,n)},render:function(t,e,n){return Ba(e)||m("200"),Ya(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return Ba(n)||m("200"),null!=t&&void 0!==t._reactInternalFiber||m("38"),Ya(t,e,n,!1,r)},unmountComponentAtNode:function(t){return Ba(t)||m("40"),!!t._reactRootContainer&&(ja(function(){Ya(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Xa.apply(void 0,arguments)},unstable_batchedUpdates:Pt=Ma,unstable_interactiveUpdates:Mt=Aa,flushSync:function(t,e){ia&&m("187");var n=ca;ca=!0;try{return $s(t,e)}finally{ca=n,Ta(1073741823,!1)}},unstable_createRoot:function(t,e){return Ba(t)||m("299","unstable_createRoot"),new Ua(t,!0,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=ca;ca=!0;try{$s(t)}finally{(ca=e)||ia||Ta(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[F,D,k,R.injectEventPluginsByName,x,X,function(t){S(t,Y)},Lt,Nt,Tn,N]}};Va=(qa={findFiberByHostInstance:A,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return;try{var n=e.inject(t);Ur=Yr(function(t){return e.onCommitFiberRoot(n,t)}),Br=Yr(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}}(v({},qa,{overrideProps:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=rn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Va?Va(t):null}}));var Ka=Wa;t.exports=Ka.default||Ka},function(t,e,n){"use strict";t.exports=n(148)},function(t,G,e){"use strict";(function(t){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(G,"__esModule",{value:!0});var s=null,r=!1,a=3,i=-1,u=-1,o=!1,l=!1;function c(){if(!o){var t=s.expirationTime;l?E():l=!0,x(e,t)}}function h(){var t=s,e=s.next;if(s===e)s=null;else{var n=s.previous;s=n.next=e,e.previous=n}t.next=t.previous=null,n=t.callback,e=t.expirationTime,t=t.priorityLevel;var r=a,i=u;a=t,u=e;try{var o=n()}finally{a=r,u=i}if("function"==typeof o)if(o={callback:o,priorityLevel:t,expirationTime:e,next:null,previous:null},null===s)s=o.next=o.previous=o;else{n=null,t=s;do{if(t.expirationTime>=e){n=t;break}t=t.next}while(t!==s);null===n?n=s:n===s&&(s=o,c()),(e=n.previous).next=n.previous=o,o.next=n,o.previous=e}}function p(){if(-1===i&&null!==s&&1===s.priorityLevel){o=!0;try{for(;h(),null!==s&&1===s.priorityLevel;);}finally{o=!1,null!==s?c():l=!1}}}function e(t){o=!0;var e=r;r=t;try{if(t)for(;null!==s;){var n=G.unstable_now();if(!(s.expirationTime<=n))break;for(;h(),null!==s&&s.expirationTime<=n;);}else if(null!==s)for(;h(),null!==s&&!w(););}finally{o=!1,r=e,null!==s?c():l=!1,p()}}var n,f,d=Date,g="function"==typeof setTimeout?setTimeout:void 0,y="function"==typeof clearTimeout?clearTimeout:void 0,_="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,v="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function m(e){n=_(function(t){y(f),e(t)}),f=g(function(){v(n),e(G.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var b=performance;G.unstable_now=function(){return b.now()}}else G.unstable_now=function(){return d.now()};var x,E,w,O=null;if("undefined"!=typeof window?O=window:void 0!==t&&(O=t),O&&O._schedMock){var C=O._schedMock;x=C[0],E=C[1],w=C[2],G.unstable_now=C[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var S=null,I=function(t){if(null!==S)try{S(t)}finally{S=null}};x=function(t){null!==S?setTimeout(x,0,t):(S=t,setTimeout(I,0,!1))},E=function(){S=null},w=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof _&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var T=null,R=!1,L=-1,N=!1,P=!1,M=0,j=33,A=33;w=function(){return M<=G.unstable_now()};var F=new MessageChannel,D=F.port2;F.port1.onmessage=function(){R=!1;var t=T,e=L;T=null,L=-1;var n=G.unstable_now(),r=!1;if(M-n<=0){if(!(-1!==e&&e<=n))return N||(N=!0,m(k)),T=t,void(L=e);r=!0}if(null!==t){P=!0;try{t(r)}finally{P=!1}}};var k=function(t){if(null!==T){m(k);var e=t-M+A;e<A&&j<A?(e<8&&(e=8),A=e<j?j:e):j=e,M=t+A,R||(R=!0,D.postMessage(void 0))}else N=!1};x=function(t,e){T=t,L=e,P||e<0?D.postMessage(void 0):N||(N=!0,m(k))},E=function(){T=null,R=!1,L=-1}}G.unstable_ImmediatePriority=1,G.unstable_UserBlockingPriority=2,G.unstable_NormalPriority=3,G.unstable_IdlePriority=5,G.unstable_LowPriority=4,G.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=a,r=i;a=t,i=G.unstable_now();try{return e()}finally{a=n,i=r,p()}},G.unstable_next=function(t){switch(a){case 1:case 2:case 3:var e=3;break;default:e=a}var n=a,r=i;a=e,i=G.unstable_now();try{return t()}finally{a=n,i=r,p()}},G.unstable_scheduleCallback=function(t,e){var n=-1!==i?i:G.unstable_now();if("object"==typeof e&&null!==e&&"number"==typeof e.timeout)e=n+e.timeout;else switch(a){case 1:e=n+-1;break;case 2:e=n+250;break;case 5:e=n+1073741823;break;case 4:e=n+1e4;break;default:e=n+5e3}if(t={callback:t,priorityLevel:a,expirationTime:e,next:null,previous:null},null===s)s=t.next=t.previous=t,c();else{n=null;var r=s;do{if(r.expirationTime>e){n=r;break}r=r.next}while(r!==s);null===n?n=s:n===s&&(s=t,c()),(e=n.previous).next=n.previous=t,t.next=n,t.previous=e}return t},G.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(e===t)s=null;else{t===s&&(s=e);var n=t.previous;(n.next=e).previous=n}t.next=t.previous=null}},G.unstable_wrapCallback=function(n){var r=a;return function(){var t=a,e=i;a=r,i=G.unstable_now();try{return n.apply(this,arguments)}finally{a=t,i=e,p()}}},G.unstable_getCurrentPriorityLevel=function(){return a},G.unstable_shouldYield=function(){return!r&&(null!==s&&s.expirationTime<u||w())},G.unstable_continueExecution=function(){null!==s&&c()},G.unstable_pauseExecution=function(){},G.unstable_getFirstCallbackNode=function(){return s}}).call(this,e(149))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=n(107),a=c(s),u=c(n(151));n(164);var l=c(n(30));function c(t){return t&&t.__esModule?t:{default:t}}var h=[{name:"æ— ",value:"None",description:"åœæ­¢ç»˜åˆ¶"},{name:"ç‚¹",value:"Point",description:"ç»˜åˆ¶ç‚¹"},{name:"çº¿",value:"LineString",description:"ç»˜åˆ¶çº¿æ¡",sketchType:["default","bezier","freehand"]},{name:"é¢",value:"Polygon",description:"ç»˜åˆ¶é¢",sketchType:["default","bezier","freehand"]},{name:"æ–¹å½¢",value:"Box",description:"ç»˜åˆ¶æ–¹å½¢åŒºåŸŸ"}],p=[{name:"åœ°å›¾",value:"streets",description:"OSMçŸ¢é‡åœ°å›¾"},{name:"å½±åƒ",value:"imagery",description:"ESRIé¥æ„Ÿå½±åƒ"},{name:"åœ°å½¢",value:"terrain",description:"ESRIåœ°å½¢å›¾"},{name:"OSM",value:"osm",description:"OSMåœ°å›¾"}],f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,s.Component),i(d,[{key:"render",value:function(){var n=this;return a.default.createElement("div",null,a.default.createElement("div",{className:"toolbar"},a.default.createElement("ul",{className:"drawMode"},h.map(function(t){return a.default.createElement("li",{title:t.description,key:t.value,className:n.state.drawMode===t.value?"active":"",onClick:function(){n.setState({drawMode:t.value,enableClick:"None"===t.value&&n.state.enableClick})}},a.default.createElement("a",null,t.name),a.default.createElement("span",{style:{display:n.state.drawMode===t.value?"inline":"none"}},t.sketchType&&t.sketchType.map(function(t){return a.default.createElement("span",{className:"sketch-type",key:t,onClick:function(){n.setState({sketchType:t})}},t)})))})),a.default.createElement("ul",null,a.default.createElement("li",{title:"å¤šé€‰(Shift+ç‚¹å‡»)æˆ–è€…æ¡†é€‰(Ctrl+ç‚¹å‡»)",onClick:function(){n.setState({enableClick:!0,drawMode:"None"})}},"é€‰æ‹©"),a.default.createElement("li",{title:"å°†ç»˜åˆ¶çš„ç‚¹çº¿é¢ä¿å­˜æˆgeojsonæ ¼å¼æ–‡ä»¶",onClick:function(){n.setState({saveNow:!0})}},"ä¿å­˜"),a.default.createElement("li",{title:"æ¸…é™¤æ‰€é€‰è¦ç´ ",onClick:function(){n.setState({removeNow:!0})}},"æ¸…é™¤"),a.default.createElement("li",{title:"åˆ‡é¢",style:{display:this.state.showCutTag?"block":"none"},onClick:function(){n.state.currentSelectFeature&&n.state.currentSelectFeature.getGeometry()instanceof l.default?n.setState({drawMode:"LineString",sketchType:"bezier",enableCut:!0,enableClick:!1}):alert("è¯·å…ˆé€‰æ‹©å¤šè¾¹å½¢")}},"åˆ‡é¢")),a.default.createElement("ul",null)),a.default.createElement("div",{className:"infoBox"},a.default.createElement("header",null,"ç¼–è¾‘å±žæ€§"),a.default.createElement("div",null,a.default.createElement("label",null,"åç§°: "),a.default.createElement("input",{placeholder:"å¦‚åœ°åã€è·¯åã€åŠ¿åŠ›èŒƒå›´åç§°ç­‰",type:"text",onInput:function(t){n.setState({infoBox:r({},n.state.infoBox,{name:t.target.value})})}})),a.default.createElement("div",null,a.default.createElement("label",null,"ç±»åž‹: "),a.default.createElement("input",{placeholder:"å¦‚éƒ¡åŽ¿ã€æ²³æµå±±è„‰ç­‰",type:"text",onInput:function(t){n.setState({infoBox:r({},n.state.infoBox,{type:t.target.value})})}})),a.default.createElement("div",null,a.default.createElement("button",{value:"ä¿å­˜å±žæ€§",onClick:function(){n.state.infoBox,n.state.currentSelectFeature.set("name",n.state.infoBox.name),n.state.currentSelectFeature.set("type",n.state.infoBox.type),n.setState({attribute:{name:n.state.infoBox.name,type:n.state.infoBox.type}})}},"ä¿å­˜å±žæ€§")),a.default.createElement("footer",null,a.default.createElement("div",null,"è¦ç´ åç§°: ",this.state.attribute?this.state.attribute.name:""),a.default.createElement("div",null,"è¦ç´ ç±»åž‹: ",this.state.attribute?this.state.attribute.type:""))),a.default.createElement("div",{className:"layerPicker"},a.default.createElement("ul",null,p.map(function(t,e){return a.default.createElement("li",{title:t.description,key:e,onClick:function(){n.setState({baseLayer:t.value})}},t.name)}))),a.default.createElement(u.default,{drawMode:this.state.drawMode,sketchType:this.state.sketchType,enableCut:this.state.enableCut,enableClick:this.state.enableClick,selectCallback:this.mapSelectCallback,baseLayer:this.state.baseLayer,triggerSave:this.state.saveNow,saveCallback:function(){n.setState({saveNow:!1})},triggerRemove:this.state.removeNow,removeCallback:function(){n.setState({removeNow:!1})}}))}}]),d);function d(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return e.mapSelectCallback=function(t){t?e.setState({currentSelectFeature:t,attribute:{name:t.get("name")||"",type:t.get("type")||""},showCutTag:t.getGeometry()instanceof l.default}):e.setState({currentSelectFeature:void 0,attribute:{name:"",type:""},showCutTag:!1})},e.state={drawMode:"none",sketchType:"default",enableClick:!0,currentSelectFeature:void 0,infoBox:{name:"",type:""},attribute:{name:"",type:""},baseLayer:"streets",saveNow:!1,removeNow:!1},e}e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(107),s=E(o),a=E(n(167)),u=E(n(136)),l=E(n(68)),c=n(166),h=n(134),p=E(h),f=n(170),d=n(18),g=E(n(169)),y=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(155)),_=n(135),v=n(168),m=n(156),b=E(n(48)),x=E(n(157));function E(t){return t&&t.__esModule?t:{default:t}}n(161);var w=[new v.Style({stroke:new v.Stroke({color:"blue",width:3}),fill:new v.Fill({color:"rgba(0, 0, 255, 0.1)"})}),new v.Style({image:new v.Circle({radius:5,fill:new v.Fill({color:"orange"})})})],O={streets:new f.Tile({source:new l.default({url:"http://t{0-7}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1072d95046f18e67463ce40d645a9b8d"})}),imagery:new f.Tile({source:new l.default({url:"http://t{0-7}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1072d95046f18e67463ce40d645a9b8d"})}),terrain:new f.Tile({source:new l.default({url:"http://t{0-7}.tianditu.gov.cn/ter_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=ter&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1072d95046f18e67463ce40d645a9b8d"})}),osm:new f.Tile({source:new c.OSM})},C=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(S,o.Component),r(S,[{key:"componentDidUpdate",value:function(t){var e=this;if(t.drawMode!==this.props.drawMode&&(this.props.drawMode,"bezier"===t.sketchType&&this.emptyBezierConfig(),this.map.removeInteraction(this.currentDraw),this.addInteraction(this.props.drawMode)),t.sketchType!==this.props.sketchType&&("bezier"===t.sketchType&&this.emptyBezierConfig(),this.map.removeInteraction(this.currentDraw),this.addInteraction(this.props.drawMode)),t.enableClick!==this.props.enableClick&&(this.props.enableClick?(this.map.addInteraction(this.selectClick),this.map.addInteraction(this.dragBox)):(this.map.removeInteraction(this.selectClick),this.map.removeInteraction(this.dragBox))),t.baseLayer!==this.props.baseLayer&&(this.map.removeLayer(O[t.baseLayer]),"osm"===this.props.baseLayer&&this.map.removeLayer(this.anno),"osm"===t.baseLayer&&this.map.addLayer(this.anno),this.map.addLayer(O[this.props.baseLayer])),t.triggerSave!==this.props.triggerSave&&this.props.triggerSave){var n=this.drawOnSource.getFeatures();!function(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}("map.geojson",this.geojsonformat.writeFeatures(n,{})),this.props.saveCallback()}t.triggerRemove!==this.props.triggerRemove&&this.props.triggerRemove&&(this.selectedFeatures.getArray().forEach(function(t){e.drawOnSource.removeFeature(t)}),this.selectedFeatures.clear(),this.props.removeCallback())}},{key:"componentDidMount",value:function(){var r=this;this.drawOnSource=new c.Vector({wrapX:!1}),this.baseLayer=O[this.props.baseLayer],this.anno=new f.Tile({source:new l.default({url:"http://t{0-7}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1072d95046f18e67463ce40d645a9b8d"}),zIndex:1}),this.map=new a.default({target:this.container,layers:[this.baseLayer,this.anno,new f.Vector({source:this.drawOnSource,zIndex:2,style:w})],view:new u.default({projection:"EPSG:4326",center:[100,30],zoom:5})}),this.geojsonformat=new g.default,this.currentBezierLines=[],this.currentBezierFeature;var t=this.map.getTarget(),i=!(this.bezierCoordinates=[]);t.addEventListener("pointerdown",function(t){if(("LineString"===r.props.drawMode||"Polygon"===r.props.drawMode)&&"bezier"===r.props.sketchType){var e=r.map.getEventCoordinate(t);if(0===t.button)if(i=!0,3<r.bezierCoordinates.length){r.bezierCoordinates.push(e[0],e[1],e[0],e[1]);var n=r.curve=new x.default(r.bezierCoordinates[0],r.bezierCoordinates[1],r.bezierCoordinates[2],r.bezierCoordinates[3],r.bezierCoordinates[4],r.bezierCoordinates[5],r.bezierCoordinates[6],r.bezierCoordinates[7]);r.tmpLine=T(n,r.drawOnSource)}else r.lineStartPoint=new b.default({geometry:new m.Point(e)}),r.drawOnSource.addFeature(r.lineStartPoint),r.currentBezierLines.push(e),r.bezierCoordinates.push(e[0],e[1],e[0],e[1])}}),t.addEventListener("pointerup",function(t){if(("LineString"===r.props.drawMode||"Polygon"===r.props.drawMode)&&"bezier"===r.props.sketchType&&(7<r.bezierCoordinates.length&&(r.bezierCoordinates=r.bezierCoordinates.slice(4)),i=!1,r.curve)){r.curve.getLUT(10).forEach(function(t,e){e&&r.currentBezierLines.push([t.x,t.y])});var e=new m.LineString(r.currentBezierLines);r.tmpLine&&r.drawOnSource.removeFeature(r.tmpLine),r.currentBezierFeature&&r.drawOnSource.removeFeature(r.currentBezierFeature),r.currentBezierFeature=new b.default({geometry:e}),r.drawOnSource.addFeature(r.currentBezierFeature)}}),this.map.on("pointerdrag",function(t){if(("LineString"===r.props.drawMode||"Polygon"===r.props.drawMode)&&"bezier"===r.props.sketchType&&(t.preventDefault(),i&&r.curve)){var e=t.coordinate;r.curve.points[2].x=e[0],r.curve.points[2].y=e[1],r.tmpLine&&r.drawOnSource.removeFeature(r.tmpLine),r.curve.update(),r.tmpLine=T(r.curve,r.drawOnSource)}}),this.map.on("dblclick",function(t){"LineString"!==r.props.drawMode&&"Polygon"!==r.props.drawMode||"bezier"===r.props.sketchType&&(t.preventDefault(),r.emptyBezierConfig())}),this.selectClick=new _.Select,this.selectClick.on("select",function(t){t.selected[0]&&(r.lastSelectedFeature=t.selected[0]),r.props.selectCallback(t.selected[0])}),this.selectedFeatures=this.selectClick.getFeatures(),this.dragBox=new _.DragBox({condition:d.platformModifierKeyOnly}),this.dragBox.on("boxend",function(){var t=r.dragBox.getGeometry().getExtent();r.drawOnSource.forEachFeatureIntersectingExtent(t,function(t){r.selectedFeatures.push(t)})}),this.dragBox.on("boxstart",function(){r.selectedFeatures.clear()})}},{key:"emptyBezierConfig",value:function(){if(this.currentBezierFeature){if("Polygon"===this.props.drawMode){this.currentBezierFeature&&this.drawOnSource.removeFeature(this.currentBezierFeature),this.currentBezierLines.push(this.currentBezierLines[0]);var t=new m.Polygon([this.currentBezierLines]),e=new b.default({geometry:t});this.drawOnSource.addFeature(e)}if(this.props.enableCut){var n=this.lastSelectedFeature;if(n&&n.getGeometry()instanceof m.Polygon){var r=function(t,e){var n=y.polygonToLine(t),r=y.lineIntersect(n,e),a=y.lineSlice(r.features[0],r.features[1],e),u=void 0,l=void 0;l=I(a.geometry.coordinates[0],r.features[1].geometry.coordinates)<I(a.geometry.coordinates[0],r.features[0].geometry.coordinates)?(u=a.geometry.coordinates[0]=r.features[1].geometry.coordinates,a.geometry.coordinates[a.geometry.coordinates.length-1]=r.features[0].geometry.coordinates):(u=a.geometry.coordinates[0]=r.features[0].geometry.coordinates,a.geometry.coordinates[a.geometry.coordinates.length-1]=r.features[1].geometry.coordinates);var c="",h={left:[],right:[]},p=y.booleanClockwise(n);n.geometry.coordinates.forEach(function(t){var e=0<(l[0]-u[0])*(t[1]-u[1])-(l[1]-u[1])*(t[0]-u[0])?"left":"right";if(""!==c&&e!==c){var n=a.geometry.coordinates;if("left"===c)if(p)for(var r=n.length-1;0<=r;r--)h.left.push(n[r]);else for(var i=n.length-1;0<=i;i--)h.right.push(n[i]);else if(p)for(var o=0;o<n.length;o++)h.right.push(n[o]);else for(var s=0;s<n.length;s++)h.left.push(n[s])}h[e].push(t),c=e});var i=y.lineString(h.left),o=y.lineToPolygon(i),s=y.lineString(h.right),f=y.lineToPolygon(s);return[o,f]}(this.geojsonformat.writeFeatureObject(n),this.geojsonformat.writeFeatureObject(this.currentBezierFeature));this.drawOnSource.removeFeature(n),this.drawOnSource.removeFeature(this.currentBezierFeature),this.drawOnSource.addFeature(this.geojsonformat.readFeature(r[0])),this.drawOnSource.addFeature(this.geojsonformat.readFeature(r[1])),this.lastSelectedFeature=void 0,this.selectedFeatures.clear(),this.props.selectCallback(void 0)}else this.currentBezierFeature&&this.drawOnSource.removeFeature(this.currentBezierFeature),alert("è¯·å†æ¬¡é€‰æ‹©å¤šè¾¹å½¢")}this.tmpLine&&(this.tmpLine=void 0),this.bezierCoordinates=[],this.currentBezierLines=[],this.currentBezierFeature=void 0,this.curve=void 0,this.lineStartPoint&&this.drawOnSource.removeFeature(this.lineStartPoint)}}},{key:"addInteraction",value:function(){if("None"!==this.props.drawMode){if("Box"===this.props.drawMode)return this.currentDraw=new p.default({source:this.drawOnSource,type:"Circle",geometryFunction:(0,h.createBox)()}),void this.map.addInteraction(this.currentDraw);"bezier"!==this.props.sketchType&&(this.currentDraw=new p.default({source:this.drawOnSource,type:this.props.drawMode,freehand:"freehand"===this.props.sketchType}),this.map.addInteraction(this.currentDraw))}}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{ref:function(t){return e.container=t}})}}]),S);function S(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,S),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}function I(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function T(t,e,n){var r=2<arguments.length&&void 0!==n?n:10,i=t.getLUT(r).map(function(t){return[t.x,t.y]}),o=new m.LineString(i),s=new b.default({geometry:o});return e.addFeature(s),s}e.default=C},function(t,e,n){t.exports=function(){"use strict";function g(t,e,n,r,i){for(;n<r;){if(600<r-n){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1),c=Math.max(n,Math.floor(e-s*u/o+l)),h=Math.min(r,Math.floor(e+(o-s)*u/o+l));g(t,e,c,h,i)}var p=t[e],f=n,d=r;for(y(t,n,e),0<i(t[r],p)&&y(t,n,r);f<d;){for(y(t,f,d),f++,d--;i(t[f],p)<0;)f++;for(;0<i(t[d],p);)d--}0===i(t[n],p)?y(t,n,d):y(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function o(t,e){return t<e?-1:e<t?1:0}return function(t,e,n,r,i){g(t,e,n||0,r||t.length-1,i||o)}}()},function(t,e,n){var l=n(154).newImageData;function s(b){var x=!0;try{new ImageData(10,10)}catch(t){x=!1}return function(t){var e,n,r,i,o,s=t.buffers,a=t.meta,u=t.imageOps,l=t.width,c=t.height,h=s.length,p=s[0].byteLength;if(u){var f=new Array(h);for(n=0;n<h;++n)f[n]=(r=new Uint8ClampedArray(s[n]),i=l,o=c,x?new ImageData(r,i,o):{data:r,width:i,height:o});e=b(f,a).data}else{e=new Uint8ClampedArray(p);var d=new Array(h),g=new Array(h);for(n=0;n<h;++n)d[n]=new Uint8ClampedArray(s[n]),g[n]=[0,0,0,0];for(var y=0;y<p;y+=4){for(var _=0;_<h;++_){var v=d[_];g[_][0]=v[y],g[_][1]=v[y+1],g[_][2]=v[y+2],g[_][3]=v[y+3]}var m=b(g,a);e[y]=m[0],e[y+1]=m[1],e[y+2]=m[2],e[y+3]=m[3]}}return e.buffer}}function i(e,t){var n=Object.keys(e.lib||{}).map(function(t){return"var "+t+" = "+e.lib[t].toString()+";"}).concat(["var __minion__ = ("+s.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(n,{type:"text/javascript"}),i=URL.createObjectURL(r),o=new Worker(i);return o.addEventListener("message",t),o}function r(t){var e;this._imageOps=!!t.imageOps;var n=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var r=0;r<e;++r)n[r]=i(t,this._onWorkerMessage.bind(this,r));else n[0]=function(t,e){var n=s(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:n(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=n,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}r.prototype.process=function(t,e,n){this._enqueue({inputs:t,meta:e,callback:n}),this._dispatch()},r.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},r.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},r.prototype._dispatch=function(){if(0===this._running&&0<this._queue.length){var t=this._job=this._queue.shift(),e=t.inputs[0].width,n=t.inputs[0].height,r=t.inputs.map(function(t){return t.data.buffer}),i=this._workers.length;if(1===(this._running=i))this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:e,height:n},r);else for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/i),a=0;a<i;++a){for(var u=a*s,l=[],c=0,h=r.length;c<h;++c)l.push(r[a].slice(u,u+s));this._workers[a].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:n},l)}}},r.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},r.prototype._resolveJob=function(){var t,e,n=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var i=n.inputs[0].data.length;t=new Uint8ClampedArray(i),e=new Array(i);for(var o=4*Math.ceil(i/4/r),s=0;s<r;++s){var a=this._dataLookup[s].buffer,u=s*o;t.set(new Uint8ClampedArray(a),u),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},n.callback(null,l(t,n.inputs[0].width,n.inputs[0].height),e),this._dispatch()},t.exports=r},function(t,e){var i=!0;try{new ImageData(10,10)}catch(t){i=!1}var o=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,n){if(i)return new ImageData(t,e,n);var r=o.createImageData(e,n);return r.data.set(t),r}},function(t,e,n){!function(t){"use strict";function G(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&_(r),i&&m(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function e(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r,i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(i&&_(i),t){case"Point":r=z(e).geometry;break;case"LineString":r=B(e).geometry;break;case"Polygon":r=U(e).geometry;break;case"MultiPoint":r=o(e).geometry;break;case"MultiLineString":r=c(e).geometry;break;case"MultiPolygon":r=u(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(r.bbox=i),r}function z(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!X(t[0])||!X(t[1]))throw new Error("coordinates must contain numbers");return G({type:"Point",coordinates:t},e,n)}function n(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return Y(t.map(function(t){return z(t,e)}),n)}function U(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var i=t[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!X(i[0][0])||!X(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return G({type:"Polygon",coordinates:t},e,n)}function r(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return Y(t.map(function(t){return U(t,e)}),n)}function B(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!X(t[0][1])||!X(t[0][1]))throw new Error("coordinates must contain numbers");return G({type:"LineString",coordinates:t},e,n)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return Y(t.map(function(t){return B(t,e)}),n)}function Y(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&_(n),r&&m(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function c(t,e,n){if(!t)throw new Error("coordinates is required");return G({type:"MultiLineString",coordinates:t},e,n)}function o(t,e,n){if(!t)throw new Error("coordinates is required");return G({type:"MultiPoint",coordinates:t},e,n)}function u(t,e,n){if(!t)throw new Error("coordinates is required");return G({type:"MultiPolygon",coordinates:t},e,n)}function s(t,e,n){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return G({type:"GeometryCollection",geometries:t},e,n)}function a(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function d(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=go[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function g(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=go[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function l(t,e){return f(g(t,e))}function p(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function f(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function v(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function h(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return d(g(t,e),n||"kilometers")}function y(t,e,n){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");var r=_o[e||"meters"];if(!r)throw new Error("invalid original units");var i=_o[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function X(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function q(t){return!!t&&t.constructor===Object}function _(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!X(t))throw new Error("bbox must only contain numbers")})}function m(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function E(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,_=0;_<y;_++){a=(c=!!(l=d?t.features[_].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<a;v++){var m=0,b=0;if(null!==(s=c?l.geometries[v]:l)){u=s.coordinates;var x=s.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,p,_,m,b),p++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,_,m,b),p++,"MultiPoint"===x&&m++;"LineString"===x&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],p,_,m,b),p++;"MultiLineString"===x&&m++,"Polygon"===x&&b++}"Polygon"===x&&m++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(b=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],p,_,m,b),p++;b++}m++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)E(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function b(t,o,s,e){var a=s;return E(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)},e),a}function x(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function w(t,n,r){var i=r;return x(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function O(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function C(t,n,r){var i=r;return O(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function S(t){var e=[];return E(t,function(t){e.push(t)}),e}function I(t,e){var n,r,i,o,s,a,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,l=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,l,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,l,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,l,c,h);p++}}function T(t,o,s){var a=s;return I(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)}),a}function R(t,a){I(t,function(t,n,r,e,i){var o,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return void a(G(t,r,{bbox:e,id:i}),n,0)}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,e){a(G({type:o,coordinates:t},r),n,e)})})}function L(t,r,i){var o=i;return R(t,function(t,e,n){o=0===e&&0===n&&void 0===i?t:r(o,t,e,n)}),o}function N(t,h){R(t,function(a,u,l){var c=0;if(a.geometry){var t=a.geometry.type;"Point"!==t&&"MultiPoint"!==t&&b(a,function(t,e,n,r,i,o){var s=B([t,e],a.properties);return h(s,u,l,o,c),c++,e})}})}function P(t,o,s){var a=s,u=!1;return N(t,function(t,e,n,r,i){a=!1===u&&void 0===s?t:o(a,t,e,n,r,i),u=!0}),a}function M(t,s){if(!t)throw new Error("geojson is required");R(t,function(t,e,n){if(null!==t.geometry){var r=t.geometry.type,i=t.geometry.coordinates;switch(r){case"LineString":s(t,e,n,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)s(B(i[o],t.properties),e,n,o)}}})}function j(t,i,o){var s=o;return M(t,function(t,e,n,r){s=0===e&&void 0===o?t:i(s,t,e,n,r)}),s}function V(t){var e=[1/0,1/0,-1/0,-1/0];return E(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function W(t){if(!t)throw new Error("obj is required");var e=A(t);if(1<e.length&&X(e[0])&&X(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function A(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return F(e),e;throw new Error("No valid coordinates")}function F(t){if(1<t.length&&X(t[0])&&X(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return F(t[0]);throw new Error("coordinates must only contain numbers")}function D(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function k(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function K(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function H(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var r=Object.keys(xo),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:xo[o],Eo[o]=s}Eo.verbose;var a=function(l){var c=[],h=0;return l.rows,l.cols,l.cells.forEach(function(t,u){t.forEach(function(t,e){if(void 0!==t&&!function(t){return 5===t.cval||10===t.cval}(t)&&!tt(t)){var n=function(t,e,n){var r,i,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),p=h.cval,f=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);a.push([n+f[0],e+f[1]]),f=nt(h,o=c[p]),a.push([n+f[0],e+f[1]]),et(h);for(var d=n+u[p],g=e+l[p],y=p;0<=d&&0<=g&&g<s&&(d!=n||g!=e)&&void 0!==(h=t[g][d]);){if(0===(p=h.cval)||15===p)return{path:a,info:"mergeable"};o=c[p],r=u[p],i=l[p],5!==p&&10!==p||(5===p?h.flipped?i=(r=-1===l[y]?(o="left",-1):(o="right",1),0):-1===u[y]&&(o="bottom",r=0,i=-1):10===p&&(h.flipped?i=-1===u[y]?(o="top",r=0,1):(o="bottom",r=0,-1):1===l[y]&&(o="left",r=-1,i=0))),f=nt(h,o),a.push([d+f[0],g+f[1]]),et(h),d+=r,g+=i,y=p}return{path:a,info:"closed"}}(l.cells,u,e),r=!1;if("mergeable"===n.info)for(var i=n.path[n.path.length-1][0],o=n.path[n.path.length-1][1],s=h-1;0<=s;s--)if(Math.abs(c[s][0][0]-i)<=1e-7&&Math.abs(c[s][0][1]-o)<=1e-7){for(var a=n.path.length-2;0<=a;--a)c[s].unshift(n.path[a]);r=!0;break}r||(c[h++]=n.path)}})}),c}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=e<=u?8:0,a|=e<=l?4:0,a|=e<=c?2:0;var p,f,d,g,y=!1;if(5==(a|=e<=h?1:0)||10===a){var _=(u+l+c+h)/4;5===a&&_<e?(a=10,y=!0):10===a&&_<e&&(a=5,y=!0)}if(0!==a&&15!==a)p=f=d=g=.5,1===a?(d=1-$(e,u,h),f=1-$(e,c,h)):2===a?(f=$(e,h,c),g=1-$(e,l,c)):3===a?(d=1-$(e,u,h),g=1-$(e,l,c)):4===a?(p=$(e,u,l),g=$(e,c,l)):5===a?(p=$(e,u,l),g=$(e,c,l),f=1-$(e,c,h),d=1-$(e,u,h)):6===a?(f=$(e,h,c),p=$(e,u,l)):7===a?(d=1-$(e,u,h),p=$(e,u,l)):8===a?(d=$(e,h,u),p=1-$(e,l,u)):9===a?(f=1-$(e,c,h),p=1-$(e,l,u)):10===a?(p=1-$(e,l,u),g=1-$(e,l,c),f=$(e,h,c),d=$(e,h,u)):11===a?(p=1-$(e,l,u),g=1-$(e,l,c)):12===a?(d=$(e,h,u),g=$(e,c,l)):13===a?(f=1-$(e,c,h),g=$(e,c,l)):14===a&&(d=$(e,h,u),f=$(e,h,c)),i.cells[o][s]={cval:a,flipped:y,top:p,right:g,bottom:f,left:d}}}}return i}(t,e));return"function"==typeof Eo.successCallback&&Eo.successCallback(a),a}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function it(t,e){if(!(this instanceof it))return new it(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){st(t,0,t.children.length,e,t)}function st(t,e,n,r,i){(i=i||dt(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],at(i,t.leaf?r(o):o);return i}function at(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ut(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function ct(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function pt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,wo(t,o,e,n,i),s.push(e,o,o,n))}function yt(t,e){return t(e={exports:{}},e.exports),e.exports}function _t(t,e){if(!(this instanceof _t))return new _t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:e<t?1:0},0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function vt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)jo(t[o],a)||u.push(t[o]);var l=function(r){var t=r.length;if(t<3){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return 2===t&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:e}var i=new Array(t);for(n=0;n<t;++n)i[n]=n;i.sort(function(t,e){var n=r[t][0]-r[e][0];return n||r[t][1]-r[e][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(n=2;n<t;++n){for(var a=i[n],u=r[a],l=o.length;l>1&&No(r[o[l-2]],r[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&No(r[s[l-2]],r[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}e=new Array(s.length+o.length-2);for(var c=0,h=(n=0,o.length);n<h;++n)e[c++]=o[n];for(var p=s.length-2;p>0;--p)e[c++]=s[p];return e}(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Oo(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=wt(u,r),s.push(r)}var l=Oo(16);for(a=0;a<s.length;a++)l.insert(Et(s[a]));for(var c=e*e,h=n*n;s.length;){var p=s.shift(),f=p.p,d=p.next.p,g=Ot(f,d);if(!(g<h)){var y=g/c;(u=function(t,e,n,r,i,o,s){for(var a=new Po(null,mt),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?Ct(c,n,r):function(t,e,n){if(bt(t,n)||bt(e,n))return 0;var r=St(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=St(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=St(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=St(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}(n,r,c);o<h||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,d=Ct(f,e,n),g=Ct(f,r,i);if(p.dist<d&&p.dist<g&&xt(n,f,s)&&xt(r,f,s))return f}(u=a.pop())&&(u=u.node)}return null}(o,p.prev.p,f,d,p.next.next.p,y,l))&&Math.min(Ot(u,f),Ot(u,d))<=y&&(s.push(p),s.push(wt(u,p)),o.remove(u),l.remove(p),l.insert(Et(p)),l.insert(Et(p.next)))}}p=r;for(var _=[];_.push(p.p),(p=p.next)!==r;);return _.push(p.p),_}function mt(t,e){return t.dist-e.dist}function bt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function xt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=n.search({minX:r,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&0<Ao(t,e,n)!=0<Ao(t,e,r)&&0<Ao(n,r,t)!=0<Ao(n,r,e)}(a[u].p,a[u].next.p,t,e))return!1;return!0}function Et(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function wt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,(n.prev=e).next.prev=n,e.next=n):(n.prev=n).next=n,n}function Ot(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Ct(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);1<a?(r=n[0],i=n[1]):0<a&&(r+=o*a,i+=s*a)}return o=t[0]-r,s=t[1]-i,o*o+s*s}function St(t,e,n,r,i,o,s,a){var u,l,c,h,p=n-t,f=r-e,d=s-i,g=a-o,y=t-i,_=e-o,v=p*p+f*f,m=p*d+f*g,b=d*d+g*g,x=p*y+f*_,E=d*y+g*_,w=v*b-m*m,O=w,C=w;0==w?(l=0,O=1,h=E,C=b):(h=v*E-m*x,(l=m*E-b*x)<0?(l=0,h=E,C=b):O<l&&(l=O,h=E+m,C=b)),h<0?-x<(h=0)?l=0:v<-x?l=O:(l=-x,O=v):C<h&&(h=C,m-x<0?l=0:v<m-x?l=O:(l=m-x,O=v));var S=(1-(c=0===h?0:h/C))*i+c*s-((1-(u=0===l?0:l/O))*t+u*n),I=(1-c)*o+c*a-((1-u)*e+u*r);return S*S+I*I}function It(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(E(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=Fo(r,n);return 3<i.length?U([i]):null}function Tt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=W(t),o=A(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,a))return!1;"Polygon"===s&&(o=[o]);for(var u=0,l=!1;u<o.length&&!l;u++)if(Rt(i,o[u][0],r)){for(var c=!1,h=1;h<o[u].length&&!c;)Rt(i,o[u][h],!r)&&(c=!0),h++;c||(l=!0)}return l}function Rt(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}function Lt(t,e){var n=[];return I(e,function(e){O(t,function(t){Tt(t,e)&&n.push(t)})}),Y(n)}function Nt(t,n){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var o=!1;return Y(function(t){if(t.length<3)return[];t.sort(Mt);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,h=c;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var p,f=l-u,d=h-c,g=d<f?f:d,y=.5*(l+u),_=.5*(h+c),v=[new Pt({x:y-20*g,y:_-g,__sentinel:!0},{x:y,y:_+20*g,__sentinel:!0},{x:y+20*g,y:_-g,__sentinel:!0})],m=[],b=[];for(a=t.length;a--;){for(b.length=0,p=v.length;p--;)0<(f=t[a].x-v[p].x)&&f*f>v[p].r?(m.push(v[p]),v.splice(p,1)):(d=t[a].y-v[p].y,f*f+d*d>v[p].r||(b.push(v[p].a,v[p].b,v[p].b,v[p].c,v[p].c,v[p].a),v.splice(p,1)));for(jt(b),p=b.length;p;)n=b[--p],e=b[--p],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),1e-12<Math.abs(s)&&v.push(new Pt(e,n,r))}for(Array.prototype.push.apply(m,v),a=m.length;a--;)(m[a].a.__sentinel||m[a].b.__sentinel||m[a].c.__sentinel)&&m.splice(a,1);return m}(t.features.map(function(t){var e={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return n?e.z=t.properties[n]:3===t.geometry.coordinates.length&&(o=!0,e.z=t.geometry.coordinates[2]),e})).map(function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],r=[t.c.x,t.c.y],i={};return o?(e.push(t.a.z),n.push(t.b.z),r.push(t.c.z)):i={a:t.a.z,b:t.b.z,c:t.c.z},U([[e,n,r,e]],i)}))}function Pt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Mt(t,e){return e.x-t.x}function jt(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function At(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.units,i=W(t),o=W(e),s=v(o[1]-i[1]),a=v(o[0]-i[0]),u=v(i[1]),l=v(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(l);return d(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function Ft(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Dt(t);case"FeatureCollection":return function(e){var n={type:"FeatureCollection"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return Dt(t)}),n}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return kt(t);default:throw new Error("unknown GeoJSON type")}}function Dt(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(r){var i={};return r&&Object.keys(r).forEach(function(t){var e=r[t];"object"==typeof e?null===e?i[t]=null:e.length?i[t]=e.map(function(t){return t}):i[t]=n(e):i[t]=e}),i}(e.properties),n.geometry=kt(e.geometry),n}function kt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return kt(t)}):e.coordinates=function e(t){return"object"!=typeof t[0]?t.slice():t.map(function(t){return e(t)})}(t.coordinates),e}function Gt(t,e){function i(t,e){e.length&&e.pop();for(var n=l[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&zo(e,i)}function o(t){return u(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function n(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(n)}var u=Go(t.transform),l=t.arcs;return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=a(e.arcs);break;case"MultiPolygon":n=e.arcs.map(a);break;default:return null}return{type:r,coordinates:n}}(e)}function zt(a,t){function n(e){e.forEach(function(t){t.forEach(function(t){(l[t=t<0?~t:t]||(l[t]=[])).push(e)})}),r.push(e)}function u(t){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Gt(a,{type:"Polygon",arcs:[t]}).coordinates[0])}var l={},r=[],i=[];return t.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),r.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,i.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){l[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(t){var e,n=[];if(t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){l[t<0?~t:t].length<2&&n.push(t)})})}),n=function(u,i){function t(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){o[t<0?~t:t]=1}),s.push(r)}}var o={},l={},c={},s=[],a=-1;return i.forEach(function(t,e){var n,r=u.arcs[t<0?~t:t];r.length<3&&!r[1][0]&&!r[1][1]&&(n=i[++a],i[a]=t,i[e]=n)}),i.forEach(function(t){var e,n,r=function(t){var e,n=u.arcs[t<0?~t:t],r=n[0];return u.transform?(e=[0,0],n.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=n[n.length-1],t<0?[e,r]:[r,e]}(t),i=r[0],o=r[1];if(e=c[i])if(delete c[e.end],e.push(t),e.end=o,n=l[o]){delete l[n.start];var s=n===e?e:e.concat(n);l[s.start=e.start]=c[s.end=n.end]=s}else l[e.start]=c[e.end]=e;else if(e=l[o])if(delete l[e.start],e.unshift(t),e.start=i,n=c[i]){delete c[n.end];var a=n===e?e:n.concat(e);l[a.start=n.start]=c[a.end=e.end]=a}else l[e.start]=c[e.end]=e;else l[(e=[t]).start=i]=c[e.end=o]=e}),t(c,l),t(l,c),i.forEach(function(t){o[t<0?~t:t]||s.push([t])}),s}(a,n),1<(e=n.length))for(var r,i,o=1,s=u(n[0]);o<e;++o)(r=u(n[o]))>s&&(i=n[0],n[0]=n[o],n[o]=i,s=r);return n})}}function Ut(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Bt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Yt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Yt:Xt)(t)}function Yt(t){var e,n=Xt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Xt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Xt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function qt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Vt(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Wt(t){return t[0].toString()+","+t[1].toString()}function Kt(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=function(t){var e={};R(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[],i=j(t,function(l,t){return function(t,e){var n,r=l.geometry.coordinates,i=e.geometry.coordinates,o=Wt(r[0]),s=Wt(r[r.length-1]),a=Wt(i[0]),u=Wt(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return B(n)}(0,t)||(r.push(l),t)});return i&&r.push(i),r.length?1===r.length?r[0]:c(r.map(function(t){return t.coordinates})):null}(t,e);case"Polygon":return function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[];R(t,function(t){r.push(t.geometry)});var i=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=[];do{var n=l.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>a&&(a=e),n<s&&(s=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,s=1/0,a=-1/0,u=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var c in t)e(t[c]);return a>=o&&u>=s?[o,s,a,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Bt(t[e]);return n}(t)),s=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-h)*f),Math.round((t[1]-p)*d)]}function i(t,e){for(var n,r,i,o,s,a=-1,u=0,l=t.length,c=new Array(l);++a<l;)n=t[a],o=Math.round((n[0]-h)*f),s=Math.round((n[1]-p)*d),o===r&&s===i||(c[u++]=[r=o,i=s]);for(c.length=u;u<e;)u=c.push([c[0][0],c[0][1]]);return c}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var h=e[0],p=e[1],l=e[2],c=e[3],f=l-h?(n-1)/(l-h):1,d=c-p?(n-1)/(c-p):1,g={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var y in t)u(t[y]);return{scale:[1/f,1/d],translate:[h,p]}}(t,o,e),a=Ko(Wo(function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function i(t){return t.map(r)}var o=-1,s=[],a=[],u=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}}(t))),u=a.coordinates,l=Uo(1.4*a.arcs.length,qt,Vt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map(function(t,e){return l.set(t,e),u.slice(t[0],t[1]+1)}),delete a.coordinates,u=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)r=(l=o[s])[0],i=l[1],r===c&&i===h||(o[a++]=[r-c,i-h],c=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a}({geoms:s(r).geometry});return function(t){return Gt(t,zt.apply(this,arguments))}(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function Ht(t,e){var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=J(t),i=[];switch(r){case"LineString":i=Zt(t);break;case"MultiLineString":case"Polygon":A(t).forEach(function(t){i.push(Zt(t))});break;case"MultiPolygon":A(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Zt(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};A(t).forEach(function(t){var e=t.join("-");o.hasOwnProperty(e)||(i.push(t),o[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):G({type:r,coordinates:i},t.properties,t.bbox,t.id)}function Zt(t){var e=A(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],s=e.length-1;o.push(e[0]);for(var a=1;a<s;a++)n=e[a-1],r=e[a],function(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return(r-o)*c-(i-s)*l==0&&(Math.abs(l)>=Math.abs(c)?0<l?o<=r&&r<=a:a<=r&&r<=o:0<c?s<=i&&i<=u:u<=i&&i<=s)}(n,i=e[a+1],r)||o.push(r);return o.push(i),o}function Jt(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);1<a?(r=n.x,i=n.y):0<a&&(r+=o*a,i+=s*a)}return o=t.x-r,s=t.y-i,o*o+s*s}function Qt(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=function(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,i,o){for(var s,a=i,u=n+1;u<r;u++){var l=Jt(e[u],e[n],e[r]);a<l&&(s=u,a=l)}i<a&&(1<s-n&&t(e,n,s,i,o),o.push(e[s]),1<r-s&&t(e,s,r,i,o))}(t,0,n,e,r),r.push(t[n]),r}(t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,s=t.length;o<s;o++)a=n=t[o],u=r,void 0,l=a.x-u.x,c=a.y-u.y,e<l*l+c*c&&(i.push(n),r=n);var a,u,l,c;return r!==n&&i.push(n),i}(t,r),r)}function $t(t,e,n){return Qt(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function te(t,r,i){return t.map(function(t){var e=t.map(function(t){return{x:t[0],y:t[1]}});if(e.length<4)throw new Error("invalid polygon");for(var n=Qt(e,r,i).map(function(t){return[t.x,t.y]});!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(n);)n=Qt(e,r-=.01*r,i).map(function(t){return[t.x,t.y]});return n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),n})}function ee(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!X(n))throw new Error("resolution must be an number");if(!X(r))throw new Error("sharpness must be an number");for(var i=[],o=new Ho({points:H(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var a=o.pos(s);Math.floor(s/100)%2==0&&i.push([a.x,a.y])}return B(i,t.properties)}function ne(t){_(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[e,n];return U([[o,[r,n],[r,i],[e,i],o]])}function re(t){return ne(V(t))}function ie(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(At(t.slice(0,2),[r,n])>=At(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function oe(t,e,n,r){if(!q(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties,s=W(t),a=v(s[0]),u=v(s[1]),l=v(n),c=g(e,i),h=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(l));return z([f(a+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(h))),f(h)],o)}function se(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var o=[],s=0;s<r;s++)o.push(oe(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),U([o],i)}function ae(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=ae(e,t);return n=(n+180)%360}(t,e);var r=W(t),i=W(e),o=v(r[0]),s=v(i[0]),a=v(r[1]),u=v(i[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return f(Math.atan2(l,c))}function ue(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=V(t);return z([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function le(t,e){var n=0,r=0,i=0;return E(t,function(t){n+=t[0],r+=t[1],i++},!0),z([n/i,r/i],e)}function ce(e){var n=[];return"FeatureCollection"===e.type?O(e,function(e){E(e,function(t){n.push(z(t,e.properties))})}):E(e,function(t){n.push(z(t,e.properties))}),Y(n)}function he(t,e,n){n=n||2;var r,i,o,s,a,u,l,c=e&&e.length,h=c?e[0]*n:t.length,p=pe(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,r){var i,o,s,a,u,l=[];for(i=0,o=e.length;i<o;i++)s=e[i]*r,a=i<o-1?e[i+1]*r:t.length,(u=pe(t,s,a,r,!1))===u.next&&(u.steiner=!0),l.push(function(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}(u));for(l.sort(de),i=0;i<l.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&s<a){if((s=a)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&ye(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&be(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=xe(e,t);fe(n,n.next)}}(l[i],n),n=fe(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<h;d+=n)a=t[d],u=t[d+1],a<r&&(r=a),u<i&&(i=u),o<a&&(o=a),s<u&&(s=u);l=0!==(l=Math.max(o-r,s-i))?1/l:0}return function l(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){for(var i=t;null===i.z&&(i.z=ge(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,o=t=null,s=0;n;){for(s++,r=n,e=a=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;0<a||0<u&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(n=(i=n).nextZ,a--):(r=(i=r).nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(1<s)}(i)}(t,r,i,o);for(var a,u,c=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?function(t,e,n,r){var i=t.prev,o=t,s=t.next;if(0<=_e(i,o,s))return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=ge(a,u,e,n,r),p=ge(l,c,e,n,r),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&ye(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=_e(f.prev,f,f.next))return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&ye(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=_e(f.prev,f,f.next))return!1;f=f.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(0<=_e(e,n,r))return!1;for(var i=t.next.next;i!==t.prev;){if(ye(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=_e(i.prev,i,i.next))return!1;i=i.next}return!0}(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),we(t),t=u.next,c=u.next;else if((t=u)===c){s?1===s?l(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!ve(i,o)&&me(i,r,r.next,o)&&be(i,o)&&be(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),we(r),we(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===s&&function(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&me(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&be(t,e)&&be(e,t)&&function(t,e){for(var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}(t,e)}(s,a)){var u=xe(s,a);return s=fe(s,s.next),u=fe(u,u.next),l(s,e,n,r,i,o),l(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}(t,e,n,r,i,o):l(fe(t),e,n,r,i,o,1);break}}}(p,f,n,r,i,l),f}function pe(t,e,n,r,i){var o,s;if(i===0<Ce(t,e,n,r))for(o=e;o<n;o+=r)s=Ee(o,t[o],t[o+1],s);else for(o=n-r;e<=o;o-=r)s=Ee(o,t[o],t[o+1],s);return s&&ve(s,s.next)&&(we(s),s=s.next),s}function fe(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!ve(r,r.next)&&0!==_e(r.prev,r,r.next))r=r.next;else{if(we(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function de(t,e){return t.x-e.x}function ge(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ye(t,e,n,r,i,o,s,a){return 0<=(i-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(n-s)*(e-a)&&0<=(n-s)*(o-a)-(i-s)*(r-a)}function _e(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ve(t,e){return t.x===e.x&&t.y===e.y}function me(t,e,n,r){return!!(ve(t,e)&&ve(n,r)||ve(t,r)&&ve(n,e))||0<_e(t,e,n)!=0<_e(t,e,r)&&0<_e(n,r,t)!=0<_e(n,r,e)}function be(t,e){return _e(t.prev,t,t.next)<0?0<=_e(t,e,t.next)&&0<=_e(t,t.prev,e):_e(t,e,t.prev)<0||_e(t,t.next,e)<0}function xe(t,e){var n=new Oe(t.i,t.x,t.y),r=new Oe(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function Ee(t,e,n,r){var i=new Oe(t,e,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function we(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Oe(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ce(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Se(t){var r=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),i=Zo(r.vertices,r.holes,2),e=[],o=[];i.forEach(function(t,e){var n=i[e];o.push([r.vertices[2*n],r.vertices[2*n+1]])});for(var n=0;n<o.length;n+=3){var s=o.slice(n,n+3);s.push(o[n]),e.push(U([s]))}return e}function Ie(r,t){if(!r)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var i,o=1/0;return O(t,function(t,e){var n=At(r,t);n<o&&((i=Ft(t)).properties.featureIndex=e,i.properties.distanceToPoint=n,o=n)}),i}function Te(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){if(600<i-r){var s=i-r+1,a=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*l/s+c)),Math.min(i,Math.floor(n+(s-a)*l/s+c)),o)}var h=e[n],p=r,f=i;for(Re(e,r,n),0<o(e[i],h)&&Re(e,r,i);p<f;){for(Re(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;0<o(e[f],h);)f--}0===o(e[r],h)?Re(e,r,f):Re(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:e<t?1:0})}function Re(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Le(t,e){if(!(this instanceof Le))return new Le(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ne(t,e){Pe(t,0,t.children.length,e,t)}function Pe(t,e,n,r,i){(i=i||ze(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Me(i,t.leaf?r(o):o);return i}function Me(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function je(t,e){return t.minX-e.minX}function Ae(t,e){return t.minY-e.minY}function Fe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function De(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ke(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ge(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ze(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ue(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(Te(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),s.push(e,o,o,n))}function Be(t){var e=Le(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Ye(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Xe(t);return Le.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(t){var e=Ye(t);e.bbox=t,n.push(e)}):O(t,function(t){t.bbox=t.bbox?t.bbox:Xe(t),n.push(t)}),Le.prototype.load.call(this,n)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Ye(e)).bbox=e}return Le.prototype.remove.call(this,t)},e.clear=function(){return Le.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Le.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Le.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Le.prototype.all.call(this)}},e.toJSON=function(){return Le.prototype.toJSON.call(this)},e.fromJSON=function(t){return Le.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Xe(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Ye(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function Xe(t){var e=[1/0,1/0,-1/0,-1/0];return E(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function qe(t){if(!t)throw new Error("geojson is required");var e=[];return R(t,function(t){!function(n,r){var t=[],e=n.geometry;switch(e.type){case"Polygon":t=A(e);break;case"LineString":t=[A(e)]}t.forEach(function(t){var e=function(t,r){var i=[];return t.reduce(function(t,e){var n=B([t,e],r);return n.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,i<n?n:i,o<r?r:o]}(t,e),i.push(n),e}),i}(t,n.properties);e.forEach(function(t){t.id=r.length,r.push(t)})})}(t,e)}),Y(e)}function Ve(t,e){var i={},o=[];if("LineString"===t.type&&(t=G(t)),"LineString"===e.type&&(e=G(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var n=We(t,e);return n&&o.push(n),Y(o)}var s=Be();return s.load(qe(e)),O(qe(t),function(r){O(s.search(r),function(t){var e=We(r,t);if(e){var n=A(e).join(",");i[n]||(i[n]=!0,o.push(e))}})}),Y(o)}function We(t,e){var n=A(t),r=A(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=r[0][0],l=r[0][1],c=r[1][0],h=r[1][1],p=(h-l)*(s-i)-(c-u)*(a-o),f=(c-u)*(o-l)-(h-l)*(i-u),d=(s-i)*(o-l)-(a-o)*(i-u);if(0==p)return null;var g=f/p,y=d/p;return 0<=g&&g<=1&&0<=y&&y<=1?z([i+g*(s-i),o+g*(a-o)]):null}function Ke(t,p,f){if(!q(f=f||{}))throw new Error("options is invalid");var e=t.geometry?t.geometry.type:t.type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("lines must be LineString or MultiLineString");var d=z([1/0,1/0],{dist:1/0}),g=0;return R(t,function(t){for(var e=A(t),n=0;n<e.length-1;n++){var r=z(e[n]);r.properties.dist=At(p,r,f);var i=z(e[n+1]);i.properties.dist=At(p,i,f);var o=At(r,i,f),s=Math.max(r.properties.dist,i.properties.dist),a=ae(r,i),u=oe(p,s,a+90,f),l=oe(p,s,a-90,f),c=Ve(B([u.geometry.coordinates,l.geometry.coordinates]),B([r.geometry.coordinates,i.geometry.coordinates])),h=null;0<c.features.length&&((h=c.features[0]).properties.dist=At(p,h,f),h.properties.location=g+At(r,h,f)),r.properties.dist<d.properties.dist&&((d=r).properties.index=n,d.properties.location=g),i.properties.dist<d.properties.dist&&((d=i).properties.index=n+1,d.properties.location=g+o),h&&h.properties.dist<d.properties.dist&&((d=h).properties.index=n),g+=o}}),d}function He(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return 180<(r=i?Ze(W(e),W(t)):Ze(W(t),W(e)))?-(360-r):r}function Ze(t,e){var n=v(t[1]),r=v(e[1]),i=v(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(f(Math.atan2(i,o))+360)%360}function Je(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=W(t),o=W(e);return o[0]+=180<o[0]-i[0]?-360:180<i[0]-o[0]?360:0,h(function(t,e,n){var r=n=void 0===n?fo:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=1e-11<Math.abs(u)?s/u:Math.cos(i);return Math.sqrt(s*s+l*l*a*a)*r}(i,o),"meters",r)}function Qe(t,e){return tn(t,"mercator",e)}function $e(t,e){return tn(t,"wgs84",e)}function tn(t,n,e){if(!q(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&X(t[0])?t="mercator"===n?en(t):nn(t):(!0!==r&&(t=Ft(t)),E(t,function(t){var e="mercator"===n?en(t):nn(t);t[0]=e[0],t[1]=e[1]})),t}function en(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:0<t?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function nn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function rn(t,e,i){if(!q(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=z(t):"Point"===t.type?t=G(t):k(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=B(e):"LineString"===e.type?e=G(e):k(e,"LineString","line");var o=1/0,s=t.geometry.coordinates;return N(e,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],r=function(t,e,n,r){var i=r.mercator,o=!0!==i?At(e,t,r):on(e,t,r),s=p(!0!==i?ae(e,t):He(e,t)),a=p(!0!==i?ae(e,n):He(e,n)),u=Math.abs(s-a);if(90<u)return o;var l=(a+180)%360,c=p(!0!==i?ae(n,t):He(n,t)),h=Math.abs(c-l);return 180<h&&(h=Math.abs(h-360)),90<h?!0!==i?At(t,n,r):on(t,n,r):!0!==i?o*Math.sin(v(u)):function(t,e,n,r){var i=0;(180<=Math.abs(t[0])||180<=Math.abs(e[0])||180<=Math.abs(n[0]))&&(i=0<t[0]||0<e[0]||0<n[0]?-180:180);var o=z(n),s=Qe([t[0]+i,t[1]]),a=Qe([e[0]+i,e[1]]),u=Qe([n[0]+i,n[1]]),l=$e(function(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1],a=n[0],u=n[1],l=o-r,c=s-i,h=((a-r)*l+(u-i)*c)/(l*l+c*c);return[r+h*l,i+h*c]}(s,a,u));return 0!==i&&(l[0]-=i),Je(o,l,r)}(e,n,t,r)}(s,e,n,i);r<o&&(o=r)}),o}function on(t,e,n){var r=n.units,i=0;180<=Math.abs(t[0])&&(i=0<t[0]?-180:180),180<=Math.abs(e[0])&&(i=0<e[0]?-180:180);var o=Qe([t[0]+i,t[1]]),s=Qe([e[0]+i,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]);return h(Math.sqrt(u),"meters",r)}function sn(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?Y([G(t)]):Y([t]):t}(t),n=ue(e),r=!1,i=0;!r&&i<e.features.length;){var o,s=e.features[i].geometry,a=!1;if("Point"===s.type)n.geometry.coordinates[0]===s.coordinates[0]&&n.geometry.coordinates[1]===s.coordinates[1]&&(r=!0);else if("MultiPoint"===s.type){var u=!1;for(o=0;!u&&o<s.coordinates.length;)n.geometry.coordinates[0]===s.coordinates[o][0]&&n.geometry.coordinates[1]===s.coordinates[o][1]&&(u=r=!0),o++}else if("LineString"===s.type)for(o=0;!a&&o<s.coordinates.length-1;)an(n.geometry.coordinates[0],n.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(r=a=!0),o++;else if("MultiLineString"===s.type)for(var l=0;l<s.coordinates.length;){a=!1,o=0;for(var c=s.coordinates[l];!a&&o<c.length-1;)an(n.geometry.coordinates[0],n.geometry.coordinates[1],c[o][0],c[o][1],c[o+1][0],c[o+1][1])&&(r=a=!0),o++;l++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||Tt(n,s)&&(r=!0);i++}if(r)return n;var h=Y([]);for(i=0;i<e.features.length;i++)h.features=h.features.concat(ce(e.features[i]).features);return z(Ie(n,h).geometry.coordinates)}function an(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function un(t){return T(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return ln(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=ln(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)}function ln(t){var e=0;if(t&&0<t.length){e+=Math.abs(cn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(cn(t[n]))}return e}function cn(t){var e,n,r,i,o,s,a=0,u=t.length;if(2<u){for(s=0;s<u;s++)o=s===u-2?(r=u-2,i=u-1,0):s===u-1?(r=u-1,i=0,1):(i=(r=s)+1,s+2),e=t[r],n=t[i],a+=(hn(t[o][0])-hn(e[0]))*Math.sin(hn(n[1]));a=a*$o*$o/2}return a}function hn(t){return t*Math.PI/180}function pn(t,r){if(!q(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return P(t,function(t,e){var n=e.geometry.coordinates;return t+At(n[0],n[1],r)},0)}function fn(t,e,n,r){if(!q(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=0,c=0;c<i.length&&!(l<=e&&c===i.length-1);c++){if(e<l&&0===o.length){if(!(s=e-l))return o.push(i[c]),B(o);a=ae(i[c],i[c-1])-180,u=oe(i[c],s,a,r),o.push(u.geometry.coordinates)}if(n<=l)return(s=n-l)?(a=ae(i[c],i[c-1])-180,u=oe(i[c],s,a,r),o.push(u.geometry.coordinates)):o.push(i[c]),B(o);if(e<=l&&o.push(i[c]),c===i.length-1)return B(o);l+=At(i[c],i[c+1],r)}return B(i[i.length-1])}function dn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!q(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=W(t),o=A(e),s=0;s<o.length-1;s++){var a=!1;if(r&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),function(t,e,n,r){var i=n[0],o=n[1],s=t[0],a=t[1],u=e[0],l=e[1],c=n[0]-s,h=n[1]-a,p=u-s,f=l-a;return c*f-h*p==0&&(r?"start"===r?Math.abs(p)>=Math.abs(f)?0<p?s<i&&i<=u:u<=i&&i<s:0<f?a<o&&o<=l:l<=o&&o<a:"end"===r?Math.abs(p)>=Math.abs(f)?0<p?s<=i&&i<u:u<i&&i<=s:0<f?a<=o&&o<l:l<o&&o<=a:"both"===r?Math.abs(p)>=Math.abs(f)?0<p?s<i&&i<u:u<i&&i<s:0<f?a<o&&o<l:l<o&&o<a:void 0:Math.abs(p)>=Math.abs(f)?0<p?s<=i&&i<=u:u<=i&&i<=s:0<f?a<=o&&o<=l:l<=o&&o<=a)}(o[s],o[s+1],i,a))return!0}return!1}function gn(t,e){var n=J(t),r=J(e),i=H(t),o=H(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(_n(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return dn(i,o,{ignoreEndVertices:!0});case"Polygon":return Tt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)_n(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!dn(t.coordinates[r],e))return!1;n=n||dn(t.coordinates[r],e,{ignoreEndVertices:!0})}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Tt(t.coordinates[1],e);if(!i){n=!1;break}i=Tt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!dn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){var n=V(e),r=V(t);if(!yn(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!Tt(t.coordinates[o],e))return!1;if(!(i=i||Tt(t.coordinates[o],e,{ignoreBoundary:!0}))){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]);i=Tt(s,e,{ignoreBoundary:!0})}}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=V(t);if(!yn(V(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Tt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function yn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function _n(t,e){return t[0]===e[0]&&t[1]===e[1]}function vn(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.mask,i=n.properties,o=[];if(null==e)throw new Error("cellSide is required");if(!X(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],a=t[1],u=t[2],l=t[3],c=e/At([s,a],[u,a],n)*(u-s),h=e/At([s,a],[s,l],n)*(l-a),p=u-s,f=l-a,d=Math.floor(p/c),g=(f-Math.floor(f/h)*h)/2,y=s+(p-d*c)/2;y<=u;){for(var _=a+g;_<=l;){var v=z([y,_],i);r?gn(v,r)&&o.push(v):o.push(v),_+=h}y+=c}return Y(o)}function mn(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return E(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function bn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!bn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function xn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return 0<=(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])==e}function En(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!En(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function wn(r,t){var i=[],o=Be();return R(t,function(t){if(i.forEach(function(t,e){t.id=e}),i.length){var e=o.search(t);if(e.features.length){var n=Cn(t,e);i=i.filter(function(t){return t.id!==n.id}),o.remove(n),O(On(n,t),function(t){i.push(t),o.insert(t)})}}else(i=On(r,t).features).forEach(function(t){t.bbox||(t.bbox=ie(V(t)))}),o.load(Y(i))}),Y(i)}function On(t,o){var s=[],e=A(t)[0],n=A(t)[t.geometry.coordinates.length-1];if(Sn(e,W(o))||Sn(n,W(o)))return Y([t]);var r=Be(),i=qe(t);r.load(i);var a=r.search(o);if(!a.features.length)return Y([t]);var u=Cn(o,a),l=C(i,function(t,e,n){var r=A(e)[1],i=W(o);return n===u.id?(t.push(i),s.push(B(t)),Sn(i,r)?[i]:[i,r]):(t.push(r),t)},[e]);return 1<l.length&&s.push(B(l)),Y(s)}function Cn(n,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var r,i=1/0;return O(t,function(t){var e=Ke(t,n).properties.dist;e<i&&(r=t,i=e)}),r}function Sn(t,e){return t[0]===e[0]&&t[1]===e[1]}function In(t,e,n,r,i){if(!q(i=i||{}))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var a=Tn(n),u=Tn(r),l=t.properties;if(a===u)return B(se(t,e,i).geometry.coordinates[0],l);for(var c=a,h=a<u?u:u+360,p=c,f=[],d=0;p<h;)f.push(oe(t,e,p,s).geometry.coordinates),p=c+360*++d/o;return h<p&&f.push(oe(t,e,h,s).geometry.coordinates),B(f,l)}function Tn(t){var e=t%360;return e<0&&(e+=360),e}function Rn(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=J(t),i=A(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Ln(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(Ln(t,n))}),Y(o);default:throw new Error("geom "+r+" not supported")}}function Ln(t,e){return 1<t.length?c(t,e):B(t[0],e)}function Nn(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(A(Pn(t,{},r,i)))}),u(o,n)}return Pn(t,n,r,i)}function Pn(t,e,n,r){e=e||t.properties||{};var i=A(t),o=J(t);if(!i.length)throw new Error("line must contain coordinates");switch(o){case"LineString":return n&&(i=Mn(i)),U([i],e);case"MultiLineString":var s=[],a=0;return i.forEach(function(t){if(n&&(t=Mn(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(V(B(t)));a<e?(s.unshift(t),a=e):s.push(t)}else s.push(t)}),U(s,e);default:throw new Error("geometry type "+o+" is not supported")}}function Mn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function jn(t,e,n){var r,i,o,s,a,u=t.length,l=Fn(t[0],e),c=[];for(n=n||[],r=1;r<u;r++){for(i=t[r-1],s=a=Fn(o=t[r],e);;){if(!(l|s)){c.push(i),s!==a?(c.push(o),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(o);break}if(l&s)break;l?l=Fn(i=An(i,o,l,e),e):s=Fn(o=An(i,o,s,e),e)}l=a}return c.length&&n.push(c),n}function An(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Fn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Dn(t,e){for(var n=[],r=0;r<t.length;r++){var i=ls.polygon(t[r],e);0<i.length&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),4<=i.length&&n.push(i))}return n}function kn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Gn(t,e,n){return n=n||{},t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(zn(t)||zn(e))return!1;if(t.prototype!==e.prototype)return!1;if(kn(t))return!!kn(e)&&(t=cs.call(t),e=cs.call(e),Gn(t,e,n));if(Un(t)){if(!Un(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;0<=r;r--)if(o[r]!==s[r])return!1;for(r=o.length-1;0<=r;r--)if(i=o[r],!Gn(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function zn(t){return null==t}function Un(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||0<t.length&&"number"!=typeof t[0])}function Bn(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var o,s=n.tolerance||0,a=[],u=Be();return u.load(qe(t)),N(e,function(r){var i=!1;O(u.search(r),function(t){if(!1===i){var e=A(r).sort(),n=A(t).sort();Gn(e,n)?(i=!0,o=o?Yn(o,r):r):(0===s?dn(e[0],t)&&dn(e[1],t):Ke(t,e[0]).properties.dist<=s&&Ke(t,e[1]).properties.dist<=s)?(i=!0,o=o?Yn(o,r):r):(0===s?dn(n[0],r)&&dn(n[1],r):Ke(r,n[0]).properties.dist<=s&&Ke(r,n[1]).properties.dist<=s)&&(o=o?Yn(o,t):t)}}),!1===i&&o&&(a.push(o),o=void 0)}),o&&a.push(o),Y(a)}function Yn(t,e){var n=A(e),r=A(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Gn(n[0],i)?s.unshift(n[1]):Gn(n[0],o)?s.push(n[1]):Gn(n[1],i)?s.unshift(n[0]):Gn(n[1],o)&&s.push(n[0]),t}function Xn(t){var e=t%360;return e<0&&(e+=360),e}function qn(t,e,n,r){if(!q(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=e))throw new Error("distance must be greater than 0");var s=h(e,i,"meters"),a=W(t),u=function(t,e,n,r){r=void 0===r?fo:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=v(t[1]),a=v(n),u=i*Math.cos(a),l=s+u;Math.abs(l)>Math.PI/2&&(l=0<l?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=1e-11<Math.abs(c)?u/c:Math.cos(s),p=i*Math.sin(a)/h;return[(180*(o+p)/Math.PI+540)%360-180,180*l/Math.PI]}(a,s,n);return u[0]+=180<u[0]-a[0]?-360:180<a[0]-u[0]?360:0,z(u,o)}function Vn(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Wn(a,u,e),n<=0&&0<r?function(t,e,n){return Wn(t,e,n)<0}(e,a,i)||(i=a):0<n&&r<=0&&(function(t,e,n){return 0<Wn(t,e,n)}(e,a,o)||(o=a)),n=r}return[i,o]}function Wn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Kn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=A(t),o=0,s=1;s<i.length;)n=r||i[0],o+=((r=i[s])[0]-n[0])*(r[1]+n[1]),s++;return 0<o}function Hn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return I(t,function(t){Hn(t,e)}),t;case"LineString":return Zn(A(t),e),t;case"Polygon":return Jn(A(t),e),t;case"MultiLineString":return A(t).forEach(function(t){Zn(t,e)}),t;case"MultiPolygon":return A(t).forEach(function(t){Jn(t,e)}),t;case"Point":case"MultiPoint":return t}}function Zn(t,e){Kn(t)===e&&t.reverse()}function Jn(t,e){Kn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Kn(t[n])===e&&t[n].reverse()}function Qn(t,e,n,r){r=r||{};for(var i=Object.keys(hs),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:hs[s],ps[s]=a}ps.verbose;var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(f))){l|=c<e?0:s<c?128:64,l|=h<e?0:s<h?32:16,l|=p<e?0:s<p?8:4;var d=+(l|=f<e?0:s<f?2:1),g=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var y=(c+h+p+f)/4;g=s<y?2:y<e?0:1,34===l?1===g?l=35:0===g&&(l=136):136===l?1===g?(l=35,g=4):0===g&&(l=34):17===l?1===g?(l=155,g=4):0===g&&(l=153):68===l?1===g?(l=103,g=4):0===g&&(l=102):153===l?1===g&&(l=155):102===l?1===g&&(l=103):152===l?g<2&&(l=156,g=1):137===l?g<2&&(l=139,g=1):98===l?g<2&&(l=99,g=1):38===l?g<2&&(l=39,g=1):18===l?0<g?(l=156,g=4):l=152:33===l?0<g?(l=139,g=4):l=137:72===l?0<g?(l=99,g=4):l=98:132===l&&(0<g?(l=39,g=4):l=38)}if(0!=l&&170!=l){var _,v,m,b,x,E,w,O;_=v=m=b=x=E=w=O=.5;var C=[];1===l?(m=1-$n(e,p,f),O=1-$n(e,c,f),C.push(Qs[l])):169===l?(m=$n(s,f,p),O=$n(s,f,c),C.push(Qs[l])):4===l?(E=1-$n(e,h,p),b=$n(e,f,p),C.push(Zs[l])):166===l?(E=$n(s,p,h),b=1-$n(s,p,f),C.push(Zs[l])):16===l?(x=$n(e,p,h),v=$n(e,c,h),C.push(Hs[l])):154===l?(x=1-$n(s,h,p),v=1-$n(s,h,c),C.push(Hs[l])):64===l?(w=$n(e,f,c),_=1-$n(e,h,c),C.push(ta[l])):106===l?(w=1-$n(s,c,f),_=$n(s,c,h),C.push(ta[l])):168===l?(b=$n(s,f,p),m=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),C.push(Js[l]),C.push(Qs[l])):2===l?(b=1-$n(e,p,f),m=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),C.push(Js[l]),C.push(Qs[l])):162===l?(x=$n(s,p,h),E=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),C.push(Js[l]),C.push(Qs[l])):8===l?(x=1-$n(e,h,p),E=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),C.push(Hs[l]),C.push(Zs[l])):138===l?(x=1-$n(e,h,p),E=1-$n(s,h,p),_=1-$n(s,h,c),v=1-$n(e,h,c),C.push(Hs[l]),C.push(Zs[l])):32===l?(x=$n(s,p,h),E=$n(e,p,h),_=$n(e,c,h),v=$n(s,c,h),C.push(Hs[l]),C.push(Zs[l])):42===l?(O=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,h),v=$n(s,c,h),C.push($s[l]),C.push(ta[l])):128===l&&(O=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,h,c),v=1-$n(e,h,c),C.push($s[l]),C.push(ta[l])),5===l?(E=1-$n(e,h,p),O=1-$n(e,c,f),C.push(Zs[l])):165===l?(E=$n(s,p,h),O=$n(s,f,c),C.push(Zs[l])):20===l?(b=$n(e,f,p),v=$n(e,c,h),C.push(Js[l])):150===l?(b=1-$n(s,p,f),v=1-$n(s,h,c),C.push(Js[l])):80===l?(x=$n(e,p,h),w=$n(e,f,c),C.push(Hs[l])):90===l?(x=1-$n(s,h,p),w=1-$n(s,c,f),C.push(Hs[l])):65===l?(m=1-$n(e,p,f),_=1-$n(e,h,c),C.push(Qs[l])):105===l?(m=$n(s,f,p),_=$n(s,c,h),C.push(Qs[l])):160===l?(x=$n(s,p,h),E=$n(e,p,h),O=$n(e,f,c),w=$n(s,f,c),C.push(Hs[l]),C.push(Zs[l])):10===l?(x=1-$n(e,h,p),E=1-$n(s,h,p),O=1-$n(s,c,f),w=1-$n(e,c,f),C.push(Hs[l]),C.push(Zs[l])):130===l?(b=1-$n(e,p,f),m=1-$n(s,p,f),_=1-$n(s,h,c),v=1-$n(e,h,c),C.push(Js[l]),C.push(Qs[l])):40===l?(b=$n(s,f,p),m=$n(e,f,p),_=$n(e,c,h),v=$n(s,c,h),C.push(Js[l]),C.push(Qs[l])):101===l?(E=$n(s,p,h),_=$n(s,c,h),C.push(Zs[l])):69===l?(E=1-$n(e,h,p),_=1-$n(e,h,c),C.push(Zs[l])):149===l?(O=$n(s,f,c),v=1-$n(s,h,c),C.push($s[l])):21===l?(O=1-$n(e,c,f),v=$n(e,c,h),C.push($s[l])):86===l?(b=1-$n(s,p,f),w=1-$n(s,c,f),C.push(Js[l])):84===l?(b=$n(e,f,p),w=$n(e,f,c),C.push(Js[l])):89===l?(x=1-$n(s,h,p),m=$n(s,f,p),C.push(Qs[l])):81===l?(x=$n(e,p,h),m=1-$n(e,p,f),C.push(Qs[l])):96===l?(x=$n(s,p,h),E=$n(e,p,h),w=$n(e,f,c),_=$n(s,c,h),C.push(Hs[l]),C.push(Zs[l])):74===l?(x=1-$n(e,h,p),E=1-$n(s,h,p),w=1-$n(s,c,f),_=1-$n(e,h,c),C.push(Hs[l]),C.push(Zs[l])):24===l?(x=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),v=$n(e,c,h),C.push(Hs[l]),C.push(Qs[l])):146===l?(x=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),v=1-$n(s,h,c),C.push(Hs[l]),C.push(Qs[l])):6===l?(E=1-$n(e,h,p),b=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),C.push(Zs[l]),C.push(Js[l])):164===l?(E=$n(s,p,h),b=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),C.push(Zs[l]),C.push(Js[l])):129===l?(m=1-$n(e,p,f),O=$n(s,f,c),_=1-$n(s,h,c),v=1-$n(e,h,c),C.push(Qs[l]),C.push($s[l])):41===l?(m=$n(s,f,p),O=1-$n(e,c,f),_=$n(e,c,h),v=$n(s,c,h),C.push(Qs[l]),C.push($s[l])):66===l?(b=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),_=1-$n(e,h,c),C.push(Js[l]),C.push(Qs[l])):104===l?(b=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),_=$n(s,c,h),C.push(Qs[l]),C.push(ea[l])):144===l?(x=$n(e,p,h),O=$n(e,f,c),w=$n(s,f,c),v=1-$n(s,h,c),C.push(Hs[l]),C.push(ta[l])):26===l?(x=1-$n(s,h,p),O=1-$n(s,c,f),w=1-$n(e,c,f),v=$n(e,c,h),C.push(Hs[l]),C.push(ta[l])):36===l?(E=$n(s,p,h),b=$n(e,f,p),_=$n(e,c,h),v=$n(s,c,h),C.push(Zs[l]),C.push(Js[l])):134===l?(E=1-$n(e,h,p),b=1-$n(s,p,f),_=1-$n(s,h,c),v=1-$n(e,h,c),C.push(Zs[l]),C.push(Js[l])):9===l?(x=1-$n(e,h,p),E=1-$n(s,h,p),m=$n(s,f,p),O=1-$n(e,c,f),C.push(Hs[l]),C.push(Zs[l])):161===l?(x=$n(s,p,h),E=$n(e,p,h),m=1-$n(e,p,f),O=$n(s,f,c),C.push(Hs[l]),C.push(Zs[l])):37===l?(E=$n(s,p,h),O=1-$n(e,c,f),_=$n(e,c,h),v=$n(s,c,h),C.push(Zs[l]),C.push($s[l])):133===l?(E=1-$n(e,h,p),O=$n(s,f,c),_=1-$n(s,h,c),v=1-$n(e,h,c),C.push(Zs[l]),C.push($s[l])):148===l?(b=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),v=1-$n(s,h,c),C.push(Js[l]),C.push(ta[l])):22===l?(b=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),v=$n(e,c,h),C.push(Js[l]),C.push(ta[l])):82===l?(x=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),C.push(Hs[l]),C.push(Qs[l])):88===l?(x=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),C.push(Hs[l]),C.push(Qs[l])):73===l?(x=1-$n(e,h,p),E=1-$n(s,h,p),m=$n(s,f,p),_=1-$n(e,h,c),C.push(Hs[l]),C.push(Zs[l])):97===l?(x=$n(s,p,h),E=$n(e,p,h),m=1-$n(e,p,f),_=$n(s,c,h),C.push(Hs[l]),C.push(Zs[l])):145===l?(x=$n(e,p,h),m=1-$n(e,p,f),O=$n(s,f,c),v=1-$n(s,h,c),C.push(Hs[l]),C.push($s[l])):25===l?(x=1-$n(s,h,p),m=$n(s,f,p),O=1-$n(e,c,f),v=$n(e,c,h),C.push(Hs[l]),C.push($s[l])):70===l?(E=1-$n(e,h,p),b=1-$n(s,p,f),w=1-$n(s,c,f),_=1-$n(e,h,c),C.push(Zs[l]),C.push(Js[l])):100===l?(E=$n(s,p,h),b=$n(e,f,p),w=$n(e,f,c),_=$n(s,c,h),C.push(Zs[l]),C.push(Js[l])):34===l?(v=0===g?(x=1-$n(e,h,p),E=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,h,c),1-$n(e,h,c)):(x=$n(s,p,h),E=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,h),$n(s,c,h)),C.push(Hs[l]),C.push(Zs[l]),C.push($s[l]),C.push(ta[l])):35===l?(v=4===g?(x=1-$n(e,h,p),E=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,h,c),1-$n(e,h,c)):(x=$n(s,p,h),E=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,h),$n(s,c,h)),C.push(Hs[l]),C.push(Zs[l]),C.push(Qs[l]),C.push(ta[l])):136===l?(v=0===g?(x=$n(s,p,h),E=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,h),$n(s,c,h)):(x=1-$n(e,h,p),E=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,h,c),1-$n(e,h,c)),C.push(Hs[l]),C.push(Zs[l]),C.push($s[l]),C.push(ta[l])):153===l?(v=0===g?(x=$n(e,p,h),m=1-$n(e,p,f),O=1-$n(e,c,f),$n(e,c,h)):(x=1-$n(s,h,p),m=$n(s,f,p),O=$n(s,f,c),1-$n(s,h,c)),C.push(Hs[l]),C.push(Qs[l])):102===l?(_=0===g?(E=1-$n(e,h,p),b=$n(e,f,p),w=$n(e,f,c),1-$n(e,h,c)):(E=$n(s,p,h),b=1-$n(s,p,f),w=1-$n(s,c,f),$n(s,c,h)),C.push(Zs[l]),C.push(ta[l])):155===l?(v=4===g?(x=$n(e,p,h),m=1-$n(e,p,f),O=1-$n(e,c,f),$n(e,c,h)):(x=1-$n(s,h,p),m=$n(s,f,p),O=$n(s,f,c),1-$n(s,h,c)),C.push(Hs[l]),C.push($s[l])):103===l?(_=4===g?(E=1-$n(e,h,p),b=$n(e,f,p),w=$n(e,f,c),1-$n(e,h,c)):(E=$n(s,p,h),b=1-$n(s,p,f),w=1-$n(s,c,f),$n(s,c,h)),C.push(Zs[l]),C.push(Js[l])):152===l?(v=0===g?(x=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),$n(e,c,h)):(x=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),1-$n(s,h,c)),C.push(Hs[l]),C.push(Js[l]),C.push(Qs[l])):156===l?(v=4===g?(x=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),$n(e,c,h)):(x=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),1-$n(s,h,c)),C.push(Hs[l]),C.push(Qs[l]),C.push(ta[l])):137===l?(v=0===g?(x=$n(s,p,h),E=$n(e,p,h),m=1-$n(e,p,f),O=1-$n(e,c,f),_=$n(e,c,h),$n(s,c,h)):(x=1-$n(e,h,p),E=1-$n(s,h,p),m=$n(s,f,p),O=$n(s,f,c),_=1-$n(s,h,c),1-$n(e,h,c)),C.push(Hs[l]),C.push(Zs[l]),C.push(Qs[l])):139===l?(v=4===g?(x=$n(s,p,h),E=$n(e,p,h),m=1-$n(e,p,f),O=1-$n(e,c,f),_=$n(e,c,h),$n(s,c,h)):(x=1-$n(e,h,p),E=1-$n(s,h,p),m=$n(s,f,p),O=$n(s,f,c),_=1-$n(s,h,c),1-$n(e,h,c)),C.push(Hs[l]),C.push(Zs[l]),C.push($s[l])):98===l?(_=0===g?(x=1-$n(e,h,p),E=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),1-$n(e,h,c)):(x=$n(s,p,h),E=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),$n(s,c,h)),C.push(Hs[l]),C.push(Zs[l]),C.push(ta[l])):99===l?(_=4===g?(x=1-$n(e,h,p),E=1-$n(s,h,p),b=$n(s,f,p),m=$n(e,f,p),w=$n(e,f,c),1-$n(e,h,c)):(x=$n(s,p,h),E=$n(e,p,h),b=1-$n(e,p,f),m=1-$n(s,p,f),w=1-$n(s,c,f),$n(s,c,h)),C.push(Hs[l]),C.push(Zs[l]),C.push(Qs[l])):38===l?(v=0===g?(E=1-$n(e,h,p),b=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,h,c),1-$n(e,h,c)):(E=$n(s,p,h),b=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,h),$n(s,c,h)),C.push(Zs[l]),C.push($s[l]),C.push(ta[l])):39===l?(v=4===g?(E=1-$n(e,h,p),b=$n(e,f,p),O=$n(e,f,c),w=$n(s,f,c),_=1-$n(s,h,c),1-$n(e,h,c)):(E=$n(s,p,h),b=1-$n(s,p,f),O=1-$n(s,c,f),w=1-$n(e,c,f),_=$n(e,c,h),$n(s,c,h)),C.push(Zs[l]),C.push(Js[l]),C.push(ta[l])):85===l&&(_=O=m=E=0,v=w=b=x=1),o.cells[a][u]={cval:l,cval_real:d,flipped:g,topleft:_,topright:v,righttop:x,rightbottom:E,bottomright:b,bottomleft:m,leftbottom:O,lefttop:w,edges:C}}}}}return o}(t,e,n);return u=ps.polygons?(ps.verbose,function(t){var i=[],o=0;return t.cells.forEach(function(t,r){t.forEach(function(t,e){if(void 0!==t){var n=ra[t.cval](t);"object"==typeof n&&tr(n)&&"object"==typeof n[0]&&tr(n[0])&&("object"==typeof n[0][0]&&tr(n[0][0])?n.forEach(function(t){t.forEach(function(t){t[0]+=e,t[1]+=r}),i[o++]=t}):(n.forEach(function(t){t[0]+=e,t[1]+=r}),i[o++]=n))}})}),i}(l)):(ps.verbose,function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&0<t.cells[o][s].edges.length){var a=t.cells[o][s],u=function(t){if(0<t.edges.length){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&ds?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&gs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&gs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&ys?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&ds?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&gs?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&gs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&ys?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&gs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&ys?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&fs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&gs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&ys?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&fs?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&gs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&fs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&fs?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&fs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&ds?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&fs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&ds?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1}}}return null}(a),l=null,c=s,h=o;null!==u&&i.push([u.p[0]+c,u.p[1]+h]);do{if(null===(l=function(t,e,n,r){var i,o,s,a,u,l=t.cval;switch(e){case-1:switch(r){case 0:i=Zs[l],s=Ss[l],a=Is[l],u=Ts[l];break;default:i=Hs[l],s=ws[l],a=Os[l],u=Cs[l]}break;case 1:switch(r){case 0:i=$s[l],s=ks[l],a=Gs[l],u=zs[l];break;default:i=ta[l],s=As[l],a=Fs[l],u=Ds[l]}break;default:switch(n){case-1:switch(r){case 0:i=ea[l],s=_s[l],a=vs[l],u=ms[l];break;default:i=na[l],s=bs[l],a=xs[l],u=Es[l]}break;case 1:switch(r){case 0:i=Qs[l],s=Rs[l],a=Ls[l],u=Ns[l];break;default:i=Js[l],s=Ps[l],a=Ms[l],u=js[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:n=l&ds?(e=t.topleft,1):(e=1,t.righttop);break;case 1:n=l&gs?(e=1,t.rightbottom):(e=t.topleft,1);break;case 2:n=l&gs?(e=t.topleft,1):(e=t.bottomright,0);break;case 3:n=l&ys?(e=t.bottomleft,0):(e=t.topleft,1);break;case 4:n=l&ds?(e=t.topright,1):(e=1,t.righttop);break;case 5:n=l&gs?(e=1,t.rightbottom):(e=t.topright,1);break;case 6:n=l&gs?(e=t.topright,1):(e=t.bottomright,0);break;case 7:n=l&ys?(e=t.bottomleft,0):(e=t.topright,1);break;case 8:n=l&gs?(e=1,t.righttop):(e=t.bottomright,0);break;case 9:n=l&ys?(e=t.bottomleft,0):(e=1,t.righttop);break;case 10:n=l&ys?(e=1,t.righttop):(e=0,t.leftbottom);break;case 11:n=l&fs?(e=0,t.lefttop):(e=1,t.righttop);break;case 12:n=l&gs?(e=1,t.rightbottom):(e=t.bottomright,0);break;case 13:n=l&ys?(e=t.bottomleft,0):(e=1,t.rightbottom);break;case 14:n=l&ys?(e=1,t.rightbottom):(e=0,t.leftbottom);break;case 15:n=l&fs?(e=0,t.lefttop):(e=1,t.rightbottom);break;case 16:n=l&gs?(e=0,t.leftbottom):(e=t.bottomright,0);break;case 17:n=l&fs?(e=0,t.lefttop):(e=t.bottomright,0);break;case 18:n=l&ys?(e=t.bottomleft,0):(e=0,t.leftbottom);break;case 19:n=l&fs?(e=0,t.lefttop):(e=t.bottomleft,0);break;case 20:n=l&fs?(e=0,t.leftbottom):(e=t.topleft,1);break;case 21:n=l&ds?(e=t.topright,1):(e=0,t.leftbottom);break;case 22:n=l&fs?(e=0,t.lefttop):(e=t.topleft,1);break;case 23:n=l&ds?(e=t.topright,1):(e=0,t.lefttop);break;default:return null}return{p:[e,n],x:s,y:a,o:u}}(t.cells[h][c],u.x,u.y,u.o)))break;if(i.push([l.p[0]+c,l.p[1]+h]),c+=l.x,h+=l.y,u=l,h<0||n<=h||c<0||r<=c||void 0===t.cells[h][c]){c-=l.x,h-=l.y;var p=function(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,l=n+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=r,s=t.cells[l][u],a=s.cval_real,-1===i)if(0===o)if(a&ys)c.push([u,l]),r=-1,o=i=0;else{if(!(a&gs)){c.push([u+s.bottomright,l]),o=i=1,h=!(r=0);break}c.push([u+1,l]),r=1,o=i=0}else{if(!(a&ys)){if(a&gs){c.push([u+s.bottomright,l]),o=i=1,h=!(r=0);break}c.push([u+s.bottomleft,l]),i=1,h=!(o=r=0);break}c.push([u,l]),r=-1,o=i=0}else if(1===i)if(0===o){if(!(a&ds)){if(a&fs){c.push([u+s.topleft,l+1]),i=-1,h=!(o=r=0);break}c.push([u+s.topright,l+1]),i=-1,o=1,h=!(r=0);break}c.push([u+1,l+1]),i=0,o=r=1}else c.push([u+1,l+1]),i=0,o=r=1;else if(-1===r)if(0===o){if(!(a&fs)){if(a&ys){c.push([u,l+s.leftbottom]),r=1,h=!(o=i=0);break}c.push([u,l+s.lefttop]),o=r=1,h=!(i=0);break}c.push([u,l+1]),i=1,o=r=0}else{if(!(a&fs))break;c.push([u,l+1]),i=1,o=r=0}else{if(1!==r)break;if(0===o){if(!(a&gs)){c.push([u+1,l+s.rightbottom]),r=-1,h=!(o=i=0);break}c.push([u+1,l]),r=0,i=-1,o=1}else{if(!(a&gs)){if(a&ds){c.push([u+1,l+s.righttop]),r=-1,i=0,o=1;break}c.push([u+1,l+s.rightbottom]),r=-1,h=!(o=i=0);break}c.push([u+1,l]),r=0,i=-1,o=1}}else if(s=t.cells[l][u],a=s.cval_real,-1===r){if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(a&ys)){c.push([u+s.bottomright,l]),o=i=1,h=!(r=0);break}c.push([u,l])}else if(!(a&fs))break}else if(1===r){if(0===o)break;if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])i=1,o=r=0;else{if(!(a&ds)){c.push([u+s.topleft,l+1]),i=-1,h=!(o=r=0);break}c.push([u+1,l+1]),i=0,o=r=1}}else if(-1===i){if(1!==o)break;if(void 0!==t.cells[l][u+1])i=0,o=r=1;else{if(!(a&gs)){c.push([u+1,l+s.righttop]),r=-1,o=1,h=!(i=0);break}c.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i)break;if(0!==o)break;if(void 0!==t.cells[l][u-1])r=-1,o=i=0;else{if(!(a&fs)){c.push([u,l+s.leftbottom]),r=1,h=!(o=i=0);break}c.push([u,l+1]),i=1,o=r=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:i,o:o}}(t,c,h,l.x,l.y,l.o);if(null===p)break;p.path.forEach(function(t){i.push(t)}),c=p.i,h=p.j,u=p}}while(void 0!==t.cells[h][c]&&0<t.cells[h][c].edges.length);e.push(i),i=[],0<t.cells[o][s].edges.length&&s--}return e}(l)),"function"==typeof ps.successCallback&&ps.successCallback(u),u}function $n(t,e,n){return(t-e)/(n-e)}function tr(t){return-1<t.constructor.toString().indexOf("Array")}function er(t,i,e){if(!q(e=e||{}))throw new Error("options is invalid");var o=e.pivot,n=e.mutate;if(!t)throw new Error("geojson is required");if(null==i||isNaN(i))throw new Error("angle is required");return 0===i||(o=o||le(t),!1!==n&&void 0!==n||(t=Ft(t)),E(t,function(t){var e=He(o,t)+i,n=Je(o,t),r=A(qn(o,n,e));t[0]=r[0],t[1]=r[1]})),t}function nr(n,r,t){if(!q(t=t||{}))throw new Error("options is invalid");var i=t.origin,e=t.mutate;if(!n)throw new Error("geojson required");if("number"!=typeof r||0===r)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==e&&(n=Ft(n)),"FeatureCollection"!==n.type||o?rr(n,r,i):(O(n,function(t,e){n.features[e]=rr(t,r,i)}),n)}function rr(t,i,o){var e="Point"===J(t);return o=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return W(e);var n=t.bbox?t.bbox:V(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return z([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return z([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return z([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return z([o,s]);case"center":return ue(t);case void 0:case null:case"centroid":return le(t);default:throw new Error("invalid origin")}}(t,o),1===i||e||E(t,function(t){var e=Je(o,t),n=He(o,t),r=A(qn(o,e*i,n));t[0]=r[0],t[1]=r[1],3===t.length&&(t[2]*=i)}),t}function ir(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function or(t,e){return t[0]*e[1]-e[0]*t[1]}function sr(t,e,n){var o=[],s=l(e,n),a=A(t),u=[];return a.forEach(function(t,e){if(e!==a.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r,s=t[1]+n*(t[0]-e[0])/r,a=e[1]+n*(t[0]-e[0])/r;return[[i,s],[o,a]]}(t,a[e+1],s);if(o.push(n),0<e){var r=o[e-1],i=function(n,t){return!function(t,e){return 0===or(ir(n),ir(e))}(0,t)&&function(t,e){var n,r,i,o,s,a,u=t[0],l=ir(t),c=e[0],h=ir(e),p=or(l,h);return i=or((a=n=u,[(s=c)[0]-a[0],s[1]-a[1]]),h)/p,r=[i*(o=l)[0],i*o[1]],[n[0]+r[0],n[1]+r[1]]}(n,t)}(n,r);!1!==i&&(r[1]=i,n[0]=i),u.push(r[0]),e===a.length-2&&(u.push(n[0]),u.push(n[1]))}2===a.length&&(u.push(n[0]),u.push(n[1]))}}),B(u,t.properties)}function ar(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return Math.sign(r*s-o*i)}function ur(e,t){return t.geometry.coordinates[0].every(function(t){return Tt(z(t),e)})}function lr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return r*s-i*o==0&&(Math.abs(o)>=Math.abs(s)?0<o?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<s?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function cr(t,e){return 0<Ve(e,Rn(t)).features.length}function hr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function pr(t,e){return t[0]===e[0]&&t[1]===e[1]}function fr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),yr(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function dr(t,e){return 0<Ve(t,Rn(e)).features.length}function gr(t,e){for(var n=!1,r=!1,i=t.coordinates[0].length,o=0;o<i&&n&&r;)Tt(z(t.coordinates[0][o]),e)?n=!0:r=!0,o++;return r&&r}function yr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?0<s?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<a?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?0<s?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:0<a?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function _r(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function vr(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function mr(t,e){return ha(t,e,{strict:!0})}function br(t,n){if(!t)throw new Error("feature1 is required");if(!n)throw new Error("feature2 is required");var e=J(t);if(e!==J(n))throw new Error("features must be of the same type");if("Point"===e)throw new Error("Point geometry not supported");if(new fa({precision:6}).compare(t,n))return!1;var r=0;switch(e){case"MultiPoint":var i=S(t),o=S(n);i.forEach(function(e){o.forEach(function(t){e[0]===t[0]&&e[1]===t[1]&&r++})});break;case"LineString":case"MultiLineString":N(t,function(e){N(n,function(t){Bn(e,t).features.length&&r++})});break;case"Polygon":case"MultiPolygon":N(t,function(e){N(n,function(t){Ve(e,t).features.length&&r++})})}return 0<r}function xr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Er(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function wr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Or(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Cr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Cr(t,e,n){this.x=t,this.y=e,this.weight=n}function Sr(t){this.content=[],this.scoreFunction=t}function Ir(t){return t[0]}function Tr(t){return t[1]}function Rr(){this._=null}function Lr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Nr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Pr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Mr(t){for(;t.L;)t=t.L;return t}function jr(t,e,n,r){var i=[null,null],o=La.push(i)-1;return i.left=t,i.right=e,n&&Fr(i,t,e,n),r&&Fr(i,e,t,r),Ta[t.index].halfedges.push(o),Ta[e.index].halfedges.push(o),i}function Ar(t,e,n){var r=[e,n];return r.left=t,r}function Fr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Dr(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,p=a[0]-u,f=a[1]-l;if(o=e-u,p||!(0<o)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(0<p){if(h<o)return;c<o&&(c=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(h<o)return;c<o&&(c=o)}else if(0<p){if(o<c)return;o<h&&(h=o)}if(o=n-l,f||!(0<o)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(0<f){if(h<o)return;c<o&&(c=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(h<o)return;c<o&&(c=o)}else if(0<f){if(o<c)return;o<h&&(h=o)}return!(0<c||h<1)||(0<c&&(t[0]=[u+c*p,l+c*f]),h<1&&(t[1]=[u+h*p,l+h*f]),!0)}}}}}function kr(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],p=l[1],f=c[0],d=c[1],g=(h+f)/2,y=(p+d)/2;if(d===p){if(g<e||r<=g)return;if(f<h){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=y-(s=(h-f)/(d-p))*g,s<-1||1<s)if(f<h){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Gr(t,e){return e[+(e.left!==t.site)]}function zr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,c=o[0]-s,h=o[1]-a,p=2*(u*h-l*c);if(!(-ja<=p)){var f=u*u+l*l,d=c*c+h*h,g=(h*f-l*d)/p,y=(u*d-c*f)/p,_=Na.pop()||new function(){Lr(this),this.x=this.y=this.arc=this.site=this.cy=null};_.arc=t,_.site=i,_.x=g+s,_.y=(_.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=_;for(var v=null,m=Ra._;m;)if(_.y<m.y||_.y===m.y&&_.x<=m.x){if(!m.L){v=m.P;break}m=m.L}else{if(!m.R){v=m;break}m=m.R}Ra.insert(v,_),v||(Sa=_)}}}}function Ur(t){var e=t.circle;e&&(e.P||(Sa=e.N),Ra.remove(e),Na.push(e),Lr(e),t.circle=null)}function Br(t){var e=Pa.pop()||new function(){Lr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Yr(t){Ur(t),Ia.remove(t),Pa.push(t),Lr(t)}function Xr(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Yr(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Ma&&Math.abs(r-u.circle.cy)<Ma;)o=u.P,a.unshift(u),Yr(u),u=o;a.unshift(u),Ur(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Ma&&Math.abs(r-l.circle.cy)<Ma;)s=l.N,a.push(l),Yr(l),l=s;a.push(l),Ur(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],Fr(l.edge,u.site,l.site,i);u=a[0],(l=a[h-1]).edge=jr(u.site,l.site,null,i),zr(u),zr(l)}function qr(t){for(var e,n,r,i,o=t[0],s=t[1],a=Ia._;a;)if((r=Vr(a,s)-o)>Ma)a=a.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return Vr(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(a,s))>Ma)){-Ma<r?(e=a.P,n=a):-Ma<i?n=(e=a).N:e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ta[t.index]={site:t,halfedges:[]}}(t);var u=Br(t);if(Ia.insert(e,u),e||n){if(e===n)return Ur(e),n=Br(e.site),Ia.insert(u,n),u.edge=n.edge=jr(e.site,u.site),zr(e),void zr(n);if(n){Ur(e),Ur(n);var l=e.site,c=l[0],h=l[1],p=t[0]-c,f=t[1]-h,d=n.site,g=d[0]-c,y=d[1]-h,_=2*(p*y-f*g),v=p*p+f*f,m=g*g+y*y,b=[(y*v-f*m)/_+c,(p*m-g*v)/_+h];Fr(n.edge,l,d,b),u.edge=jr(l,t,null,b),n.edge=jr(t,d,null,b),zr(e),zr(n)}else u.edge=jr(e.site,u.site)}}function Vr(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var c=a-r,h=1/o-1/l,p=c/l;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+a)/2}function Wr(t,e){return e[1]-t[1]||e[0]-t[0]}function Kr(t,e){var n,r,i,o=t.sort(Wr).pop();for(La=[],Ta=new Array(t.length),Ia=new Rr,Ra=new Rr;;)if(i=Sa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(qr(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Xr(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ta.length;i<o;++i)if((t=Ta[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=(u=t,l=La[e[n]],p=h=void 0,c=u.site,h=l.left,p=l.right,c===p&&(p=h,h=c),p?Math.atan2(p[1]-h[1],p[0]-h[0]):(p=c===h?(h=l[1],l[0]):(h=l[0],l[1]),Math.atan2(h[0]-p[0],p[1]-h[1])));for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}var u,l,c,h,p}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=La.length;o--;)kr(i=La[o],t,e,n,r)&&Dr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Ma||Math.abs(i[0][1]-i[1][1])>Ma)||delete La[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,c,h,p,f,d,g,y,_,v=Ta.length,m=!0;for(i=0;i<v;++i)if(o=Ta[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)La[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(y=o,_=La[u[a]],f=_[+(_.left===y.site)])[0],g=f[1],h=(c=Gr(o,La[u[++a%l]]))[0],p=c[1],(Math.abs(d-h)>Ma||Math.abs(g-p)>Ma)&&(u.splice(a,0,La.push(Ar(s,f,Math.abs(d-t)<Ma&&Ma<r-g?[t,Math.abs(h-t)<Ma?p:r]:Math.abs(g-r)<Ma&&Ma<n-d?[Math.abs(p-r)<Ma?h:n,r]:Math.abs(d-n)<Ma&&Ma<g-e?[n,Math.abs(h-n)<Ma?p:e]:Math.abs(g-e)<Ma&&Ma<d-t?[Math.abs(p-e)<Ma?h:t,e]:null))-1),++l);l&&(m=!1)}if(m){var b,x,E,w=1/0;for(i=0,m=null;i<v;++i)(o=Ta[i])&&(E=(b=(s=o.site)[0]-t)*b+(x=s[1]-e)*x)<w&&(w=E,m=o);if(m){var O=[t,e],C=[t,r],S=[n,r],I=[n,e];m.halfedges.push(La.push(Ar(s=m.site,O,C))-1,La.push(Ar(s,C,S))-1,La.push(Ar(s,S,I))-1,La.push(Ar(s,I,O))-1)}}for(i=0;i<v;++i)(o=Ta[i])&&(o.halfedges.length||delete Ta[i])}(s,a,u,l)}this.edges=La,this.cells=Ta,Ia=Ra=La=Ta=null}function Hr(t){return(t=t.slice()).push(t[0]),U([t])}function Zr(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!q(r))throw new Error("options must be an object");if(!X(i))throw new Error("steps must be a number");if(!X(s))throw new Error("angle must be a number");var l=W(t);if("degrees"===o)var c=v(s);else e=qn(t,e,90,{units:o}),n=qn(t,n,0,{units:o}),e=W(e)[0]-l[0],n=W(n)[1]-l[1];for(var h=[],p=0;p<i;p+=1){var f=-360*p/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Jr(f),2)),g=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Jr(f),2));if(f<-90&&-270<=f&&(d=-d),f<-180&&-360<=f&&(g=-g),"degrees"===o){var y=d*Math.cos(c)+g*Math.sin(c),_=g*Math.cos(c)-d*Math.sin(c);d=y,g=_}h.push([d+l[0],g+l[1]])}return h.push(h[0]),"degrees"===o?U([h],u):er(U([h],u),s,{pivot:a})}function Jr(t){var e=t*Math.PI/180;return Math.tan(e)}function Qr(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return I(t,function(t,e,n){var r=n[i];if(!X(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);0<(r=Number(r))&&E(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),z([o/a,s/a],n)}function $r(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ti(t){if(q(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*ii(),180*ii()]}function ei(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null!=t||(t=1);for(var r=[],i=0;i<t;i++)r.push(z(ti(n)));return Y(r)}function ni(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;null!=t||(t=1),X(r)||(r=10),X(i)||(i=10);for(var o=[],s=0;s<t;s++){var a=[],u=Array.apply(null,new Array(r+1)).map(Math.random);u.forEach(function(t,e,n){n[e]=0<e?t+n[e-1]:t}),u.forEach(function(t){t=2*t*Math.PI/u[u.length-1];var e=Math.random();a.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),a[a.length-1]=a[0],a=a.map(function(e){return function(t){return[t[0]+e[0],t[1]+e[1]]}}(ti(n))),o.push(U([a]))}return Y(o)}function ri(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null!=t||(t=1),(!X(r)||r<2)&&(r=10),X(i)||(i=1e-4),X(o)||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[ti(n)],l=0;l<r-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;u.push([u[l][0]+h*Math.cos(c),u[l][1]+h*Math.sin(c)])}s.push(B(u))}return Y(s)}function ii(){return Math.random()-.5}function oi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return O(t,function(t){li(t.properties,e)&&n.push(t)}),Y(n)}function si(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=ui(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(Y(u),s,o)}}function ai(t,e,r,i){var o=i;return si(t,e,function(t,e,n){o=0===n&&void 0===i?t:r(o,t,e,n)}),o}function ui(t,i){var o={};return O(t,function(t,e){var n=t.properties||{};if(n.hasOwnProperty(i)){var r=n[i];o.hasOwnProperty(r)?o[r].push(e):o[r]=[e]}}),o}function li(t,e){if(void 0===t)return!1;var n=typeof e;if("number"==n||"string"==n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!li(t,e[r]))return!1;return!0}return ci(t,e)}function ci(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function hi(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function pi(){}function fi(t){this.message=t||""}function di(t){this.message=t||""}function gi(){}function yi(t){return null===t?el:t.color}function _i(t){return null===t?null:t.parent}function vi(t,e){null!==t&&(t.color=e)}function mi(t){return null===t?null:t.left}function bi(t){return null===t?null:t.right}function xi(){this.root_=null,this.size_=0}function Ei(){}function wi(){this.array_=[],arguments[0]instanceof zu&&this.addAll(arguments[0])}function Oi(){}function Ci(t){this.message=t||""}function Si(){this.array_=[]}function Ii(t){switch(t.type){case"Polygon":return 1<un(t)?t:null;case"MultiPolygon":var e=[];if(R(t,function(t){1<un(t)&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Ti(){this.reset()}function Ri(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Li(t){return 1<t?af:t<-1?-af:Math.asin(t)}function Ni(){}function Pi(t,e){t&&Ef.hasOwnProperty(t.type)&&Ef[t.type](t,e)}function Mi(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ji(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Mi(t[n],e,1);e.polygonEnd()}function Ai(t){return[df(t[1],t[0]),Li(t[2])]}function Fi(t){var e=t[0],n=t[1],r=gf(n);return[r*gf(e),r*vf(e),vf(n)]}function Di(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ki(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Gi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function zi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ui(t){var e=mf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Bi(t,e){return[sf<t?t-lf:t<-sf?t+lf:t,e]}function Yi(t,e,n){return(t%=lf)?e||n?Of(qi(t),Vi(e,n)):qi(t):e||n?Vi(e,n):Bi}function Xi(n){return function(t,e){return[sf<(t+=n)?t-lf:t<-sf?t+lf:t,e]}}function qi(t){var e=Xi(t);return e.invert=Xi(-t),e}function Vi(t,e){function n(t,e){var n=gf(e),r=gf(t)*n,i=vf(t)*n,o=vf(e),s=o*a+r*u;return[df(i*l-s*c,r*a-o*u),Li(s*l+i*c)]}var a=gf(t),u=vf(t),l=gf(e),c=vf(e);return n.invert=function(t,e){var n=gf(e),r=gf(t)*n,i=vf(t)*n,o=vf(e),s=o*l-i*c;return[df(i*l+o*c,r*a+s*u),Li(s*a-r*u)]},n}function Wi(t,e){(e=Fi(e))[0]-=t,Ui(e);var n=function(t){return 1<t?0:t<-1?sf:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+lf-of)%lf}function Ki(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Hi(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Zi(t){return 1<t.length}function Ji(t,e){return((t=t.x)[0]<0?t[1]-af-of:af-t[1])-((e=e.x)[0]<0?e[1]-af-of:af-e[1])}function Qi(r){return function(t){var e=new $i;for(var n in r)e[n]=r[n];return e.stream=t,e}}function $i(){}function to(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),wf(n,t.stream(Gf));var s=Gf.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}function eo(t){return function(){function n(t){return[(t=l(t[0]*hf,t[1]*hf))[0]*g+s,a-t[1]*g]}function e(t,e){return[(t=o(t,e))[0]*g+s,a-t[1]*g]}function r(){l=Of(u=Yi(b,x,E),o);var t=o(v,m);return s=y-t[0]*g,a=_+t[1]*g,i()}function i(){return f=d=null,n}var o,s,a,u,l,c,h,p,f,d,g=150,y=480,_=250,v=0,m=0,b=0,x=0,E=0,w=null,O=Uf,C=null,S=jf,I=.5,T=Yf(e,I);return n.stream=function(t){return f&&d===t?f:f=Xf(O(u,T(S(d=t))))},n.clipAngle=function(t){return arguments.length?(O=+t?function(i,o){function f(t,e){return gf(t)*gf(e)>S}function d(t,e,n){var r=[1,0,0],i=ki(Fi(t),Fi(e)),o=Di(i,i),s=i[0],a=o-s*s;if(!a)return!n&&t;var u=S*o/a,l=-S*s/a,c=ki(r,i),h=zi(r,u);Gi(h,zi(i,l));var p=c,f=Di(h,p),d=Di(p,p),g=f*f-d*(Di(h,h)-1);if(!(g<0)){var y=mf(g),_=zi(p,(-f-y)/d);if(Gi(_,h),_=Ai(_),!n)return _;var v,m=t[0],b=e[0],x=t[1],E=e[1];b<m&&(v=m,m=b,b=v);var w=b-m,O=pf(w-sf)<of;if(!O&&E<x&&(v=x,x=E,E=v),O||w<of?O?x+E>0^_[1]<(pf(_[0]-m)<of?x:E):x<=_[1]&&_[1]<=E:w>sf^(m<=_[0]&&_[0]<=b)){var C=zi(p,(-f+y)/d);return Gi(C,h),[_,Ai(C)]}}}function g(t,e){var n=y?i:sf-i,r=0;return t<-n?r|=1:t>n&&(r|=2),e<-n?r|=4:e>n&&(r|=8),r}var S=gf(i),y=S>0,_=pf(S)>of;return zf(f,function(a){var u,l,c,h,p;return{lineStart:function(){h=c=!1,p=1},point:function(t,e){var n,r=[t,e],i=f(t,e),o=y?i?0:g(t,e):i?g(t+(t<0?sf:-sf),e):0;if(!u&&(h=c=i)&&a.lineStart(),i!==c&&(!(n=d(u,r))||If(u,n)||If(r,n))&&(r[0]+=of,r[1]+=of,i=f(r[0],r[1])),i!==c)p=0,i?(a.lineStart(),n=d(r,u),a.point(n[0],n[1])):(n=d(u,r),a.point(n[0],n[1]),a.lineEnd()),u=n;else if(_&&u&&y^i){var s;o&l||!(s=d(r,u,!0))||(p=0,y?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!i||u&&If(u,r)||a.point(r[0],r[1]),u=r,c=i,l=o},lineEnd:function(){c&&a.lineEnd(),u=null},clean:function(){return p|(h&&c)<<1}}},function(t,e,n,r){!function(t,e,n,r,i,o){if(n){var s=gf(e),a=vf(e),u=r*n;null==i?(i=e+r*lf,o=e-u/2):(i=Wi(s,i),o=Wi(s,o),(r>0?i<o:i>o)&&(i+=r*lf));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Ai([s,-a*gf(c),-a*vf(c)]),t.point(l[0],l[1])}}(r,i,o,n,t,e)},y?[0,-i]:[-sf,i-sf])}(w=t*hf,6*hf):(w=null,Uf),i()):w*cf},n.clipExtent=function(t){return arguments.length?(S=null==t?(C=c=h=p=null,jf):function(_,v,m,b){function x(t,e){return _<=t&&t<=m&&v<=e&&e<=b}function E(t,e,n,r){var i=0,o=0;if(null==t||(i=s(t,n))!==(o=s(e,n))||a(t,e)<0^0<n)for(;r.point(0===i||3===i?_:m,1<i?b:v),(i=(i+n+4)%4)!==o;);else r.point(e[0],e[1])}function s(t,e){return pf(t[0]-_)<of?0<e?0:3:pf(t[0]-m)<of?0<e?2:1:pf(t[1]-v)<of?0<e?1:0:0<e?3:2}function w(t,e){return a(t.x,e.x)}function a(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){function t(t,e){x(t,e)&&g.point(t,e)}function e(t,e){var n=x(t,e);if(h&&o.push([t,e]),f)s=t,a=e,f=!1,(u=n)&&(g.lineStart(),g.point(t,e));else if(n&&p)g.point(t,e);else{var r=[l=Math.max(Pf,Math.min(Nf,l)),c=Math.max(Pf,Math.min(Nf,c))],i=[t=Math.max(Pf,Math.min(Nf,t)),e=Math.max(Pf,Math.min(Nf,e))];Sf(r,i,_,v,m,b)?(p||(g.lineStart(),g.point(r[0],r[1])),g.point(i[0],i[1]),n||g.lineEnd(),d=!1):n&&(g.lineStart(),g.point(t,e),d=!1)}l=t,c=e,p=n}var i,h,o,s,a,u,l,c,p,f,d,g=r,n=Cf(),y={point:t,lineStart:function(){y.point=e,h&&h.push(o=[]),p=!(f=!0),l=c=NaN},lineEnd:function(){i&&(e(s,a),u&&p&&n.rejoin(),i.push(n.result())),y.point=t,p&&g.lineEnd()},polygonStart:function(){g=n,i=[],h=[],d=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=h.length;e<n;++e)for(var r,i,o=h[e],s=1,a=o.length,u=o[0],l=u[0],c=u[1];s<a;++s)r=l,i=c,l=(u=o[s])[0],c=u[1],i<=b?b<c&&(c-i)*(_-r)<(l-r)*(b-i)&&++t:c<=b&&(l-r)*(b-i)<(c-i)*(_-r)&&--t;return t}(),e=d&&t,n=(i=Lf(i)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),E(null,null,1,r),r.lineEnd()),n&&Tf(i,w,t,E,r),r.polygonEnd()),g=r,i=h=o=null}};return y}}(C=+t[0][0],c=+t[0][1],h=+t[1][0],p=+t[1][1]),i()):null==C?null:[[C,c],[h,p]]},n.scale=function(t){return arguments.length?(g=+t,r()):g},n.translate=function(t){return arguments.length?(y=+t[0],_=+t[1],r()):[y,_]},n.center=function(t){return arguments.length?(v=t[0]%360*hf,m=t[1]%360*hf,r()):[v*cf,m*cf]},n.rotate=function(t){return arguments.length?(b=t[0]%360*hf,x=t[1]%360*hf,E=2<t.length?t[2]%360*hf:0,r()):[b*cf,x*cf,E*cf]},n.precision=function(t){return arguments.length?(T=Yf(e,I=t*t),i()):mf(I)},n.fitExtent=function(t,e){return to(n,t,e)},n.fitSize=function(t,e){return function(t,e,n){return to(t,[[0,0],e],n)}(n,t,e)},function(){return o=function(){return t}.apply(this,arguments),n.invert=o.invert&&function(t){return(t=l.invert((t[0]-s)/g,(a-t[1])/g))&&[t[0]*cf,t[1]*cf]},r()}}()()}function no(t,e){return[t,_f(bf((af+e)/2))]}function ro(t,e){return[_f(bf((af+e)/2)),-t]}function io(t,n,r,i){var e=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var s=[];return I(t,function(t){var e=io(t,n,r,i);e&&s.push(e)}),Y(s)}var a,u=V(t),l=50<u[1]&&50<u[3];a=l?{type:o.type,coordinates:function e(t,n){return"object"!=typeof t[0]?n(t):t.map(function(t){return e(t,n)})}(o.coordinates,oo(o))}:Qe(o);var c,h=(new Xl).read(a),p=d(g(n,r),"meters"),f=Ah.bufferOp(h,p);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((f=(new ql).write(f)).coordinates))return(c=l?{type:f.type,coordinates:function e(t,n){return"object"!=typeof t[0]?n.invert(t):t.map(function(t){return e(t,n)})}(f.coordinates,oo(o))}:$e(f)).geometry?c:G(c,e)}function oo(t){var e=ue(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return qf().center(e).rotate(n).scale(fo)}function so(){for(var t=new Xl,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=ef.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new ql).write(e),properties:arguments[0].properties}}function ao(t,e){var n=H(t),r=H(e);if(Ht(mn(r,{precision:4})).coordinates[0].length<4)return null;if(Ht(mn(n,{precision:4})).coordinates[0].length<4)return null;var i=new Xl,o=i.read(mn(n)),s=i.read(mn(r)),a=Vp.intersection(o,s);return a.isEmpty()?null:G((new ql).write(a))}function uo(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,o=n.mask;if(null==e)throw new Error("cellSide is required");if(!X(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(o&&-1===["Polygon","MultiPolygon"].indexOf(J(o)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],a=t[1],u=t[2],l=t[3],c=(a+l)/2,h=(s+u)/2,p=2*e/At([s,c],[u,c],n)*(u-s),f=2*e/At([h,a],[h,l],n)*(l-a),d=p/2,g=2*d,y=Math.sqrt(3)/2*f,_=u-s,v=l-a,m=.75*g,b=y,x=(_-g)/(g-d/2),E=Math.floor(x),w=(E*m-d/2-_)/2-d/2+m/2,O=Math.floor((v-y)/y),C=(v-O*y)/2,S=y/2<O*y-v;S&&(C-=y/4);for(var I=[],T=[],R=0;R<6;R++){var L=2*Math.PI/6*R;I.push(Math.cos(L)),T.push(Math.sin(L))}for(var N=[],P=0;P<=E;P++)for(var M=0;M<=O;M++){var j=P%2==1;if(!(0===M&&j||0===M&&S)){var A=P*m+s-w,F=M*b+a+C;if(j&&(F-=y/2),!0===i)(function(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(U([u],r))}return s})([A,F],p/2,f/2,r,I,T).forEach(function(t){o?ao(o,t)&&N.push(t):N.push(t)});else{var D=function(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),U([s],r)}([A,F],p/2,f/2,r,I,T);o?ao(o,D)&&N.push(D):N.push(D)}}}return Y(N)}function lo(t){if(t.features.length<=1)return t;var o=function(t){var e=Oo(),r=[];return R(t,function(t,e){var n=V(t);r.push({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],geojson:t,index:e})}),e.load(r),e}(t),s=[],a={};return R(t,function(t,e){if(a[e])return!0;for(o.remove({index:e},co),a[e]=!0;;){var n=V(t),r=o.search({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]});if(0<r.length){var i=r.map(function(t){return a[t.index]=!0,o.remove({index:t.index},co),t.geojson});i.push(t),t=so.apply(this,i)}if(0===r.length)break}s.push(t)}),Y(s)}function co(t,e){return t.index===e.index}function ho(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==e)throw new Error("cellSide is required");if(!X(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],a=t[1],u=t[2],l=t[3],c=e/At([s,a],[u,a],n)*(u-s),h=e/At([s,a],[s,l],n)*(l-a),p=u-s,f=l-a,d=Math.floor(p/c),g=Math.floor(f/h),y=(f-g*h)/2,_=s+(p-d*c)/2,v=0;v<d;v++){for(var m=a+y,b=0;b<g;b++){var x=U([[[_,m],[_,m+h],[_+c,m+h],[_+c,m],[_,m]]],r);i?ao(i,x)&&o.push(x):o.push(x),m+=h}_+=c}return Y(o)}function po(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==e)throw new Error("cellSide is required");if(!X(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/At([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),a=e/At([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),u=0,l=t[0];l<=t[2];){for(var c=0,h=t[1];h<=t[3];){var p=null,f=null;u%2==0&&c%2==0?(p=U([[[l,h],[l,h+a],[l+s,h],[l,h]]],r),f=U([[[l,h+a],[l+s,h+a],[l+s,h],[l,h+a]]],r)):u%2==0&&c%2==1?(p=U([[[l,h],[l+s,h+a],[l+s,h],[l,h]]],r),f=U([[[l,h],[l,h+a],[l+s,h+a],[l,h]]],r)):c%2==0&&u%2==1?(p=U([[[l,h],[l,h+a],[l+s,h+a],[l,h]]],r),f=U([[[l,h],[l+s,h+a],[l+s,h],[l,h]]],r)):c%2==1&&u%2==1&&(p=U([[[l,h],[l,h+a],[l+s,h],[l,h]]],r),f=U([[[l,h+a],[l+s,h+a],[l+s,h],[l,h+a]]],r)),i?(ao(i,p)&&o.push(p),ao(i,f)&&o.push(f)):(o.push(p),o.push(f)),h+=a,c++}u++,l+=s}return Y(o)}var fo=6371008.8,go={meters:fo,metres:fo,millimeters:1e3*fo,millimetres:1e3*fo,centimeters:100*fo,centimetres:100*fo,kilometers:fo/1e3,kilometres:fo/1e3,miles:fo/1609.344,nauticalmiles:fo/1852,inches:39.37*fo,yards:fo/1.0936,feet:3.28084*fo,radians:1,degrees:fo/111325},yo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/fo,degrees:1/111325},_o={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},vo=Object.freeze({earthRadius:fo,factors:go,unitsFactors:yo,areaFactors:_o,feature:G,geometry:e,point:z,points:n,polygon:U,polygons:r,lineString:B,lineStrings:i,featureCollection:Y,multiLineString:c,multiPoint:o,multiPolygon:u,geometryCollection:s,round:a,radiansToLength:d,lengthToRadians:g,lengthToDegrees:l,bearingToAzimuth:p,radiansToDegrees:f,degreesToRadians:v,convertLength:h,convertArea:y,isNumber:X,isObject:q,validateBBox:_,validateId:m,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),mo=Object.freeze({coordEach:E,coordReduce:b,propEach:x,propReduce:w,featureEach:O,featureReduce:C,coordAll:S,geomEach:I,geomReduce:T,flattenEach:R,flattenReduce:L,segmentEach:N,segmentReduce:P,lineEach:M,lineReduce:j}),bo=Object.freeze({getCoord:W,getCoords:A,containsNumber:F,geojsonType:D,featureOf:k,collectionOf:K,getGeom:H,getGeomType:Z,getType:J}),xo={successCallback:null,verbose:!1},Eo={},wo=function t(e,n,r,i,o){for(r=r||0,i=i||e.length-1,o=o||function(t,e){return t<e?-1:e<t?1:0};r<i;){if(600<i-r){var s=i-r+1,a=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*l/s+c)),Math.min(i,Math.floor(n+(s-a)*l/s+c)),o)}var h=e[n],p=r,f=i;for(rt(e,r,n),0<o(e[i],h)&&rt(e,r,i);p<f;){for(rt(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;0<o(e[f],h);)f--}0===o(e[r],h)?rt(e,r,f):rt(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}},Oo=it;it.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!ft(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],ft(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):pt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ft(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,ft(t,s)){if(e.leaf||pt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!pt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:ut,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return ot(i=dt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=dt([])).leaf=!1,i.height=r;var a,u,l,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(gt(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(gt(t,a,l=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return ot(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=ct(s=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),at(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=dt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ot(n,this.toBBox),ot(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=st(t,0,r,this.toBBox),o=st(t,r,n,this.toBBox)),a=ct(i)+ct(o),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ut,i=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=st(t,0,e,s),u=st(t,n-e,n,s),l=ht(a)+ht(u);for(i=e;i<n-e;i++)o=t.children[i],at(a,t.leaf?s(o):o),l+=ht(a);for(i=n-e-1;e<=i;i--)o=t.children[i],at(u,t.leaf?s(o):o),l+=ht(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)at(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Co=function(t,e,n){var r=t*e,i=So*t,o=i-(i-t),s=t-o,a=So*e,u=a-(a-e),l=e-u,c=s*l-(r-o*u-s*u-o*l);return n?(n[0]=c,n[1]=r,n):[c,r]},So=+(Math.pow(2,27)+1),Io=function(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=n+r,a=new Array(s),u=0,l=0,c=0,h=Math.abs,p=t[l],f=h(p),d=e[c],g=h(d);f<g?(o=p,(l+=1)<n&&(f=h(p=t[l]))):(o=d,(c+=1)<r&&(g=h(d=e[c]))),l<n&&f<g||r<=c?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(g=h(d=e[c])));for(var y,_,v=i+o,m=v-i,b=o-m,x=b,E=v;l<n&&c<r;)f<g?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(g=h(d=e[c]))),(b=(o=x)-(m=(v=i+o)-i))&&(a[u++]=b),x=E-((y=E+v)-(_=y-E))+(v-_),E=y;for(;l<n;)(b=(o=x)-(m=(v=(i=p)+o)-i))&&(a[u++]=b),x=E-((y=E+v)-(_=y-E))+(v-_),E=y,(l+=1)<n&&(p=t[l]);for(;c<r;)(b=(o=x)-(m=(v=(i=d)+o)-i))&&(a[u++]=b),x=E-((y=E+v)-(_=y-E))+(v-_),E=y,(c+=1)<r&&(d=e[c]);return x&&(a[u++]=x),E&&(a[u++]=E),u||(a[u++]=0),a.length=u,a},To=function(t,e){var n=t.length;if(1===n){var r=Co(t[0],e);return r[0]?r:[r[1]]}var i,o,s,a,u,l,c,h=new Array(2*n),p=[.1,.1],f=[.1,.1],d=0;Co(t[0],e,p),p[0]&&(h[d++]=p[0]);for(var g=1;g<n;++g){Co(t[g],e,f);var y=p[1];void 0,l=(o=f[0])-(u=(a=(i=y)+o)-i),c=i-(a-u),(s=p)&&(s[0]=c+l,s[1]=a),p[0]&&(h[d++]=p[0]);var _=f[1],v=p[1],m=_+v,b=v-(m-_);p[1]=m,b&&(h[d++]=b)}return p[1]&&(h[d++]=p[1]),0===d&&(h[d++]=0),h.length=d,h},Ro=function(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=n+r,a=new Array(s),u=0,l=0,c=0,h=Math.abs,p=t[l],f=h(p),d=-e[c],g=h(d);f<g?(o=p,(l+=1)<n&&(f=h(p=t[l]))):(o=d,(c+=1)<r&&(g=h(d=-e[c]))),l<n&&f<g||r<=c?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(g=h(d=-e[c])));for(var y,_,v=i+o,m=v-i,b=o-m,x=b,E=v;l<n&&c<r;)f<g?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(g=h(d=-e[c]))),(b=(o=x)-(m=(v=i+o)-i))&&(a[u++]=b),x=E-((y=E+v)-(_=y-E))+(v-_),E=y;for(;l<n;)(b=(o=x)-(m=(v=(i=p)+o)-i))&&(a[u++]=b),x=E-((y=E+v)-(_=y-E))+(v-_),E=y,(l+=1)<n&&(p=t[l]);for(;c<r;)(b=(o=x)-(m=(v=(i=d)+o)-i))&&(a[u++]=b),x=E-((y=E+v)-(_=y-E))+(v-_),E=y,(c+=1)<r&&(d=-e[c]);return x&&(a[u++]=x),E&&(a[u++]=E),u||(a[u++]=0),a.length=u,a},Lo=yt(function(o){function c(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function h(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",h(t.slice(0,e)),",",h(t.slice(e)),")"].join("")}function p(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",h(p(c(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));var r;return e}function s(t){for(var e=[],n=[],r=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),i=[],o=0;o<t;++o)0==(1&o)?e.push.apply(e,p(c(r,o))):n.push.apply(n,p(c(r,o))),i.push("m"+o);var s=h(e),a=h(n),u="orientation"+t+"Exact",l=["function ",u,"(",i.join(),"){var p=",s,",n=",a,",d=sub(p,n);return d[d.length-1];};return ",u].join("");return new Function("sum","prod","scale","sub",l)(Io,Co,To,Ro)}var u=s(3),x=s(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(0<i){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(0<=o)return s;r=-(i+o)}var a=33306690738754716e-32*r;return a<=s||s<=-a?s:u(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],u=e[1]-r[1],l=n[1]-r[1],c=t[2]-r[2],h=e[2]-r[2],p=n[2]-r[2],f=o*l,d=s*u,g=s*a,y=i*l,_=i*u,v=o*a,m=c*(f-d)+h*(g-y)+p*(_-v),b=7771561172376103e-31*((Math.abs(f)+Math.abs(d))*Math.abs(c)+(Math.abs(g)+Math.abs(y))*Math.abs(h)+(Math.abs(_)+Math.abs(v))*Math.abs(p));return b<m||b<-m?m:x(t,e,n,r)}];!function(){for(;a.length<=5;)a.push(s(a.length));for(var t=[],e=["slow"],n=0;n<=5;++n)t.push("a"+n),e.push("o"+n);var r=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)r.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(r.join(""));var i=Function.apply(void 0,e);for(o.exports=i.apply(void 0,[function(t){var e=a[t.length];return(e=e||(a[t.length]=s(t.length))).apply(void 0,t)}].concat(a)),n=0;n<=5;++n)o.exports[n]=a[n]}()}),No=Lo[3],Po=_t,Mo=_t;_t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=n(r,o))break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(a=e[o=s]),0<=n(a,i))break;e[t]=a,t=o}e[t]=i}},Po.default=Mo;var jo=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],c=e[s][1];r<u!=r<c&&n<(l-a)*(r-u)/(c-u)+a&&(i=!i)}return i},Ao=Lo[3],Fo=vt,Do=vt;Fo.default=Do;var ko=function(t){return t},Go=function(t){if(null==t)return ko;var o,s,a=t.scale[0],u=t.scale[1],l=t.translate[0],c=t.translate[1];return function(t,e){e||(o=s=0);var n=2,r=t.length,i=new Array(r);for(i[0]=(o+=t[0])*a+l,i[1]=(s+=t[1])*u+c;n<r;)i[n]=t[n],++n;return i}},zo=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Uo=function(o,s,a,t,u,e){3===arguments.length&&(t=e=Array,u=null);for(var l=new t(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),c=new e(o),h=o-1,n=0;n<o;++n)l[n]=u;return{set:function(t,e){for(var n=s(t)&h,r=l[n],i=0;r!=u;){if(a(r,t))return c[n]=e;if(++i>=o)throw new Error("full hashmap");r=l[n=n+1&h]}return l[n]=t,c[n]=e},maybeSet:function(t,e){for(var n=s(t)&h,r=l[n],i=0;r!=u;){if(a(r,t))return c[n];if(++i>=o)throw new Error("full hashmap");r=l[n=n+1&h]}return l[n]=t,c[n]=e},get:function(t,e){for(var n=s(t)&h,r=l[n],i=0;r!=u;){if(a(r,t))return c[n];if(++i>=o)break;r=l[n=n+1&h]}return e},keys:function(){for(var t=[],e=0,n=l.length;e<n;++e){var r=l[e];r!=u&&t.push(r)}return t}}},Bo=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Yo=new ArrayBuffer(16),Xo=new Float64Array(Yo),qo=new Uint32Array(Yo),Vo=function(t){Xo[0]=t[0],Xo[1]=t[1];var e=qo[0]^qo[1];return 2147483647&(e=e<<5^e>>7^qo[2]^qo[3])},Wo=function(t){var e,n,r,i=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var i=f[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++y,g[n]=1)}else f[n]=e,d[n]=r}}function i(t){return Vo(u[t])}function o(t,e){return Bo(u[t],u[e])}var n,r,s,a,u=t.coordinates,l=t.lines,c=t.rings,h=function(){for(var t=Uo(1.4*u.length,i,o,Int32Array,-1,Int32Array),e=new Int32Array(u.length),n=0,r=u.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),y=0;for(n=0,r=u.length;n<r;++n)p[n]=f[n]=d[n]=-1;for(n=0,r=l.length;n<r;++n){var _=l[n],v=_[0],m=_[1];for(s=h[v],a=h[++v],++y,g[s]=1;++v<=m;)e(n,s,s=a,a=h[v]);++y,g[a]=1}for(n=0,r=u.length;n<r;++n)p[n]=-1;for(n=0,r=c.length;n<r;++n){var b=c[n],x=b[0]+1,E=b[1];for(e(n,h[E-1],s=h[x-1],a=h[x]);++x<=E;)e(n,s,s=a,a=h[x])}p=f=d=null;var w,O=function(i,o,s,t,a){3===arguments.length&&(t=Array,a=null);for(var u=new t(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),l=i-1,e=0;e<i;++e)u[e]=a;return{add:function(t){for(var e=o(t)&l,n=u[e],r=0;n!=a;){if(s(n,t))return!0;if(++r>=i)throw new Error("full hashset");n=u[e=e+1&l]}return u[e]=t,!0},has:function(t){for(var e=o(t)&l,n=u[e],r=0;n!=a;){if(s(n,t))return!0;if(++r>=i)break;n=u[e=e+1&l]}return!1},values:function(){for(var t=[],e=0,n=u.length;e<n;++e){var r=u[e];r!=a&&t.push(r)}return t}}}(1.4*y,Vo,Bo);for(n=0,r=u.length;n<r;++n)g[w=h[n]]&&O.add(u[w]);return O}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],p=h[0],f=p,d=h[1],g=i.has(o[p]);++f<d;)i.has(o[f])&&(g?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(function(t,e,n,r){Ut(t,e,n),Ut(t,e,e+r),Ut(t,e+r,n)}(o,p,d,d-f),o[d]=o[p],g=!0,f=p));return t},Ko=function(t){function e(t){var e,n,r,i,o,s,a,u;if(r=f.get(e=h[t[0]]))for(a=0,u=r.length;a<u;++a)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,++r)if(!Bo(h[n],h[r]))return!1;return!0}(i=r[a],t))return t[0]=i[0],void(t[1]=i[1]);if(o=f.get(n=h[t[1]]))for(a=0,u=o.length;a<u;++a)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!Bo(h[n],h[o]))return!1;return!0}(s=o[a],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),d.push(t)}function s(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!=e[1]-r)return!1;for(var o=c(t),s=c(e),a=0;a<i;++a)if(!Bo(h[n+(a+o)%i],h[r+(a+s)%i]))return!1;return!0}function a(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],s=i-n;if(s!=o-r)return!1;for(var a=c(t),u=s-c(e),l=0;l<s;++l)if(!Bo(h[n+(l+a)%s],h[o-(l+u)%s]))return!1;return!0}function c(t){for(var e=t[0],n=t[1],r=e,i=r,o=h[r];++r<n;){var s=h[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}var n,r,i,o,h=t.coordinates,u=t.lines,l=t.rings,p=u.length+l.length;for(delete t.lines,delete t.rings,i=0,o=u.length;i<o;++i)for(n=u[i];n=n.next;)++p;for(i=0,o=l.length;i<o;++i)for(r=l[i];r=r.next;)++p;var f=Uo(2*p*1.4,Vo,Bo),d=t.arcs=[];for(i=0,o=u.length;i<o;++i)for(n=u[i];e(n),n=n.next;);for(i=0,o=l.length;i<o;++i)if((r=l[i]).next)for(;e(r),r=r.next;);else!function(t){var e,n,r,i,o;if(n=f.get(e=h[t[0]]))for(i=0,o=n.length;i<o;++i){if(s(r=n[i],t))return t[0]=r[0],t[1]=r[1];if(a(r,t))return t[0]=r[1],t[1]=r[0]}if(n=f.get(e=h[t[0]+c(t)]))for(i=0,o=n.length;i<o;++i){if(s(r=n[i],t))return t[0]=r[0],t[1]=r[1];if(a(r,t))return t[0]=r[1],t[1]=r[0]}n?n.push(t):f.set(e,[t]),d.push(t)}(r);return t},Ho=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length;for(var e=this.delay=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ho.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},Ho.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Ho.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(1<=n)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Zo=he,Jo=he;he.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Ce(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Ce(t,l,c,n))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[p]-t[d])*(t[1+f]-t[1+p])-(t[p]-t[f])*(t[1+d]-t[1+p]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},he.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n},Zo.default=Jo,Le.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ge(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Ge(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):ke(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ge(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,Ge(t,s)){if(e.leaf||ke(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ze([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!ke(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:je,compareMinY:Ae,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Ne(i=ze(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=ze([])).leaf=!1,i.height=r;var a,u,l,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(Ue(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(Ue(t,a,l=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return Ne(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Fe(s=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Me(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=ze(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Ne(n,this.toBBox),Ne(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=ze([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ne(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=Pe(t,0,r,this.toBBox),o=Pe(t,r,n,this.toBBox)),a=Fe(i)+Fe(o),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:je,i=t.leaf?this.compareMinY:Ae;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Pe(t,0,e,s),u=Pe(t,n-e,n,s),l=De(a)+De(u);for(i=e;i<n-e;i++)o=t.children[i],Me(a,t.leaf?s(o):o),l+=De(a);for(i=n-e-1;e<=i;i--)o=t.children[i],Me(u,t.leaf?s(o):o),l+=De(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)Me(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ne(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Qo=Object.freeze({toMercator:Qe,toWgs84:$e}),$o=6378137,ts=function(t){function e(){for(var t=[],e=0;e<p.features.length;e++)-1==p.features[e].properties.parent&&t.push(e);if(1<t.length)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<p.features.length;r++)t[e]!=r&&Tt(p.features[t[e]].geometry.coordinates[0][0],p.features[r],{ignoreBoundary:!0})&&un(p.features[r])<1/0&&(n=r);p.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<p.features.length;t++)if(-1==p.features[t].properties.parent){var e=p.features[t].properties.winding;p.features[t].properties.netWinding=e,i(t,e)}}function i(t,e){for(var n=0;n<p.features.length;n++)if(p.features[n].properties.parent==t){var r=e+p.features[n].properties.winding;p.features[n].properties.netWinding=r,i(n,r)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var r=t.geometry.coordinates.length,o=[],s=0;s<r;s++){var a=t.geometry.coordinates[s];En(a[0],a[a.length-1])||a.push(a[0]),o.push.apply(o,a.slice(0,a.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(o))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var u=o.length,l=function(t,f,e){function r(t,e,n,r){var i=d[t][e],o=d[t][e+1],s=d[n][r],a=d[n][r+1],u=function(t,e,n,r){if(bn(t,n)||bn(t,r)||bn(e,n)||bn(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],c=r[0],h=r[1],p=(i-s)*(l-h)-(o-a)*(u-c);return 0===p?null:[((i*a-o*s)*(u-c)-(i-s)*(u*h-l*c))/p,((i*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/p]}(i,o,s,a);if(null!==u){var l,c;if(l=o[0]!==i[0]?(u[0]-i[0])/(o[0]-i[0]):(u[1]-i[1])/(o[1]-i[1]),c=a[0]!==s[0]?(u[0]-s[0])/(a[0]-s[0]):(u[1]-s[1])/(a[1]-s[1]),!(l>=1||l<=0||c>=1||c<=0)){var h=u,p=!y[h];p&&(y[h]=!0),f?g.push(f(u,t,e,i,o,l,n,r,s,a,c,p)):g.push(u)}}}function n(t,e){var n,r,i,o,s=d[t][e],a=d[t][e+1];return s[0]<a[0]?(n=s[0],r=a[0]):(n=a[0],r=s[0]),s[1]<a[1]?(i=s[1],o=a[1]):(i=a[1],o=s[1]),{minX:n,minY:i,maxX:r,maxY:o,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===e&&(e=1);var d=t.geometry.coordinates,g=[],y={};if(e){for(var i=[],o=0;o<d.length;o++)for(var s=0;s<d[o].length-1;s++)i.push(n(o,s));var a=Oo();a.load(i)}for(var u=0;u<d.length;u++)for(var l=0;l<d[u].length-1;l++)if(e){a.search(n(u,l)).forEach(function(t){var e=t.ring,n=t.edge;r(u,l,e,n)})}else for(var c=0;c<d.length;c++)for(var h=0;h<d[c].length-1;h++)r(u,l,c,h);return f||(g={type:"Feature",geometry:{type:"MultiPoint",coordinates:g}}),g}(t,function(t,e,n,r,i,o,s,a,u,l,c,h){return[t,e,n,r,i,o,s,a,u,l,c,h]}),c=l.length;if(0==c){var h=[];for(s=0;s<r;s++)h.push(U([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(xn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var p=Y(h);return e(),n(),p}var f=[],d=[];for(s=0;s<r;s++){f.push([]);for(var g=0;g<t.geometry.coordinates[s].length-1;g++)f[s].push([new es(t.geometry.coordinates[s][(g+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,g],[s,(g+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),d.push(new ns(t.geometry.coordinates[s][g],[s,(g-1).modulo(t.geometry.coordinates[s].length-1)],[s,g],void 0,void 0,!1,!0))}for(s=0;s<c;s++)f[l[s][1]][l[s][2]].push(new es(l[s][0],l[s][5],[l[s][1],l[s][2]],[l[s][6],l[s][7]],void 0)),l[s][11]&&d.push(new ns(l[s][0],[l[s][1],l[s][2]],[l[s][6],l[s][7]],void 0,void 0,!0,!0));var y=d.length;for(s=0;s<f.length;s++)for(g=0;g<f[s].length;g++)f[s][g].sort(function(t,e){return t.param<e.param?-1:1});var _=[];for(s=0;s<y;s++)_.push({minX:d[s].coord[0],minY:d[s].coord[1],maxX:d[s].coord[0],maxY:d[s].coord[1],index:s});var v=Oo();for(v.load(_),s=0;s<f.length;s++)for(g=0;g<f[s].length;g++)for(var m=0;m<f[s][g].length;m++){x=m==f[s][g].length-1?f[s][(g+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:f[s][g][m+1].coord;var b=v.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0];f[s][g][m].nxtIsectAlongEdgeIn=b.index}for(s=0;s<f.length;s++)for(g=0;g<f[s].length;g++)for(m=0;m<f[s][g].length;m++){var x=f[s][g][m].coord,E=(b=v.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0]).index;E<u?d[E].nxtIsectAlongRingAndEdge2=f[s][g][m].nxtIsectAlongEdgeIn:En(d[E].ringAndEdge1,f[s][g][m].ringAndEdgeIn)?d[E].nxtIsectAlongRingAndEdge1=f[s][g][m].nxtIsectAlongEdgeIn:d[E].nxtIsectAlongRingAndEdge2=f[s][g][m].nxtIsectAlongEdgeIn}var w=[];for(g=s=0;g<r;g++){var O=s;for(m=0;m<t.geometry.coordinates[g].length-1;m++)d[s].coord[0]<d[O].coord[0]&&(O=s),s++;var C=d[O].nxtIsectAlongRingAndEdge2;for(m=0;m<d.length;m++)if(d[m].nxtIsectAlongRingAndEdge1==O||d[m].nxtIsectAlongRingAndEdge2==O){var S=m;break}var I=xn([d[S].coord,d[O].coord,d[C].coord],!0)?1:-1;w.push({isect:O,parent:-1,winding:I})}for(w.sort(function(t,e){return d[t.isect].coord>d[e.isect].coord?-1:1}),h=[];0<w.length;){var T=w.pop(),R=T.isect,L=T.parent,N=T.winding,P=h.length,M=[d[R].coord],j=R;if(d[R].ringAndEdge1Walkable)var A=d[R].ringAndEdge1,F=d[R].nxtIsectAlongRingAndEdge1;else A=d[R].ringAndEdge2,F=d[R].nxtIsectAlongRingAndEdge2;for(;!En(d[R].coord,d[F].coord);){M.push(d[F].coord);var D=void 0;for(s=0;s<w.length;s++)if(w[s].isect==F){D=s;break}if(null!=D&&w.splice(D,1),En(A,d[F].ringAndEdge1)){if(A=d[F].ringAndEdge2,d[F].ringAndEdge2Walkable=!1,d[F].ringAndEdge1Walkable){var k={isect:F};xn([d[j].coord,d[F].coord,d[d[F].nxtIsectAlongRingAndEdge2].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=P,k.winding=N),w.push(k)}F=d[j=F].nxtIsectAlongRingAndEdge2}else A=d[F].ringAndEdge1,d[F].ringAndEdge1Walkable=!1,d[F].ringAndEdge2Walkable&&(k={isect:F},xn([d[j].coord,d[F].coord,d[d[F].nxtIsectAlongRingAndEdge1].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=P,k.winding=N),w.push(k)),F=d[j=F].nxtIsectAlongRingAndEdge1}M.push(d[F].coord),h.push(U([M],{index:P,parent:L,winding:N,netWinding:void 0}))}return p=Y(h),e(),n(),p},es=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},ns=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};var rs=Math.PI/180,is=180/Math.PI,os=function(t,e){this.lon=t,this.lat=e,this.x=rs*t,this.y=rs*e};os.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},os.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new os(e,t)};var ss=function(){this.coords=[],this.length=0};ss.prototype.move_to=function(t){this.length++,this.coords.push(t)};var as=function(t){this.properties=t||{},this.geometries=[]};as.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},as.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var us=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new os(t.x,t.y),this.end=new os(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};us.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=is*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[is*Math.atan2(i,r),s]},us.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,p=360-l,f=1;f<n.length;++f){var d=n[f-1][0],g=n[f][0],y=Math.abs(g-d);p<y&&(c<g&&d<h||c<d&&g<h)?a=!0:u<y&&(u=y)}var _=[];if(a&&u<l){var v=[];_.push(v);for(var m=0;m<n.length;++m){var b=parseFloat(n[m][0]);if(0<m&&Math.abs(b-n[m-1][0])>p){var x=parseFloat(n[m-1][0]),E=parseFloat(n[m-1][1]),w=parseFloat(n[m][0]),O=parseFloat(n[m][1]);if(-180<x&&x<h&&180===w&&m+1<n.length&&-180<n[m-1][0]&&n[m-1][0]<h){v.push([-180,n[m][1]]),m++,v.push([n[m][0],n[m][1]]);continue}if(c<x&&x<180&&-180===w&&m+1<n.length&&n[m-1][0]>c&&n[m-1][0]<180){v.push([180,n[m][1]]),m++,v.push([n[m][0],n[m][1]]);continue}if(x<h&&c<w){var C=x;x=w,w=C;var S=E;E=O,O=S}if(c<x&&w<h&&(w+=360),x<=180&&180<=w&&x<w){var I=(180-x)/(w-x),T=I*O+(1-I)*E;v.push([n[m-1][0]>c?180:-180,T]),(v=[]).push([n[m-1][0]>c?-180:180,T]),_.push(v)}else v=[],_.push(v);v.push([b,n[m][1]])}else v.push([n[m][0],n[m][1]])}}else{var R=[];_.push(R);for(var L=0;L<n.length;++L)R.push([n[L][0],n[L][1]])}for(var N=new as(this.properties),P=0;P<_.length;++P){var M=new ss;N.geometries.push(M);for(var j=_[P],A=0;A<j.length;++A)M.move_to(j[A])}return N};var ls=jn;(jn.polyline=jn).polygon=function(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Fn(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Fn(a=t[s],e)&r))!==o&&n.push(An(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n};var cs=Array.prototype.slice,hs={successCallback:null,verbose:!1,polygons:!1},ps={},fs=64,ds=16,gs=4,ys=1,_s=[],vs=[],ms=[],bs=[],xs=[],Es=[],ws=[],Os=[],Cs=[],Ss=[],Is=[],Ts=[],Rs=[],Ls=[],Ns=[],Ps=[],Ms=[],js=[],As=[],Fs=[],Ds=[],ks=[],Gs=[],zs=[];ws[85]=Ss[85]=-1,Os[85]=Is[85]=0,Cs[85]=Ts[85]=1,As[85]=ks[85]=1,Fs[85]=Gs[85]=0,Ds[85]=zs[85]=1,_s[85]=bs[85]=0,vs[85]=xs[85]=-1,ms[85]=Ns[85]=0,Ps[85]=Rs[85]=0,Ms[85]=Ls[85]=1,Es[85]=js[85]=1,ks[1]=ks[169]=0,Gs[1]=Gs[169]=-1,zs[1]=zs[169]=0,Rs[1]=Rs[169]=-1,Ls[1]=Ls[169]=0,Ns[1]=Ns[169]=0,Ss[4]=Ss[166]=0,Is[4]=Is[166]=-1,Ts[4]=Ts[166]=1,Ps[4]=Ps[166]=1,Ms[4]=Ms[166]=0,js[4]=js[166]=0,ws[16]=ws[154]=0,Os[16]=Os[154]=1,Cs[16]=Cs[154]=1,bs[16]=bs[154]=1,xs[16]=xs[154]=0,Es[16]=Es[154]=1,As[64]=As[106]=0,Fs[64]=Fs[106]=1,Ds[64]=Ds[106]=0,_s[64]=_s[106]=-1,vs[64]=vs[106]=0,ms[64]=ms[106]=1,As[2]=As[168]=0,Fs[2]=Fs[168]=-1,Ds[2]=Ds[168]=1,ks[2]=ks[168]=0,Gs[2]=Gs[168]=-1,zs[2]=zs[168]=0,Rs[2]=Rs[168]=-1,Ls[2]=Ls[168]=0,Ns[2]=Ns[168]=0,Ps[2]=Ps[168]=-1,Ms[2]=Ms[168]=0,js[2]=js[168]=1,ws[8]=ws[162]=0,Os[8]=Os[162]=-1,Cs[8]=Cs[162]=0,Ss[8]=Ss[162]=0,Is[8]=Is[162]=-1,Ts[8]=Ts[162]=1,Rs[8]=Rs[162]=1,Ls[8]=Ls[162]=0,Ns[8]=Ns[162]=1,Ps[8]=Ps[162]=1,Ms[8]=Ms[162]=0,js[8]=js[162]=0,ws[32]=ws[138]=0,Os[32]=Os[138]=1,Cs[32]=Cs[138]=1,Ss[32]=Ss[138]=0,Is[32]=Is[138]=1,Ts[32]=Ts[138]=0,_s[32]=_s[138]=1,vs[32]=vs[138]=0,ms[32]=ms[138]=0,bs[32]=bs[138]=1,xs[32]=xs[138]=0,Es[32]=Es[138]=1,ks[128]=ks[42]=0,Gs[128]=Gs[42]=1,zs[128]=zs[42]=1,As[128]=As[42]=0,Fs[128]=Fs[42]=1,Ds[128]=Ds[42]=0,_s[128]=_s[42]=-1,vs[128]=vs[42]=0,ms[128]=ms[42]=1,bs[128]=bs[42]=-1,xs[128]=xs[42]=0,Es[128]=Es[42]=0,Ss[5]=Ss[165]=-1,Is[5]=Is[165]=0,Ts[5]=Ts[165]=0,ks[5]=ks[165]=1,Gs[5]=Gs[165]=0,zs[5]=zs[165]=0,Ps[20]=Ps[150]=0,Ms[20]=Ms[150]=1,js[20]=js[150]=1,bs[20]=bs[150]=0,xs[20]=xs[150]=-1,Es[20]=Es[150]=1,ws[80]=ws[90]=-1,Os[80]=Os[90]=0,Cs[80]=Cs[90]=1,As[80]=As[90]=1,Fs[80]=Fs[90]=0,Ds[80]=Ds[90]=1,Rs[65]=Rs[105]=0,Ls[65]=Ls[105]=1,Ns[65]=Ns[105]=0,_s[65]=_s[105]=0,vs[65]=vs[105]=-1,ms[65]=ms[105]=0,ws[160]=ws[10]=-1,Os[160]=Os[10]=0,Cs[160]=Cs[10]=1,Ss[160]=Ss[10]=-1,Is[160]=Is[10]=0,Ts[160]=Ts[10]=0,ks[160]=ks[10]=1,Gs[160]=Gs[10]=0,zs[160]=zs[10]=0,As[160]=As[10]=1,Fs[160]=Fs[10]=0,Ds[160]=Ds[10]=1,Ps[130]=Ps[40]=0,Ms[130]=Ms[40]=1,js[130]=js[40]=1,Rs[130]=Rs[40]=0,Ls[130]=Ls[40]=1,Ns[130]=Ns[40]=0,_s[130]=_s[40]=0,vs[130]=vs[40]=-1,ms[130]=ms[40]=0,bs[130]=bs[40]=0,xs[130]=xs[40]=-1,Es[130]=Es[40]=1,Ss[37]=Ss[133]=0,Is[37]=Is[133]=1,Ts[37]=Ts[133]=1,ks[37]=ks[133]=0,Gs[37]=Gs[133]=1,zs[37]=zs[133]=0,_s[37]=_s[133]=-1,vs[37]=vs[133]=0,ms[37]=ms[133]=0,bs[37]=bs[133]=1,xs[37]=xs[133]=0,Es[37]=Es[133]=0,Ps[148]=Ps[22]=-1,Ms[148]=Ms[22]=0,js[148]=js[22]=0,ks[148]=ks[22]=0,Gs[148]=Gs[22]=-1,zs[148]=zs[22]=1,As[148]=As[22]=0,Fs[148]=Fs[22]=1,Ds[148]=Ds[22]=1,bs[148]=bs[22]=-1,xs[148]=xs[22]=0,Es[148]=Es[22]=1,ws[82]=ws[88]=0,Os[82]=Os[88]=-1,Cs[82]=Cs[88]=1,Ps[82]=Ps[88]=1,Ms[82]=Ms[88]=0,js[82]=js[88]=1,Rs[82]=Rs[88]=-1,Ls[82]=Ls[88]=0,Ns[82]=Ns[88]=1,As[82]=As[88]=0,Fs[82]=Fs[88]=-1,Ds[82]=Ds[88]=0,ws[73]=ws[97]=0,Os[73]=Os[97]=1,Cs[73]=Cs[97]=0,Ss[73]=Ss[97]=0,Is[73]=Is[97]=-1,Ts[73]=Ts[97]=0,Rs[73]=Rs[97]=1,Ls[73]=Ls[97]=0,Ns[73]=Ns[97]=0,_s[73]=_s[97]=1,vs[73]=vs[97]=0,ms[73]=ms[97]=1,ws[145]=ws[25]=0,Os[145]=Os[25]=-1,Cs[145]=Cs[25]=0,Rs[145]=Rs[25]=1,Ls[145]=Ls[25]=0,Ns[145]=Ns[25]=1,ks[145]=ks[25]=0,Gs[145]=Gs[25]=1,zs[145]=zs[25]=1,bs[145]=bs[25]=-1,xs[145]=xs[25]=0,Es[145]=Es[25]=0,Ss[70]=Ss[100]=0,Is[70]=Is[100]=1,Ts[70]=Ts[100]=0,Ps[70]=Ps[100]=-1,Ms[70]=Ms[100]=0,js[70]=js[100]=1,As[70]=As[100]=0,Fs[70]=Fs[100]=-1,Ds[70]=Ds[100]=1,_s[70]=_s[100]=1,vs[70]=vs[100]=0,ms[70]=ms[100]=0,Ss[101]=Ss[69]=0,Is[101]=Is[69]=1,Ts[101]=Ts[69]=0,_s[101]=_s[69]=1,vs[101]=vs[69]=0,ms[101]=ms[69]=0,ks[149]=ks[21]=0,Gs[149]=Gs[21]=1,zs[149]=zs[21]=1,bs[149]=bs[21]=-1,xs[149]=xs[21]=0,Es[149]=Es[21]=0,Ps[86]=Ps[84]=-1,Ms[86]=Ms[84]=0,js[86]=js[84]=1,As[86]=As[84]=0,Fs[86]=Fs[84]=-1,Ds[86]=Ds[84]=1,ws[89]=ws[81]=0,Os[89]=Os[81]=-1,Cs[89]=Cs[81]=0,Rs[89]=Rs[81]=1,Ls[89]=Ls[81]=0,Ns[89]=Ns[81]=1,ws[96]=ws[74]=0,Os[96]=Os[74]=1,Cs[96]=Cs[74]=0,Ss[96]=Ss[74]=-1,Is[96]=Is[74]=0,Ts[96]=Ts[74]=1,As[96]=As[74]=1,Fs[96]=Fs[74]=0,Ds[96]=Ds[74]=0,_s[96]=_s[74]=1,vs[96]=vs[74]=0,ms[96]=ms[74]=1,ws[24]=ws[146]=0,Os[24]=Os[146]=-1,Cs[24]=Cs[146]=1,Ps[24]=Ps[146]=1,Ms[24]=Ms[146]=0,js[24]=js[146]=1,Rs[24]=Rs[146]=0,Ls[24]=Ls[146]=1,Ns[24]=Ns[146]=1,bs[24]=bs[146]=0,xs[24]=xs[146]=-1,Es[24]=Es[146]=0,Ss[6]=Ss[164]=-1,Is[6]=Is[164]=0,Ts[6]=Ts[164]=1,Ps[6]=Ps[164]=-1,Ms[6]=Ms[164]=0,js[6]=js[164]=0,ks[6]=ks[164]=0,Gs[6]=Gs[164]=-1,zs[6]=zs[164]=1,As[6]=As[164]=1,Fs[6]=Fs[164]=0,Ds[6]=Ds[164]=0,Rs[129]=Rs[41]=0,Ls[129]=Ls[41]=1,Ns[129]=Ns[41]=1,ks[129]=ks[41]=0,Gs[129]=Gs[41]=1,zs[129]=zs[41]=0,_s[129]=_s[41]=-1,vs[129]=vs[41]=0,ms[129]=ms[41]=0,bs[129]=bs[41]=0,xs[129]=xs[41]=-1,Es[129]=Es[41]=0,Ps[66]=Ps[104]=0,Ms[66]=Ms[104]=1,js[66]=js[104]=0,Rs[66]=Rs[104]=-1,Ls[66]=Ls[104]=0,Ns[66]=Ns[104]=1,As[66]=As[104]=0,Fs[66]=Fs[104]=-1,Ds[66]=Ds[104]=0,_s[66]=_s[104]=0,vs[66]=vs[104]=-1,ms[66]=ms[104]=1,ws[144]=ws[26]=-1,Os[144]=Os[26]=0,Cs[144]=Cs[26]=0,ks[144]=ks[26]=1,Gs[144]=Gs[26]=0,zs[144]=zs[26]=1,As[144]=As[26]=0,Fs[144]=Fs[26]=1,Ds[144]=Ds[26]=1,bs[144]=bs[26]=-1,xs[144]=xs[26]=0,Es[144]=Es[26]=1,Ss[36]=Ss[134]=0,Is[36]=Is[134]=1,Ts[36]=Ts[134]=1,Ps[36]=Ps[134]=0,Ms[36]=Ms[134]=1,js[36]=js[134]=0,_s[36]=_s[134]=0,vs[36]=vs[134]=-1,ms[36]=ms[134]=1,bs[36]=bs[134]=1,xs[36]=xs[134]=0,Es[36]=Es[134]=0,ws[9]=ws[161]=-1,Os[9]=Os[161]=0,Cs[9]=Cs[161]=0,Ss[9]=Ss[161]=0,Is[9]=Is[161]=-1,Ts[9]=Ts[161]=0,Rs[9]=Rs[161]=1,Ls[9]=Ls[161]=0,Ns[9]=Ns[161]=0,ks[9]=ks[161]=1,Gs[9]=Gs[161]=0,zs[9]=zs[161]=1,ws[136]=0,Os[136]=1,Cs[136]=1,Ss[136]=0,Is[136]=1,Ts[136]=0,Ps[136]=-1,Ms[136]=0,js[136]=1,Rs[136]=-1,Ls[136]=0,Ns[136]=0,ks[136]=0,Gs[136]=-1,zs[136]=0,As[136]=0,Fs[136]=-1,Ds[136]=1,_s[136]=1,vs[136]=0,ms[136]=0,bs[136]=1,xs[136]=0,Es[136]=1,ws[34]=0,Os[34]=-1,Cs[34]=0,Ss[34]=0,Is[34]=-1,Ts[34]=1,Ps[34]=1,Ms[34]=0,js[34]=0,Rs[34]=1,Ls[34]=0,Ns[34]=1,ks[34]=0,Gs[34]=1,zs[34]=1,As[34]=0,Fs[34]=1,Ds[34]=0,_s[34]=-1,vs[34]=0,ms[34]=1,bs[34]=-1,xs[34]=0,Es[34]=0,ws[35]=0,Os[35]=1,Cs[35]=1,Ss[35]=0,Is[35]=-1,Ts[35]=1,Ps[35]=1,Ms[35]=0,js[35]=0,Rs[35]=-1,Ls[35]=0,Ns[35]=0,ks[35]=0,Gs[35]=-1,zs[35]=0,As[35]=0,Fs[35]=1,Ds[35]=0,_s[35]=-1,vs[35]=0,ms[35]=1,bs[35]=1,xs[35]=0,Es[35]=1,ws[153]=0,Os[153]=1,Cs[153]=1,Rs[153]=-1,Ls[153]=0,Ns[153]=0,ks[153]=0,Gs[153]=-1,zs[153]=0,bs[153]=1,xs[153]=0,Es[153]=1,Ss[102]=0,Is[102]=-1,Ts[102]=1,Ps[102]=1,Ms[102]=0,js[102]=0,As[102]=0,Fs[102]=1,Ds[102]=0,_s[102]=-1,vs[102]=0,ms[102]=1,ws[155]=0,Os[155]=-1,Cs[155]=0,Rs[155]=1,Ls[155]=0,Ns[155]=1,ks[155]=0,Gs[155]=1,zs[155]=1,bs[155]=-1,xs[155]=0,Es[155]=0,Ss[103]=0,Is[103]=1,Ts[103]=0,Ps[103]=-1,Ms[103]=0,js[103]=1,As[103]=0,Fs[103]=-1,Ds[103]=1,_s[103]=1,vs[103]=0,ms[103]=0,ws[152]=0,Os[152]=1,Cs[152]=1,Ps[152]=-1,Ms[152]=0,js[152]=1,Rs[152]=-1,Ls[152]=0,Ns[152]=0,ks[152]=0,Gs[152]=-1,zs[152]=0,As[152]=0,Fs[152]=-1,Ds[152]=1,bs[152]=1,xs[152]=0,Es[152]=1,ws[156]=0,Os[156]=-1,Cs[156]=1,Ps[156]=1,Ms[156]=0,js[156]=1,Rs[156]=-1,Ls[156]=0,Ns[156]=0,ks[156]=0,Gs[156]=-1,zs[156]=0,As[156]=0,Fs[156]=1,Ds[156]=1,bs[156]=-1,xs[156]=0,Es[156]=1,ws[137]=0,Os[137]=1,Cs[137]=1,Ss[137]=0,Is[137]=1,Ts[137]=0,Rs[137]=-1,Ls[137]=0,Ns[137]=0,ks[137]=0,Gs[137]=-1,zs[137]=0,_s[137]=1,vs[137]=0,ms[137]=0,bs[137]=1,xs[137]=0,Es[137]=1,ws[139]=0,Os[139]=1,Cs[139]=1,Ss[139]=0,Is[139]=-1,Ts[139]=0,Rs[139]=1,Ls[139]=0,Ns[139]=0,ks[139]=0,Gs[139]=1,zs[139]=0,_s[139]=-1,vs[139]=0,ms[139]=0,bs[139]=1,xs[139]=0,Es[139]=1,ws[98]=0,Os[98]=-1,Cs[98]=0,Ss[98]=0,Is[98]=-1,Ts[98]=1,Ps[98]=1,Ms[98]=0,js[98]=0,Rs[98]=1,Ls[98]=0,Ns[98]=1,As[98]=0,Fs[98]=1,Ds[98]=0,_s[98]=-1,vs[98]=0,ms[98]=1,ws[99]=0,Os[99]=1,Cs[99]=0,Ss[99]=0,Is[99]=-1,Ts[99]=1,Ps[99]=1,Ms[99]=0,js[99]=0,Rs[99]=-1,Ls[99]=0,Ns[99]=1,As[99]=0,Fs[99]=-1,Ds[99]=0,_s[99]=1,vs[99]=0,ms[99]=1,Ss[38]=0,Is[38]=-1,Ts[38]=1,Ps[38]=1,Ms[38]=0,js[38]=0,ks[38]=0,Gs[38]=1,zs[38]=1,As[38]=0,Fs[38]=1,Ds[38]=0,_s[38]=-1,vs[38]=0,ms[38]=1,bs[38]=-1,xs[38]=0,Es[38]=0,Ss[39]=0,Is[39]=1,Ts[39]=1,Ps[39]=-1,Ms[39]=0,js[39]=0,ks[39]=0,Gs[39]=-1,zs[39]=1,As[39]=0,Fs[39]=1,Ds[39]=0,_s[39]=-1,vs[39]=0,ms[39]=1,bs[39]=1,xs[39]=0,Es[39]=0;var Us=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Bs=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Ys=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Xs=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},qs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Vs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ws=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ks=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Hs=[],Zs=[],Js=[],Qs=[],$s=[],ta=[],ea=[],na=[];Qs[1]=$s[1]=18,Qs[169]=$s[169]=18,Js[4]=Zs[4]=12,Js[166]=Zs[166]=12,Hs[16]=na[16]=4,Hs[154]=na[154]=4,ta[64]=ea[64]=22,ta[106]=ea[106]=22,Js[2]=ta[2]=17,Qs[2]=$s[2]=18,Js[168]=ta[168]=17,Qs[168]=$s[168]=18,Hs[8]=Qs[8]=9,Zs[8]=Js[8]=12,Hs[162]=Qs[162]=9,Zs[162]=Js[162]=12,Hs[32]=na[32]=4,Zs[32]=ea[32]=1,Hs[138]=na[138]=4,Zs[138]=ea[138]=1,$s[128]=na[128]=21,ta[128]=ea[128]=22,$s[42]=na[42]=21,ta[42]=ea[42]=22,Zs[5]=$s[5]=14,Zs[165]=$s[165]=14,Js[20]=na[20]=6,Js[150]=na[150]=6,Hs[80]=ta[80]=11,Hs[90]=ta[90]=11,Qs[65]=ea[65]=3,Qs[105]=ea[105]=3,Hs[160]=ta[160]=11,Zs[160]=$s[160]=14,Hs[10]=ta[10]=11,Zs[10]=$s[10]=14,Js[130]=na[130]=6,Qs[130]=ea[130]=3,Js[40]=na[40]=6,Qs[40]=ea[40]=3,Zs[101]=ea[101]=1,Zs[69]=ea[69]=1,$s[149]=na[149]=21,$s[21]=na[21]=21,Js[86]=ta[86]=17,Js[84]=ta[84]=17,Hs[89]=Qs[89]=9,Hs[81]=Qs[81]=9,Hs[96]=ea[96]=0,Zs[96]=ta[96]=15,Hs[74]=ea[74]=0,Zs[74]=ta[74]=15,Hs[24]=Js[24]=8,Qs[24]=na[24]=7,Hs[146]=Js[146]=8,Qs[146]=na[146]=7,Zs[6]=ta[6]=15,Js[6]=$s[6]=16,Zs[164]=ta[164]=15,Js[164]=$s[164]=16,Qs[129]=na[129]=7,$s[129]=ea[129]=20,Qs[41]=na[41]=7,$s[41]=ea[41]=20,Js[66]=ea[66]=2,Qs[66]=ta[66]=19,Js[104]=ea[104]=2,Qs[104]=ta[104]=19,Hs[144]=$s[144]=10,ta[144]=na[144]=23,Hs[26]=$s[26]=10,ta[26]=na[26]=23,Zs[36]=na[36]=5,Js[36]=ea[36]=2,Zs[134]=na[134]=5,Js[134]=ea[134]=2,Hs[9]=$s[9]=10,Zs[9]=Qs[9]=13,Hs[161]=$s[161]=10,Zs[161]=Qs[161]=13,Zs[37]=na[37]=5,$s[37]=ea[37]=20,Zs[133]=na[133]=5,$s[133]=ea[133]=20,Js[148]=$s[148]=16,ta[148]=na[148]=23,Js[22]=$s[22]=16,ta[22]=na[22]=23,Hs[82]=Js[82]=8,Qs[82]=ta[82]=19,Hs[88]=Js[88]=8,Qs[88]=ta[88]=19,Hs[73]=ea[73]=0,Zs[73]=Qs[73]=13,Hs[97]=ea[97]=0,Zs[97]=Qs[97]=13,Hs[145]=Qs[145]=9,$s[145]=na[145]=21,Hs[25]=Qs[25]=9,$s[25]=na[25]=21,Zs[70]=ea[70]=1,Js[70]=ta[70]=17,Zs[100]=ea[100]=1,Js[100]=ta[100]=17,Hs[34]=Qs[34]=9,Zs[34]=Js[34]=12,$s[34]=na[34]=21,ta[34]=ea[34]=22,Hs[136]=na[136]=4,Zs[136]=ea[136]=1,Js[136]=ta[136]=17,Qs[136]=$s[136]=18,Hs[35]=na[35]=4,Zs[35]=Js[35]=12,Qs[35]=$s[35]=18,ta[35]=ea[35]=22,Hs[153]=na[153]=4,Qs[153]=$s[153]=18,Zs[102]=Js[102]=12,ta[102]=ea[102]=22,Hs[155]=Qs[155]=9,$s[155]=na[155]=23,Zs[103]=ea[103]=1,Js[103]=ta[103]=17,Hs[152]=na[152]=4,Js[152]=ta[152]=17,Qs[152]=$s[152]=18,Hs[156]=Js[156]=8,Qs[156]=$s[156]=18,ta[156]=na[156]=23,Hs[137]=na[137]=4,Zs[137]=ea[137]=1,Qs[137]=$s[137]=18,Hs[139]=na[139]=4,Zs[139]=Qs[139]=13,$s[139]=ea[139]=20,Hs[98]=Qs[98]=9,Zs[98]=Js[98]=12,ta[98]=ea[98]=22,Hs[99]=ea[99]=0,Zs[99]=Js[99]=12,Qs[99]=ta[99]=19,Zs[38]=Js[38]=12,$s[38]=na[38]=21,ta[38]=ea[38]=22,Zs[39]=na[39]=5,Js[39]=$s[39]=16,ta[39]=ea[39]=22;var ra=[];ra[1]=ra[169]=Us,ra[4]=ra[166]=Bs,ra[16]=ra[154]=Ys,ra[64]=ra[106]=Xs,ra[168]=ra[2]=qs,ra[162]=ra[8]=Vs,ra[138]=ra[32]=Ws,ra[42]=ra[128]=Ks,ra[5]=ra[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ra[20]=ra[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ra[80]=ra[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ra[65]=ra[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ra[160]=ra[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ra[130]=ra[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ra[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ra[101]=ra[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ra[149]=ra[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ra[86]=ra[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ra[89]=ra[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ra[96]=ra[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ra[24]=ra[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ra[6]=ra[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ra[129]=ra[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ra[66]=ra[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ra[144]=ra[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ra[36]=ra[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ra[9]=ra[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ra[37]=ra[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ra[148]=ra[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ra[82]=ra[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ra[73]=ra[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ra[145]=ra[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ra[70]=ra[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ra[34]=function(t){return[Ks(t),Vs(t)]},ra[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ra[136]=function(t){return[Ws(t),qs(t)]},ra[153]=function(t){return[Ys(t),Us(t)]},ra[102]=function(t){return[Bs(t),Xs(t)]},ra[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ra[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ra[152]=function(t){return[Ys(t),qs(t)]},ra[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ra[137]=function(t){return[Ws(t),Us(t)]},ra[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ra[98]=function(t){return[Vs(t),Xs(t)]},ra[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ra[38]=function(t){return[Bs(t),Ks(t)]},ra[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ia=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ia.buildId=function(t){return t.join(",")},ia.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},ia.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},ia.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ia.prototype.sortOuterEdges=function(){var o=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,e){var n=t.to,r=e.to;if(0<=n.coordinates[0]-o.coordinates[0]&&r.coordinates[0]-o.coordinates[0]<0)return 1;if(n.coordinates[0]-o.coordinates[0]<0&&0<=r.coordinates[0]-o.coordinates[0])return-1;if(n.coordinates[0]-o.coordinates[0]==0&&r.coordinates[0]-o.coordinates[0]==0)return 0<=n.coordinates[1]-o.coordinates[1]||0<=r.coordinates[1]-o.coordinates[1]?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var i=ar(o.coordinates,n.coordinates,r.coordinates);return i<0?1:0<i?-1:Math.pow(n.coordinates[0]-o.coordinates[0],2)+Math.pow(n.coordinates[1]-o.coordinates[1],2)-(Math.pow(r.coordinates[0]-o.coordinates[0],2)+Math.pow(r.coordinates[1]-o.coordinates[1],2))}),this.outerEdgesSorted=!0)},ia.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ia.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ia.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var oa=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};oa.prototype.getSymetric=function(){return this.symetric||(this.symetric=new oa(this.to,this.from),this.symetric.symetric=this),this.symetric},oa.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},oa.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},oa.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},oa.prototype.toLineString=function(){return B([this.from.coordinates,this.to.coordinates])},oa.prototype.compareTo=function(t){return ar(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var sa=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},aa={length:{configurable:!0}};sa.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},sa.prototype.get=function(t){return this.edges[t]},aa.length.get=function(){return this.edges.length},sa.prototype.forEach=function(t){this.edges.forEach(t)},sa.prototype.map=function(t){return this.edges.map(t)},sa.prototype.some=function(t){return this.edges.some(t)},sa.prototype.isValid=function(){return!0},sa.prototype.isHole=function(){var r=this,t=this.edges.reduce(function(t,e,n){return e.from.coordinates[1]>r.edges[t].from.coordinates[1]&&(t=n),t},0),e=(0===t?this.length:t)-1,n=(t+1)%this.length,i=ar(this.edges[e].from.coordinates,this.edges[t].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[e].from.coordinates[0]>this.edges[n].from.coordinates[0]:0<i},sa.prototype.toMultiPoint=function(){return o(this.edges.map(function(t){return t.from.coordinates}))},sa.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=U([t])},sa.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=re(this.toPolygon())},sa.findEdgeRingContaining=function(r,t){var i,o,s=r.getEnvelope();return t.forEach(function(t){var e=t.getEnvelope();if(o&&(i=o.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(e,s)&&ur(e,s)){var n=r.map(function(t){return t.from.coordinates}).find(function(e){return!t.some(function(t){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e,t.from.coordinates)})});n&&t.inside(z(n))&&(o&&!ur(i,e)||(o=t))}}),o},sa.prototype.inside=function(t){return Tt(t,this.toPolygon())},Object.defineProperties(sa.prototype,aa);var ua=function(){this.edges=[],this.nodes={}};ua.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var i=new ua;return R(t,function(t){k(t,"LineString","Graph::fromGeoJson"),b(t,function(t,e){if(t){var n=i.getNode(t),r=i.getNode(e);i.addEdge(n,r)}return e})}),i},ua.prototype.getNode=function(t){var e=ia.buildId(t),n=this.nodes[e];return n=n||(this.nodes[e]=new ia(t))},ua.prototype.addEdge=function(t,e){var n=new oa(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},ua.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},ua.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},ua.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},ua.prototype._computeNextCWEdges=function(n){var e=this;void 0===n?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):n.getOuterEdges().forEach(function(t,e){n.getOuterEdge((0===e?n.getOuterEdges().length:e)-1).symetric.next=t})},ua.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;0<=o;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n=n||u))}r&&(r.next=n)},ua.prototype._findLabeledEdgeRings=function(){var n=[],r=0;return this.edges.forEach(function(t){if(!(0<=t.label)){n.push(t);for(var e=t;e.label=r,e=e.next,!t.isEqual(e););r++}}),n},ua.prototype.getEdgeRings=function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){n._findIntersectionNodes(e).forEach(function(t){n._computeNextCCWEdges(t,e.label)})});var e=[];return this.edges.forEach(function(t){t.ring||e.push(n._findEdgeRing(t))}),e},ua.prototype._findIntersectionNodes=function(n){for(var t=[],r=n,e=function(){var e=0;r.from.getOuterEdges().forEach(function(t){t.label===n.label&&++e}),1<e&&t.push(r.from),r=r.next};e(),!n.isEqual(r););return t},ua.prototype._findEdgeRing=function(t){for(var e=t,n=new sa;n.push(e),e.ring=n,e=e.next,!t.isEqual(e););return n},ua.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},ua.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()};var la=yt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),ca=(la.shim,yt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r})),ha=(ca.supported,ca.unsupported,yt(function(t){function a(t){return null==t}function u(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||0<t.length&&"number"!=typeof t[0])}var l=Array.prototype.slice,c=t.exports=function(t,e,n){return n=n||{},t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var r,i;if(a(t)||a(e))return!1;if(t.prototype!==e.prototype)return!1;if(ca(t))return!!ca(e)&&(t=l.call(t),e=l.call(e),c(t,e,n));if(u(t)){if(!u(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=la(t),s=la(e)}catch(t){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;0<=r;r--)if(o[r]!=s[r])return!1;for(r=o.length-1;0<=r;r--)if(i=o[r],!c(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}})),pa=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:mr};pa.prototype.compare=function(t,e){if(t.type!==e.type||!vr(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=_r(t),i=_r(e);return r.every(function(e){return this.some(function(t){return n.compare(e,t)})},i)}}return!1},pa.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},pa.prototype.compareLine=function(t,e,n,r){if(!vr(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},pa.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return 0<=r&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},pa.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},pa.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(e){return this.some(function(t){return i.compareLine(e,t,1,!0)})},r)}return!1},pa.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},pa.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},pa.prototype.removePseudo=function(t){return t};var fa=pa,da=yt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),ga=yt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(0<a){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){for(var t,e,n=this.dataset.length-1;e=Math.round(Math.random()*n),t=this.dataset[e],0<=this.centroids.indexOf(t););return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),ya=yt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?i<e&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),_a=yt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var l=ya;e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0,o=this.dataset.length;i<o;i++)if(1!==this._processed[i]){this._processed[i]=1,this.clusters.push([i]);var s=this.clusters.length-1;this._orderedList.push(i);var a=new l(null,null,"asc"),u=this._regionQuery(i);void 0!==this._distanceToCore(i)&&(this._updateQueue(i,u,a),this._expandCluster(s,a))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(r,t,i){var o=this;this._coreDistance=this._distanceToCore(r),t.forEach(function(t){if(void 0===o._processed[t]){var e=o.distance(o.dataset[r],o.dataset[t]),n=Math.max(o._coreDistance,e);void 0===o._reachability[t]?(o._reachability[t]=n,i.insert(t,n)):n<o._reachability[t]&&(o._reachability[t]=n,i.remove(t),i.insert(t,n))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),va=yt(function(t){t.exports&&(t.exports={DBSCAN:da,KMEANS:ga,OPTICS:_a,PriorityQueue:ya})}),ma=(va.DBSCAN,va.KMEANS,va.OPTICS,va.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i}),ba=ma,xa=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Ea=ma,wa=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,l=r||1e4,c=t.length,h=t[0].length,p=0<h,f=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?ba:xa,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,c=[],h=0;h<i;h++){for(var p=1/0,f=0;f<u;f++){var d=n(t[h],r[f]);d<=p&&(p=d)}a[h]=p}for(var g=0;g<i;g++)l+=a[g];for(var y=0;y<i;y++)c[y]={i:y,v:t[y],pr:a[y]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var _=1;_<i;_++)c[_].cs=c[_-1].cs+c[_].pr;for(var v=Math.random(),m=0;m<i-1&&c[m++].cs<v;);r.push(c[m-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,i.push(t[g]))}do{xr(e,0,f);for(var y=0;y<c;y++){for(var _=1/0,v=0,m=0;m<e;m++)(a=p?Ea(t[y],i[m]):Math.abs(t[y]-i[m]))<=_&&(_=a,v=m);s[y]=v,f[v]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=p?xr(h,0,b[x]):0,o[x]=i[x];if(p){for(var E=0;E<e;E++)i[E]=[];for(var w=0;w<c;w++)for(var O=b[s[w]],C=t[w],S=0;S<h;S++)O[S]+=C[S];u=!0;for(var I=0;I<e;I++){for(var T=i[I],R=b[I],L=o[I],N=f[I],P=0;P<h;P++)T[P]=R[P]/N||0;if(u)for(var M=0;M<h;M++)if(L[M]!=T[M]){u=!1;break}}}else{for(var j=0;j<c;j++)b[s[j]]+=t[j];for(var A=0;A<e;A++)i[A]=b[A]/f[A]||0;u=!0;for(var F=0;F<e;F++)if(o[F]!=i[F]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}},Oa={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Oa.heuristics.manhattan,o=r.closest||!1,s=new Sr(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);0<s.size();){var u=s.pop();if(u===n)return wr(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var p=l[c];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?wr(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Or.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Oa.cleanNode(this.nodes[t])},Or.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Oa.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Or.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Or.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Or.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Cr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Cr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Cr.prototype.isWall=function(){return 0===this.weight},Sr.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];0<t;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var Ca=function(t){return function(){return t}};Rr.prototype={constructor:Rr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Mr(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Nr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Pr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Pr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Nr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Mr(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,((n.L=o).U=n)!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,(n.R=s).U=n):(n.U=i,t=(i=n).R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Nr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Pr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Nr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Pr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Nr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Pr(this,i),t=this._;break}e.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}};var Sa,Ia,Ta,Ra,La,Na=[],Pa=[],Ma=1e-6,ja=1e-12;Kr.prototype={constructor:Kr,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return Gr(e,n[t])});return t.data=e.site.data,t})},triangles:function(){var p=[],f=this.edges;return this.cells.forEach(function(t,e){if(r=(n=t.halfedges).length)for(var n,r,i,o=t.site,s=-1,a=f[n[r-1]],u=a.left===o?a.right:a.left;++s<r;)i=u,u=(a=f[n[s]]).left===o?a.right:a.left,i&&u&&e<i.index&&e<u.index&&(c=i,h=u,((l=o)[0]-h[0])*(c[1]-l[1])-(l[0]-c[0])*(h[1]-l[1])<0)&&p.push([o.data,i.data,u.data]);var l,c,h}),p},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(s,a,t){for(var e,u,l=this,c=l._found||0,n=l.cells.length;!(u=l.cells[c]);)if(++c>=n)return null;for(var r=s-u.site[0],i=a-u.site[1],h=r*r+i*i;u=l.cells[e=c],c=null,u.halfedges.forEach(function(t){var e=l.edges[t],n=e.left;if(n!==u.site&&n||(n=e.right)){var r=s-n[0],i=a-n[1],o=r*r+i*i;o<h&&(h=o,c=n.index)}}),null!==c;);return l._found=e,null==t||h<=t*t?u.site:null}};var Aa=Object.freeze({randomPosition:ti,randomPoint:ei,randomPolygon:ni,randomLineString:ri}),Fa=Object.freeze({getCluster:oi,clusterEach:si,clusterReduce:ai,createBins:ui,applyFilter:li,propertiesContainsFilter:ci,filterProperties:hi});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Da=function(){};Da.prototype.interfaces_=function(){return[]},Da.prototype.getClass=function(){return Da},Da.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var ka=function(){},Ga=function(){},za={MAX_VALUE:{configurable:!0}};Ga.isNaN=function(t){return Number.isNaN(t)},Ga.doubleToLongBits=function(t){return t},Ga.longBitsToDouble=function(t){return t},Ga.isInfinite=function(t){return!Number.isFinite(t)},za.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Ga,za);var Ua=function(){},Ba=function(){},Ya=function(){},Xa=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},qa={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Xa.prototype.setOrdinate=function(t,e){switch(t){case Xa.X:this.x=e;break;case Xa.Y:this.y=e;break;case Xa.Z:this.z=e;break;default:throw new ka("Invalid ordinate index: "+t)}},Xa.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Da.equalsWithTolerance(this.x,e.x,n)&&!!Da.equalsWithTolerance(this.y,e.y,n)}},Xa.prototype.getOrdinate=function(t){switch(t){case Xa.X:return this.x;case Xa.Y:return this.y;case Xa.Z:return this.z}throw new ka("Invalid ordinate index: "+t)},Xa.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Ga.isNaN(this.z))&&Ga.isNaN(t.z)},Xa.prototype.equals=function(t){return t instanceof Xa&&this.equals2D(t)},Xa.prototype.equalInZ=function(t,e){return Da.equalsWithTolerance(this.z,t.z,e)},Xa.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Xa.prototype.clone=function(){},Xa.prototype.copy=function(){return new Xa(this)},Xa.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Xa.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Xa.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Xa.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+Xa.hashCode(this.x))+Xa.hashCode(this.y)},Xa.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Xa.prototype.interfaces_=function(){return[Ua,Ba,pi]},Xa.prototype.getClass=function(){return Xa},Xa.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=Ga.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},qa.DimensionalComparator.get=function(){return Va},qa.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},qa.NULL_ORDINATE.get=function(){return Ga.NaN},qa.X.get=function(){return 0},qa.Y.get=function(){return 1},qa.Z.get=function(){return 2},Object.defineProperties(Xa,qa);var Va=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new ka("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Va.prototype.compare=function(t,e){var n=t,r=e,i=Va.compare(n.x,r.x);if(0!==i)return i;var o=Va.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Va.compare(n.z,r.z)},Va.prototype.interfaces_=function(){return[Ya]},Va.prototype.getClass=function(){return Va},Va.compare=function(t,e){return t<e?-1:e<t?1:Ga.isNaN(t)?Ga.isNaN(e)?0:-1:Ga.isNaN(e)?1:0};var Wa=function(){};Wa.prototype.create=function(){},Wa.prototype.interfaces_=function(){return[]},Wa.prototype.getClass=function(){return Wa};var Ka=function(){},Ha={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka},Ka.toLocationSymbol=function(t){switch(t){case Ka.EXTERIOR:return"e";case Ka.BOUNDARY:return"b";case Ka.INTERIOR:return"i";case Ka.NONE:return"-"}throw new ka("Unknown location value: "+t)},Ha.INTERIOR.get=function(){return 0},Ha.BOUNDARY.get=function(){return 1},Ha.EXTERIOR.get=function(){return 2},Ha.NONE.get=function(){return-1},Object.defineProperties(Ka,Ha);var Za=function(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)},Ja=function(){},Qa={LOG_10:{configurable:!0}};Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja},Ja.log10=function(t){var e=Math.log(t);return Ga.isInfinite(e)?e:Ga.isNaN(e)?e:e/Ja.LOG_10},Ja.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Ja.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:o<r?o:r}},Ja.wrap=function(t,e){return t<0?e- -t%e:t%e},Ja.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return r<e&&(r=e),r<n&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return u<o&&(u=o),u<s&&(u=s),u<a&&(u=a),u}},Ja.average=function(t,e){return(t+e)/2},Qa.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Ja,Qa);var $a=function(t){this.str=t};$a.prototype.append=function(t){this.str+=t},$a.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},$a.prototype.toString=function(t){return this.str};var tu=function(t){this.value=t};tu.prototype.intValue=function(){return this.value},tu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},tu.isNaN=function(t){return Number.isNaN(t)};var eu=function(){};eu.isWhitespace=function(t){return t<=32&&0<=t||127===t},eu.toUpperCase=function(t){return t.toUpperCase()};var nu=function t(){if(this._hi=0,(this._lo=0)===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},ru={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};nu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},nu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=nu.magnitude(n._hi),i=nu.TEN.pow(r);(n=n.divide(i)).gt(nu.TEN)?(n=n.divide(nu.TEN),r+=1):n.lt(nu.ONE)&&(n=n.multiply(nu.TEN),r-=1);for(var o=r+1,s=new $a,a=nu.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;h=9<l?(c=!0,"9"):"0"+l,s.append(h),n=n.subtract(nu.valueOf(l)).multiply(nu.TEN),c&&n.selfAdd(nu.TEN);var p=!0,f=nu.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},nu.prototype.sqr=function(){return this.multiply(this)},nu.prototype.doubleValue=function(){return this._hi+this._lo},nu.prototype.subtract=function(){if(arguments[0]instanceof nu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},nu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},nu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},nu.prototype.selfSubtract=function(){if(arguments[0]instanceof nu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},nu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},nu.prototype.min=function(t){return this.le(t)?this:t},nu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this._hi/n,h=(i=(l=nu.SPLIT*u)-(i=l-u))*(s=(h=nu.SPLIT*n)-(s=h-n))-(c=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,l=(this._hi-c-h+this._lo-u*r)/n,h=u+l,this._hi=h,this._lo=u-h+l,this}},nu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},nu.prototype.divide=function(){if(arguments[0]instanceof nu){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;return n=(o=this._hi/t._hi)-(e=(s=nu.SPLIT*o)-(e=s-o)),u=e*(r=(u=nu.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,new nu(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return Ga.isNaN(l)?nu.createNaN():nu.copy(this).selfDivide(l,0)}},nu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},nu.prototype.pow=function(t){if(0===t)return nu.valueOf(1);var e=new nu(this),n=nu.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},nu.prototype.ceil=function(){if(this.isNaN())return nu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new nu(t,e)},nu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},nu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},nu.prototype.setValue=function(){if(arguments[0]instanceof nu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},nu.prototype.max=function(t){return this.ge(t)?this:t},nu.prototype.sqrt=function(){if(this.isZero())return nu.valueOf(0);if(this.isNegative())return nu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=nu.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},nu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+e,s=i-this._hi,o=i-s,o=e-s+(this._hi-o),a=o+this._lo,r=a+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,p=null,f=null,d=null,g=null,y=null;f=this._hi+u,h=this._lo+l,d=f-(g=f-this._hi),p=h-(y=h-this._lo);var _=(c=f+(g=(d=u-g+(this._hi-d))+h))+(g=(p=l-y+(this._lo-p))+(g+(f-c))),v=g+(c-_);return this._hi=_,this._lo=v,this}},nu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=nu.SPLIT*this._hi)-this._hi,l=nu.SPLIT*n,i=u-i,o=this._hi-i,s=l-n;var c=(u=this._hi*n)+(l=i*(s=l-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},nu.prototype.selfSqr=function(){return this.selfMultiply(this)},nu.prototype.floor=function(){if(this.isNaN())return nu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new nu(t,e)},nu.prototype.negate=function(){return this.isNaN()?this:new nu(-this._hi,-this._lo)},nu.prototype.clone=function(){},nu.prototype.multiply=function(){if(arguments[0]instanceof nu){var t=arguments[0];return t.isNaN()?nu.createNaN():nu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Ga.isNaN(e)?nu.createNaN():nu.copy(this).selfMultiply(e,0)}},nu.prototype.isNaN=function(){return Ga.isNaN(this._hi)},nu.prototype.intValue=function(){return Math.trunc(this._hi)},nu.prototype.toString=function(){var t=nu.magnitude(this._hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},nu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+nu.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+nu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},nu.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;e=(i=1/this._hi)-(t=(o=nu.SPLIT*i)-(t=o-i)),n=(a=nu.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(s=i*this._hi)-(a=t*(n=a-n)-s+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new nu(u,i-u+o)},nu.prototype.toSciNotation=function(){if(this.isZero())return nu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=nu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},nu.prototype.abs=function(){return this.isNaN()?nu.NaN:this.isNegative()?this.negate():new nu(this)},nu.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},nu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},nu.prototype.add=function(){if(arguments[0]instanceof nu){var t=arguments[0];return nu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nu.copy(this).selfAdd(e)}},nu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof nu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},nu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},nu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},nu.prototype.trunc=function(){return this.isNaN()?nu.NaN:this.isPositive()?this.floor():this.ceil()},nu.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},nu.prototype.interfaces_=function(){return[pi,Ua,Ba]},nu.prototype.getClass=function(){return nu},nu.sqr=function(t){return nu.valueOf(t).selfMultiply(t)},nu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return nu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new nu(e)}},nu.sqrt=function(t){return nu.valueOf(t).sqrt()},nu.parse=function(t){for(var e=0,n=t.length;eu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new nu,s=0,a=0,u=0;!(n<=e);){var l=t.charAt(e);if(e++,eu.isDigit(l)){var c=l-"0";o.selfMultiply(nu.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"!==l&&"E"!==l)throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t);var h=t.substring(e);try{u=tu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}a=s}}var p=o,f=s-a-u;if(0==f)p=o;else if(0<f){var d=nu.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=nu.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},nu.createNaN=function(){return new nu(Ga.NaN,Ga.NaN)},nu.copy=function(t){return new nu(t)},nu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},nu.stringOfChar=function(t,e){for(var n=new $a,r=0;r<e;r++)n.append(t);return n.toString()},ru.PI.get=function(){return new nu(3.141592653589793,12246467991473532e-32)},ru.TWO_PI.get=function(){return new nu(6.283185307179586,24492935982947064e-32)},ru.PI_2.get=function(){return new nu(1.5707963267948966,6123233995736766e-32)},ru.E.get=function(){return new nu(2.718281828459045,14456468917292502e-32)},ru.NaN.get=function(){return new nu(Ga.NaN,Ga.NaN)},ru.EPS.get=function(){return 123259516440783e-46},ru.SPLIT.get=function(){return 134217729},ru.MAX_PRINT_DIGITS.get=function(){return 32},ru.TEN.get=function(){return nu.valueOf(10)},ru.ONE.get=function(){return nu.valueOf(1)},ru.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},ru.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(nu,ru);var iu=function(){},ou={DP_SAFE_EPSILON:{configurable:!0}};iu.prototype.interfaces_=function(){return[]},iu.prototype.getClass=function(){return iu},iu.orientationIndex=function(t,e,n){var r=iu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=nu.valueOf(e.x).selfAdd(-t.x),o=nu.valueOf(e.y).selfAdd(-t.y),s=nu.valueOf(n.x).selfAdd(-e.x),a=nu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},iu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},iu.intersection=function(t,e,n,r){var i=nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(nu.valueOf(e.x).selfSubtract(t.x)),o=nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(nu.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(nu.valueOf(t.y).selfSubtract(n.y)),u=nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(nu.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=nu.valueOf(t.x).selfAdd(nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(nu.valueOf(t.y).selfSubtract(n.y)),p=nu.valueOf(e.y).selfSubtract(t.y).selfMultiply(nu.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=nu.valueOf(n.y).selfAdd(nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new Xa(c,d)},iu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(0<i){if(o<=0)return iu.signum(s);r=i+o}else{if(!(i<0))return iu.signum(s);if(0<=o)return iu.signum(s);r=-i-o}var a=iu.DP_SAFE_EPSILON*r;return a<=s||a<=-s?iu.signum(s):2},iu.signum=function(t){return 0<t?1:t<0?-1:0},ou.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(iu,ou);var su=function(){},au={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};au.X.get=function(){return 0},au.Y.get=function(){return 1},au.Z.get=function(){return 2},au.M.get=function(){return 3},su.prototype.setOrdinate=function(t,e,n){},su.prototype.size=function(){},su.prototype.getOrdinate=function(t,e){},su.prototype.getCoordinate=function(){},su.prototype.getCoordinateCopy=function(t){},su.prototype.getDimension=function(){},su.prototype.getX=function(t){},su.prototype.clone=function(){},su.prototype.expandEnvelope=function(t){},su.prototype.copy=function(){},su.prototype.getY=function(t){},su.prototype.toCoordinateArray=function(){},su.prototype.interfaces_=function(){return[Ba]},su.prototype.getClass=function(){return su},Object.defineProperties(su,au);var uu=function(){},lu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uu),cu=function(){};cu.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},cu.getProperty=function(t){return{"line.separator":"\n"}[t]};var hu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof Xa&&arguments[1]instanceof Xa){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,y=p.x-h.x,_=h.x*p.y-p.x*h.y,v=f.y-d.y,m=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=y*b-m*_,this.y=v*_-g*b,this.w=g*m-v*y}};hu.prototype.getY=function(){var t=this.y/this.w;if(Ga.isNaN(t)||Ga.isInfinite(t))throw new lu;return t},hu.prototype.getX=function(){var t=this.x/this.w;if(Ga.isNaN(t)||Ga.isInfinite(t))throw new lu;return t},hu.prototype.getCoordinate=function(){var t=new Xa;return t.x=this.getX(),t.y=this.getY(),t},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu},hu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-a*o,h=(o*l-u*s)/c,p=(a*s-i*l)/c;if(Ga.isNaN(h)||Ga.isInfinite(h)||Ga.isNaN(p)||Ga.isInfinite(p))throw new lu;return new Xa(h,p)};var pu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Xa){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},fu={serialVersionUID:{configurable:!0}};pu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},pu.prototype.equals=function(t){if(!(t instanceof pu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},pu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new pu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new pu(e,r,n,i)},pu.prototype.isNull=function(){return this._maxx<this._minx},pu.prototype.getMaxX=function(){return this._maxx},pu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Xa){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof pu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},pu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof pu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Xa){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},pu.prototype.getMinY=function(){return this._miny},pu.prototype.getMinX=function(){return this._minx},pu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Xa){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof pu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},pu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},pu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},pu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},pu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},pu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},pu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},pu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},pu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},pu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},pu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof pu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Xa){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},pu.prototype.centre=function(){return this.isNull()?null:new Xa((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},pu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Xa){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof pu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},pu.prototype.getMaxY=function(){return this._maxy},pu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},pu.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+Xa.hashCode(this._minx))+Xa.hashCode(this._maxx))+Xa.hashCode(this._miny))+Xa.hashCode(this._maxy)},pu.prototype.interfaces_=function(){return[Ua,pi]},pu.prototype.getClass=function(){return pu},pu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u<l||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),u<l||c<a))}},fu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(pu,fu);var du={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},gu=function(t){this.geometryFactory=t||new kl};gu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=du.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=du.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],_u[n]&&(e=_u[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},gu.prototype.write=function(t){return this.extractGeometry(t)},gu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!yu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+yu[e].apply(this,[t])+")"};var yu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return yu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+yu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(yu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(yu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+yu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+yu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+yu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+yu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},_u={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(du.spaces);return this.geometryFactory.createPoint(new Xa(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(_u.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(du.spaces),r.push(new Xa(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(du.spaces),r.push(new Xa(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(du.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(_u.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(du.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(du.trimParens,"$1"),n=_u.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(du.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(_u.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},vu=function(t){this.parser=new gu(t)};vu.prototype.write=function(t){return this.parser.write(t)},vu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var mu=function(e){function t(t){e.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Error),bu=function(e){function t(){if(e.call(this),0===arguments.length)e.call(this);else if(1===arguments.length){var t=arguments[0];e.call(this,t)}}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(mu),xu=function(){};xu.prototype.interfaces_=function(){return[]},xu.prototype.getClass=function(){return xu},xu.shouldNeverReachHere=function(){if(0===arguments.length)xu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new bu("Should never reach here"+(null!==t?": "+t:""))}},xu.isTrue=function(){var t;if(1===arguments.length)xu.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new bu:new bu(t)},xu.equals=function(){var t,e,n;if(2===arguments.length)xu.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new bu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Eu=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Xa,this._intPt[1]=new Xa,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},wu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Eu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Eu.prototype.getTopologySummary=function(){var t=new $a;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Eu.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Eu.prototype.getIntersectionNum=function(){return this._result},Eu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Eu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Eu.prototype.setPrecisionModel=function(t){this._precisionModel=t},Eu.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},Eu.prototype.getIntersection=function(t){return this._intPt[t]},Eu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Eu.prototype.hasIntersection=function(){return this._result!==Eu.NO_INTERSECTION},Eu.prototype.getEdgeDistance=function(t,e){return Eu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Eu.prototype.isCollinear=function(){return this._result===Eu.COLLINEAR_INTERSECTION},Eu.prototype.toString=function(){return vu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+vu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Eu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Eu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Eu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},Eu.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i<r?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i<r?s:a)||t.equals(e)||(o=Math.max(s,a))}return xu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Eu.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return xu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},wu.DONT_INTERSECT.get=function(){return 0},wu.DO_INTERSECT.get=function(){return 1},wu.COLLINEAR.get=function(){return 2},wu.NO_INTERSECTION.get=function(){return 0},wu.POINT_INTERSECTION.get=function(){return 1},wu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Eu,wu);var Ou=function(u){function s(){u.apply(this,arguments)}return u&&(s.__proto__=u),((s.prototype=Object.create(u&&u.prototype)).constructor=s).prototype.isInSegmentEnvelopes=function(t){var e=new pu(this._inputLines[0][0],this._inputLines[0][1]),n=new pu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},s.prototype.computeIntersection=function(){if(3!==arguments.length)return u.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,pu.intersects(e,n,t)&&0===Iu.orientationIndex(e,n,t)&&0===Iu.orientationIndex(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=u.POINT_INTERSECTION,null;this._result=u.NO_INTERSECTION},s.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},s.prototype.safeHCoordinateIntersection=function(e,n,r,i){var o=null;try{o=hu.intersection(e,n,r,i)}catch(t){if(!(t instanceof lu))throw t;o=s.nearestEndpoint(e,n,r,i)}return o},s.prototype.intersection=function(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new Xa(s.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},s.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},s.prototype.checkDD=function(t,e,n,r,i){var o=iu.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);cu.out.println("DD in env = "+s+"  --------------------- "+o),1e-4<i.distance(o)&&cu.out.println("Distance = "+i.distance(o))},s.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new Xa(t),o=new Xa(e),s=new Xa(n),a=new Xa(r),u=new Xa;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},s.prototype.computeCollinearIntersection=function(t,e,n,r){var i=pu.intersects(t,e,n),o=pu.intersects(t,e,r),s=pu.intersects(n,r,t),a=pu.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,u.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,u.COLLINEAR_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):u.NO_INTERSECTION},s.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((l<o?o:l)+(a<h?a:h))/2,d=((c<s?s:c)+(u<p?u:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},s.prototype.computeIntersect=function(t,e,n,r){if(this._isProper=!1,!pu.intersects(t,e,n,r))return u.NO_INTERSECTION;var i=Iu.orientationIndex(t,e,n),o=Iu.orientationIndex(t,e,r);if(0<i&&0<o||i<0&&o<0)return u.NO_INTERSECTION;var s=Iu.orientationIndex(n,r,t),a=Iu.orientationIndex(n,r,e);return 0<s&&0<a||s<0&&a<0?u.NO_INTERSECTION:0===i&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new Xa(n):0===o?this._intPt[0]=new Xa(r):0===s?this._intPt[0]=new Xa(t):0===a&&(this._intPt[0]=new Xa(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),u.POINT_INTERSECTION)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.nearestEndpoint=function(t,e,n,r){var i=t,o=Iu.distancePointLine(t,n,r),s=Iu.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=Iu.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=Iu.distancePointLine(r,t,e))<o&&(o=s,i=r),i},s}(Eu),Cu=function(){};Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu},Cu.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Cu.signOfDet2x2(r,i,o,s)},Cu.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:0<e?0<n?-i:i:0<n?i:-i;if(0===e||0===n)return 0<r?0<t?i:-i:0<t?-i:i;if(0<e?0<r?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):r=e<=-r?(i=-i,n=-n,-r):(o=t,t=-n,n=o,o=e,e=-r,o):0<r?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):r=r<=e?(t=-t,e=-e,n=-n,-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,o),0<t){if(!(0<n))return i;if(!(t<=n))return i}else{if(0<n)return-i;if(!(n<=t))return-i;i=-i,t=-t,n=-n}for(;;){if(s=Math.floor(n/t),n-=s*t,(r-=s*e)<0)return-i;if(e<r)return i;if(n+n<t){if(e<r+r)return i}else{if(r+r<e)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(t/n),t-=s*n,(e-=s*r)<0)return i;if(r<e)return-i;if(t+t<n){if(r<e+e)return-i}else{if(e+e<r)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Su=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Su.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Cu.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),0<u&&this._crossingCount++}},Su.prototype.isPointInPolygon=function(){return this.getLocation()!==Ka.EXTERIOR},Su.prototype.getLocation=function(){return this._isPointOnSegment?Ka.BOUNDARY:this._crossingCount%2==1?Ka.INTERIOR:Ka.EXTERIOR},Su.prototype.isOnSegment=function(){return this._isPointOnSegment},Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.locatePointInRing=function(){if(arguments[0]instanceof Xa&&Za(arguments[1],su)){for(var t=arguments[0],e=arguments[1],n=new Su(t),r=new Xa,i=new Xa,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Xa&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Su(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Iu=function(){},Tu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.orientationIndex=function(t,e,n){return iu.orientationIndex(t,e,n)},Iu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Za(arguments[0],su)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new Xa,l=new Xa,c=new Xa;s.getCoordinate(0,l),s.getCoordinate(1,c);var h=l.x;c.x-=h;for(var p=0,f=1;f<a-1;f++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(f+1,c),c.x-=h,p+=l.x*(u.y-c.y);return p/2}},Iu.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Iu.distancePointLine(t,n,r);if(n.equals(r))return Iu.distancePointLine(r,t,e);var i=!1;if(pu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0==o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||1<u||a<0||1<a)&&(i=!0)}}else i=!0;return i?Ja.min(Iu.distancePointLine(t,n,r),Iu.distancePointLine(e,n,r),Iu.distancePointLine(n,t,e),Iu.distancePointLine(r,t,e)):0},Iu.isPointInRing=function(t,e){return Iu.locatePointInRing(t,e)!==Ka.EXTERIOR},Iu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Xa;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n},Iu.isCCW=function(t){var e=t.length-1;if(e<3)throw new ka("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var s=r;(s-=1)<0&&(s=e),t[s].equals2D(n)&&s!==r;);for(var a=r;t[a=(a+1)%e].equals2D(n)&&a!==r;);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=Iu.computeOrientation(u,n,l);return 0===c?u.x>l.x:0<c},Iu.locatePointInRing=function(t,e){return Su.locatePointInRing(t,e)},Iu.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Iu.computeOrientation=function(t,e,n){return Iu.orientationIndex(t,e,n)},Iu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new ka("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Iu.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(1<=l)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},Iu.isOnLine=function(t,e){for(var n=new Ou,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Tu.CLOCKWISE.get=function(){return-1},Tu.RIGHT.get=function(){return Iu.CLOCKWISE},Tu.COUNTERCLOCKWISE.get=function(){return 1},Tu.LEFT.get=function(){return Iu.COUNTERCLOCKWISE},Tu.COLLINEAR.get=function(){return 0},Tu.STRAIGHT.get=function(){return Iu.COLLINEAR},Object.defineProperties(Iu,Tu);var Ru=function(){};Ru.prototype.filter=function(t){},Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru};var Lu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Nu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Lu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Lu.SORTINDEX_GEOMETRYCOLLECTION},Lu.prototype.getFactory=function(){return this._factory},Lu.prototype.getGeometryN=function(t){return this},Lu.prototype.getArea=function(){return 0},Lu.prototype.isRectangle=function(){return!1},Lu.prototype.equals=function(){if(arguments[0]instanceof Lu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Lu))return!1;var n=e;return this.equalsExact(n)}},Lu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Lu.prototype.geometryChanged=function(){this.apply(Lu.geometryChangedFilter)},Lu.prototype.geometryChangedAction=function(){this._envelope=null},Lu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Lu.prototype.getLength=function(){return 0},Lu.prototype.getNumGeometries=function(){return 1},Lu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Lu.prototype.getUserData=function(){return this._userData},Lu.prototype.getSRID=function(){return this._SRID},Lu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Lu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Lu.SORTINDEX_GEOMETRYCOLLECTION)throw new ka("This method does not support GeometryCollection arguments")},Lu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Lu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Lu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Lu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new pu(this._envelope)},Lu.prototype.setSRID=function(t){this._SRID=t},Lu.prototype.setUserData=function(t){this._userData=t},Lu.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Lu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Lu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Lu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Lu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Lu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Lu.SORTINDEX_MULTIPOLYGON},Lu.prototype.interfaces_=function(){return[Ba,Ua,pi]},Lu.prototype.getClass=function(){return Lu},Lu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Lu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Nu.serialVersionUID.get=function(){return 0x799ea46522854c00},Nu.SORTINDEX_POINT.get=function(){return 0},Nu.SORTINDEX_MULTIPOINT.get=function(){return 1},Nu.SORTINDEX_LINESTRING.get=function(){return 2},Nu.SORTINDEX_LINEARRING.get=function(){return 3},Nu.SORTINDEX_MULTILINESTRING.get=function(){return 4},Nu.SORTINDEX_POLYGON.get=function(){return 5},Nu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Nu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Nu.geometryChangedFilter.get=function(){return Pu},Object.defineProperties(Lu,Nu);var Pu=function(){};Pu.interfaces_=function(){return[Ru]},Pu.filter=function(t){t.geometryChangedAction()};var Mu=function(){};Mu.prototype.filter=function(t){},Mu.prototype.interfaces_=function(){return[]},Mu.prototype.getClass=function(){return Mu};var ju=function(){},Au={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ju.prototype.isInBoundary=function(t){},ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju},Au.Mod2BoundaryNodeRule.get=function(){return Fu},Au.EndPointBoundaryNodeRule.get=function(){return Du},Au.MultiValentEndPointBoundaryNodeRule.get=function(){return ku},Au.MonoValentEndPointBoundaryNodeRule.get=function(){return Gu},Au.MOD2_BOUNDARY_RULE.get=function(){return new Fu},Au.ENDPOINT_BOUNDARY_RULE.get=function(){return new Du},Au.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ku},Au.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Gu},Au.OGC_SFS_BOUNDARY_RULE.get=function(){return ju.MOD2_BOUNDARY_RULE},Object.defineProperties(ju,Au);var Fu=function(){};Fu.prototype.isInBoundary=function(t){return t%2==1},Fu.prototype.interfaces_=function(){return[ju]},Fu.prototype.getClass=function(){return Fu};var Du=function(){};Du.prototype.isInBoundary=function(t){return 0<t},Du.prototype.interfaces_=function(){return[ju]},Du.prototype.getClass=function(){return Du};var ku=function(){};ku.prototype.isInBoundary=function(t){return 1<t},ku.prototype.interfaces_=function(){return[ju]},ku.prototype.getClass=function(){return ku};var Gu=function(){};Gu.prototype.isInBoundary=function(t){return 1===t},Gu.prototype.interfaces_=function(){return[ju]},Gu.prototype.getClass=function(){return Gu};var zu=function(){};zu.prototype.add=function(){},zu.prototype.addAll=function(){},zu.prototype.isEmpty=function(){},zu.prototype.iterator=function(){},zu.prototype.size=function(){},zu.prototype.toArray=function(){},zu.prototype.remove=function(){};var Uu=function(e){function t(t){e.call(this),this.message=t||""}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(t,n),t}(Error),Bu=function(){};Bu.prototype.hasNext=function(){},Bu.prototype.next=function(){},Bu.prototype.remove=function(){};var Yu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(zu);(fi.prototype=new Error).name="NoSuchElementException";var Xu=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof zu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,zu]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new qu(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Uu;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Yu),qu=function(e){function t(t){e.call(this),this.arrayList_=t,this.position_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new fi;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(Bu),Vu=function(m){function t(){if(m.call(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}m&&(t.__proto__=m),(t.prototype=Object.create(m&&m.prototype)).constructor=t;var e={coordArrayType:{configurable:!0}};return e.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(t){return this.get(t)},t.prototype.addAll=function(){if(2!==arguments.length)return m.prototype.addAll.apply(this,arguments);for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n},t.prototype.clone=function(){for(var t=m.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){if(1===arguments.length){var t=arguments[0];m.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof Xa&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(r))return null;m.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],a);else for(var l=s.length-1;0<=l;l--)this.add(s[l],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Xa){var c=arguments[0],h=arguments[1];if(!arguments[2]){var p=this.size();if(0<p){if(0<c&&this.get(c-1).equals2D(h))return null;if(c<p&&this.get(c).equals2D(h))return null}}m.prototype.add.call(this,c,h)}}else if(4===arguments.length){var f=arguments[0],d=arguments[1],g=arguments[2],y=arguments[3],_=1;y<g&&(_=-1);for(var v=g;v!==y;v+=_)this.add(f[v],d);return!0}},t.prototype.closeRing=function(){0<this.size()&&this.add(new Xa(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,e),t}(Xu),Wu=function(){},Ku={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ku.ForwardComparator.get=function(){return Hu},Ku.BidirectionalComparator.get=function(){return Zu},Ku.coordArrayType.get=function(){return new Array(0).fill(null)},Wu.prototype.interfaces_=function(){return[]},Wu.prototype.getClass=function(){return Wu},Wu.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Wu.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Wu.indexOf(r,e)<0)return r}return null},Wu.scroll=function(t,e){var n=Wu.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);cu.arraycopy(t,n,r,0,t.length-n),cu.arraycopy(t,0,r,t.length-n,n),cu.arraycopy(r,0,t,0,t.length)},Wu.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Wu.intersection=function(t,e){for(var n=new Vu,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Wu.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Wu.removeRepeatedPoints=function(t){return Wu.hasRepeatedPoints(t)?new Vu(t,!1).toCoordinateArray():t},Wu.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Wu.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Wu.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Xa(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new Xa(r[i+u])},Wu.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Wu.envelope=function(t){for(var e=new pu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Wu.toCoordinateArray=function(t){return t.toArray(Wu.coordArrayType)},Wu.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Wu.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Wu.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Wu.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Wu.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},Wu.extract=function(t,e,n){e=Ja.clamp(e,0,t.length);var r=(n=Ja.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Wu,Ku);var Hu=function(){};Hu.prototype.compare=function(t,e){return Wu.compare(t,e)},Hu.prototype.interfaces_=function(){return[Ya]},Hu.prototype.getClass=function(){return Hu};var Zu=function(){};Zu.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Wu.compare(n,r);return Wu.isEqualReversed(n,r)?0:i},Zu.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Wu.increasingDirection(n),o=Wu.increasingDirection(r),s=0<i?0:n.length-1,a=0<o?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0},Zu.prototype.interfaces_=function(){return[Ya]},Zu.prototype.getClass=function(){return Zu};var Ju=function(){};Ju.prototype.get=function(){},Ju.prototype.put=function(){},Ju.prototype.size=function(){},Ju.prototype.values=function(){},Ju.prototype.entrySet=function(){};var Qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Ju);(di.prototype=new Error).name="OperationNotSupported",(gi.prototype=new zu).contains=function(){};var $u=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof zu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new tl(this)},e}(gi),tl=function(e){function t(t){e.call(this),this.hashSet_=t,this.position_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new fi;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new di},t}(Bu),el=0;(xi.prototype=new Qu).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},xi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:el,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:el,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},xi.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(_i(t)===mi(_i(_i(t)))){var e=bi(_i(_i(t)));1===yi(e)?(vi(_i(t),el),vi(e,el),vi(_i(_i(t)),1),t=_i(_i(t))):(t===bi(_i(t))&&(t=_i(t),this.rotateLeft(t)),vi(_i(t),el),vi(_i(_i(t)),1),this.rotateRight(_i(_i(t))))}else{var n=mi(_i(_i(t)));1===yi(n)?(vi(_i(t),el),vi(n,el),vi(_i(_i(t)),1),t=_i(_i(t))):(t===mi(_i(t))&&(t=_i(t),this.rotateRight(t)),vi(_i(t),el),vi(_i(_i(t)),1),this.rotateLeft(_i(_i(t))))}this.root_.color=el},xi.prototype.values=function(){var t=new Xu,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=xi.successor(e));)t.add(e.value);return t},xi.prototype.entrySet=function(){var t=new $u,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=xi.successor(e));)t.add(e);return t},xi.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e}},xi.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e}},xi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},xi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)n=(r=n).parent;return n},xi.prototype.size=function(){return this.size_};var nl=function(){};nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl},Ei.prototype=new gi,(wi.prototype=new Ei).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},wi.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},wi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},wi.prototype.remove=function(t){throw new di},wi.prototype.size=function(){return this.array_.length},wi.prototype.isEmpty=function(){return 0===this.array_.length},wi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},wi.prototype.iterator=function(){return new rl(this)};var rl=function(t){this.treeSet_=t,this.position_=0};rl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new fi;return this.treeSet_.array_[this.position_++]},rl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},rl.prototype.remove=function(){throw new di};var il=function(){};il.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},il.asList=function(t){for(var e=new Xu,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var ol=function(){},sl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};sl.P.get=function(){return 0},sl.L.get=function(){return 1},sl.A.get=function(){return 2},sl.FALSE.get=function(){return-1},sl.TRUE.get=function(){return-2},sl.DONTCARE.get=function(){return-3},sl.SYM_FALSE.get=function(){return"F"},sl.SYM_TRUE.get=function(){return"T"},sl.SYM_DONTCARE.get=function(){return"*"},sl.SYM_P.get=function(){return"0"},sl.SYM_L.get=function(){return"1"},sl.SYM_A.get=function(){return"2"},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.toDimensionSymbol=function(t){switch(t){case ol.FALSE:return ol.SYM_FALSE;case ol.TRUE:return ol.SYM_TRUE;case ol.DONTCARE:return ol.SYM_DONTCARE;case ol.P:return ol.SYM_P;case ol.L:return ol.SYM_L;case ol.A:return ol.SYM_A}throw new ka("Unknown dimension value: "+t)},ol.toDimensionValue=function(t){switch(eu.toUpperCase(t)){case ol.SYM_FALSE:return ol.FALSE;case ol.SYM_TRUE:return ol.TRUE;case ol.SYM_DONTCARE:return ol.DONTCARE;case ol.SYM_P:return ol.P;case ol.SYM_L:return ol.L;case ol.SYM_A:return ol.A}throw new ka("Unknown dimension symbol: "+t)},Object.defineProperties(ol,sl);var al=function(){};al.prototype.filter=function(t){},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al};var ul=function(){};ul.prototype.filter=function(t,e){},ul.prototype.isDone=function(){},ul.prototype.isGeometryChanged=function(){},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul};var ll=function(i){function n(t,e){if(i.call(this,e),this._geometries=t||[],i.hasNullElements(this._geometries))throw new ka("geometries must not contain null elements")}i&&(n.__proto__=i),(n.prototype=Object.create(i&&i.prototype)).constructor=n;var t={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){for(var t=new pu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},n.prototype.getGeometryN=function(t){return this._geometries[t]},n.prototype.getSortIndex=function(){return i.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},n.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},n.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0},n.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();il.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var t=ol.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},n.prototype.getDimension=function(){for(var t=ol.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},n.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},n.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new wi(il.asList(this._geometries)),n=new wi(il.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,i);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},n.prototype.apply=function(){if(Za(arguments[0],Mu))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Za(arguments[0],ul)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Za(arguments[0],al)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Za(arguments[0],Ru)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),xu.shouldNeverReachHere(),null},n.prototype.clone=function(){var t=i.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var e=0;e<this._geometries.length;e++)t._geometries[e]=this._geometries[e].clone();return t},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,t),n}(Lu),cl=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var t={serialVersionUID:{configurable:!0}};return r.prototype.getSortIndex=function(){return Lu.SORTINDEX_MULTILINESTRING},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getBoundaryDimension=function(){return this.isClosed()?ol.FALSE:0},r.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},r.prototype.getDimension=function(){return 1},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},r.prototype.getBoundary=function(){return new hl(this).getBoundary()},r.prototype.getGeometryType=function(){return"MultiLineString"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[nl]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(r,t),r}(ll),hl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=ju.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};hl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},hl.prototype.getBoundary=function(){return this._geom instanceof yl?this.boundaryLineString(this._geom):this._geom instanceof cl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},hl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},hl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},hl.prototype.computeBoundaryCoordinates=function(t){var e=new Xu;this._endpointMap=new xi;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Wu.toCoordinateArray(e)},hl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new pl,this._endpointMap.put(t,e)),e.count++},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new hl(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new hl(e,n).getBoundary()}};var pl=function(){this.count=null};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl};var fl=function(){},dl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},fl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(fl.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+fl.NEWLINE}catch(t){if(!(t instanceof Oi))throw t;xu.shouldNeverReachHere()}return o}},fl.split=function(t,e){for(var n=e.length,r=new Xu,i=""+t,o=i.indexOf(e);0<=o;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},fl.toString=function(){if(1===arguments.length){var t=arguments[0];return fl.SIMPLE_ORDINATE_FORMAT.format(t)}},fl.spaces=function(t){return fl.chars(" ",t)},dl.NEWLINE.get=function(){return cu.getProperty("line.separator")},dl.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(fl,dl);var gl=function(){};gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},gl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,su.X)===t.getOrdinate(e-1,su.X)&&t.getOrdinate(0,su.Y)===t.getOrdinate(e-1,su.Y)},gl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||Ga.isNaN(s)&&Ga.isNaN(a)))return!1}return!0},gl.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(gl.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)gl.copy(e,i-1,r,o,1);return r},gl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)gl.swap(t,r,e-r)},gl.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},gl.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)gl.copyCoord(t,e+o,n,r+o)},gl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new $a;r.append("(");for(var i=0;i<e;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(fl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},gl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?gl.createClosedRing(t,e,4):e.getOrdinate(0,su.X)===e.getOrdinate(n-1,su.X)&&e.getOrdinate(0,su.Y)===e.getOrdinate(n-1,su.Y)?e:gl.createClosedRing(t,e,n+1)},gl.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();gl.copy(e,0,r,0,i);for(var o=i;o<n;o++)gl.copy(e,0,r,o,1);return r};var yl=function(i){function e(t,e){i.call(this,e),this._points=null,this.init(t)}i&&(e.__proto__=i),(e.prototype=Object.create(i&&i.prototype)).constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new pu:this._points.expandEnvelope(new pu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return i.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return 0<this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))&&gl.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ol.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Iu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return gl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Za(arguments[0],Mu))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Za(arguments[0],ul)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else Za(arguments[0],al)?arguments[0].filter(this):Za(arguments[0],Ru)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new hl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var t=i.prototype.clone.call(this);return t._points=this._points.clone(),t},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new ka("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[nl]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(Lu),_l=function(){};_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var vl=function(n){function t(t,e){n.call(this,e),this._coordinates=t||null,this.init(this._coordinates)}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new pu;var t=new pu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},t.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return ol.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},t.prototype.apply=function(){if(Za(arguments[0],Mu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Za(arguments[0],ul)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Za(arguments[0],al)?arguments[0].filter(this):Za(arguments[0],Ru)&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),xu.isTrue(t.size()<=1),this._coordinates=t},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[_l]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,e),t}(Lu),ml=function(){};ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml};var bl=function(s){function r(t,e,n){if(s.call(this,n),this._shell=null,(this._holes=null)===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),s.hasNullElements(e))throw new ka("holes must not contain null elements");if(t.isEmpty()&&s.hasNonEmptyElements(e))throw new ka("shell is empty but holes are not");this._shell=t,this._holes=e}s&&(r.__proto__=s),(r.prototype=Object.create(s&&s.prototype)).constructor=r;var t={serialVersionUID:{configurable:!0}};return r.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return s.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},r.prototype.getArea=function(){var t=0;t+=Math.abs(Iu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Iu.signedArea(this._holes[e].getCoordinateSequence()));return t},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return s.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,i=n._shell;if(!r.equalsExact(i,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],e))return!1;return!0},r.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);il.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);cu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Wu.minCoordinate(e.getCoordinates());Wu.scroll(r,i),cu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],Iu.isCCW(e.getCoordinates())===n&&Wu.reverse(e.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},r.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},r.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var p=this.getInteriorRingN(h),f=o.getInteriorRingN(h),d=p.compareToSameClass(f,i);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},r.prototype.apply=function(t){if(Za(t,Mu)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Za(t,ul)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Za(t,al))t.filter(this);else if(Za(t,Ru)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},r.prototype.clone=function(){var t=s.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].clone();return t},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<e.length;n++)e[n]=this._holes[n].copy();return new r(t,e,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(t){return this._holes[t]},r.prototype.interfaces_=function(){return[ml]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,t),r}(Lu),xl=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var t={serialVersionUID:{configurable:!0}};return r.prototype.getSortIndex=function(){return Lu.SORTINDEX_MULTIPOINT},r.prototype.isValid=function(){return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getCoordinate=function(){if(1!==arguments.length)return n.prototype.getCoordinate.apply(this,arguments);var t=arguments[0];return this._geometries[t].getCoordinate()},r.prototype.getBoundaryDimension=function(){return ol.FALSE},r.prototype.getDimension=function(){return 0},r.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},r.prototype.getGeometryType=function(){return"MultiPoint"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[_l]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(r,t),r}(ll),El=function(n){function t(t,e){t instanceof Xa&&e instanceof kl&&(t=e.getCoordinateSequenceFactory().create(t)),n.call(this,t,e),this.validateConstruction()}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Lu.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return ol.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var t=this._points.copy();return gl.reverse(t),this.getFactory().createLinearRing(t)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new ka("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new ka("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},e.MINIMUM_VALID_SIZE.get=function(){return 4},e.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,e),t}(yl),wl=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var t={serialVersionUID:{configurable:!0}};return r.prototype.getSortIndex=function(){return Lu.SORTINDEX_MULTIPOLYGON},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Xu,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},r.prototype.getGeometryType=function(){return"MultiPolygon"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[ml]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(r,t),r}(ll),Ol=function(t){this._factory=t||null,this._isUserDataCopied=!1},Cl={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ol.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Ol.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Ol.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ll?this.editGeometryCollection(t,e):t instanceof bl?this.editPolygon(t,e):t instanceof vl?e.edit(t,this._factory):t instanceof yl?e.edit(t,this._factory):(xu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Ol.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Xu,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===xl?this._factory.createMultiPoint(r.toArray([])):n.getClass()===cl?this._factory.createMultiLineString(r.toArray([])):n.getClass()===wl?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},Ol.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Xu,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Ol.GeometryEditorOperation=function(){},Cl.NoOpGeometryOperation.get=function(){return Sl},Cl.CoordinateOperation.get=function(){return Il},Cl.CoordinateSequenceOperation.get=function(){return Tl},Object.defineProperties(Ol,Cl);var Sl=function(){};Sl.prototype.edit=function(t,e){return t},Sl.prototype.interfaces_=function(){return[Ol.GeometryEditorOperation]},Sl.prototype.getClass=function(){return Sl};var Il=function(){};Il.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof El?e.createLinearRing(n):t instanceof yl?e.createLineString(n):t instanceof vl?0<n.length?e.createPoint(n[0]):e.createPoint():t},Il.prototype.interfaces_=function(){return[Ol.GeometryEditorOperation]},Il.prototype.getClass=function(){return Il};var Tl=function(){};Tl.prototype.edit=function(t,e){return t instanceof El?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof yl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof vl?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Tl.prototype.interfaces_=function(){return[Ol.GeometryEditorOperation]},Tl.prototype.getClass=function(){return Tl};var Rl=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Xa}else if(Za(arguments[0],su)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new Xa}},Ll={serialVersionUID:{configurable:!0}};Rl.prototype.setOrdinate=function(t,e,n){switch(e){case su.X:this._coordinates[t].x=n;break;case su.Y:this._coordinates[t].y=n;break;case su.Z:this._coordinates[t].z=n;break;default:throw new ka("invalid ordinateIndex")}},Rl.prototype.size=function(){return this._coordinates.length},Rl.prototype.getOrdinate=function(t,e){switch(e){case su.X:return this._coordinates[t].x;case su.Y:return this._coordinates[t].y;case su.Z:return this._coordinates[t].z}return Ga.NaN},Rl.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Rl.prototype.getCoordinateCopy=function(t){return new Xa(this._coordinates[t])},Rl.prototype.getDimension=function(){return this._dimension},Rl.prototype.getX=function(t){return this._coordinates[t].x},Rl.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Rl(t,this._dimension)},Rl.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Rl.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Rl(t,this._dimension)},Rl.prototype.toString=function(){if(0<this._coordinates.length){var t=new $a(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Rl.prototype.getY=function(t){return this._coordinates[t].y},Rl.prototype.toCoordinateArray=function(){return this._coordinates},Rl.prototype.interfaces_=function(){return[su,pi]},Rl.prototype.getClass=function(){return Rl},Ll.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Rl,Ll);var Nl=function(){},Pl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Nl.prototype.readResolve=function(){return Nl.instance()},Nl.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Rl(t)}if(Za(arguments[0],su)){var e=arguments[0];return new Rl(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return 3<r&&(r=3),r<2?new Rl(n):new Rl(n,r)}},Nl.prototype.interfaces_=function(){return[Wa,pi]},Nl.prototype.getClass=function(){return Nl},Nl.instance=function(){return Nl.instanceObject},Pl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Pl.instanceObject.get=function(){return new Nl},Object.defineProperties(Nl,Pl);var Ml=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Xu,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var e=new $u;return this.map_.entries().forEach(function(t){return e.add(t)}),e},e.prototype.size=function(){return this.map_.size()},e}(Ju),jl=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Fl){var e=arguments[0];(this._modelType=e)===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Al={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};jl.prototype.equals=function(t){if(!(t instanceof jl))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},jl.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new tu(n).compareTo(new tu(r))},jl.prototype.getScale=function(){return this._scale},jl.prototype.isFloating=function(){return this._modelType===jl.FLOATING||this._modelType===jl.FLOATING_SINGLE},jl.prototype.getType=function(){return this._modelType},jl.prototype.toString=function(){var t="UNKNOWN";return this._modelType===jl.FLOATING?t="Floating":this._modelType===jl.FLOATING_SINGLE?t="Floating-Single":this._modelType===jl.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},jl.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Ga.isNaN(t)?t:this._modelType===jl.FLOATING_SINGLE?t:this._modelType===jl.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Xa){var e=arguments[0];if(this._modelType===jl.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},jl.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===jl.FLOATING?t=16:this._modelType===jl.FLOATING_SINGLE?t=6:this._modelType===jl.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},jl.prototype.setScale=function(t){this._scale=Math.abs(t)},jl.prototype.interfaces_=function(){return[pi,Ua]},jl.prototype.getClass=function(){return jl},jl.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},Al.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Al.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(jl,Al);var Fl=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Dl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Fl.prototype.readResolve=function(){return Fl.nameToTypeMap.get(this._name)},Fl.prototype.toString=function(){return this._name},Fl.prototype.interfaces_=function(){return[pi]},Fl.prototype.getClass=function(){return Fl},Dl.serialVersionUID.get=function(){return-552860263173159e4},Dl.nameToTypeMap.get=function(){return new Ml},Object.defineProperties(Fl,Dl),jl.Type=Fl,jl.FIXED=new Fl("FIXED"),jl.FLOATING=new Fl("FLOATING"),jl.FLOATING_SINGLE=new Fl("FLOATING SINGLE");var kl=function t(){this._precisionModel=new jl,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Za(arguments[0],Wa)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof jl&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Gl={serialVersionUID:{configurable:!0}};kl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Xa(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Xa(t.getMinX(),t.getMinY()),new Xa(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Xa(t.getMinX(),t.getMinY()),new Xa(t.getMinX(),t.getMaxY()),new Xa(t.getMaxX(),t.getMaxY()),new Xa(t.getMaxX(),t.getMinY()),new Xa(t.getMinX(),t.getMinY())]),null)},kl.prototype.createLineString=function(t){return t?t instanceof Array?new yl(this.getCoordinateSequenceFactory().create(t),this):Za(t,su)?new yl(t,this):void 0:new yl(this.getCoordinateSequenceFactory().create([]),this)},kl.prototype.createMultiLineString=function(){if(0===arguments.length)return new cl(null,this);if(1===arguments.length){var t=arguments[0];return new cl(t,this)}},kl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(kl.toGeometryArray(t));var a=t.iterator().next();if(1<t.size()){if(a instanceof bl)return this.createMultiPolygon(kl.toPolygonArray(t));if(a instanceof yl)return this.createMultiLineString(kl.toLineStringArray(t));if(a instanceof vl)return this.createMultiPoint(kl.toPointArray(t));xu.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},kl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},kl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Xa){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Za(arguments[0],su)){var e=arguments[0];return new vl(e,this)}}},kl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},kl.prototype.createPolygon=function(){if(0===arguments.length)return new bl(null,null,this);if(1===arguments.length){if(Za(arguments[0],su)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof El){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new bl(r,i,this)}},kl.prototype.getSRID=function(){return this._SRID},kl.prototype.createGeometryCollection=function(){if(0===arguments.length)return new ll(null,this);if(1===arguments.length){var t=arguments[0];return new ll(t,this)}},kl.prototype.createGeometry=function(t){return new Ol(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},kl.prototype.getPrecisionModel=function(){return this._precisionModel},kl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Za(arguments[0],su)){var e=arguments[0];return new El(e,this)}}},kl.prototype.createMultiPolygon=function(){if(0===arguments.length)return new wl(null,this);if(1===arguments.length){var t=arguments[0];return new wl(t,this)}},kl.prototype.createMultiPoint=function(){if(0===arguments.length)return new xl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new xl(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Za(arguments[0],su)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());gl.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},kl.prototype.interfaces_=function(){return[pi]},kl.prototype.getClass=function(){return kl},kl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.getDefaultCoordinateSequenceFactory=function(){return Nl.instance()},kl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Gl.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(kl,Gl);var zl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Ul=function(t){this.geometryFactory=t||new kl};Ul.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Bl[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==zl.indexOf(n)?Bl[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Bl[n].apply(this,[e.geometries]):Bl[n].apply(this,[e])},Ul.prototype.write=function(t){var e=t.getGeometryType();if(!Yl[e])throw new Error("Geometry is not supported");return Yl[e].apply(this,[t])};var Bl={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Bl[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Bl.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Xa(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Xa(t[0],t[1]),new Xa(t[2],t[1]),new Xa(t[2],t[3]),new Xa(t[0],t[3]),new Xa(t[0],t[1])])},Point:function(t){var e=new Xa(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Bl.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Bl.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Bl.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Bl.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Bl.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Bl.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Yl={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Yl.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Yl.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Yl.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Yl.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Yl.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Yl.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Yl.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Yl[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Xl=function(t){this.geometryFactory=t||new kl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ul(this.geometryFactory)};Xl.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===jl.FIXED&&this.reducePrecision(e),e},Xl.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var ql=function(){this.parser=new Ul(this.geometryFactory)};ql.prototype.write=function(t){return this.parser.write(t)};var Vl=function(){},Wl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.opposite=function(t){return t===Vl.LEFT?Vl.RIGHT:t===Vl.RIGHT?Vl.LEFT:t},Wl.ON.get=function(){return 0},Wl.LEFT.get=function(){return 1},Wl.RIGHT.get=function(){return 2},Object.defineProperties(Vl,Wl),(Ci.prototype=new Error).name="EmptyStackException",(Si.prototype=new Yu).add=function(t){return this.array_.push(t),!0},Si.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Si.prototype.push=function(t){return this.array_.push(t),t},Si.prototype.pop=function(t){if(0===this.array_.length)throw new Ci;return this.array_.pop()},Si.prototype.peek=function(){if(0===this.array_.length)throw new Ci;return this.array_[this.array_.length-1]},Si.prototype.empty=function(){return 0===this.array_.length},Si.prototype.isEmpty=function(){return this.empty()},Si.prototype.search=function(t){return this.array_.indexOf(t)},Si.prototype.size=function(){return this.array_.length},Si.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Kl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Kl.prototype.getCoordinate=function(){return this._minCoord},Kl.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Kl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();xu.isTrue(0<this._minIndex&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Iu.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Iu.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Iu.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Kl.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Vl.LEFT;return n[e].y<n[e+1].y&&(r=Vl.RIGHT),r},Kl.prototype.getEdge=function(){return this._orientedDe},Kl.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Kl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Kl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}xu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Vl.LEFT&&(this._orientedDe=this._minDe.getSym())},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Hl=function(n){function r(t,e){n.call(this,r.msgWithCoord(t,e)),this.pt=e?new Xa(e):null,this.name="TopologyException"}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getCoordinate=function(){return this.pt},r.prototype.interfaces_=function(){return[]},r.prototype.getClass=function(){return r},r.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},r}(mu),Zl=function(){this.array_=[]};Zl.prototype.addLast=function(t){this.array_.push(t)},Zl.prototype.removeFirst=function(){return this.array_.shift()},Zl.prototype.isEmpty=function(){return 0===this.array_.length};var Jl=function(){this._finder=null,this._dirEdgeList=new Xu,this._nodes=new Xu,this._rightMostCoord=null,this._env=null,this._finder=new Kl};Jl.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Jl.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Jl.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Hl("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Jl.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Vl.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Jl.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Jl.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(Vl.RIGHT)&&e.getDepth(Vl.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Jl.prototype.computeDepths=function(t){var e=new $u,n=new Zl,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Jl.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Jl.prototype.getEnvelope=function(){if(null===this._env){for(var t=new pu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Jl.prototype.addReachable=function(t){var e=new Si;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Jl.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Vl.LEFT,t.getDepth(Vl.RIGHT)),e.setDepth(Vl.RIGHT,t.getDepth(Vl.LEFT))},Jl.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Jl.prototype.getNodes=function(){return this._nodes},Jl.prototype.getDirectedEdges=function(){return this._dirEdgeList},Jl.prototype.interfaces_=function(){return[Ua]},Jl.prototype.getClass=function(){return Jl};var Ql=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Vl.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Vl.ON]=o,this.location[Vl.LEFT]=s,this.location[Vl.RIGHT]=a}};Ql.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ql.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Ka.NONE)return!1;return!0},Ql.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Ka.NONE&&(this.location[e]=t)},Ql.prototype.isLine=function(){return 1===this.location.length},Ql.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Vl.ON]=this.location[Vl.ON],e[Vl.LEFT]=Ka.NONE,e[Vl.RIGHT]=Ka.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Ka.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ql.prototype.getLocations=function(){return this.location},Ql.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Vl.LEFT];this.location[Vl.LEFT]=this.location[Vl.RIGHT],this.location[Vl.RIGHT]=t},Ql.prototype.toString=function(){var t=new $a;return 1<this.location.length&&t.append(Ka.toLocationSymbol(this.location[Vl.LEFT])),t.append(Ka.toLocationSymbol(this.location[Vl.ON])),1<this.location.length&&t.append(Ka.toLocationSymbol(this.location[Vl.RIGHT])),t.toString()},Ql.prototype.setLocations=function(t,e,n){this.location[Vl.ON]=t,this.location[Vl.LEFT]=e,this.location[Vl.RIGHT]=n},Ql.prototype.get=function(t){return t<this.location.length?this.location[t]:Ka.NONE},Ql.prototype.isArea=function(){return 1<this.location.length},Ql.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Ka.NONE)return!0;return!1},Ql.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Vl.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Ql.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Ka.NONE)},Ql.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ql.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var $l=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ql(e),this.elt[1]=new Ql(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ql(n.elt[0]),this.elt[1]=new Ql(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ql(Ka.NONE),this.elt[1]=new Ql(Ka.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Ql(o,s,a),this.elt[1]=new Ql(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Ql(Ka.NONE,Ka.NONE,Ka.NONE),this.elt[1]=new Ql(Ka.NONE,Ka.NONE,Ka.NONE),this.elt[u].setLocations(l,c,h)}};$l.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},$l.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},$l.prototype.isNull=function(t){return this.elt[t].isNull()},$l.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},$l.prototype.isLine=function(t){return this.elt[t].isLine()},$l.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ql(t.elt[e]):this.elt[e].merge(t.elt[e])},$l.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},$l.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Vl.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},$l.prototype.toString=function(){var t=new $a;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},$l.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},$l.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},$l.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Vl.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},$l.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},$l.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},$l.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ql(this.elt[t].location[0]))},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},$l.toLineLabel=function(t){for(var e=new $l(Ka.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var tc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Xu,this._pts=new Xu,this._label=new $l(Ka.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Xu,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};tc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Iu.isCCW(this._ring.getCoordinates())},tc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},tc.prototype.computePoints=function(t){var e=this._startDe=t,n=!0;do{if(null===e)throw new Hl("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Hl("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();xu.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},tc.prototype.getLinearRing=function(){return this._ring},tc.prototype.getCoordinate=function(t){return this._pts.get(t)},tc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},tc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;0<=a;a--)this._pts.add(r[a])}},tc.prototype.isHole=function(){return this._isHole},tc.prototype.setInResult=function(){for(var t=this._startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this._startDe;);},tc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Iu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},tc.prototype.addHole=function(t){this._holes.add(t)},tc.prototype.isShell=function(){return null===this._shell},tc.prototype.getLabel=function(){return this._label},tc.prototype.getEdges=function(){return this._edges},tc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},tc.prototype.getShell=function(){return this._shell},tc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Vl.RIGHT);if(r===Ka.NONE)return null;if(this._label.getLocation(n)===Ka.NONE)return this._label.setLocation(n,r),null}},tc.prototype.setShell=function(t){null!==(this._shell=t)&&t.addHole(this)},tc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var ec=function(n){function t(){var t=arguments[0],e=arguments[1];n.call(this,t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},t.prototype.getNext=function(t){return t.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(tc),nc=function(n){function t(){var t=arguments[0],e=arguments[1];n.call(this,t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.buildMinimalRings=function(){var t=new Xu,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ec(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},t.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var t=this._startDe;t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this._startDe;);},t.prototype.getNext=function(t){return t.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(tc),rc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};rc.prototype.setVisited=function(t){this._isVisited=t},rc.prototype.setInResult=function(t){this._isInResult=t},rc.prototype.isCovered=function(){return this._isCovered},rc.prototype.isCoveredSet=function(){return this._isCoveredSet},rc.prototype.setLabel=function(t){this._label=t},rc.prototype.getLabel=function(){return this._label},rc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},rc.prototype.updateIM=function(t){xu.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(t)},rc.prototype.isInResult=function(){return this._isInResult},rc.prototype.isVisited=function(){return this._isVisited},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc};var ic=function(n){function i(){n.call(this),this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new $l(0,Ka.NONE)}return n&&(i.__proto__=n),((i.prototype=Object.create(n&&n.prototype)).constructor=i).prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},i.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},i.prototype.getCoordinate=function(){return this._coord},i.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},i.prototype.computeIM=function(t){},i.prototype.computeMergedLocation=function(t,e){var n=Ka.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Ka.BOUNDARY&&(n=r)}return n},i.prototype.setLabel=function(){if(2!==arguments.length)return n.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new $l(t,e):this._label.setLocation(t,e)},i.prototype.getEdges=function(){return this._edges},i.prototype.mergeLabel=function(){if(arguments[0]instanceof i){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof $l)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===Ka.NONE&&this._label.setLocation(n,r)}},i.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},i.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Ka.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Ka.BOUNDARY:n=Ka.INTERIOR;break;case Ka.INTERIOR:default:n=Ka.BOUNDARY}this._label.setLocation(t,n)},i.prototype.interfaces_=function(){return[]},i.prototype.getClass=function(){return i},i}(rc),oc=function(){this.nodeMap=new xi,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};oc.prototype.find=function(t){return this.nodeMap.get(t)},oc.prototype.addNode=function(){if(arguments[0]instanceof Xa){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ic){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},oc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},oc.prototype.iterator=function(){return this.nodeMap.values().iterator()},oc.prototype.values=function(){return this.nodeMap.values()},oc.prototype.getBoundaryNodes=function(t){for(var e=new Xu,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Ka.BOUNDARY&&e.add(r)}return e},oc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc};var sc=function(){},ac={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.isNorthern=function(t){return t===sc.NE||t===sc.NW},sc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},sc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},sc.isInHalfPlane=function(t,e){return e===sc.SE?t===sc.SE||t===sc.SW:t===e||t===e+1},sc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ka("Cannot compute the quadrant for point ( "+t+", "+e+" )");return 0<=t?0<=e?sc.NE:sc.SE:0<=e?sc.NW:sc.SW}if(arguments[0]instanceof Xa&&arguments[1]instanceof Xa){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new ka("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?sc.NE:sc.SE:r.y>=n.y?sc.NW:sc.SW}},ac.NE.get=function(){return 0},ac.NW.get=function(){return 1},ac.SW.get=function(){return 2},ac.SE.get=function(){return 3},Object.defineProperties(sc,ac);var uc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};uc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Iu.computeOrientation(t._p0,t._p1,this._p1)},uc.prototype.getDy=function(){return this._dy},uc.prototype.getCoordinate=function(){return this._p0},uc.prototype.setNode=function(t){this._node=t},uc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},uc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},uc.prototype.getDirectedCoordinate=function(){return this._p1},uc.prototype.getDx=function(){return this._dx},uc.prototype.getLabel=function(){return this._label},uc.prototype.getEdge=function(){return this._edge},uc.prototype.getQuadrant=function(){return this._quadrant},uc.prototype.getNode=function(){return this._node},uc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},uc.prototype.computeLabel=function(t){},uc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=sc.quadrant(this._dx,this._dy),xu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},uc.prototype.interfaces_=function(){return[Ua]},uc.prototype.getClass=function(){return uc};var lc=function(r){function t(){var t=arguments[0],e=arguments[1];if(r.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(t){return this._depth[t]},t.prototype.setVisited=function(t){this._isVisited=t},t.prototype.computeDirectedLabel=function(){this._label=new $l(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Hl("assigned depths do not match",this.getCoordinate());this._depth[t]=e},t.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Vl.LEFT)===Ka.INTERIOR&&this._label.getLocation(e,Vl.RIGHT)===Ka.INTERIOR||(t=!1);return t},t.prototype.setNextMin=function(t){this._nextMin=t},t.prototype.print=function(t){r.prototype.print.call(this,t),t.print(" "+this._depth[Vl.LEFT]+"/"+this._depth[Vl.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},t.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ka.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ka.EXTERIOR);return t&&e&&n},t.prototype.setEdgeRing=function(t){this._edgeRing=t},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},t.prototype.setInResult=function(t){this._isInResult=t},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},t.prototype.setSym=function(t){this._sym=t},t.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},t.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Vl.LEFT&&(r=-1);var i=Vl.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(t){this._next=t},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(t,e){return t===Ka.EXTERIOR&&e===Ka.INTERIOR?1:t===Ka.INTERIOR&&e===Ka.EXTERIOR?-1:0},t}(uc),cc=function(){};cc.prototype.createNode=function(t){return new ic(t,null)},cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc};var hc=function(){if(this._edges=new Xu,this._nodes=null,this._edgeEndList=new Xu,0===arguments.length)this._nodes=new oc(new cc);else if(1===arguments.length){var t=arguments[0];this._nodes=new oc(t)}};hc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},hc.prototype.find=function(t){return this._nodes.find(t)},hc.prototype.addNode=function(){if(arguments[0]instanceof ic){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Xa){var e=arguments[0];return this._nodes.addNode(e)}},hc.prototype.getNodeIterator=function(){return this._nodes.iterator()},hc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},hc.prototype.debugPrintln=function(t){cu.out.println(t)},hc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Ka.BOUNDARY},hc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},hc.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Iu.computeOrientation(t,e,r)===Iu.COLLINEAR&&sc.quadrant(t,e)===sc.quadrant(n,r)},hc.prototype.getEdgeEnds=function(){return this._edgeEndList},hc.prototype.debugPrint=function(t){cu.out.print(t)},hc.prototype.getEdgeIterator=function(){return this._edges.iterator()},hc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},hc.prototype.insertEdge=function(t){this._edges.add(t)},hc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},hc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new lc(n,!0),i=new lc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},hc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},hc.prototype.getNodes=function(){return this._nodes.values()},hc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var pc=function(){this._geometryFactory=null,this._shellList=new Xu;var t=arguments[0];this._geometryFactory=t};pc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},pc.prototype.computePolygons=function(t){for(var e=new Xu,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},pc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Hl("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},pc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Xu,i=t.iterator();i.hasNext();){var o=i.next();if(2<o.getMaxNodeDegree()){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},pc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},pc.prototype.buildMaximalEdgeRings=function(t){for(var e=new Xu,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new nc(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},pc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},pc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},pc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&Iu.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},pc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return xu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},pc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];hc.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Xu,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var fc=function(){};fc.prototype.getBounds=function(){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var dc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};dc.prototype.getItem=function(){return this._item},dc.prototype.getBounds=function(){return this._bounds},dc.prototype.interfaces_=function(){return[fc,pi]},dc.prototype.getClass=function(){return dc};var gc=function(){this._size=null,this._items=null,this._size=0,this._items=new Xu,this._items.add(null)};gc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},gc.prototype.size=function(){return this._size},gc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},gc.prototype.clear=function(){this._size=0,this._items.clear()},gc.prototype.isEmpty=function(){return 0===this._size},gc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var yc=function(){};yc.prototype.visitItem=function(t){},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var _c=function(){};_c.prototype.insert=function(t,e){},_c.prototype.remove=function(t,e){},_c.prototype.query=function(){},_c.prototype.interfaces_=function(){return[]},_c.prototype.getClass=function(){return _c};var vc=function(){if(this._childBoundables=new Xu,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},mc={serialVersionUID:{configurable:!0}};vc.prototype.getLevel=function(){return this._level},vc.prototype.size=function(){return this._childBoundables.size()},vc.prototype.getChildBoundables=function(){return this._childBoundables},vc.prototype.addChildBoundable=function(t){xu.isTrue(null===this._bounds),this._childBoundables.add(t)},vc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},vc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},vc.prototype.interfaces_=function(){return[fc,pi]},vc.prototype.getClass=function(){return vc},mc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(vc,mc);var bc=function(){};bc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},bc.min=function(t){return bc.sort(t),t.get(0)},bc.sort=function(t,e){var n=t.toArray();e?il.sort(n,e):il.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},bc.singletonList=function(t){var e=new Xu;return e.add(t),e};var xc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};xc.prototype.expandToQueue=function(t,e){var n=xc.isComposite(this._boundable1),r=xc.isComposite(this._boundable2);if(n&&r)return xc.area(this._boundable1)>xc.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,t,e):this.expand(this._boundable2,this._boundable1,t,e),null;if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new ka("neither boundable is composite")},xc.prototype.isLeaves=function(){return!(xc.isComposite(this._boundable1)||xc.isComposite(this._boundable2))},xc.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},xc.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new xc(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},xc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},xc.prototype.getDistance=function(){return this._distance},xc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},xc.prototype.interfaces_=function(){return[Ua]},xc.prototype.getClass=function(){return xc},xc.area=function(t){return t.getBounds().getArea()},xc.isComposite=function(t){return t instanceof vc};var Ec=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Xu,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];xu.isTrue(1<n,"Node capacity must be greater than 1"),this._nodeCapacity=n}},wc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ec.prototype.getNodeCapacity=function(){return this._nodeCapacity},Ec.prototype.lastNode=function(t){return t.get(t.size()-1)},Ec.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof vc?t+=this.size(n):n instanceof dc&&(t+=1)}return t}},Ec.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof dc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Ec.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Xu:t}if(1===arguments.length){for(var e=arguments[0],n=new Xu,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof vc){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof dc?n.add(i.getItem()):xu.shouldNeverReachHere()}return n.size()<=0?null:n}},Ec.prototype.insert=function(t,e){xu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new dc(t,e))},Ec.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Xu;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(xu.isTrue(-2<n),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof vc?this.boundablesAtLevel(n,s,i):(xu.isTrue(s instanceof dc),-1===n&&i.add(s))}return null}},Ec.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Xu;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Za(arguments[2],yc)&&arguments[0]instanceof Object&&arguments[1]instanceof vc)for(var i=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof vc?this.query(i,l,s):l instanceof dc?s.visitItem(l.getItem()):xu.shouldNeverReachHere())}else if(Za(arguments[2],Yu)&&arguments[0]instanceof Object&&arguments[1]instanceof vc)for(var c=arguments[0],h=arguments[1],p=arguments[2],f=h.getChildBoundables(),d=0;d<f.size();d++){var g=f.get(d);this.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof vc?this.query(c,g,p):g instanceof dc?p.add(g.getItem()):xu.shouldNeverReachHere())}},Ec.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Ec.prototype.getRoot=function(){return this.build(),this._root},Ec.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof vc&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},Ec.prototype.createHigherLevels=function(t,e){xu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Ec.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof vc){var r=this.depth(n);t<r&&(t=r)}}return t+1}},Ec.prototype.createParentBoundables=function(t,e){xu.isTrue(!t.isEmpty());var n=new Xu;n.add(this.createNode(e));var r=new Xu(t);bc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Ec.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Ec.prototype.interfaces_=function(){return[pi]},Ec.prototype.getClass=function(){return Ec},Ec.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},wc.IntersectsOp.get=function(){return Oc},wc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},wc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Ec,wc);var Oc=function(){},Cc=function(){};Cc.prototype.distance=function(t,e){},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var Sc=function(l){function _(t){t=t||_.DEFAULT_NODE_CAPACITY,l.call(this,t)}l&&(_.__proto__=l),(_.prototype=Object.create(l&&l.prototype)).constructor=_;var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return _.prototype.createParentBoundablesFromVerticalSlices=function(t,e){xu.isTrue(0<t.length);for(var n=new Xu,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},_.prototype.createNode=function(t){return new Ic(t)},_.prototype.size=function(){return 0===arguments.length?l.prototype.size.call(this):l.prototype.size.apply(this,arguments)},_.prototype.insert=function(){if(2!==arguments.length)return l.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;l.prototype.insert.call(this,t,e)},_.prototype.getIntersectsOp=function(){return _.intersectsOp},_.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Xu;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},_.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return l.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];l.prototype.query.call(this,e,n)}else if(3===arguments.length)if(Za(arguments[2],yc)&&arguments[0]instanceof Object&&arguments[1]instanceof vc){var r=arguments[0],i=arguments[1],o=arguments[2];l.prototype.query.call(this,r,i,o)}else if(Za(arguments[2],Yu)&&arguments[0]instanceof Object&&arguments[1]instanceof vc){var s=arguments[0],a=arguments[1],u=arguments[2];l.prototype.query.call(this,s,a,u)}},_.prototype.getComparator=function(){return _.yComparator},_.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return l.prototype.createParentBoundables.call(this,t,e)},_.prototype.remove=function(){if(2!==arguments.length)return l.prototype.remove.apply(this,arguments);var t=arguments[0],e=arguments[1];return l.prototype.remove.call(this,t,e)},_.prototype.depth=function(){return 0===arguments.length?l.prototype.depth.call(this):l.prototype.depth.apply(this,arguments)},_.prototype.createParentBoundables=function(t,e){xu.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Xu(t);bc.sort(r,_.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)},_.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Za(arguments[0],Cc)){var t=arguments[0],e=new xc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof xc){var n=arguments[0];return this.nearestNeighbour(n,Ga.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof _&&Za(arguments[1],Cc)){var r=arguments[0],i=arguments[1],o=new xc(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof xc&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=null,l=new gc;for(l.add(s);!l.isEmpty()&&0<a;){var c=l.poll(),h=c.getDistance();if(a<=h)break;c.isLeaves()?(a=h,u=c):c.expandToQueue(l,a)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],f=arguments[1],d=arguments[2],g=new dc(p,f),y=new xc(this.getRoot(),g,d);return this.nearestNeighbour(y)[0]}},_.prototype.interfaces_=function(){return[_c,pi]},_.prototype.getClass=function(){return _},_.centreX=function(t){return _.avg(t.getMinX(),t.getMaxX())},_.avg=function(t,e){return(t+e)/2},_.centreY=function(t){return _.avg(t.getMinY(),t.getMaxY())},t.STRtreeNode.get=function(){return Ic},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[Ya]},compare:function(t,e){return l.compareDoubles(_.centreX(t.getBounds()),_.centreX(e.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[Ya]},compare:function(t,e){return l.compareDoubles(_.centreY(t.getBounds()),_.centreY(e.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[l.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_,t),_}(Ec),Ic=function(e){function t(){var t=arguments[0];e.call(this,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new pu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(vc),Tc=function(){};Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.relativeSign=function(t,e){return t<e?-1:e<t?1:0},Tc.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Tc.relativeSign(e.x,n.x),i=Tc.relativeSign(e.y,n.y);switch(t){case 0:return Tc.compareValue(r,i);case 1:return Tc.compareValue(i,r);case 2:return Tc.compareValue(i,-r);case 3:return Tc.compareValue(-r,i);case 4:return Tc.compareValue(-r,-i);case 5:return Tc.compareValue(-i,-r);case 6:return Tc.compareValue(-i,r);case 7:return Tc.compareValue(r,-i)}return xu.shouldNeverReachHere("invalid octant value"),0},Tc.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0};var Rc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Xa(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Rc.prototype.getCoordinate=function(){return this.coord},Rc.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Rc.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Tc.compare(this._segmentOctant,this.coord,e.coord)},Rc.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Rc.prototype.isInterior=function(){return this._isInterior},Rc.prototype.interfaces_=function(){return[Ua]},Rc.prototype.getClass=function(){return Rc};var Lc=function(){this._nodeMap=new xi,this._edge=null;var t=arguments[0];this._edge=t};Lc.prototype.getSplitCoordinates=function(){var t=new Vu;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Lc.prototype.addCollapsedNodes=function(){var t=new Xu;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Lc.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Lc.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new tu(e+1))}},Lc.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new Xa(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Xa(e.coord))},Lc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Lc.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Lc.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Lc.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new tu(e[0])),r=i}},Lc.prototype.getEdge=function(){return this._edge},Lc.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Lc.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new Xa(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new Xa(e.coord)),new jc(o,this._edge.getData())},Lc.prototype.add=function(t,e){var n=new Rc(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(xu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Lc.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new mu("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new mu("bad split edge end point at "+i)},Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc};var Nc=function(){};Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc},Nc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ka("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return 0<=t?0<=e?r<=n?0:1:r<=n?7:6:0<=e?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof Xa&&arguments[1]instanceof Xa){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0==s&&0==a)throw new ka("Cannot compute the octant for two identical points "+i);return Nc.octant(s,a)}};var Pc=function(){};Pc.prototype.getCoordinates=function(){},Pc.prototype.size=function(){},Pc.prototype.getCoordinate=function(t){},Pc.prototype.isClosed=function(){},Pc.prototype.setData=function(t){},Pc.prototype.getData=function(){},Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc};var Mc=function(){};Mc.prototype.addIntersection=function(t,e){},Mc.prototype.interfaces_=function(){return[Pc]},Mc.prototype.getClass=function(){return Mc};var jc=function(){this._nodeList=new Lc(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};jc.prototype.getCoordinates=function(){return this._pts},jc.prototype.size=function(){return this._pts.length},jc.prototype.getCoordinate=function(t){return this._pts[t]},jc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},jc.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},jc.prototype.setData=function(t){this._data=t},jc.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Nc.octant(t,e)},jc.prototype.getData=function(){return this._data},jc.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new Xa(n.getIntersection(i));this.addIntersection(o,r)}},jc.prototype.toString=function(){return vu.toLineString(new Rl(this._pts))},jc.prototype.getNodeList=function(){return this._nodeList},jc.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},jc.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},jc.prototype.interfaces_=function(){return[Mc]},jc.prototype.getClass=function(){return jc},jc.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Xu;return jc.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var Ac=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Xa,this.p1=new Xa;else if(1===arguments.length){var t=arguments[0];this.p0=new Xa(t.p0),this.p1=new Xa(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new Xa(e,n),this.p1=new Xa(r,i)}},Fc={serialVersionUID:{configurable:!0}};Ac.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Ac.prototype.orientationIndex=function(){if(arguments[0]instanceof Ac){var t=arguments[0],e=Iu.orientationIndex(this.p0,this.p1,t.p0),n=Iu.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=n?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Xa){var r=arguments[0];return Iu.orientationIndex(this.p0,this.p1,r)}},Ac.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Ac.prototype.isVertical=function(){return this.p0.x===this.p1.x},Ac.prototype.equals=function(t){if(!(t instanceof Ac))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Ac.prototype.intersection=function(t){var e=new Ou;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Ac.prototype.project=function(){if(arguments[0]instanceof Xa){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Xa(t);var e=this.projectionFactor(t),n=new Xa;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Ac){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(1<=i&&1<=o)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),1<i&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),1<o&&(a=this.p1),new Ac(s,a)}},Ac.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Ac.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Ac.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Ac.prototype.distancePerpendicular=function(t){return Iu.distancePointLinePerpendicular(t,this.p0,this.p1)},Ac.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Ac.prototype.midPoint=function(){return Ac.midPoint(this.p0,this.p1)},Ac.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?Ga.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Ac.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=Ga.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},Ac.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Ac.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Ac.prototype.getLength=function(){return this.p0.distance(this.p1)},Ac.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Ac.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Ac.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Ac.prototype.lineIntersection=function(t){try{return hu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof lu))throw t}return null},Ac.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Ac.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new Xa(n-u,r+a)},Ac.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Ac.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||Ga.isNaN(e))&&(e=1),e},Ac.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Ac.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Ac.prototype.distance=function(){if(arguments[0]instanceof Ac){var t=arguments[0];return Iu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Xa){var e=arguments[0];return Iu.distancePointLine(e,this.p0,this.p1)}},Ac.prototype.pointAlong=function(t){var e=new Xa;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Ac.prototype.hashCode=function(){var t=Ga.doubleToLongBits(this.p0.x);t^=31*Ga.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Ga.doubleToLongBits(this.p1.x);return n^=31*Ga.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Ac.prototype.interfaces_=function(){return[Ua,pi]},Ac.prototype.getClass=function(){return Ac},Ac.midPoint=function(t,e){return new Xa((t.x+e.x)/2,(t.y+e.y)/2)},Fc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Ac,Fc);var Dc=function(){this.tempEnv1=new pu,this.tempEnv2=new pu,this._overlapSeg1=new Ac,this._overlapSeg2=new Ac};Dc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var kc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};kc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},kc.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},kc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},kc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},kc.prototype.setId=function(t){this._id=t},kc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},kc.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new pu(t,e)}return this._env},kc.prototype.getEndIndex=function(){return this._end},kc.prototype.getStartIndex=function(){return this._start},kc.prototype.getContext=function(){return this._context},kc.prototype.getId=function(){return this._id},kc.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var Gc=function(){};Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.getChainStartIndices=function(t){var e=0,n=new Xu;n.add(new tu(e));do{var r=Gc.findChainEnd(t,e);n.add(new tu(r)),e=r}while(e<t.length-1);return Gc.toIntArray(n)},Gc.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=sc.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||sc.quadrant(t[i-1],t[i])===r);)i++;return i-1},Gc.getChains=function(){if(1===arguments.length){var t=arguments[0];return Gc.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Xu,i=Gc.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new kc(e,i[o],i[o+1],n);r.add(s)}return r}},Gc.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var zc=function(){};zc.prototype.computeNodes=function(t){},zc.prototype.getNodedSubstrings=function(){},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Uc=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Uc.prototype.setSegmentIntersector=function(t){this._segInt=t},Uc.prototype.interfaces_=function(){return[zc]},Uc.prototype.getClass=function(){return Uc};var Bc=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new Xu,this._index=new Sc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return jc.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(t){for(var e=Gc.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(t){for(var e=(this._nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var t=new Yc(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return Yc},Object.defineProperties(t,n),t}(Uc),Yc=function(s){function t(){s.call(this),this._si=null;var t=arguments[0];this._si=t}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.overlap=function(){if(4!==arguments.length)return s.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],i=t.getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Dc),Xc=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},qc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Xc.prototype.getEndCapStyle=function(){return this._endCapStyle},Xc.prototype.isSingleSided=function(){return this._isSingleSided},Xc.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Xc.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Xc.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Xc.JOIN_ROUND&&(this._quadrantSegments=Xc.DEFAULT_QUADRANT_SEGMENTS)},Xc.prototype.getJoinStyle=function(){return this._joinStyle},Xc.prototype.setJoinStyle=function(t){this._joinStyle=t},Xc.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Xc.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Xc.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Xc.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Xc.prototype.getMitreLimit=function(){return this._mitreLimit},Xc.prototype.setMitreLimit=function(t){this._mitreLimit=t},Xc.prototype.setSingleSided=function(t){this._isSingleSided=t},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc},Xc.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},qc.CAP_ROUND.get=function(){return 1},qc.CAP_FLAT.get=function(){return 2},qc.CAP_SQUARE.get=function(){return 3},qc.JOIN_ROUND.get=function(){return 1},qc.JOIN_MITRE.get=function(){return 2},qc.JOIN_BEVEL.get=function(){return 3},qc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},qc.DEFAULT_MITRE_LIMIT.get=function(){return 5},qc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Xc,qc);var Vc=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Iu.COUNTERCLOCKWISE,this._inputLine=t||null},Wc={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Vc.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Vc.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Vc.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Vc.prototype.isShallowConcavity=function(t,e,n,r){return Iu.computeOrientation(t,e,n)===this._angleOrientation&&Iu.distancePointLine(e,t,n)<r},Vc.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Vc.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Vc.prototype.isConcave=function(t,e,n){var r=Iu.computeOrientation(t,e,n)===this._angleOrientation;return r},Vc.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Iu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},Vc.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Vc.DELETE;)e++;return e},Vc.prototype.isShallow=function(t,e,n,r){return Iu.distancePointLine(e,t,n)<r},Vc.prototype.collapseLine=function(){for(var t=new Vu,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Vc.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc},Vc.simplify=function(t,e){return new Vc(t).simplify(e)},Wc.INIT.get=function(){return 0},Wc.DELETE.get=function(){return 1},Wc.KEEP.get=function(){return 1},Wc.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Vc,Wc);var Kc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Xu},Hc={COORDINATE_ARRAY_TYPE:{configurable:!0}};Kc.prototype.getCoordinates=function(){return this._ptList.toArray(Kc.COORDINATE_ARRAY_TYPE)},Kc.prototype.setPrecisionModel=function(t){this._precisionModel=t},Kc.prototype.addPt=function(t){var e=new Xa(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Kc.prototype.revere=function(){},Kc.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;0<=r;r--)this.addPt(t[r])},Kc.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Kc.prototype.toString=function(){return(new kl).createLineString(this.getCoordinates()).toString()},Kc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Xa(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Kc.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},Hc.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Kc,Hc);var Zc=function(){},Jc={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.toDegrees=function(t){return 180*t/Math.PI},Zc.normalize=function(t){for(;t>Math.PI;)t-=Zc.PI_TIMES_2;for(;t<=-Math.PI;)t+=Zc.PI_TIMES_2;return t},Zc.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Zc.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return 0<r*(n.x-e.x)+i*(n.y-e.y)},Zc.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Zc.interiorAngle=function(t,e,n){var r=Zc.angle(e,t),i=Zc.angle(e,n);return Math.abs(i-r)},Zc.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Zc.PI_TIMES_2;Zc.PI_TIMES_2<=t&&(t=0)}else{for(;Zc.PI_TIMES_2<=t;)t-=Zc.PI_TIMES_2;t<0&&(t=0)}return t},Zc.angleBetween=function(t,e,n){var r=Zc.angle(e,t),i=Zc.angle(e,n);return Zc.diff(r,i)},Zc.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Zc.toRadians=function(t){return t*Math.PI/180},Zc.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?Zc.COUNTERCLOCKWISE:n<0?Zc.CLOCKWISE:Zc.NONE},Zc.angleBetweenOriented=function(t,e,n){var r=Zc.angle(e,t),i=Zc.angle(e,n)-r;return i<=-Math.PI?i+Zc.PI_TIMES_2:i>Math.PI?i-Zc.PI_TIMES_2:i},Jc.PI_TIMES_2.get=function(){return 2*Math.PI},Jc.PI_OVER_2.get=function(){return Math.PI/2},Jc.PI_OVER_4.get=function(){return Math.PI/4},Jc.COUNTERCLOCKWISE.get=function(){return Iu.COUNTERCLOCKWISE},Jc.CLOCKWISE.get=function(){return Iu.CLOCKWISE},Jc.NONE.get=function(){return Iu.COLLINEAR},Object.defineProperties(Zc,Jc);var Qc=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ac,this._seg1=new Ac,this._offset0=new Ac,this._offset1=new Ac,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Ou,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),8<=n.getQuadrantSegments()&&n.getJoinStyle()===Xc.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},$c={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Qc.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Iu.computeOrientation(this._s0,this._s1,this._s2),r=n===Iu.CLOCKWISE&&this._side===Vl.LEFT||n===Iu.COUNTERCLOCKWISE&&this._side===Vl.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Qc.prototype.addLineEndCap=function(t,e){var n=new Ac(t,e),r=new Ac;this.computeOffsetSegment(n,Vl.LEFT,this._distance,r);var i=new Ac;this.computeOffsetSegment(n,Vl.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Xc.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Iu.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Xc.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Xc.CAP_SQUARE:var u=new Xa;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new Xa(r.p1.x+u.x,r.p1.y+u.y),c=new Xa(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Qc.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Qc.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=hu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof lu))throw t;o=new Xa(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Qc.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===Iu.CLOCKWISE?a<=c&&(a+=2*Math.PI):c<=a&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,i),this._segList.addPt(n)},Qc.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Xc.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Xc.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Qc.prototype.createSquare=function(t){this._segList.addPt(new Xa(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Xa(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Xa(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Xa(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Qc.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Qc.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Qc.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Qc.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Qc.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Zc.angle(i,this._seg0.p0),s=Zc.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Zc.normalize(o+s),u=Zc.normalize(a+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),f=new Xa(h,p),d=new Ac(i,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Vl.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Qc.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Vl.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Qc.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Iu.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new Xa;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Qc.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor){var n=new Xa((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Xa((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Qc.prototype.createCircle=function(t){var e=new Xa(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Qc.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Qc.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Kc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Qc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Qc.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===Xc.JOIN_BEVEL||this._bufParams.getJoinStyle()===Xc.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Iu.CLOCKWISE,this._distance))},Qc.prototype.closeRing=function(){this._segList.closeRing()},Qc.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},$c.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},$c.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},$c.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},$c.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Qc,$c);var th=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};th.prototype.getOffsetCurve=function(t,e){if(0===(this._distance=e))return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Wu.reverse(o),o},th.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Vc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Vl.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Vc.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Vl.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},th.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Vl.RIGHT&&(r=-r);var i=Vc.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},th.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Vc.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Vl.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Vc.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Vl.LEFT);for(var u=a-2;0<=u;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},th.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Xc.CAP_ROUND:e.createCircle(t);break;case Xc.CAP_SQUARE:e.createSquare(t)}},th.prototype.getLineCurve=function(t,e){if((this._distance=e)<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},th.prototype.getBufferParameters=function(){return this._bufParams},th.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},th.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return th.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},th.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Vc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Vl.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{var a=Vc.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Vl.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},th.prototype.getSegGen=function(t){return new Qc(this._precisionModel,this._bufParams,t)},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},th.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Xa(t[n]);return e};var eh=function(){this._subgraphs=null,this._seg=new Ac,this._cga=new Iu;var t=arguments[0];this._subgraphs=t},nh={DepthSegment:{configurable:!0}};eh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Xu,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Za(arguments[2],Yu)&&arguments[0]instanceof Xa&&arguments[1]instanceof lc){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Iu.computeOrientation(this._seg.p0,this._seg.p1,o)===Iu.RIGHT)){var c=s.getDepth(Vl.LEFT);this._seg.p0.equals(u[l])||(c=s.getDepth(Vl.RIGHT));var h=new rh(this._seg,c);a.add(h)}}else if(Za(arguments[2],Yu)&&arguments[0]instanceof Xa&&Za(arguments[1],Yu))for(var p=arguments[0],f=arguments[1],d=arguments[2],g=f.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(p,y,d)}},eh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:bc.min(e)._leftDepth},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},nh.DepthSegment.get=function(){return rh},Object.defineProperties(eh,nh);var rh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Ac(t),this._leftDepth=e};rh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},rh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},rh.prototype.toString=function(){return this._upwardSeg.toString()},rh.prototype.interfaces_=function(){return[Ua]},rh.prototype.getClass=function(){return rh};var ih=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};ih.prototype.area=function(){return ih.area(this.p0,this.p1,this.p2)},ih.prototype.signedArea=function(){return ih.signedArea(this.p0,this.p1,this.p2)},ih.prototype.interpolateZ=function(t){if(null===t)throw new ka("Supplied point is null.");return ih.interpolateZ(t,this.p0,this.p1,this.p2)},ih.prototype.longestSideLength=function(){return ih.longestSideLength(this.p0,this.p1,this.p2)},ih.prototype.isAcute=function(){return ih.isAcute(this.p0,this.p1,this.p2)},ih.prototype.circumcentre=function(){return ih.circumcentre(this.p0,this.p1,this.p2)},ih.prototype.area3D=function(){return ih.area3D(this.p0,this.p1,this.p2)},ih.prototype.centroid=function(){return ih.centroid(this.p0,this.p1,this.p2)},ih.prototype.inCentre=function(){return ih.inCentre(this.p0,this.p1,this.p2)},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ih.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ih.det=function(t,e,n,r){return t*r-e*n},ih.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,h=t.x-i,p=t.y-o,f=(l*h-a*p)/c,d=(-u*h+s*p)/c;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},ih.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return s<i&&(s=i),s<o&&(s=o),s},ih.isAcute=function(t,e,n){return!!Zc.isAcute(t,e,n)&&!!Zc.isAcute(e,n,t)&&!!Zc.isAcute(n,t,e)},ih.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*ih.det(o,s,a,u),c=ih.det(s,o*o+s*s,u,a*a+u*u),h=ih.det(o,o*o+s*s,a,a*a+u*u);return new Xa(r-c/l,i+h/l)},ih.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new hu(t.x+n/2,t.y+r/2,1),o=new hu(t.x-r+n/2,t.y+n+r/2,1);return new hu(i,o)},ih.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new Xa(t.x+i*o,t.y+i*s)},ih.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=i*u-o*a,c=o*s-r*u,h=r*a-i*s,p=l*l+c*c+h*h,f=Math.sqrt(p)/2;return f},ih.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new Xa(r,i)},ih.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new Xa(a,u)};var oh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Xu;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};oh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Ka.EXTERIOR,Ka.INTERIOR)},oh.prototype.addPolygon=function(t){var e=this._distance,n=Vl.LEFT;this._distance<0&&(e=-this._distance,n=Vl.RIGHT);var r=t.getExteriorRing(),i=Wu.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Ka.EXTERIOR,Ka.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Wu.removeRepeatedPoints(s.getCoordinates());0<this._distance&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Vl.opposite(n),Ka.INTERIOR,Ka.EXTERIOR)}},oh.prototype.isTriangleErodedCompletely=function(t,e){var n=new ih(t[0],t[1],t[2]),r=n.inCentre();return Iu.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},oh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Wu.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Ka.EXTERIOR,Ka.INTERIOR)},oh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new jc(t,new $l(0,Ka.BOUNDARY,e,n));this._curveList.add(r)},oh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},oh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<El.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=El.MINIMUM_VALID_SIZE&&Iu.isCCW(t)&&(o=i,s=r,n=Vl.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},oh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof bl?this.addPolygon(t):t instanceof yl?this.addLineString(t):t instanceof vl?this.addPoint(t):t instanceof xl?this.addCollection(t):t instanceof cl?this.addCollection(t):t instanceof wl?this.addCollection(t):t instanceof ll&&this.addCollection(t)},oh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},oh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var sh=function(){};sh.prototype.locate=function(t){},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh};var ah=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};ah.prototype.next=function(){if(this._atStart)return this._atStart=!1,ah.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new fi;var t=this._parent.getGeometryN(this._index++);return t instanceof ll?(this._subcollectionIterator=new ah(t),this._subcollectionIterator.next()):t},ah.prototype.remove=function(){throw new Error(this.getClass().getName())},ah.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},ah.prototype.interfaces_=function(){return[Bu]},ah.prototype.getClass=function(){return ah},ah.isAtomic=function(t){return!(t instanceof ll)};var uh=function(){this._geom=null;var t=arguments[0];this._geom=t};uh.prototype.locate=function(t){return uh.locate(t,this._geom)},uh.prototype.interfaces_=function(){return[sh]},uh.prototype.getClass=function(){return uh},uh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Iu.isPointInRing(t,e.getCoordinates())},uh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!uh.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(uh.isPointInRing(t,i))return!1}return!0},uh.containsPoint=function(t,e){if(e instanceof bl)return uh.containsPointInPolygon(t,e);if(e instanceof ll)for(var n=new ah(e);n.hasNext();){var r=n.next();if(r!==e&&uh.containsPoint(t,r))return!0}return!1},uh.locate=function(t,e){return e.isEmpty()?Ka.EXTERIOR:uh.containsPoint(t,e)?Ka.INTERIOR:Ka.EXTERIOR};var lh=function(){this._edgeMap=new xi,this._edgeList=null,this._ptInAreaLocation=[Ka.NONE,Ka.NONE]};lh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},lh.prototype.propagateSideLabels=function(t){for(var e=Ka.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Vl.LEFT)!==Ka.NONE&&(e=r.getLocation(t,Vl.LEFT))}if(e===Ka.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Vl.ON)===Ka.NONE&&a.setLocation(t,Vl.ON,i),a.isArea(t)){var u=a.getLocation(t,Vl.LEFT),l=a.getLocation(t,Vl.RIGHT);if(l!==Ka.NONE){if(l!==i)throw new Hl("side location conflict",s.getCoordinate());u===Ka.NONE&&xu.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else xu.isTrue(a.getLocation(t,Vl.LEFT)===Ka.NONE,"found single null side"),a.setLocation(t,Vl.RIGHT,i),a.setLocation(t,Vl.LEFT,i)}}},lh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},lh.prototype.print=function(t){cu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},lh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},lh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Vl.LEFT);xu.isTrue(r!==Ka.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();xu.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Vl.LEFT),u=s.getLocation(t,Vl.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},lh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},lh.prototype.iterator=function(){return this.getEdges().iterator()},lh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Xu(this._edgeMap.values())),this._edgeList},lh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Ka.NONE&&(this._ptInAreaLocation[t]=uh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},lh.prototype.toString=function(){var t=new $a;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},lh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},lh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Ka.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=Ka.NONE;if(e[u])l=Ka.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},lh.prototype.getDegree=function(){return this._edgeMap.size()},lh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh};var ch=function(o){function t(){o.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Hl("no outgoing dirEdge found",this.getCoordinate());xu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},t.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},t.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return sc.isNorthern(i)&&sc.isNorthern(o)?n:sc.isNorthern(i)||sc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(xu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},t.prototype.print=function(t){cu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},t.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Xu;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},t.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Vl.LEFT),r=t.getDepth(Vl.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Hl("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var l=this._edgeList.get(u);l.setEdgeDepths(Vl.RIGHT,a),a=l.getDepth(Vl.LEFT)}return a}},t.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(xu.isTrue(null!==e,"found null for first outgoing dirEdge"),xu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},t.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var t=Ka.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Ka.INTERIOR;break}if(r.isInResult()){t=Ka.EXTERIOR;break}}}if(t===Ka.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===Ka.INTERIOR):(s.isInResult()&&(i=Ka.EXTERIOR),a.isInResult()&&(i=Ka.INTERIOR))}},t.prototype.computeLabelling=function(t){o.prototype.computeLabelling.call(this,t),this._label=new $l(Ka.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==Ka.INTERIOR&&i!==Ka.BOUNDARY||this._label.setLocation(r,Ka.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(lh),hh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createNode=function(t){return new ic(t,new ch)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cc),ph=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};ph.prototype.compareTo=function(t){var e=t;return ph.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},ph.prototype.interfaces_=function(){return[Ua]},ph.prototype.getClass=function(){return ph},ph.orientation=function(t){return 1===Wu.increasingDirection(t)},ph.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===s,p=(l+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var fh=function(){this._edges=new Xu,this._ocaMap=new xi};fh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},fh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},fh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},fh.prototype.iterator=function(){return this._edges.iterator()},fh.prototype.getEdges=function(){return this._edges},fh.prototype.get=function(t){return this._edges.get(t)},fh.prototype.findEqualEdge=function(t){var e=new ph(t.getCoordinates());return this._ocaMap.get(e)},fh.prototype.add=function(t){this._edges.add(t);var e=new ph(t.getCoordinates());this._ocaMap.put(e,t)},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh};var dh=function(){};dh.prototype.processIntersections=function(t,e,n,r){},dh.prototype.isDone=function(){},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var gh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};gh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(gh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},gh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},gh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},gh.prototype.getLineIntersector=function(){return this._li},gh.prototype.hasProperIntersection=function(){return this._hasProper},gh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},gh.prototype.hasIntersection=function(){return this._hasIntersection},gh.prototype.isDone=function(){return!1},gh.prototype.hasInteriorIntersection=function(){return this._hasInterior},gh.prototype.interfaces_=function(){return[dh]},gh.prototype.getClass=function(){return gh},gh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var yh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Xa(t),this.segmentIndex=e,this.dist=n};yh.prototype.getSegmentIndex=function(){return this.segmentIndex},yh.prototype.getCoordinate=function(){return this.coord},yh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},yh.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},yh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},yh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},yh.prototype.getDistance=function(){return this.dist},yh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},yh.prototype.interfaces_=function(){return[Ua]},yh.prototype.getClass=function(){return yh};var _h=function(){this._nodeMap=new xi,this.edge=null;var t=arguments[0];this.edge=t};_h.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},_h.prototype.iterator=function(){return this._nodeMap.values().iterator()},_h.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},_h.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},_h.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new Xa(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new Eh(o,new $l(this.edge._label))},_h.prototype.add=function(t,e,n){var r=new yh(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},_h.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var vh=function(){};vh.prototype.getChainStartIndices=function(t){var e=0,n=new Xu;n.add(new tu(e));do{var r=this.findChainEnd(t,e);n.add(new tu(r)),e=r}while(e<t.length-1);return vh.toIntArray(n)},vh.prototype.findChainEnd=function(t,e){for(var n=sc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&sc.quadrant(t[r-1],t[r])===n;)r++;return r-1},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh},vh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var mh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new pu,this.env2=new pu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new vh;this.startIndex=e.getChainStartIndices(this.pts)};mh.prototype.getCoordinates=function(){return this.pts},mh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},mh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},mh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,l),g<u&&this.computeIntersectsForChain(i,d,s,g,u,l)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,l),g<u&&this.computeIntersectsForChain(d,o,s,g,u,l))}},mh.prototype.getStartIndexes=function(){return this.startIndex},mh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var bh=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},xh={NULL_VALUE:{configurable:!0}};bh.prototype.getDepth=function(t,e){return this._depth[t][e]},bh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},bh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==bh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===bh.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===bh.NULL_VALUE}},bh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},bh.prototype.getDelta=function(t){return this._depth[t][Vl.RIGHT]-this._depth[t][Vl.LEFT]},bh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Ka.EXTERIOR:Ka.INTERIOR},bh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},bh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Ka.EXTERIOR&&r!==Ka.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=bh.depthAtLocation(r):this._depth[e][n]+=bh.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===Ka.INTERIOR&&this._depth[i][o]++}},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh},bh.depthAtLocation=function(t){return t===Ka.EXTERIOR?0:t===Ka.INTERIOR?1:bh.NULL_VALUE},xh.NULL_VALUE.get=function(){return-1},Object.defineProperties(bh,xh);var Eh=function(r){function s(){if(r.call(this),this.pts=null,this._env=null,this.eiList=new _h(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new bh,this._depthDelta=0,1===arguments.length){var t=arguments[0];s.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}return r&&(s.__proto__=r),((s.prototype=Object.create(r&&r.prototype)).constructor=s).prototype.getDepth=function(){return this._depth},s.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,$l.toLineLabel(this._label))},s.prototype.isIsolated=function(){return this._isIsolated},s.prototype.getCoordinates=function(){return this.pts},s.prototype.setIsolated=function(t){this._isIsolated=t},s.prototype.setName=function(t){this._name=t},s.prototype.equals=function(t){if(!(t instanceof s))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0},s.prototype.getCoordinate=function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},s.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},s.prototype.computeIM=function(t){s.updateIM(this._label,t)},s.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},s.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},s.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},s.prototype.getDepthDelta=function(){return this._depthDelta},s.prototype.getNumPoints=function(){return this.pts.length},s.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},s.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new mh(this)),this._mce},s.prototype.getEnvelope=function(){if(null===this._env){this._env=new pu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},s.prototype.addIntersection=function(t,e,n,r){var i=new Xa(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},s.prototype.toString=function(){var t=new $a;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},s.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},s.prototype.setDepthDelta=function(t){this._depthDelta=t},s.prototype.getEdgeIntersectionList=function(){return this.eiList},s.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.updateIM=function(){if(2!==arguments.length)return r.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Vl.ON),t.getLocation(1,Vl.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Vl.LEFT),t.getLocation(1,Vl.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Vl.RIGHT),t.getLocation(1,Vl.RIGHT),2))},s}(rc),wh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new fh,this._bufParams=t||null};wh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},wh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $l(t.getLabel())).flip(),n.merge(r);var i=wh.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(wh.depthDelta(t.getLabel()))},wh.prototype.buildSubgraphs=function(t,e){for(var n=new Xu,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new eh(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},wh.prototype.createSubgraphs=function(t){for(var e=new Xu,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Jl;i.create(r),e.add(i)}}return bc.sort(e,bc.reverseOrder()),e},wh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},wh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Bc,n=new Ou;return n.setPrecisionModel(t),e.setSegmentIntersector(new gh(n)),e},wh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new th(n,this._bufParams),i=new oh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new hc(new hh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new pc(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},wh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new Eh(i.getCoordinates(),new $l(s));this.insertUniqueEdge(a)}}},wh.prototype.setNoder=function(t){this._workingNoder=t},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh},wh.depthDelta=function(t){var e=t.getLocation(0,Vl.LEFT),n=t.getLocation(0,Vl.RIGHT);return e===Ka.INTERIOR&&n===Ka.EXTERIOR?1:e===Ka.EXTERIOR&&n===Ka.INTERIOR?-1:0},wh.convertSegStrings=function(t){for(var e=new kl,n=new Xu;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var Oh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Oh.prototype.rescale=function(){if(Za(arguments[0],zu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&cu.out.println(n)}},Oh.prototype.scale=function(){if(Za(arguments[0],zu)){for(var t=arguments[0],e=new Xu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new jc(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new Xa(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Wu.removeRepeatedPoints(o)}},Oh.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Oh.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Oh.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Oh.prototype.interfaces_=function(){return[zc]},Oh.prototype.getClass=function(){return Oh};var Ch=function(){this._li=new Ou,this._segStrings=null;var t=arguments[0];this._segStrings=t},Sh={fact:{configurable:!0}};Ch.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new mu("found endpt/interior pt intersection at index "+o+" :pt "+n)},Ch.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=p.getCoordinates()[f],_=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,_)))throw new mu("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+_)}},Ch.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Ch.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},Ch.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Ch.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new mu("found non-noded collapse at "+Ch.fact.createLineString([t,e,n]))},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Sh.fact.get=function(){return new kl},Object.defineProperties(Ch,Sh);var Ih=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new ka("Scale factor must be non-zero");1!==e&&(this._pt=new Xa(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Xa,this._p1Scaled=new Xa),this.initCorners(this._pt)},Th={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Ih.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return xu.isTrue(!(s&&a),"Found bad envelope test"),a},Ih.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Xa(this._maxx,this._maxy),this._corner[1]=new Xa(this._minx,this._maxy),this._corner[2]=new Xa(this._minx,this._miny),this._corner[3]=new Xa(this._maxx,this._miny)},Ih.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Ih.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Ih.prototype.getCoordinate=function(){return this._originalPt},Ih.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Ih.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Ih.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new pu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Ih.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Ih.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Ih.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih},Th.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Ih,Th);var Rh=function(){this.tempEnv1=new pu,this.selectedSegment=new Ac};Rh.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh};var Lh=function(){this._index=null;var t=arguments[0];this._index=t},Nh={HotPixelSnapAction:{configurable:!0}};Lh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new Ph(e,n,r);return this._index.query(i,{interfaces_:function(){return[yc]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Nh.HotPixelSnapAction.get=function(){return Ph},Object.defineProperties(Lh,Nh);var Ph=function(r){function t(){r.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(2!==arguments.length)return r.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Rh),Mh=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Xu};Mh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Mh.prototype.isDone=function(){return!1},Mh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Mh.prototype.interfaces_=function(){return[dh]},Mh.prototype.getClass=function(){return Mh};var jh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Ou,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};jh.prototype.checkCorrectness=function(t){var e=jc.getNodedSubstrings(t),n=new Ch(e);try{n.checkValid()}catch(t){if(!(t instanceof uu))throw t;t.printStackTrace()}},jh.prototype.getNodedSubstrings=function(){return jc.getNodedSubstrings(this._nodedSegStrings)},jh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},jh.prototype.findInteriorIntersections=function(t,e){var n=new Mh(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},jh.prototype.computeVertexSnaps=function(){if(Za(arguments[0],zu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof jc)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new Ih(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},jh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Bc,this._pointSnapper=new Lh(this._noder.getIndex()),this.snapRound(t,this._li)},jh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new Ih(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},jh.prototype.interfaces_=function(){return[zc]},jh.prototype.getClass=function(){return jh};var Ah=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Xc,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Fh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ah.prototype.bufferFixedPrecision=function(t){var e=new Oh(new jh(new jl(1)),t.getScale()),n=new wh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Ah.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Ah.MAX_PRECISION_DIGITS;0<=e;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Hl))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Ah.precisionScaleFactor(this._argGeom,this._distance,n),i=new jl(r);this.bufferFixedPrecision(i)}},Ah.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===jl.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Ah.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Ah.prototype.bufferOriginalPrecision=function(){try{var t=new wh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof mu))throw t;this._saveException=t}},Ah.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Ah.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Ah.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ah(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Lu&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Ah(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof Xc&&arguments[0]instanceof Lu&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new Ah(s,u).getResultGeometry(a)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=new Ah(l);return f.setQuadrantSegments(h),f.setEndCapStyle(p),f.getResultGeometry(c)}},Ah.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Ja.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<e?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Fh.CAP_ROUND.get=function(){return Xc.CAP_ROUND},Fh.CAP_BUTT.get=function(){return Xc.CAP_FLAT},Fh.CAP_FLAT.get=function(){return Xc.CAP_FLAT},Fh.CAP_SQUARE.get=function(){return Xc.CAP_SQUARE},Fh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ah,Fh);var Dh=function(){this._pt=[new Xa,new Xa],this._distance=Ga.NaN,this._isNull=!0};Dh.prototype.getCoordinates=function(){return this._pt},Dh.prototype.getCoordinate=function(t){return this._pt[t]},Dh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Dh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Dh.prototype.getDistance=function(){return this._distance},Dh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh};var kh=function(){};kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},kh.computeDistance=function(){if(arguments[2]instanceof Dh&&arguments[0]instanceof yl&&arguments[1]instanceof Xa)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new Ac,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Dh&&arguments[0]instanceof bl&&arguments[1]instanceof Xa){var a=arguments[0],u=arguments[1],l=arguments[2];kh.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)kh.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Dh&&arguments[0]instanceof Lu&&arguments[1]instanceof Xa){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof yl)kh.computeDistance(h,p,f);else if(h instanceof bl)kh.computeDistance(h,p,f);else if(h instanceof ll)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);kh.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Dh&&arguments[0]instanceof Ac&&arguments[1]instanceof Xa){var _=arguments[0],v=arguments[1],m=arguments[2],b=_.closestPoint(v);m.setMinimum(b,v)}};var Gh=function(t){this._maxPtDist=new Dh,this._inputGeom=t||null},zh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Gh.prototype.computeMaxMidpointDistance=function(t){var e=new Bh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Gh.prototype.computeMaxVertexDistance=function(t){var e=new Uh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Gh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Gh.prototype.getDistancePoints=function(){return this._maxPtDist},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},zh.MaxPointDistanceFilter.get=function(){return Uh},zh.MaxMidpointDistanceFilter.get=function(){return Bh},Object.defineProperties(Gh,zh);var Uh=function(t){this._maxPtDist=new Dh,this._minPtDist=new Dh,this._geom=t||null};Uh.prototype.filter=function(t){this._minPtDist.initialize(),kh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Uh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Uh.prototype.interfaces_=function(){return[Mu]},Uh.prototype.getClass=function(){return Uh};var Bh=function(t){this._maxPtDist=new Dh,this._minPtDist=new Dh,this._geom=t||null};Bh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new Xa((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),kh.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Bh.prototype.isDone=function(){return!1},Bh.prototype.isGeometryChanged=function(){return!1},Bh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bh.prototype.interfaces_=function(){return[ul]},Bh.prototype.getClass=function(){return Bh};var Yh=function(t){this._comps=t||null};Yh.prototype.filter=function(t){t instanceof bl&&this._comps.add(t)},Yh.prototype.interfaces_=function(){return[al]},Yh.prototype.getClass=function(){return Yh},Yh.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Yh.getPolygons(t,new Xu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof bl?n.add(e):e instanceof ll&&e.apply(new Yh(n)),n}};var Xh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Xh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof El){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof yl&&this._lines.add(t)},Xh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Xh.prototype.interfaces_=function(){return[Ru]},Xh.prototype.getClass=function(){return Xh},Xh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Xh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Xh.getLines(e,n))}},Xh.getLines=function(){if(1===arguments.length){var t=arguments[0];return Xh.getLines(t,!1)}if(2===arguments.length){if(Za(arguments[0],zu)&&Za(arguments[1],zu)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Xh.getLines(i,n)}return n}if(arguments[0]instanceof Lu&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new Xu;return o.apply(new Xh(a,s)),a}if(arguments[0]instanceof Lu&&Za(arguments[1],zu)){var u=arguments[0],l=arguments[1];return u instanceof yl?l.add(u):u.apply(new Xh(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Za(arguments[0],zu)&&Za(arguments[1],zu)){for(var c=arguments[0],h=arguments[1],p=arguments[2],f=c.iterator();f.hasNext();){var d=f.next();Xh.getLines(d,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Lu&&Za(arguments[1],zu)){var g=arguments[0],y=arguments[1],_=arguments[2];return g.apply(new Xh(y,_)),y}}};var qh=function(){if(this._boundaryRule=ju.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new ka("Rule must be non-null");this._boundaryRule=t}};qh.prototype.locateInternal=function(){if(arguments[0]instanceof Xa&&arguments[1]instanceof bl){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Ka.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Ka.EXTERIOR)return Ka.EXTERIOR;if(r===Ka.BOUNDARY)return Ka.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===Ka.INTERIOR)return Ka.EXTERIOR;if(s===Ka.BOUNDARY)return Ka.BOUNDARY}return Ka.INTERIOR}if(arguments[0]instanceof Xa&&arguments[1]instanceof yl){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return Ka.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?Iu.isOnLine(a,l)?Ka.INTERIOR:Ka.EXTERIOR:Ka.BOUNDARY}if(arguments[0]instanceof Xa&&arguments[1]instanceof vl){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?Ka.INTERIOR:Ka.EXTERIOR}},qh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Iu.locatePointInRing(t,e.getCoordinates()):Ka.EXTERIOR},qh.prototype.intersects=function(t,e){return this.locate(t,e)!==Ka.EXTERIOR},qh.prototype.updateLocationInfo=function(t){t===Ka.INTERIOR&&(this._isIn=!0),t===Ka.BOUNDARY&&this._numBoundaries++},qh.prototype.computeLocation=function(t,e){if(e instanceof vl&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof yl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof bl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof cl)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof wl)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof ll)for(var u=new ah(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},qh.prototype.locate=function(t,e){return e.isEmpty()?Ka.EXTERIOR:e instanceof yl?this.locateInternal(t,e):e instanceof bl?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Ka.BOUNDARY:0<this._numBoundaries||this._isIn?Ka.INTERIOR:Ka.EXTERIOR)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var Vh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Wh={INSIDE_AREA:{configurable:!0}};Vh.prototype.isInsideArea=function(){return this._segIndex===Vh.INSIDE_AREA},Vh.prototype.getCoordinate=function(){return this._pt},Vh.prototype.getGeometryComponent=function(){return this._component},Vh.prototype.getSegmentIndex=function(){return this._segIndex},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Wh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Vh,Wh);var Kh=function(t){this._pts=t||null};Kh.prototype.filter=function(t){t instanceof vl&&this._pts.add(t)},Kh.prototype.interfaces_=function(){return[al]},Kh.prototype.getClass=function(){return Kh},Kh.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof vl?bc.singletonList(t):Kh.getPoints(t,new Xu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof vl?n.add(e):e instanceof ll&&e.apply(new Kh(n)),n}};var Hh=function(){this._locations=null;var t=arguments[0];this._locations=t};Hh.prototype.filter=function(t){(t instanceof vl||t instanceof yl||t instanceof bl)&&this._locations.add(new Vh(t,0,t.getCoordinate()))},Hh.prototype.interfaces_=function(){return[al]},Hh.prototype.getClass=function(){return Hh},Hh.getLocations=function(t){var e=new Xu;return t.apply(new Hh(e)),e};var Zh=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new qh,this._minDistanceLocation=null,this._minDistance=Ga.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Zh.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Yh.getPolygons(this._geom[e]);if(0<i.size()){var o=Hh.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Za(arguments[0],Yu)&&Za(arguments[1],Yu)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Vh&&arguments[1]instanceof bl){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(Ka.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Vh(f,g),null}},Zh.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Zh.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Xh.getLines(this._geom[0]),n=Xh.getLines(this._geom[1]),r=Kh.getPoints(this._geom[0]),i=Kh.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Zh.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Zh.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Zh.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Zh.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof yl&&arguments[1]instanceof vl){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=Iu.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new Ac(r[o],r[o+1]).closestPoint(i);n[0]=new Vh(t,o,a),n[1]=new Vh(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof yl&&arguments[1]instanceof yl){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=l.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=Iu.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new Ac(h[f],h[f+1]),_=new Ac(p[d],p[d+1]),v=y.closestPoints(_);c[0]=new Vh(u,f,v[0]),c[1]=new Vh(l,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Zh.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Vh(i,0,i.getCoordinate()),n[1]=new Vh(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Zh.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ka("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Zh.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Zh.distance=function(t,e){return new Zh(t,e).distance()},Zh.isWithinDistance=function(t,e,n){return new Zh(t,e,n).distance()<=n},Zh.nearestPoints=function(t,e){return new Zh(t,e).nearestPoints()};var Jh=function(){this._pt=[new Xa,new Xa],this._distance=Ga.NaN,this._isNull=!0};Jh.prototype.getCoordinates=function(){return this._pt},Jh.prototype.getCoordinate=function(t){return this._pt[t]},Jh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Jh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Jh.prototype.toString=function(){return vu.toLineString(this._pt[0],this._pt[1])},Jh.prototype.getDistance=function(){return this._distance},Jh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Qh=function(){};Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.computeDistance=function(){if(arguments[2]instanceof Jh&&arguments[0]instanceof yl&&arguments[1]instanceof Xa)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Ac,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof bl&&arguments[1]instanceof Xa){var a=arguments[0],u=arguments[1],l=arguments[2];Qh.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Qh.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof Lu&&arguments[1]instanceof Xa){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof yl)Qh.computeDistance(h,p,f);else if(h instanceof bl)Qh.computeDistance(h,p,f);else if(h instanceof ll)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Qh.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof Ac&&arguments[1]instanceof Xa){var _=arguments[0],v=arguments[1],m=arguments[2],b=_.closestPoint(v);m.setMinimum(b,v)}};var $h=function(){this._g0=null,this._g1=null,this._ptDist=new Jh,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},tp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};$h.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},$h.prototype.setDensifyFraction=function(t){if(1<t||t<=0)throw new ka("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},$h.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},$h.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},$h.prototype.computeOrientedDistance=function(t,e,n){var r=new ep(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),0<this._densifyFrac){var i=new np(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},$h.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},$h.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new $h(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new $h(n,r);return o.setDensifyFraction(i),o.distance()}},tp.MaxPointDistanceFilter.get=function(){return ep},tp.MaxDensifiedByFractionDistanceFilter.get=function(){return np},Object.defineProperties($h,tp);var ep=function(){this._maxPtDist=new Jh,this._minPtDist=new Jh,this._euclideanDist=new Qh,this._geom=null;var t=arguments[0];this._geom=t};ep.prototype.filter=function(t){this._minPtDist.initialize(),Qh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},ep.prototype.interfaces_=function(){return[Mu]},ep.prototype.getClass=function(){return ep};var np=function(){this._maxPtDist=new Jh,this._minPtDist=new Jh,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};np.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,u=n.y+s*o,l=new Xa(a,u);this._minPtDist.initialize(),Qh.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},np.prototype.isDone=function(){return!1},np.prototype.isGeometryChanged=function(){return!1},np.prototype.getMaxPointDistance=function(){return this._maxPtDist},np.prototype.interfaces_=function(){return[ul]},np.prototype.getClass=function(){return np};var rp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},ip={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};rp.prototype.checkMaximumDistance=function(t,e,n){var r=new $h(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+vu.toLineString(i[0],i[1])+")"}},rp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=rp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),rp.VERBOSE&&cu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},rp.prototype.checkNegativeValid=function(){if(!(this._input instanceof bl||this._input instanceof wl||this._input instanceof ll))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},rp.prototype.getErrorIndicator=function(){return this._errorIndicator},rp.prototype.checkMinimumDistance=function(t,e,n){var r=new Zh(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+vu.toLineString(i[0],i[1])+" )"}},rp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},rp.prototype.getErrorLocation=function(){return this._errorLocation},rp.prototype.getPolygonLines=function(t){for(var e=new Xu,n=new Xh(e),r=Yh.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},rp.prototype.getErrorMessage=function(){return this._errMsg},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},ip.VERBOSE.get=function(){return!1},ip.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(rp,ip);var op=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},sp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};op.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},op.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*op.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new pu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new pu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},op.prototype.checkDistance=function(){var t=new rp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},op.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();0<this._distance&&e<t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},op.prototype.checkPolygonal=function(){this._result instanceof bl||this._result instanceof wl||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},op.prototype.getErrorIndicator=function(){return this._errorIndicator},op.prototype.getErrorLocation=function(){return this._errorLocation},op.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()?null:0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},op.prototype.report=function(t){if(!op.VERBOSE)return null;cu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},op.prototype.getErrorMessage=function(){return this._errorMsg},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.isValidMsg=function(t,e,n){var r=new op(t,e,n);return r.isValid()?null:r.getErrorMessage()},op.isValid=function(t,e,n){return!!new op(t,e,n).isValid()},sp.VERBOSE.get=function(){return!1},sp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(op,sp);var ap=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};ap.prototype.getCoordinates=function(){return this._pts},ap.prototype.size=function(){return this._pts.length},ap.prototype.getCoordinate=function(t){return this._pts[t]},ap.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ap.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Nc.octant(this.getCoordinate(t),this.getCoordinate(t+1))},ap.prototype.setData=function(t){this._data=t},ap.prototype.getData=function(){return this._data},ap.prototype.toString=function(){return vu.toLineString(new Rl(this._pts))},ap.prototype.interfaces_=function(){return[Pc]},ap.prototype.getClass=function(){return ap};var up=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Xu,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};up.prototype.getInteriorIntersection=function(){return this._interiorIntersection},up.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},up.prototype.getIntersectionSegments=function(){return this._intSegments},up.prototype.count=function(){return this._intersectionCount},up.prototype.getIntersections=function(){return this._intersections},up.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},up.prototype.setKeepIntersections=function(t){this._keepIntersections=t},up.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},up.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},up.prototype.hasIntersection=function(){return null!==this._interiorIntersection},up.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},up.prototype.interfaces_=function(){return[dh]},up.prototype.getClass=function(){return up},up.createAllIntersectionsFinder=function(t){var e=new up(t);return e.setFindAllIntersections(!0),e},up.createAnyIntersectionFinder=function(t){return new up(t)},up.createIntersectionCounter=function(t){var e=new up(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var lp=function(){this._li=new Ou,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};lp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},lp.prototype.getIntersections=function(){return this._segInt.getIntersections()},lp.prototype.isValid=function(){return this.execute(),this._isValid},lp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},lp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new up(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Bc;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},lp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Hl(this.getErrorMessage(),this._segInt.getInteriorIntersection())},lp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+vu.toLineString(t[0],t[1])+" and "+vu.toLineString(t[2],t[3])},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.computeIntersections=function(t){var e=new lp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var cp=function t(){this._nv=null;var e=arguments[0];this._nv=new lp(t.toSegmentStrings(e))};cp.prototype.checkValid=function(){this._nv.checkValid()},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.toSegmentStrings=function(t){for(var e=new Xu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new ap(r.getCoordinates(),r))}return e},cp.checkValid=function(t){new cp(t).checkValid()};var hp=function(t){this._mapOp=t};hp.prototype.map=function(t){for(var e=new Xu,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(kl.toGeometryArray(e))},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},hp.map=function(t,e){return new hp(e).map(t)};var pp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Xu,this._resultLineList=new Xu;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};pp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},pp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},pp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},pp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Vp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},pp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},pp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},pp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},pp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(xu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Vp.isResultOfOp(r,e)&&e===Vp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var fp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Xu;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};fp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},fp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Vp.INTERSECTION)){var r=n.getLabel();Vp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},fp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var dp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};dp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},dp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof El&&!r.isEmpty()||(n=!1);for(var i=new Xu,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof El||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new Xu;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},dp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},dp.prototype.getInputGeometry=function(){return this._inputGeom},dp.prototype.transformMultiLineString=function(t,e){for(var n=new Xu,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.transformCoordinates=function(t,e){return this.copy(t)},dp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},dp.prototype.transformMultiPoint=function(t,e){for(var n=new Xu,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.transformMultiPolygon=function(t,e){for(var n=new Xu,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.copy=function(t){return t.copy()},dp.prototype.transformGeometryCollection=function(t,e){for(var n=new Xu,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(kl.toGeometryArray(n)):this._factory.buildGeometry(n)},dp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof vl)return this.transformPoint(t,null);if(t instanceof xl)return this.transformMultiPoint(t,null);if(t instanceof El)return this.transformLinearRing(t,null);if(t instanceof yl)return this.transformLineString(t,null);if(t instanceof cl)return this.transformMultiLineString(t,null);if(t instanceof bl)return this.transformPolygon(t,null);if(t instanceof wl)return this.transformMultiPolygon(t,null);if(t instanceof ll)return this.transformGeometryCollection(t,null);throw new ka("Unknown Geometry subtype: "+t.getClass().getName())},dp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return 0<r&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp};var gp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ac,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof yl&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};gp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new Xa(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Xa(o)))}},gp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},gp.prototype.snapTo=function(t){var e=new Vu(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},gp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new Xa(i),!1)}},gp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=Ga.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},gp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},gp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var yp=function(t){this._srcGeom=t||null},_p={SNAP_PRECISION_FACTOR:{configurable:!0}};yp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new vp(e,n).transform(this._srcGeom)},yp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new vp(t,n,!0).transform(this._srcGeom),i=r;return e&&Za(i,ml)&&(i=r.buffer(0)),i},yp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},yp.prototype.extractTargetCoordinates=function(t){for(var e=new wi,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},yp.prototype.computeMinimumSegmentLength=function(t){for(var e=Ga.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new yp(t);r[0]=i.snapTo(e,n);var o=new yp(e);return r[1]=o.snapTo(r[0],n),r},yp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=yp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===jl.FIXED){var r=1/n.getScale()*2/1.415;e<r&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(yp.computeOverlaySnapTolerance(i),yp.computeOverlaySnapTolerance(o))}},yp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*yp.SNAP_PRECISION_FACTOR},yp.snapToSelf=function(t,e,n){return new yp(t).snapToSelf(e,n)},_p.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(yp,_p);var vp=function(r){function t(t,e,n){r.call(this),this._snapTolerance=t||null,this._snapPts=e||null,this._isSelfSnap=void 0!==n&&n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.snapLine=function(t,e){var n=new gp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},t.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(dp),mp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};mp.prototype.getCommon=function(){return Ga.longBitsToDouble(this._commonBits)},mp.prototype.add=function(t){var e=Ga.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=mp.signExpBits(this._commonBits),this._isFirst=!1,null):mp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=mp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=mp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},mp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Ga.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Ga.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},mp.signExpBits=function(t){return t>>52},mp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},mp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(mp.getBit(t,r)!==mp.getBit(e,r))return n;n++}return 52};var bp=function(){this._commonCoord=null,this._ccFilter=new Ep},xp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};bp.prototype.addCommonBits=function(t){var e=new wp(this._commonCoord);t.apply(e),t.geometryChanged()},bp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Xa(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new wp(e);return t.apply(n),t.geometryChanged(),t},bp.prototype.getCommonCoordinate=function(){return this._commonCoord},bp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp},xp.CommonCoordinateFilter.get=function(){return Ep},xp.Translater.get=function(){return wp},Object.defineProperties(bp,xp);var Ep=function(){this._commonBitsX=new mp,this._commonBitsY=new mp};Ep.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Ep.prototype.getCommonCoordinate=function(){return new Xa(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Ep.prototype.interfaces_=function(){return[Mu]},Ep.prototype.getClass=function(){return Ep};var wp=function(){this.trans=null;var t=arguments[0];this.trans=t};wp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},wp.prototype.isDone=function(){return!1},wp.prototype.isGeometryChanged=function(){return!0},wp.prototype.interfaces_=function(){return[ul]},wp.prototype.getClass=function(){return wp};var Op=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Op.prototype.selfSnap=function(t){return new yp(t).snapTo(t,this._snapTolerance)},Op.prototype.removeCommonBits=function(t){this._cbr=new bp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Op.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Op.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Vp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Op.prototype.checkValid=function(t){t.isValid()||cu.out.println("Snapped geometry is invalid")},Op.prototype.computeSnapTolerance=function(){this._snapTolerance=yp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Op.prototype.snap=function(t){var e=this.removeCommonBits(t);return yp.snap(e[0],e[1],this._snapTolerance)},Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.overlayOp=function(t,e,n){return new Op(t,e).getResultGeometry(n)},Op.union=function(t,e){return Op.overlayOp(t,e,Vp.UNION)},Op.intersection=function(t,e){return Op.overlayOp(t,e,Vp.INTERSECTION)},Op.symDifference=function(t,e){return Op.overlayOp(t,e,Vp.SYMDIFFERENCE)},Op.difference=function(t,e){return Op.overlayOp(t,e,Vp.DIFFERENCE)};var Cp=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Cp.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Vp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof mu))throw t;r=t}if(!n)try{e=Op.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof mu?r:t}return e},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Cp.overlayOp=function(t,e,n){return new Cp(t,e).getResultGeometry(n)},Cp.union=function(t,e){return Cp.overlayOp(t,e,Vp.UNION)},Cp.intersection=function(t,e){return Cp.overlayOp(t,e,Vp.INTERSECTION)},Cp.symDifference=function(t,e){return Cp.overlayOp(t,e,Vp.SYMDIFFERENCE)},Cp.difference=function(t,e){return Cp.overlayOp(t,e,Vp.DIFFERENCE)};var Sp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Sp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var Ip=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Tp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Ip.prototype.isDelete=function(){return this._eventType===Ip.DELETE},Ip.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Ip.prototype.getObject=function(){return this._obj},Ip.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Ip.prototype.getInsertEvent=function(){return this._insertEvent},Ip.prototype.isInsert=function(){return this._eventType===Ip.INSERT},Ip.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Ip.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Ip.prototype.interfaces_=function(){return[Ua]},Ip.prototype.getClass=function(){return Ip},Tp.INSERT.get=function(){return 1},Tp.DELETE.get=function(){return 2},Object.defineProperties(Ip,Tp);var Rp=function(){};Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp};var Lp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Lp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Lp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Lp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Lp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Lp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Lp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Lp.prototype.hasProperIntersection=function(){return this._hasProper},Lp.prototype.hasIntersection=function(){return this._hasIntersection},Lp.prototype.isDone=function(){return this._isDone},Lp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Lp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Lp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Np=function(t){function e(){t.call(this),this.events=new Xu,this.nOverlaps=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.prepareEvents=function(){bc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Lp&&Za(arguments[0],Yu)&&Za(arguments[1],Yu)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Za(arguments[0],Yu)&&arguments[1]instanceof Lp){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Sp(n,i),s=new Ip(e,n.getMinX(i),o);this.events.add(s),this.events.add(new Ip(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rp),Pp=function(){this._min=Ga.POSITIVE_INFINITY,this._max=Ga.NEGATIVE_INFINITY},Mp={NodeComparator:{configurable:!0}};Pp.prototype.getMin=function(){return this._min},Pp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Pp.prototype.getMax=function(){return this._max},Pp.prototype.toString=function(){return vu.toLineString(new Xa(this._min,0),new Xa(this._max,0))},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Mp.NodeComparator.get=function(){return jp},Object.defineProperties(Pp,Mp);var jp=function(){};jp.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:o<i?1:0},jp.prototype.interfaces_=function(){return[Ya]},jp.prototype.getClass=function(){return jp};var Ap=function(r){function t(){r.call(this),this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pp),Fp=function(n){function t(){n.call(this),this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},t.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pp),Dp=function(){this._leaves=new Xu,this._root=null,this._level=0};Dp.prototype.buildTree=function(){bc.sort(this._leaves,new Pp.NodeComparator);for(var t=this._leaves,e=null,n=new Xu;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Dp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Ap(t,e,n))},Dp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Dp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Dp.prototype.printNode=function(t){cu.out.println(vu.toLineString(new Xa(t._min,this._level),new Xa(t._max,this._level)))},Dp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Dp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Fp(t.get(n),t.get(n+1));e.add(i)}}},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp};var kp=function(){this._items=new Xu};kp.prototype.visitItem=function(t){this._items.add(t)},kp.prototype.getItems=function(){return this._items},kp.prototype.interfaces_=function(){return[yc]},kp.prototype.getClass=function(){return kp};var Gp=function(){this._index=null;var t=arguments[0];if(!Za(t,ml))throw new ka("Argument must be Polygonal");this._index=new Bp(t)},zp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Gp.prototype.locate=function(t){var e=new Su(t),n=new Up(e);return this._index.query(t.y,t.y,n),e.getLocation()},Gp.prototype.interfaces_=function(){return[sh]},Gp.prototype.getClass=function(){return Gp},zp.SegmentVisitor.get=function(){return Up},zp.IntervalIndexedGeometry.get=function(){return Bp},Object.defineProperties(Gp,zp);var Up=function(){this._counter=null;var t=arguments[0];this._counter=t};Up.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Up.prototype.interfaces_=function(){return[yc]},Up.prototype.getClass=function(){return Up};var Bp=function(){this._index=new Dp;var t=arguments[0];this.init(t)};Bp.prototype.init=function(t){for(var e=Xh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Bp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Ac(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Bp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new kp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Bp.prototype.interfaces_=function(){return[]},Bp.prototype.getClass=function(){return Bp};var Yp=function(s){function o(){if(s.call(this),this._parentGeom=null,this._lineEdgeMap=new Ml,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new qh,2===arguments.length){var t=arguments[0],e=arguments[1],n=ju.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._argIndex=r,this._parentGeom=i,this._boundaryNodeRule=o,null!==i&&this.add(i)}}return s&&(o.__proto__=s),((o.prototype=Object.create(s&&s.prototype)).constructor=o).prototype.insertBoundaryPoint=function(t,e){var n=this._nodes.addNode(e).getLabel(),r=1;n.getLocation(t,Vl.ON)===Ka.BOUNDARY&&r++;var i=o.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,i)},o.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Lp(n,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof El||this._parentGeom instanceof bl||this._parentGeom instanceof wl,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},o.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},o.prototype.computeEdgeIntersections=function(t,e,n){var r=new Lp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},o.prototype.getGeometry=function(){return this._parentGeom},o.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},o.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},o.prototype.addPoint=function(){if(arguments[0]instanceof vl){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Ka.INTERIOR)}else if(arguments[0]instanceof Xa){var e=arguments[0];this.insertPoint(this._argIndex,e,Ka.INTERIOR)}},o.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Ka.EXTERIOR,Ka.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Ka.INTERIOR,Ka.EXTERIOR)}},o.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Ka.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Ka.BOUNDARY)},o.prototype.addLineString=function(t){var e=Wu.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Eh(e,new $l(this._argIndex,Ka.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),xu.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},o.prototype.getInvalidPoint=function(){return this._invalidPoint},o.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},o.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},o.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Ka.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},o.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Wu.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Iu.isCCW(r)&&(i=n,o=e);var s=new Eh(r,new $l(this._argIndex,Ka.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],Ka.BOUNDARY)},o.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new $l(t,n):i.setLocation(t,n)},o.prototype.createEdgeSetIntersector=function(){return new Np},o.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},o.prototype.add=function(){if(1!==arguments.length)return s.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof wl&&(this._useBoundaryDeterminationRule=!1),t instanceof bl)this.addPolygon(t);else if(t instanceof yl)this.addLineString(t);else if(t instanceof vl)this.addPoint(t);else if(t instanceof xl)this.addCollection(t);else if(t instanceof cl)this.addCollection(t);else if(t instanceof wl)this.addCollection(t);else{if(!(t instanceof ll))throw new Error(t.getClass().getName());this.addCollection(t)}},o.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},o.prototype.locate=function(t){return Za(this._parentGeom,ml)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new Gp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},o.prototype.findEdge=function(){if(1!==arguments.length)return s.prototype.findEdge.apply(this,arguments);var t=arguments[0];return this._lineEdgeMap.get(t)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o.determineBoundary=function(t,e){return t.isInBoundary(e)?Ka.BOUNDARY:Ka.INTERIOR},o}(hc),Xp=function(){if(this._li=new Ou,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Yp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=ju.OGC_SFS_BOUNDARY_RULE;0<=e.getPrecisionModel().compareTo(n.getPrecisionModel())?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yp(0,e,r),this._arg[1]=new Yp(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];0<=i.getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yp(0,i,s),this._arg[1]=new Yp(1,o,s)}};Xp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Xp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var qp=function(){};qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp},qp.map=function(){if(arguments[0]instanceof Lu&&Za(arguments[1],qp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Xu,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Za(arguments[0],zu)&&Za(arguments[1],qp.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Xu,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},qp.MapOp=function(){};var Vp=function(n){function o(){var t=arguments[0],e=arguments[1];n.call(this,t,e),this._ptLocator=new qh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new fh,this._resultPolyList=new Xu,this._resultLineList=new Xu,this._resultPointList=new Xu,this._graph=new hc(new hh),this._geomFact=t.getFactory()}return n&&(o.__proto__=n),((o.prototype=Object.create(n&&n.prototype)).constructor=o).prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $l(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},o.prototype.getGraph=function(){return this._graph},o.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},o.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},o.prototype.computeGeometry=function(t,e,n,r){var i=new Xu;return i.addAll(t),i.addAll(e),i.addAll(n),i.isEmpty()?o.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},o.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},o.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Ka.EXTERIOR)return!0}return!1},o.prototype.replaceCollapsedEdges=function(){for(var t=new Xu,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},o.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},o.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},o.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},o.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Xu;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),cp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new pc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new pp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new fp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},o.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},o.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},o.prototype.findResultAreaEdges=function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&o.isResultOfOp(r.getLocation(0,Vl.RIGHT),r.getLocation(1,Vl.RIGHT),t)&&n.setInResult(!0)}},o.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(xu.isTrue(!r.isNull(i,Vl.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Vl.LEFT,r.getLocation(i,Vl.LEFT)),xu.isTrue(!r.isNull(i,Vl.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Vl.RIGHT,r.getLocation(i,Vl.RIGHT))))}}},o.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},o.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},o.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o}(Xp);Vp.overlayOp=function(t,e,n){return new Vp(t,e).getResultGeometry(n)},Vp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Vp.createEmptyResult(Vp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return hp.map(t,{interfaces_:function(){return[qp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Vp.INTERSECTION)},Vp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Vp.createEmptyResult(Vp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Vp.SYMDIFFERENCE)},Vp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Vp.INTERSECTION:o=Math.min(r,i);break;case Vp.UNION:o=Math.max(r,i);break;case Vp.DIFFERENCE:o=r;break;case Vp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Vp.createEmptyResult=function(t,e,n,r){var i=null;switch(Vp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Vp.difference=function(t,e){return t.isEmpty()?Vp.createEmptyResult(Vp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Vp.DIFFERENCE))},Vp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Vp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===Ka.BOUNDARY&&(i=Ka.INTERIOR),o===Ka.BOUNDARY&&(o=Ka.INTERIOR),s){case Vp.INTERSECTION:return i===Ka.INTERIOR&&o===Ka.INTERIOR;case Vp.UNION:return i===Ka.INTERIOR||o===Ka.INTERIOR;case Vp.DIFFERENCE:return i===Ka.INTERIOR&&o!==Ka.INTERIOR;case Vp.SYMDIFFERENCE:return i===Ka.INTERIOR&&o!==Ka.INTERIOR||i!==Ka.INTERIOR&&o===Ka.INTERIOR}return!1}},Vp.INTERSECTION=1,Vp.UNION=2,Vp.DIFFERENCE=3,Vp.SYMDIFFERENCE=4;var Wp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new qh,this._seg=new Ac;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Wp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Wp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Ka.BOUNDARY:this._ptLocator.locate(t,this._g)},Wp.prototype.extractLinework=function(t){var e=new Kp;t.apply(e);var n=e.getLinework(),r=kl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var Kp=function(){this._linework=null,this._linework=new Xu};Kp.prototype.getLinework=function(){return this._linework},Kp.prototype.filter=function(t){if(t instanceof bl){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Kp.prototype.interfaces_=function(){return[al]},Kp.prototype.getClass=function(){return Kp};var Hp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Hp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Hp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Hp.prototype.getPoints=function(t){for(var e=new Xu,n=Xh.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Hp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new Xa(l-u,c+a);r.add(h)}if(this._doRight){var p=new Xa(l+u,c-a);r.add(p)}},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp};var Zp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Xu;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Wp(this._geom[0],this._boundaryDistanceTolerance),new Wp(this._geom[1],this._boundaryDistanceTolerance),new Wp(this._geom[2],this._boundaryDistanceTolerance)]},Jp={TOLERANCE:{configurable:!0}};Zp.prototype.reportResult=function(t,e,n){cu.out.println("Overlay result invalid - A:"+Ka.toLocationSymbol(e[0])+" B:"+Ka.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Ka.toLocationSymbol(e[2]))},Zp.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Zp.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Zp.hasLocation(this._location,Ka.BOUNDARY)||this.isValidResult(r,this._location)}},Zp.prototype.addTestPts=function(t){var e=new Hp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Zp.prototype.isValidResult=function(t,e){var n=Vp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Ka.INTERIOR);return r||this.reportResult(t,e,n),r},Zp.prototype.getInvalidLocation=function(){return this._invalidLocation},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Zp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(yp.computeSizeBasedSnapTolerance(t),yp.computeSizeBasedSnapTolerance(e))},Zp.isValid=function(t,e,n,r){return new Zp(t,e,r).isValid(n)},Jp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Zp,Jp);var Qp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Qp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Qp.prototype.combine=function(){for(var t=new Xu,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.combine=function(){if(1===arguments.length){var t=arguments[0];return new Qp(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Qp(Qp.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Qp(Qp.createList(r,i,o)).combine()}},Qp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Qp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Xu;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Xu;return s.add(r),s.add(i),s.add(o),s}};var $p=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Xu)},tf={STRTREE_NODE_CAPACITY:{configurable:!0}};$p.prototype.reduceToGeometries=function(t){for(var e=new Xu,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Za(r,Yu)?i=this.unionTree(r):r instanceof Lu&&(i=r),e.add(i)}return e},$p.prototype.extractByEnvelope=function(t,e,n){for(var r=new Xu,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},$p.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Qp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},$p.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Sc($p.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},$p.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=$p.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe($p.getGeometry(e,n),$p.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},$p.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},$p.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},$p.prototype.unionActual=function(t,e){return $p.restrictToPolygons(t.union(e))},$p.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},$p.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Xu,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Qp.combine(r)},$p.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.restrictToPolygons=function(t){if(Za(t,ml))return t;var e=Yh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(kl.toPolygonArray(e))},$p.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},$p.union=function(t){return new $p(t).union()},tf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties($p,tf);var ef=function(){};ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Vp.createEmptyResult(Vp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Vp.UNION)};var nf=function(){return new Ti};Ti.prototype={constructor:Ti,reset:function(){this.s=this.t=0},add:function(t){Ri(rf,t,this.t),Ri(this,rf.s,this.s),this.s?this.t+=rf.t:this.s=rf.t},valueOf:function(){return this.s}};var rf=new Ti,of=1e-6,sf=Math.PI,af=sf/2,uf=sf/4,lf=2*sf,cf=180/sf,hf=sf/180,pf=Math.abs,ff=Math.atan,df=Math.atan2,gf=Math.cos,yf=Math.exp,_f=Math.log,vf=Math.sin,mf=Math.sqrt,bf=Math.tan,xf={Feature:function(t,e){Pi(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Pi(n[r].geometry,e)}},Ef={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Mi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Mi(n[r],e,0)},Polygon:function(t,e){ji(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ji(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Pi(n[r],e)}},wf=function(t,e){t&&xf.hasOwnProperty(t.type)?xf[t.type](t,e):Pi(t,e)},Of=(nf(),nf(),nf(),function(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t});Bi.invert=Bi;var Cf=function(){var n,e=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){e.push(n=[])},lineEnd:Ni,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}},Sf=function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,p=e[1]-u;if(s=n-a,h||!(0<s)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(0<h){if(c<s)return;l<s&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(c<s)return;l<s&&(l=s)}else if(0<h){if(s<l)return;s<c&&(c=s)}if(s=r-u,p||!(0<s)){if(s/=p,p<0){if(s<l)return;s<c&&(c=s)}else if(0<p){if(c<s)return;l<s&&(l=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(c<s)return;l<s&&(l=s)}else if(0<p){if(s<l)return;s<c&&(c=s)}return 0<l&&(t[0]=a+l*h,t[1]=u+l*p),c<1&&(e[0]=a+c*h,e[1]=u+c*p),!0}}}}},If=function(t,e){return pf(t[0]-e[0])<of&&pf(t[1]-e[1])<of},Tf=function(t,e,n,r,o){var s,i,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],i=t[e];if(If(r,i)){for(o.lineStart(),s=0;s<e;++s)o.point((r=t[s])[0],r[1]);o.lineEnd()}else a.push(n=new Ki(r,t,null,!0)),u.push(n.o=new Ki(r,null,n,!1)),a.push(n=new Ki(i,t,null,!1)),u.push(n.o=new Ki(i,null,n,!0))}}),a.length){for(u.sort(e),Hi(a),Hi(u),s=0,i=u.length;s<i;++s)u[s].e=n=!n;for(var l,c,h=a[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;l=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(s=0,i=l.length;s<i;++s)o.point((c=l[s])[0],c[1]);else r(p.x,p.n.x,1,o);p=p.n}else{if(f)for(l=p.p.z,s=l.length-1;0<=s;--s)o.point((c=l[s])[0],c[1]);else r(p.x,p.p.x,-1,o);p=p.p}l=(p=p.o).z,f=!f}while(!p.v);o.lineEnd()}}},Rf=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},Lf=(function(t){1===t.length&&(t=function(n){return function(t,e){return Rf(n(t),e)}}(t))}(Rf),function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--s]=r[e];return n}),Nf=1e9,Pf=-Nf,Mf=nf(),jf=(nf(),function(t){return t}),Af=(nf(),nf(),1/0),Ff=Af,Df=-Af,kf=Df,Gf={point:function(t,e){t<Af&&(Af=t),Df<t&&(Df=t),e<Ff&&(Ff=e),kf<e&&(kf=e)},lineStart:Ni,lineEnd:Ni,polygonStart:Ni,polygonEnd:Ni,result:function(){var t=[[Af,Ff],[Df,kf]];return Df=kf=-(Ff=Af=1/0),t}},zf=(nf(),function(v,m,b,x){return function(r,a){function e(t,e){var n=r(t,e);v(t=n[0],e=n[1])&&a.point(t,e)}function t(t,e){var n=r(t,e);p.point(n[0],n[1])}function n(){_.point=t,p.lineStart()}function i(){_.point=e,p.lineEnd()}function u(t,e){h.push([t,e]);var n=r(t,e);g.point(n[0],n[1])}function o(){g.lineStart(),h=[]}function s(){u(h[0][0],h[0][1]),g.lineEnd();var t,e,n,r,i=g.clean(),o=d.result(),s=o.length;if(h.pop(),l.push(h),h=null,s)if(1&i){if(n=o[0],0<(e=n.length-1)){for(y||(a.polygonStart(),y=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else 1<s&&2&i&&o.push(o.pop().concat(o.shift())),c.push(o.filter(Zi))}var l,c,h,p=m(a),f=r.invert(x[0],x[1]),d=Cf(),g=m(d),y=!1,_={point:e,lineStart:n,lineEnd:i,polygonStart:function(){_.point=u,_.lineStart=o,_.lineEnd=s,c=[],l=[]},polygonEnd:function(){_.point=e,_.lineStart=n,_.lineEnd=i,c=Lf(c);var t=function(t,e){var n=e[0],r=e[1],i=[vf(n),-gf(n),0],o=0,s=0;Mf.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],p=h[0],f=h[1]/2+uf,d=vf(f),g=gf(f),y=0;y<c;++y,p=v,d=b,g=x,h=_){var _=l[y],v=_[0],m=_[1]/2+uf,b=vf(m),x=gf(m),E=v-p,w=0<=E?1:-1,O=w*E,C=sf<O,S=d*b;if(Mf.add(df(S*w*vf(O),g*x+S*gf(O))),o+=C?E+w*lf:E,C^n<=p^n<=v){var I=ki(Fi(h),Fi(_));Ui(I);var T=ki(i,I);Ui(T);var R=(C^0<=E?-1:1)*Li(T[2]);(R<r||r===R&&(I[0]||I[1]))&&(s+=C^0<=E?1:-1)}}return(o<-of||o<of&&Mf<-of)^1&s}(l,f);c.length?(y||(a.polygonStart(),y=!0),Tf(c,Ji,t,b,a)):t&&(y||(a.polygonStart(),y=!0),a.lineStart(),b(null,null,1,a),a.lineEnd()),y&&(a.polygonEnd(),y=!1),c=l=null},sphere:function(){a.polygonStart(),a.lineStart(),b(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return _}}),Uf=zf(function(){return!0},function(i){var o,s=NaN,a=NaN,u=NaN;return{lineStart:function(){i.lineStart(),o=1},point:function(t,e){var n=0<t?sf:-sf,r=pf(t-s);pf(r-sf)<of?(i.point(s,a=0<(a+e)/2?af:-af),i.point(u,a),i.lineEnd(),i.lineStart(),i.point(n,a),i.point(t,a),o=0):u!==n&&sf<=r&&(pf(s-u)<of&&(s-=u*of),pf(t-n)<of&&(t-=n*of),a=function(t,e,n,r){var i,o,s=vf(t-n);return pf(s)>of?ff((vf(e)*(o=gf(r))*vf(n)-vf(r)*(i=gf(e))*vf(t))/(i*o*s)):(e+r)/2}(s,a,t,e),i.point(u,a),i.lineEnd(),i.lineStart(),i.point(n,a),o=0),i.point(s=t,a=e),u=n},lineEnd:function(){i.lineEnd(),s=a=NaN},clean:function(){return 2-o}}},function(t,e,n,r){var i;if(null==t)i=n*af,r.point(-sf,i),r.point(0,i),r.point(sf,i),r.point(sf,0),r.point(sf,-i),r.point(0,-i),r.point(-sf,-i),r.point(-sf,0),r.point(-sf,i);else if(pf(t[0]-e[0])>of){var o=t[0]<e[0]?sf:-sf;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-sf,-af]);$i.prototype={constructor:$i,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Bf=gf(30*hf),Yf=function(t,e){return+e?function(R,L){function N(t,e,n,r,i,o,s,a,u,l,c,h,p,f){var d=s-t,g=a-e,y=d*d+g*g;if(4*L<y&&p--){var _=r+l,v=i+c,m=o+h,b=mf(_*_+v*v+m*m),x=Li(m/=b),E=pf(pf(m)-1)<of||pf(n-u)<of?(n+u)/2:df(v,_),w=R(E,x),O=w[0],C=w[1],S=O-t,I=C-e,T=g*S-d*I;(L<T*T/y||.3<pf((d*S+g*I)/y-.5)||r*l+i*c+o*h<Bf)&&(N(t,e,n,r,i,o,O,C,E,_/=b,v/=b,m,p,f),f.point(O,C),N(O,C,E,_,v,m,s,a,u,l,c,h,p,f))}}return function(i){function t(t,e){t=R(t,e),i.point(t[0],t[1])}function e(){g=NaN,b.point=n,i.lineStart()}function n(t,e){var n=Fi([t,e]),r=R(t,e);N(g,y,d,_,v,m,g=r[0],y=r[1],d=t,_=n[0],v=n[1],m=n[2],16,i),i.point(g,y)}function r(){b.point=t,i.lineEnd()}function o(){e(),b.point=s,b.lineEnd=a}function s(t,e){n(u=t,e),l=g,c=y,h=_,p=v,f=m,b.point=n}function a(){N(g,y,d,_,v,m,l,c,u,h,p,f,16,i),(b.lineEnd=r)()}var u,l,c,h,p,f,d,g,y,_,v,m,b={point:t,lineStart:e,lineEnd:r,polygonStart:function(){i.polygonStart(),b.lineStart=o},polygonEnd:function(){i.polygonEnd(),b.lineStart=e}};return b}}(t,e):function(n){return Qi({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(t)},Xf=Qi({point:function(t,e){this.stream.point(t*hf,e*hf)}});no.invert=function(t,e){return[t,2*ff(yf(e))-af]},ro.invert=function(t,e){return[-e,2*ff(yf(t))-af]};var qf=function(){var t=function(n){function e(){var t=sf*u(),e=s(function(e){function t(t){return t=e(t[0]*hf,t[1]*hf),t[0]*=cf,t[1]*=cf,t}return e=Yi(e[0]*hf,e[1]*hf,e.length>2?e[2]*hf:0),t.invert=function(t){return t=e.invert(t[0]*hf,t[1]*hf),t[0]*=cf,t[1]*=cf,t},t}(s.rotate()).invert([0,0]));return c(null==h?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===no?[[Math.max(e[0]-t,h),r],[Math.min(e[0]+t,i),o]]:[[h,Math.max(e[1]-t,r)],[i,Math.min(e[1]+t,o)]])}var r,i,o,s=eo(n),a=s.center,u=s.scale,l=s.translate,c=s.clipExtent,h=null;return s.scale=function(t){return arguments.length?(u(t),e()):u()},s.translate=function(t){return arguments.length?(l(t),e()):l()},s.center=function(t){return arguments.length?(a(t),e()):a()},s.clipExtent=function(t){return arguments.length?(null==t?h=r=i=o=null:(h=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),e()):null==h?null:[[h,r],[i,o]]},e()}(ro),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=Qo,t.random=Aa,t.clusters=Fa,t.helpers=vo,t.invariant=bo,t.meta=mo,t.isolines=function(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(K(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!q(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(e,t){if(!q(t=t||{}))throw new Error("options is invalid");var n=t.zProperty||"elevation",r=t.flip,i=t.flags;K(e,"Point","input must contain Points");for(var o=function(t,n){var r={};return O(e,function(t){var e=A(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return A(t)[0]-A(e)[0]})}).sort(function(t,e){return n?A(t[0])[1]-A(e[0])[1]:A(e[0])[1]-A(t[0])[1]})}(0,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0});return Y(function(t,e,n){var r=V(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,p=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){E(t,p)}),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},r,i[s]);u[n]=a;var l=c(Q(t,a),u);o.push(l)}return o}(s,e,r,i,o),s,t))},t.convex=It,t.pointsWithinPolygon=Lt,t.concave=function(t,a){if(!q(a=a||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var u=a.maxEdge||1/0;if(!X(u))throw new Error("maxEdge is invalid");var e=Nt(function(t){var n=[],r={};return O(t,function(t){if(t.geometry){var e=t.geometry.coordinates.join("-");r.hasOwnProperty(e)||(n.push(t),r[e]=!0)}}),Y(n)}(t));if(e.features=e.features.filter(function(t){var e=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],r=t.geometry.coordinates[0][2],i=At(e,n,a),o=At(n,r,a),s=At(e,r,a);return i<=u&&o<=u&&s<=u}),e.features.length<1)return null;var n=Kt(e,a);return 1===n.coordinates.length&&(n.coordinates=n.coordinates[0],n.type="Polygon"),G(n)},t.collect=function(t,e,n,r){var i=Oo(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(e){e.properties||(e.properties={});var t=V(e),n=[];i.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).forEach(function(t){Tt([t.minX,t.minY],e)&&n.push(t.property)}),e.properties[r]=n}),t},t.flip=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ft(t)),E(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ft(t)),I(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return;Ht(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=$t(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return $t(t,e,n)});break;case"Polygon":t.coordinates=te(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return te(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=ee,t.tag=function(t,n,r,i){return t=Ft(t),n=Ft(n),O(t,function(e){e.properties||(e.properties={}),O(n,function(t){void 0===e.properties[i]&&Tt(e,t)&&(e.properties[i]=t.properties[r])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return Y(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)r=Math.floor((o+1)*Math.random()),n=i[r],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.envelope=re,t.square=ie,t.circle=se,t.midpoint=function(t,e){return oe(t,At(t,e)/2,ae(t,e))},t.center=ue,t.centerOfMass=function t(e,n){switch(J(e)){case"Point":return e;case"Polygon":var r=[];E(e,function(t){r.push(t)});var i,o,s,a,u,l,c,h,p=le(e,n),f=p.geometry.coordinates,d=0,g=0,y=0,_=r.map(function(t){return[t[0]-f[0],t[1]-f[1]]});for(i=0;i<r.length-1;i++)a=(o=_[i])[0],l=o[1],u=(s=_[i+1])[0],y+=h=a*(c=s[1])-u*l,d+=(a+u)*h,g+=(l+c)*h;if(0===y)return p;var v=1/(.5*y*6);return z([f[0]+v*d,f[1]+v*g],n);default:var m=It(e);return m?t(m,n):le(e,n)}},t.centroid=le,t.combine=function(t){function e(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return O(t,function(t){t.geometry&&(r[t.geometry.type]?e(t,t.geometry.type,!0):n[t.geometry.type]&&e(t,n[t.geometry.type],!1))}),Y(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return G({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=At,t.explode=ce,t.bbox=V,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Se(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Se(t))}),e},t.bboxPolygon=ne,t.booleanPointInPolygon=Tt,t.nearestPoint=Ie,t.nearestPointOnLine=Ke,t.nearestPointToLine=function(t,n,e){if(!q(e=e||{}))throw new Error("options is invalid");var r=e.units,i=e.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return I(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if("LineString"!==J(n))throw new Error("line must be a LineString");var o=1/0,s=null;return O(t,function(t){var e=rn(t,n,{units:r});e<o&&(o=e,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s},t.planepoint=function(t,e){var n=W(t),r=H(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],c=r[0][0],h=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],d=r[1][1],g=void 0!==s?s:r[1][2],y=r[2][0],_=r[2][1],v=void 0!==a?a:r[2][2];return(v*(u-c)*(l-d)+p*(u-f)*(l-_)+g*(u-y)*(l-h)-g*(u-c)*(l-_)-v*(u-f)*(l-h)-p*(u-y)*(l-d))/((u-c)*(l-d)+(u-f)*(l-_)+(u-y)*(l-h)-(u-c)*(l-_)-(u-f)*(l-h)-(u-y)*(l-d))},t.tin=Nt,t.bearing=ae,t.destination=oe,t.kinks=function(t){var e,n,o={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(i){e.forEach(function(t){for(var e=0;e<i.length-1;e++)for(var n=e;n<t.length-1;n++){if(i===t){if(1===Math.abs(e-n))continue;if(0===e&&n===i.length-2&&i[e][0]===i[i.length-1][0]&&i[e][1]===i[i.length-1][1])continue}var r=function(t,e,n,r,i,o,s,a){var u,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==p.x&&null!==p.y&&p:(h=(n-t)*(l=e-o)-(r-e)*(c=t-i),l=((s-i)*l-(a-o)*c)/u,c=h/u,p.x=t+l*(n-t),p.y=e+l*(r-e),0<=l&&l<=1&&(p.onLine1=!0),0<=c&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}(i[e][0],i[e][1],i[e+1][0],i[e+1][1],t[n][0],t[n][1],t[n+1][0],t[n+1][1]);r&&o.features.push(z([r[0],r[1]]))}})}),o},t.pointOnFeature=sn,t.area=un,t.along=function(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}if(!X(e))throw new Error("distance must be a number");for(var i=0,o=0;o<r.length&&!(i<=e&&o===r.length-1);o++){if(e<=i){var s=e-i;if(s){var a=ae(r[o],r[o-1])-180;return oe(r[o],s,a,n)}return z(r[o])}i+=At(r[o],r[o+1],n)}return z(r[r.length-1])},t.length=pn,t.lineSlice=function(t,e,n){var r=A(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var i,o=Ke(n,t),s=Ke(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),B(a,n.properties)},t.lineSliceAlong=fn,t.pointGrid=vn,t.truncate=mn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return R(t,function(t){e.push(t)}),Y(e)},t.lineIntersect=Ve,t.lineChunk=function(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return R(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=pn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=fn(t,e*s,e*(s+1),{units:n});r(a)}}(t,e,r,function(t){o.push(t)})}),Y(o)},t.unkinkPolygon=function(t){var n=[];return R(t,function(e){"Polygon"===e.geometry.type&&O(ts(e),function(t){n.push(U(t.geometry.coordinates,e.properties))})}),Y(n)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=W(t),e=W(e),r=r||{},i=i||100,o=o||10,new us({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=qe,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=J(t),r=J(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=mn(e,{precision:7});switch(r){case"Point":return On(t,i);case"MultiPoint":return wn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return wn(t,Ve(t,i))}},t.lineArc=In,t.polygonToLine=Rn,t.lineToPolygon=Nn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=A(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var o=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){ls(t,e,o)}),1===o.length?B(o[0],i):c(o,i);case"Polygon":return U(Dn(r,e),i);case"MultiPolygon":return u(r.map(function(t){return Dn(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Bn,t.sector=function(t,e,n,r,i){if(!q(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Xn(n)===Xn(r))return se(t,e,i);var o=A(t),s=[[o]];return E(In(t,e,n,r,i),function(t){s[0].push(t)}),s[0].push(o),U(s)},t.rhumbBearing=He,t.rhumbDistance=Je,t.rhumbDestination=qn,t.polygonTangents=function(t,e){var n,r,i,o=A(t),s=A(e);switch(J(e)){case"Polygon":n=s[0][0],r=s[0][0],i=Wn(s[0][0],s[0][s[0].length-1],o);var a=Vn(s[0],o,i,void 0,n,r);n=a[0],r=a[1];break;case"MultiPolygon":n=s[0][0][0],r=s[0][0][0],i=Wn(s[0][0][0],s[0][0][s[0][0].length-1],o),s.forEach(function(t){var e=Vn(t[0],o,i,void 0,n,r);n=e[0],r=e[1]})}return Y([z(n),z(r)])},t.rewind=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ft(t));var i=[];switch(t.type){case"GeometryCollection":return I(t,function(t){Hn(t,n)}),t;case"FeatureCollection":return O(t,function(t){O(Hn(t,n),function(t){i.push(t)})}),Y(i)}return Hn(t,n)},t.isobands=function(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(K(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!q(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=function(e,t){if(!q(t=t||{}))throw new Error("options is invalid");var n=t.zProperty||"elevation",r=t.flip,i=t.flags;K(e,"Point","input must contain Points");for(var o=function(t,n){var r={};return O(e,function(t){var e=A(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return A(t)[0]-A(e)[0]})}).sort(function(t,e){return n?A(t[0])[1]-A(e[0])[1]:A(e[0])[1]-A(t[0])[1]})}(0,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Qn(t,o,s-o),u=function(t){var n=[],r=[];t.forEach(function(t){var e=un(U([t]));r.push(e),n.push({ring:t,area:e})}),r.sort(function(t,e){return e-t});var i=[];return r.forEach(function(t){for(var e=0;e<n.length;e++)if(n[e].area===t){i.push(n[e].ring),n.splice(e,1);break}}),i}(a),l=function(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=U([e[r].lrCoordinates]),s=r+1;s<e.length;s++)if(!e[s].grouped){var a=U([e[s].lrCoordinates]);!function(t,e){for(var n=ce(t),r=0;r<n.features.length;r++)if(!Tt(n.features[r],e))return!1;return!0}(a,o)||(i.push(e[s].lrCoordinates),e[s].grouped=!0)}n.push(i)}return n}(u),c={};c.groupedRings=l,c[n]=o+"-"+s,r.push(c)}return r}(s,e,r);return Y((a=function(t,e,n){var r=V(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,p=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(p)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!q(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,o[e]);return n[r]=t[r],u(t.groupedRings,n)}))},t.transformRotate=er,t.transformScale=nr,t.transformTranslate=function(t,n,r,e){if(!q(e=e||{}))throw new Error("options is invalid");var i=e.units,o=e.zTranslation,s=e.mutate;if(!t)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===n&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return n<0&&(n=-n,r=-r),!1!==s&&void 0!==s||(t=Ft(t)),E(t,function(t){var e=A(qn(t,n,r,{units:i}));t[0]=e[0],t[1]=e[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=J(t),o=t.properties;switch(i){case"LineString":return sr(t,e,r);case"MultiLineString":var s=[];return R(t,function(t){s.push(sr(t,e,r).geometry.coordinates)}),c(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=ua.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){sa.findEdgeRingContaining(t,r)&&r.push(t)}),Y(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,n){var r;return R(t,function(e){R(n,function(t){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!lr(e,t);case"Polygon":return!Tt(t,e)}break;case"LineString":switch(e.type){case"Point":return!lr(t,e);case"LineString":return!function(t,e){return 0<Ve(t,e).features.length}(t,e);case"Polygon":return!cr(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Tt(e,t);case"LineString":return!cr(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Tt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Tt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(e.geometry,t.geometry)})}),r},t.booleanContains=function(t,e){var n=J(t),r=J(e),i=H(t),o=H(e),s=A(t),a=A(e);switch(n){case"Point":switch(r){case"Point":return pr(s,a);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(pr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(pr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return dn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(dn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!dn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(dn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!dn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Tt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=V(t),o=V(e);if(!hr(i,o))return!1;for(;r<e.coordinates.length-1;r++){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1]);if(Tt({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){n=!0;break}}return n}(i,o);case"Polygon":return function(t,e){var n=V(t),r=V(e);if(!hr(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Tt(e.coordinates[0][i],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Tt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=J(t),r=J(e),i=H(t),o=H(e);switch(n){case"MultiPoint":switch(r){case"LineString":return fr(i,o);case"Polygon":return gr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return fr(o,i);case"LineString":return function(t,e){if(0<Ve(t,e).features.length)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),yr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return dr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return gr(o,i);case"LineString":return dr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Kn,t.booleanOverlap=br,t.booleanPointOnLine=dn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new fa({precision:6}).compare(Ht(t),Ht(e))},t.booleanWithin=gn,t.clone=Ft,t.cleanCoords=Ht,t.clustersDbscan=function(n,t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var r=e.minPoints,i=e.units;if(K(n,"Point","Input must contain Points"),null==t)throw new Error("maxDistance is required");if(!(0<Math.sign(t)))throw new Error("Invalid maxDistance");if(!(null==r||0<Math.sign(r)))throw new Error("Invalid minPoints");n=Ft(n),r=r||3;var o=new va.DBSCAN,s=-1;return o.run(S(n),h(t,i),r,At).forEach(function(t){s++,t.forEach(function(t){var e=n.features[t];e.properties||(e.properties={}),e.properties.cluster=s,e.properties.dbscan="core"})}),o.noise.forEach(function(t){var e=n.features[t];e.properties||(e.properties={}),e.properties.cluster?e.properties.dbscan="edge":e.properties.dbscan="noise"}),n},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;K(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Ft(t));var o=S(t),s=o.slice(0,n),a=wa(o,n,s),u={};return a.centroids.forEach(function(t,e){u[e]=t}),O(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]}),t},t.pointToLineDistance=rn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Er(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Er(e,"line2"))throw new Error("line2 must be a LineString");for(var n=qe(Ht(t)).features,r=qe(Ht(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){var n=p(He(t[0],t[1])),r=p(He(e[0],e[1]));return n===r}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,e,n){if(!q(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||Y([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!X(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=W(t),a=W(e);switch(t=z(s),e=z(a),J(o)){case"FeatureCollection":if(0===o.features.length)return B([s,a]);break;case"Polygon":o=Y([G(H(o))]);break;default:throw new Error("invalid obstacles")}var u=o;u.features.push(t),u.features.push(e);var l=V(nr(ne(V(u)),1.15));r=r||At([l[0],l[1]],[l[2],l[1]],n)/100,u.features.pop(),u.features.pop();for(var c=l[0],h=l[1],p=l[2],f=l[3],d=r/At([c,h],[p,h],n)*(p-c),g=r/At([c,h],[c,f],n)*(f-h),y=p-c,_=f-h,v=(y-Math.floor(y/d)*d)/2,m=[],b=[],x=[],E=[],w=1/0,O=1/0,C=f-(_-Math.floor(_/g)*g)/2,S=0;h<=C;){for(var I=[],T=[],R=c+v,L=0;R<=p;){var N=z([R,C]),P=function(t,e){for(var n=0;n<e.features.length;n++)if(Tt(t,e.features[n]))return!0;return!1}(N,o);I.push(P?0:1),T.push(R+"|"+C);var M=At(N,t);!P&&M<w&&(w=M,x={x:L,y:S});var j=At(N,e);!P&&j<O&&(O=j,E={x:L,y:S}),R+=d,L++}b.push(I),m.push(T),C-=g,S++}var A=new Or(b,{diagonal:!0}),F=A.grid[x.y][x.x],D=A.grid[E.y][E.x],k=[s];return Oa.search(A,F,D).forEach(function(t){var e=m[t.x][t.y].split("|");k.push([+e[0],+e[1]])}),k.push(a),Ht(B(k))},t.voronoi=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return K(t,"Point","points"),Y(function(){function e(r){return new Kr(r.map(function(t,e){var n=[Math.round(i(t,e,r)/Ma)*Ma,Math.round(o(t,e,r)/Ma)*Ma];return n.index=e,n.data=t,n}),n)}var i=Ir,o=Tr,n=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(t){return arguments.length?(i="function"==typeof t?t:Ca(+t),e):i},e.y=function(t){return arguments.length?(o="function"==typeof t?t:Ca(+t),e):o},e.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},e.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],e):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},e}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Hr))},t.ellipse=Zr,t.centerMean=Qr,t.centerMedian=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!X(n))throw new Error("counter must be a number");var r=e.weight,i=Qr(t,{weight:e.weight}),o=Y([]);return O(t,function(t){o.features.push(le(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},function t(o,e,n,r){var i=n.properties.tolerance||.001,s=0,a=0,u=0,l=0;if(O(n,function(t){var e=t.properties.weight,n=null==e?1:e;if(!X(n=Number(n)))throw new Error("weight value must be a number");if(0<n){l+=1;var r=n*At(t,o);0===r&&(r=1);var i=n/r;s+=t.geometry.coordinates[0]*i,a+=t.geometry.coordinates[1]*i,u+=i}}),l<1)throw new Error("no features to measure");var c=s/u,h=a/u;return 1===l||0===r||Math.abs(c-e[0])<i&&Math.abs(h-e[1])<i?z([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),t([c,h],o,n,r-1))}(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!X(n))throw new Error("steps must be a number");if(!q(i))throw new Error("properties must be a number");var o=S(t).length,s=Qr(t,{weight:r}),a=0,u=0,l=0;O(t,function(t){var e=t.properties[r]||1,n=$r(A(t),A(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e});var c=a-u,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),p=2*l,f=Math.atan((c+h)/p),d=180*f/Math.PI,g=0,y=0,_=0;O(t,function(t){var e=t.properties[r]||1,n=$r(A(t),A(s));g+=Math.pow(n.x*Math.cos(f)-n.y*Math.sin(f),2)*e,y+=Math.pow(n.x*Math.sin(f)+n.y*Math.cos(f),2)*e,_+=e});var v=Math.sqrt(2*g/_),m=Math.sqrt(2*y/_),b=Zr(s,v,m,{units:"degrees",angle:d,steps:n,properties:i}),x=Lt(t,Y([b])),E={meanCenterCoordinates:A(s),semiMajorAxis:v,semiMinorAxis:m,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*S(x).length/o};return b.properties.standardDeviationalEllipse=E,b},t.difference=function(t,e){var n=H(t),r=H(e),i=t.properties||{};if(n=Ii(n),r=Ii(r),!n)return null;if(!r)return G(n,i);var o=new Xl,s=o.read(n),a=o.read(r),u=Vp.difference(s,a);return u.isEmpty()?null:G((new ql).write(u),i)},t.buffer=function(t,n,e){var r=(e=e||{}).units,i=e.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof e)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return I(t,function(t){var e=io(t,n,r,i);e&&o.push(e)}),Y(o);case"FeatureCollection":return O(t,function(t){var e=io(t,n,r,i);e&&O(e,function(t){t&&o.push(t)})}),Y(o)}return io(t,n,r,i)},t.union=so,t.intersect=ao,t.dissolve=function(t,e){if(!q(e=e||{}))throw new Error("options is invalid");var i=e.propertyName;K(t,"Polygon","dissolve");var n=Ft(t),o=n.features,s=[];o.forEach(function(t,e){t.properties.origIndexPosition=e});var a=Be();for(var u in a.load(n),o){var l=o[u],c=!1;if(a.search(l).features.forEach(function(t){l=o[u];var e=t.properties.origIndexPosition;if(0<s.length&&0!==e)if(e>s[s.length-1])e-=s.length;else{var n=function(r,t){var i,o;if(!Array.isArray(t))throw new Error("Get closest expects an array as second argument");return t.forEach(function(t,e){var n=t-r;0<=n&&(void 0===o||n<o)&&(o=n,i=e)}),i}(e,s);0!==n&&(e-=n)}if(e!==+u){var r=o[e];r&&l&&(void 0!==i&&r.properties[i]!==l.properties[i]||br(l,r)&&function(t,e){var n=B(S(t)),r=B(S(e));return 0<Ve(n,r).features.length}(l,r)&&(o[u]=so(l,r),s.push(t.properties.origIndexPosition),s.sort(function(t,e){return t-e}),a.remove(t),o.splice(e,1),l.properties.origIndexPosition=u,a.remove(l,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),c=!0))}}),c){if(!l)continue;l.properties.origIndexPosition=u,a.insert(l),u--}}return o.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),n},t.hexGrid=uo,t.mask=function(t,e){var n=function(t){return U(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var i=[],o=[];return R(t,function(t){var e=t.geometry.coordinates,n=e[0],r=e.slice(1);i.push(U([n])),r.forEach(function(t){o.push(U([t]))})}),[Y(i),Y(o)]}(t),i=r[0],o=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),R(e,function(t){r.push(t.geometry.coordinates[0])}),R(n,function(t){r.push(t.geometry.coordinates[0])}),U(r)}(n,i=lo(i),o=lo(o))},t.squareGrid=ho,t.triangleGrid=po,t.interpolate=function(e,t,a){if("object"!=typeof(a=a||{}))throw new Error("options is invalid");var u=a.gridType,l=a.property,c=a.weight;if(!e)throw new Error("points is required");if(K(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(void 0!==c&&"number"!=typeof c)throw new Error("weight must be a number");l=l||"elevation",u=u||"square",c=c||1;var n,r=V(e);switch(u){case"point":case"points":n=vn(r,t,a);break;case"square":case"squares":n=ho(r,t,a);break;case"hex":case"hexes":n=uo(r,t,a);break;case"triangle":case"triangles":n=po(r,t,a);break;default:throw new Error("invalid gridType")}var h=[];return O(n,function(i){var o=0,s=0;O(e,function(t){var e,n=At("point"===u?i:le(i),t,a);if(void 0!==l&&(e=t.properties[l]),void 0===e&&(e=t.geometry.coordinates[2]),void 0===e)throw new Error("zValue is missing");0===n&&(o=e);var r=1/Math.pow(n,c);s+=r,o+=r*e});var t=Ft(i);t.properties[l]=o/s,h.push(t)}),Y(h)},t.pointOnSurface=sn,t.polygonToLineString=Rn,t.lineStringToPolygon=Nn,t.inside=Tt,t.within=Lt,t.bezier=ee,t.nearest=Ie,t.pointOnLine=Ke,t.lineDistance=pn,t.radians2degrees=f,t.degrees2radians=v,t.distanceToDegrees=l,t.distanceToRadians=g,t.radiansToDistance=d,t.bearingToAngle=p,t.convertDistance=h,t.toMercator=Qe,t.toWgs84=$e,t.randomPosition=ti,t.randomPoint=ei,t.randomPolygon=ni,t.randomLineString=ri,t.getCluster=oi,t.clusterEach=si,t.clusterReduce=ai,t.createBins=ui,t.applyFilter=li,t.propertiesContainsFilter=ci,t.filterProperties=hi,t.earthRadius=fo,t.factors=go,t.unitsFactors=yo,t.areaFactors=_o,t.feature=G,t.geometry=e,t.point=z,t.points=n,t.polygon=U,t.polygons=r,t.lineString=B,t.lineStrings=i,t.featureCollection=Y,t.multiLineString=c,t.multiPoint=o,t.multiPolygon=u,t.geometryCollection=s,t.round=a,t.radiansToLength=d,t.lengthToRadians=g,t.lengthToDegrees=l,t.bearingToAzimuth=p,t.radiansToDegrees=f,t.degreesToRadians=v,t.convertLength=h,t.convertArea=y,t.isNumber=X,t.isObject=q,t.validateBBox=_,t.validateId=m,t.getCoord=W,t.getCoords=A,t.containsNumber=F,t.geojsonType=D,t.featureOf=k,t.collectionOf=K,t.getGeom=H,t.getGeomType=Z,t.getType=J,t.coordEach=E,t.coordReduce=b,t.propEach=x,t.propReduce=w,t.featureEach=O,t.featureReduce=C,t.coordAll=S,t.geomEach=I,t.geomReduce=T,t.flattenEach=R,t.flattenReduce=L,t.segmentEach=N,t.segmentReduce=P,t.lineEach=M,t.lineReduce=j,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";n.r(e);var r=n(99);n.d(e,"Circle",function(){return r.a});var i=n(87);n.d(e,"Geometry",function(){return i.a});var o=n(62);n.d(e,"LineString",function(){return o.a});var s=n(89);n.d(e,"MultiLineString",function(){return s.a});var a=n(72);n.d(e,"MultiPoint",function(){return a.a});var u=n(91);n.d(e,"MultiPolygon",function(){return u.a});var l=n(40);n.d(e,"Point",function(){return l.a});var c=n(30);n.d(e,"Polygon",function(){return c.default})},function(t,e,n){t.exports=n(138)},function(e,t,n){!function(){"use strict";function t(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}var r=n(139);t.prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map(function(t){return r.pointsToString(t.points)}).join(", ")+"]"},addCurve:function(t){this.curves.push(t),this._3d=this._3d||t._3d},length:function(){return this.curves.map(function(t){return t.length()}).reduce(function(t,e){return t+e})},curve:function(t){return this.curves[t]},bbox:function(){for(var t=this.curves,e=t[0].bbox(),n=1;n<t.length;n++)r.expandbox(e,t[n].bbox());return e},offset:function(e){var n=[];return this.curves.forEach(function(t){n=n.concat(t.offset(e))}),new t(n)}},e.exports=t}()},function(t,e,n){var u=n(160),s={x:!1,y:!1};function l(t,e,n){if("Z"!==e){if("M"!==e){var r=[!1,s.x,s.y].concat(n),i=new(t.bind.apply(t,r)),o=n.slice(-2);return s={x:o[0],y:o[1]},i}s={x:n[0],y:n[1]}}}t.exports=function(t,e){for(var n,r,i=u(e).split(" "),o=new RegExp("[MLCQZ]",""),s=[],a={C:6,Q:4,L:2,M:2};i.length;)n=i.splice(0,1)[0],o.test(n)&&(r=l(t,n,i.splice(0,a[n]).map(parseFloat)))&&s.push(r);return new t.PolyBezier(s)}},function(t,e){t.exports=function(t){var e,n,r,i,o,s,a=(t=t.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ")).replace(/([a-zA-Z])\s?/g,"|$1").split("|"),u=a.length,l=[],c=0,h=0,p=0,f=0,d=0,g=0,y=0,_=0,v="";for(e=1;e<u;e++)if(i=(r=(n=a[e]).substring(0,1)).toLowerCase(),o=(l=(l=n.replace(r,"").trim().split(" ")).filter(function(t){return""!==t}).map(parseFloat)).length,"m"===i){if(v+="M ","m"===r?(p+=l[0],f+=l[1]):(p=l[0],f=l[1]),v+=(c=p)+" "+(h=f)+" ",2<o)for(s=0;s<o;s+=2)"m"===r?(p+=l[s],f+=l[s+1]):(p=l[s],f=l[s+1]),v+=["L",p,f,""].join(" ")}else if("l"===i)for(s=0;s<o;s+=2)"l"===r?(p+=l[s],f+=l[s+1]):(p=l[s],f=l[s+1]),v+=["L",p,f,""].join(" ");else if("h"===i)for(s=0;s<o;s++)"h"===r?p+=l[s]:p=l[s],v+=["L",p,f,""].join(" ");else if("v"===i)for(s=0;s<o;s++)"v"===r?f+=l[s]:f=l[s],v+=["L",p,f,""].join(" ");else if("q"===i)for(s=0;s<o;s+=4)"q"===r?(d=p+l[s],g=f+l[s+1],p+=l[s+2],f+=l[s+3]):(d=l[s],g=l[s+1],p=l[s+2],f=l[s+3]),v+=["Q",d,g,p,f,""].join(" ");else if("t"===i)for(s=0;s<o;s+=2)d=p+(p-d),g=f+(f-g),"t"===r?(p+=l[s],f+=l[s+1]):(p=l[s],f=l[s+1]),v+=["Q",d,g,p,f,""].join(" ");else if("c"===i)for(s=0;s<o;s+=6)"c"===r?(d=p+l[s],g=f+l[s+1],y=p+l[s+2],_=f+l[s+3],p+=l[s+4],f+=l[s+5]):(d=l[s],g=l[s+1],y=l[s+2],_=l[s+3],p=l[s+4],f=l[s+5]),v+=["C",d,g,y,_,p,f,""].join(" ");else if("s"===i)for(s=0;s<o;s+=4)d=p+(p-y),g=f+(f-_),"s"===r?(y=p+l[s],_=f+l[s+1],p+=l[s+2],f+=l[s+3]):(y=l[s],_=l[s+1],p=l[s+2],f=l[s+3]),v+=["C",d,g,y,_,p,f,""].join(" ");else"z"===i&&(v+="Z ",p=c,f=h);return v.trim()}},function(t,e,n){var r=n(162);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(141)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(140)(!1)).push([t.i,".ol-dragbox {\n  background-color: rgba(255, 255, 255, 0.4);\n  border: 1px solid #649600;\n}\n",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,o=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,n){var r=n(165);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(141)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(140)(!1)).push([t.i,".toolbar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  background-color: aliceblue;\n}\n.toolbar ul {\n  text-align: center;\n  margin: 0;\n  padding: 0 0;\n  list-style: none;\n  border: 1px solid black;\n}\n.toolbar ul li {\n  padding: 10 10;\n}\n.toolbar ul li a {\n  cursor: pointer;\n}\n.toolbar ul li span {\n  position: absolute;\n  margin-left: 20px;\n  background-color: white;\n}\n.toolbar ul li span .sketch-type {\n  cursor: pointer;\n  margin-left: 0;\n  padding: 10 10;\n  position: relative;\n  border: 1px solid black;\n}\n.toolbar ul li:hover {\n  background-color: palevioletred;\n}\n.toolbar ul .active {\n  background-color: red;\n}\n.infoBox {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 200px;\n  height: 180px;\n  z-index: 1;\n  background-color: white;\n  border: 1px solid black;\n}\n.infoBox header {\n  padding: 2px 3px;\n  font-weight: bold;\n}\n.infoBox label {\n  padding: 2px 3px;\n}\n.infoBox input {\n  width: 150px;\n}\n.infoBox div {\n  text-align: center;\n}\n.infoBox div button {\n  margin-top: 10px;\n  width: 100px;\n}\n.infoBox footer div {\n  padding: 2px 3px;\n  text-align: left;\n}\n.layerPicker {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n  background-color: white;\n}\n.layerPicker ul {\n  text-align: center;\n  margin: 0;\n  padding: 0 0;\n  list-style: none;\n  border: 1px solid black;\n}\n.layerPicker ul li {\n  padding: 10 10;\n  cursor: pointer;\n}\n.layerPicker ul li:hover {\n  background-color: palevioletred;\n}\n.layerPicker ul li:active {\n  background-color: red;\n}\n",""])},function(t,e,n){"use strict";n.r(e);var E=n(38),w=n(0),c=n(2);function r(t,e,n,r){var i=document.createElement("script"),o="olc_"+Object(c.c)(e);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+o;var a=setTimeout(function(){s(),n&&n()},1e4);window[o]=function(t){clearTimeout(a),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}var g=n(9),h=n(23),i=n(43),f=n(24),d=n(34),o=function(n){function t(t){var e=void 0!==t.hidpi&&t.hidpi;n.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Object(g.d)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:h.a.LOADING,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.hidpi_=e,this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,r("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getApiKey=function(){return this.apiKey_},t.prototype.getImagerySet=function(){return this.imagerySet_},t.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],n=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,r=this.getProjection(),i=Object(d.c)(r),o=this.hidpi_?2:1,s=e.imageWidth==e.imageHeight?e.imageWidth/o:[e.imageWidth/o,e.imageHeight/o],a=Object(d.b)({extent:i,minZoom:e.zoomMin,maxZoom:n,tileSize:s});this.tileGrid=a;var u=this.culture_,l=this.hidpi_;if(this.tileUrlFunction=Object(E.b)(e.imageUrlSubdomains.map(function(t){var i=[0,0,0],o=e.imageUrl.replace("{subdomain}",t).replace("{culture}",u);return function(t,e,n){if(t){Object(f.a)(t[0],t[1],-t[2]-1,i);var r=o;return l&&(r+="&dpi=d1&device=mobile"),r.replace("{quadkey}",Object(f.f)(i))}}})),e.imageryProviders){var p=Object(g.g)(Object(g.d)("EPSG:4326"),this.getProjection());this.setAttributions(function(l){var c=[],t=l.viewState,h=this.getTileGrid().getTileCoordForCoordAndResolution(t.center,t.resolution)[0];return e.imageryProviders.map(function(t){for(var e=!1,n=t.coverageAreas,r=0,i=n.length;r<i;++r){var o=n[r];if(h>=o.zoomMin&&h<=o.zoomMax){var s=o.bbox,a=[s[1],s[0],s[3],s[2]],u=Object(w.a)(a,p);if(Object(w.F)(u,l.extent)){e=!0;break}}}e&&c.push(t.attribution)}),c.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),c}.bind(this))}this.setState(h.a.READY)}else this.setState(h.a.ERROR)},t}(i.a),y=n(7),s=n(68),a=function(e){function t(t){e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,wrapX:t.wrapX}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getConfig=function(){return this.config_},t.prototype.updateConfig=function(t){Object(y.a)(this.config_,t),this.initializeMap_()},t.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},t.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var n=new XMLHttpRequest;n.addEventListener("load",this.handleInitResponse_.bind(this,t)),n.addEventListener("error",this.handleInitError_.bind(this)),n.open("POST",e),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.config_))}},t.prototype.handleInitResponse_=function(t,e){var n=e.target;if(!n.status||200<=n.status&&n.status<300){var r;try{r=JSON.parse(n.responseText)}catch(t){return void this.setState(h.a.ERROR)}this.applyTemplate_(r),this.templateCache_[t]=r,this.setState(h.a.READY)}else this.setState(h.a.ERROR)},t.prototype.handleInitError_=function(t){this.setState(h.a.ERROR)},t.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},t}(s.default),O=n(11),u=n(48),l=n(3),p=n(16),C=n(1),S=n(4),_=n(40),v=n(57),m=function(e){function t(t){e.call(this,{attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.features=[],this.geometryFunction=t.geometryFunction||function(t){var e=t.getGeometry();return Object(O.a)(e.getType()==l.a.POINT,10),e},this.source=t.source,Object(C.a)(this.source,S.a.CHANGE,this.refresh,this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getDistance=function(){return this.distance},t.prototype.getSource=function(){return this.source},t.prototype.loadFeatures=function(t,e,n){this.source.loadFeatures(t,e,n),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},t.prototype.setDistance=function(t){this.distance=t,this.refresh()},t.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),e.prototype.refresh.call(this)},t.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=Object(w.j)(),e=this.distance*this.resolution,n=this.source.getFeatures(),r={},i=0,o=n.length;i<o;i++){var s=n[i];if(!(Object(c.c)(s)in r)){var a=this.geometryFunction(s);if(a){var u=a.getCoordinates();Object(w.m)(u,t),Object(w.c)(t,e,t);var l=this.source.getFeaturesInExtent(t);l=l.filter(function(t){var e=Object(c.c)(t);return!(e in r)&&(r[e]=!0)}),this.features.push(this.createCluster(l))}}}}},t.prototype.createCluster=function(t){for(var e=[0,0],n=t.length-1;0<=n;--n){var r=this.geometryFunction(t[n]);r?Object(p.a)(e,r.getCoordinates()):t.splice(n,1)}Object(p.g)(e,1/t.length);var i=new u.default(new _.a(e));return i.set("features",t),i},t}(v.a),b=n(42),x=n(13),I=n(10),T=n(21),R=n(96),L=n(65),N=n(132),P=function(y){function t(t,e,n,r,i,o){var s=t.getExtent(),a=e.getExtent(),u=a?Object(w.B)(n,a):n,l=Object(w.x)(u),c=Object(L.a)(t,e,l,r),h=b.b,p=new N.a(t,e,u,s,c*h),f=o(p.calculateSourceExtent(),c,i),d=x.a.LOADED;f&&(d=x.a.IDLE);var g=f?f.getPixelRatio():1;y.call(this,n,r,g,d),this.targetProj_=e,this.maxSourceExtent_=s,this.triangulation_=p,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=f,this.sourcePixelRatio_=g,this.canvas_=null,this.sourceListenerKey_=null}return y&&(t.__proto__=y),((t.prototype=Object.create(y&&y.prototype)).constructor=t).prototype.disposeInternal=function(){this.state==x.a.LOADING&&this.unlistenSource_(),y.prototype.disposeInternal.call(this)},t.prototype.getImage=function(){return this.canvas_},t.prototype.getProjection=function(){return this.targetProj_},t.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==x.a.LOADED){var e=Object(w.E)(this.targetExtent_)/this.targetResolution_,n=Object(w.A)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(L.b)(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},t.prototype.load=function(){if(this.state==x.a.IDLE){this.state=x.a.LOADING,this.changed();var t=this.sourceImage_.getState();t==x.a.LOADED||t==x.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(C.a)(this.sourceImage_,S.a.CHANGE,function(t){var e=this.sourceImage_.getState();e!=x.a.LOADED&&e!=x.a.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},t.prototype.unlistenSource_=function(){Object(C.e)(this.sourceListenerKey_),this.sourceListenerKey_=null},t}(R.a),M=n(71),j="imageloadstart",A="imageloadend",F="imageloaderror",D=function(n){function t(t,e){n.call(this,t),this.image=e}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(T.a);function k(t,e){t.getImage().src=e}var G=function(e){function t(t){e.call(this,{attributions:t.attributions,projection:t.projection,state:t.state}),this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getResolutions=function(){return this.resolutions_},t.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Object(I.h)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},t.prototype.getImage=function(t,e,n,r){var i=this.getProjection();if(b.a&&i&&r&&!Object(g.c)(i,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(g.c)(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&Object(w.p)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new P(i,r,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,i)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(r=i),this.getImageInternal(t,e,n,r)},t.prototype.getImageInternal=function(t,e,n,r){return Object(c.b)()},t.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case x.a.LOADING:this.loading=!0,this.dispatchEvent(new D(j,e));break;case x.a.LOADED:this.loading=!1,this.dispatchEvent(new D(A,e));break;case x.a.ERROR:this.loading=!1,this.dispatchEvent(new D(F,e))}},t}(M.a),z=function(s){function t(t,e,n,r,i,o){s.call(this,t,e,n,x.a.IDLE),this.src_=r,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.imageListenerKeys_=null,this.state=x.a.IDLE,this.imageLoadFunction_=o}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=x.a.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(w.A)(this.extent)/this.image_.height),this.state=x.a.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state!=x.a.IDLE&&this.state!=x.a.ERROR||(this.state=x.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(C.b)(this.image_,S.a.ERROR,this.handleImageError_,this),Object(C.b)(this.image_,S.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},t.prototype.setImage=function(t){this.image_=t},t.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(C.e),this.imageListenerKeys_=null},t}(R.a);function U(t,e){var n=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))});var r=n.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var B=function(n){function t(t){var e=t||{};n.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.hidpi_=void 0===e.hidpi||e.hidpi,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:k,this.params_=e.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),n=this.hidpi_?n:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&Object(w.g)(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(y.a)(o,this.params_);var s=((t=t.slice())[0]+t[2])/2,a=(t[1]+t[3])/2;if(1!=this.ratio_){var u=this.ratio_*Object(w.E)(t)/2,l=this.ratio_*Object(w.A)(t)/2;t[0]=s-u,t[1]=a-l,t[2]=s+u,t[3]=a+l}var c=e/n,h=Math.ceil(Object(w.E)(t)/c),p=Math.ceil(Object(w.A)(t)/c);t[0]=s-c*h/2,t[2]=s+c*h/2,t[1]=a-c*p/2,t[3]=a+c*p/2,this.imageSize_[0]=h,this.imageSize_[1]=p;var f=this.getRequestUrl_(t,this.imageSize_,n,r,o);return this.image_=new z(t,e,n,f,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(C.a)(this.image_,S.a.CHANGE,this.handleImageChange,this),this.image_},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.getRequestUrl_=function(t,e,n,r,i){var o=r.getCode().split(":").pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*n);var s=this.url_,a=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return a==s&&Object(O.a)(!1,50),U(a,i)},t.prototype.getUrl=function(){return this.url_},t.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},t.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},t.prototype.updateParams=function(t){Object(y.a)(this.params_,t),this.image_=null,this.changed()},t}(G),Y=n(95),X=function(n){function t(t){var e=t||{};n.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&Object(w.g)(i.getExtent(),t))return i;t=t.slice(),Object(w.J)(t,this.ratio_);var o=[Object(w.E)(t)/e*n,Object(w.A)(t)/e*n],s=this.canvasFunction_.call(this,t,e,n,o,r);return s&&(i=new Y.a(t,e,n,s)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i},t}(G);var q=function(e){function t(t){e.call(this,{projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96,this.params_=t.params||{},this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:k,this.hidpi_=void 0===t.hidpi||t.hidpi,this.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.ratio_=void 0!==t.ratio?t.ratio:1,this.useOverlay_=void 0!==t.useOverlay&&t.useOverlay,this.image_=null,this.renderedRevision_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e),n=this.hidpi_?n:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&Object(w.g)(i.getExtent(),t))return i;1!=this.ratio_&&(t=t.slice(),Object(w.J)(t,this.ratio_));var o=[Object(w.E)(t)/e*n,Object(w.A)(t)/e*n];if(void 0!==this.url_){var s=this.getUrl(this.url_,this.params_,t,o,r);i=new z(t,e,n,s,this.crossOrigin_,this.imageLoadFunction_),Object(C.a)(i,S.a.CHANGE,this.handleImageChange,this)}else i=null;return this.image_=i,this.renderedRevision_=this.getRevision(),i},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.updateParams=function(t){Object(y.a)(this.params_,t),this.changed()},t.prototype.getUrl=function(t,e,n,r,i){var o=function(t,e,n,r){var i=Object(w.E)(t),o=Object(w.A)(t),s=e[0],a=e[1],u=.0254/r;return s*o<a*i?i*n/(s*u):o*n/(a*u)}(n,r,this.metersPerUnit_,this.displayDpi_),s=Object(w.x)(n),a={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:s[0],SETVIEWCENTERY:s[1]};return Object(y.a)(a,e),U(t,a)},t.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},t}(G),V=n(14),W=function(l){function t(t){var e=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:k;l.call(this,{attributions:t.attributions,projection:Object(g.d)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image_=new z(this.imageExtent_,void 0,1,this.url_,e,n),this.imageSize_=t.imageSize?t.imageSize:null,Object(C.a)(this.image_,S.a.CHANGE,this.handleImageChange,this)}return l&&(t.__proto__=l),((t.prototype=Object.create(l&&l.prototype)).constructor=t).prototype.getImageExtent=function(){return this.imageExtent_},t.prototype.getImageInternal=function(t,e,n,r){return Object(w.F)(t,this.image_.getExtent())?this.image_:null},t.prototype.getUrl=function(){return this.url_},t.prototype.handleImageChange=function(t){if(this.image_.getState()==x.a.LOADED){var e,n,r=this.image_.getExtent(),i=this.image_.getImage();n=this.imageSize_?(e=this.imageSize_[0],this.imageSize_[1]):(e=i.width,i.height);var o=Object(w.A)(r)/n,s=Math.ceil(Object(w.E)(r)/o);if(s!=e){var a=Object(V.a)(s,n),u=a.canvas;a.drawImage(i,0,0,e,n,0,0,u.width,u.height),this.image_.setImage(u)}}l.prototype.handleImageChange.call(this,t)},t}(G),K="1.3.0",H="carmentaserver",Z="geoserver",J="mapserver",Q="qgis",$=n(80),tt=[101,101],et=function(n){function t(t){var e=t||{};n.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:k,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getGetFeatureInfoUrl=function(t,e,n,r){if(void 0!==this.url_){var i=Object(g.d)(n),o=this.getProjection();o&&o!==i&&(e=Object(L.a)(o,i,t,e),t=Object(g.h)(t,i,o));var s=Object(w.z)(t,e,0,tt),a={SERVICE:"WMS",VERSION:K,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(y.a)(a,this.params_,r);var u=Math.floor((t[0]-s[0])/e),l=Math.floor((s[3]-t[1])/e);return a[this.v13_?"I":"X"]=u,a[this.v13_?"J":"Y"]=l,this.getRequestUrl_(s,tt,1,o||i,a)}},t.prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==n||this.hidpi_&&void 0!==this.serverType_||(n=1);var i=e/n,o=Object(w.x)(t),s=Math.ceil(Object(w.E)(t)/i),a=Math.ceil(Object(w.A)(t)/i),u=Object(w.z)(o,i,0,[s,a]),l=Math.ceil(this.ratio_*Object(w.E)(t)/i),c=Math.ceil(this.ratio_*Object(w.A)(t)/i),h=Object(w.z)(o,i,0,[l,c]),p=this.image_;if(p&&this.renderedRevision_==this.getRevision()&&p.getResolution()==e&&p.getPixelRatio()==n&&Object(w.g)(p.getExtent(),u))return p;var f={SERVICE:"WMS",VERSION:K,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(y.a)(f,this.params_),this.imageSize_[0]=Math.round(Object(w.E)(h)/i),this.imageSize_[1]=Math.round(Object(w.A)(h)/i);var d=this.getRequestUrl_(h,this.imageSize_,n,r,f);return this.image_=new z(h,e,n,d,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(C.a)(this.image_,S.a.CHANGE,this.handleImageChange,this),this.image_},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.getRequestUrl_=function(t,e,n,r,i){if(Object(O.a)(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=n)switch(this.serverType_){case Z:var o=90*n+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case J:i.MAP_RESOLUTION=90*n;break;case H:case Q:i.DPI=90*n;break;default:Object(O.a)(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var s,a=r.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=s.join(","),U(this.url_,i)},t.prototype.getUrl=function(){return this.url_},t.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},t.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},t.prototype.updateParams=function(t){Object(y.a)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},t.prototype.updateV13_=function(){var t=this.params_.VERSION||K;this.v13_=0<=Object($.a)(t,"1.3")},t}(G),nt='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',rt=function(o){function t(t){var e,n=t||{};e=void 0!==n.attributions?n.attributions:[nt];var r=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",i=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o.call(this,{attributions:e,cacheSize:n.cacheSize,crossOrigin:r,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:i,wrapX:n.wrapX,attributionsCollapsible:!1})}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t}(s.default),it=n(129),ot=n(142),st=n(31),at=n(110),ut=n(111),lt=n(104),ct=n(83),ht=n(12),pt="beforeoperations",ft="afteroperations",dt="pixel",gt="image",yt=function(r){function t(t,e,n){r.call(this,t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=n}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t}(T.a),_t=null;function vt(t,e,n){if(!t.prepareFrame(e,n))return null;var r=e.size[0],i=e.size[1];if(_t){var o=_t.canvas;o.width!==r||o.height!==i?_t=Object(V.a)(r,i):_t.clearRect(0,0,r,i)}else _t=Object(V.a)(r,i);return t.composeFrame(e,n,_t),_t.getImageData(0,0,r,i)}function mt(t){var e=t,n=t,r=t,i=null;return"function"==typeof e.getTile?i=function(t){var e=new ut.a({source:t});return new ct.a(e)}(e):"function"==typeof n.getImage?i=function(t){var e=new at.a({source:t});return new lt.a(e)}(n):r.getType()===st.a.TILE?i=new ct.a(r):r.getType()!=st.a.IMAGE&&r.getType()!=st.a.VECTOR||(i=new lt.a(r)),i}var bt=function(a){function t(t){a.call(this,{projection:null}),this.worker_=null,this.operationType_=void 0!==t.operationType?t.operationType:dt,this.threads_=void 0!==t.threads?t.threads:1,this.renderers_=function(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=mt(t[r]);return n}(t.sources);for(var e=0,n=this.renderers_.length;e<n;++e)Object(C.a)(this.renderers_[e],S.a.CHANGE,this.changed,this);this.tileQueue_=new it.a(function(){return 1},this.changed.bind(this));for(var r=function(t){return t.map(function(t){return t.getLayer().getLayerState()})}(this.renderers_),i={},o=0,s=r.length;o<s;++o)i[Object(c.c)(r[o].layer)]=r[o];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Object(ht.c)(),extent:null,focus:null,index:0,layerStates:i,layerStatesArray:r,pixelRatio:1,pixelToCoordinateTransform:Object(ht.c)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==t.operation&&this.setOperation(t.operation,t.lib)}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.setOperation=function(t,e){this.worker_=new ot.Processor({operation:t,imageOps:this.operationType_===gt,queue:1,lib:e,threads:this.threads_}),this.changed()},t.prototype.updateFrameState_=function(t,e,n){var r=Object(y.a)({},this.frameState_);r.viewState=Object(y.a)({},r.viewState);var i=Object(w.x)(t);r.extent=t.slice(),r.focus=i,r.size[0]=Math.round(Object(w.E)(t)/e),r.size[1]=Math.round(Object(w.A)(t)/e),r.time=Date.now(),r.animate=!1;var o=r.viewState;return o.center=i,o.projection=n,o.resolution=e,r},t.prototype.allSourcesReady_=function(){for(var t=!0,e=0,n=this.renderers_.length;e<n;++e)if(this.renderers_[e].getLayer().getSource().getState()!==h.a.READY){t=!1;break}return t},t.prototype.getImage=function(t,e,n,r){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(t,e,r);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();e===o&&Object(w.p)(t,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},t.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.renderers_.length,n=new Array(e),r=0;r<e;++r){var i=vt(this.renderers_[r],t,t.layerStatesArray[r]);if(!i)return;n[r]=i}var o={};this.dispatchEvent(new yt(pt,t,o)),this.worker_.process(n,o,this.onWorkerComplete_.bind(this,t))},t.prototype.onWorkerComplete_=function(t,e,n,r){if(!e&&n){var i=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&Object(w.p)(i,this.requestedFrameState_.extent)){var s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else{var a=Math.round(Object(w.E)(i)/o),u=Math.round(Object(w.A)(i)/o);s=Object(V.a)(a,u),this.renderedImageCanvas_=new Y.a(i,o,1,s.canvas)}s.putImageData(n,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new yt(ft,t,r))}}},t.prototype.getImageInternal=function(){return null},t}(G),xt=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',nt],Et={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},wt={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},Ot=function(s){function t(t){var e=t.layer.indexOf("-"),n=-1==e?t.layer:t.layer.slice(0,e),r=wt[n],i=Et[t.layer],o=void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+i.extension;s.call(this,{attributions:xt,cacheSize:t.cacheSize,crossOrigin:"anonymous",maxZoom:null!=t.maxZoom?t.maxZoom:r.maxZoom,minZoom:null!=t.minZoom?t.minZoom:r.minZoom,opaque:i.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:o,wrapX:t.wrapX})}return s&&(t.__proto__=s),(t.prototype=Object.create(s&&s.prototype)).constructor=t}(s.default),Ct=n(69),St=n(8),It=n(25);function Tt(t,e,n){var r=this.getTileGrid();if(!((r=r||this.getTileGridForProjection(n)).getResolutions().length<=t[0])){var i=r.getTileCoordExtent(t,this.tmpExtent_),o=Object(It.d)(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=Object(It.c)(o,e,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(y.a)(s,this.params_),this.getRequestUrl_(t,o,i,e,n,s)}}var Rt=function(n){function t(t){var e=t||{};n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,tileUrlFunction:Tt,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.params_=e.params||{},this.tmpExtent_=Object(w.j)(),this.setKey(this.getKeyForParams_())}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getKeyForParams_=function(){var t=0,e=[];for(var n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(t,e,n,r,i,o){var s=this.urls;if(s){var a,u=i.getCode().split(":").pop();if(o.SIZE=e[0]+","+e[1],o.BBOX=n.join(","),o.BBOXSR=u,o.IMAGESR=u,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),1==s.length)a=s[0];else a=s[Object(St.d)(Object(f.e)(t),s.length)];return U(a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},t.prototype.getTilePixelRatio=function(t){return t},t.prototype.updateParams=function(t){Object(y.a)(this.params_,t),this.setKey(this.getKeyForParams_())},t}(i.a),Lt=n(59),Nt=n(5),Pt=function(r){function t(t,e,n){r.call(this,t,Nt.a.LOADED),this.tileSize_=e,this.text_=n,this.canvas_=null}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Object(V.a)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},t.prototype.load=function(){},t}(Lt.a),Mt=function(e){function t(t){e.call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX})}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getTile=function(t,e,n){var r=Object(f.d)(t,e,n);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var i=Object(It.d)(this.tileGrid.getTileSize(t)),o=[t,e,n],s=this.getTileCoordForTileUrlFunction(o),a=s?this.getTileCoordForTileUrlFunction(s).toString():"",u=new Pt(o,i,a);return this.tileCache.set(r,u),u},t}(Ct.b),jt=function(n){function t(t){if(n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:Object(g.d)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:h.a.LOADING,tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.tileJSON_=null,t.url)if(t.jsonp)r(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):Object(O.a)(!1,51)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var n;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(t){this.handleTileJSONError()},t.prototype.getTileJSON=function(){return this.tileJSON_},t.prototype.handleTileJSONResponse=function(e){var t,n=Object(g.d)("EPSG:4326"),r=this.getProjection();if(void 0!==e.bounds){var i=Object(g.g)(n,r);t=Object(w.a)(e.bounds,i)}var o=e.minzoom||0,s=e.maxzoom||22,a=Object(d.b)({extent:Object(d.c)(r),maxZoom:s,minZoom:o});if(this.tileGrid=a,this.tileUrlFunction=Object(E.a)(e.tiles,a),void 0!==e.attribution&&!this.getAttributions()){var u=void 0!==t?t:n.getExtent();this.setAttributions(function(t){return Object(w.F)(u,t.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState(h.a.READY)},t.prototype.handleTileJSONError=function(){this.setState(h.a.ERROR)},t}(i.a);function At(t,e,n){var r=this.getTileGrid();if(!((r=r||this.getTileGridForProjection(n)).getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.tmpExtent_),s=Object(It.d)(r.getTileSize(t[0]),this.tmpSize),a=this.gutter_;0!==a&&(s=Object(It.a)(s,a,this.tmpSize),o=Object(w.c)(o,i*a,o)),1!=e&&(s=Object(It.c)(s,e,this.tmpSize));var u={SERVICE:"WMS",VERSION:K,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(y.a)(u,this.params_),this.getRequestUrl_(t,s,o,e,n,u)}}var Ft=function(i){function t(t){var e=t||{},n=e.params||{},r=!("TRANSPARENT"in n)||n.TRANSPARENT;i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,tileUrlFunction:At,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=n,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=Object(w.j)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.getGetFeatureInfoUrl=function(t,e,n,r){var i=Object(g.d)(n),o=this.getProjection(),s=this.getTileGrid(),a=(s=s||this.getTileGridForProjection(i)).getTileCoordForCoordAndResolution(t,e);if(!(s.getResolutions().length<=a[0])){var u=s.getResolution(a[0]),l=s.getTileCoordExtent(a,this.tmpExtent_),c=Object(It.d)(s.getTileSize(a[0]),this.tmpSize),h=this.gutter_;0!==h&&(c=Object(It.a)(c,h,this.tmpSize),l=Object(w.c)(l,u*h,l)),o&&o!==i&&(u=Object(L.a)(o,i,t,u),l=Object(g.i)(l,i,o),t=Object(g.h)(t,i,o));var p={SERVICE:"WMS",VERSION:K,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(y.a)(p,this.params_,r);var f=Math.floor((t[0]-l[0])/u),d=Math.floor((l[3]-t[1])/u);return p[this.v13_?"I":"X"]=f,p[this.v13_?"J":"Y"]=d,this.getRequestUrl_(a,c,l,1,o||i,p)}},t.prototype.getGutter=function(){return this.gutter_},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(t,e,n,r,i,o){var s=this.urls;if(s){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=r)switch(this.serverType_){case Z:var a=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+a:o.FORMAT_OPTIONS="dpi:"+a;break;case J:o.MAP_RESOLUTION=90*r;break;case H:case Q:o.DPI=90*r;break;default:Object(O.a)(!1,52)}var u,l,c=i.getAxisOrientation(),h=n;if(this.v13_&&"ne"==c.substr(0,2))u=n[0],h[0]=n[1],h[1]=u,u=n[2],h[2]=n[3],h[3]=u;if(o.BBOX=h.join(","),1==s.length)l=s[0];else l=s[Object(St.d)(Object(f.e)(t),s.length)];return U(l,o)}},t.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},t.prototype.getKeyForParams_=function(){var t=0,e=[];for(var n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")},t.prototype.updateParams=function(t){Object(y.a)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){var t=this.params_.VERSION||K;this.v13_=0<=Object($.a)(t,"1.3")},t}(i.a),Dt=n(90),kt=function(s){function t(t,e,n,r,i,o){s.call(this,t,e),this.src_=n,this.extent_=r,this.preemptive_=i,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.getImage=function(){return null},t.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),n=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-n)*this.grid_.length)];if("string"!=typeof r)return null;var i=r.charCodeAt(Math.floor(e*r.length));93<=i&&i--,35<=i&&i--;var o=null;if((i-=32)in this.keys_){var s=this.keys_[i];o=this.data_&&s in this.data_?this.data_[s]:s}return o},t.prototype.forDataAtCoordinate=function(e,n,r,t){this.state==Nt.a.IDLE&&!0===t?(Object(C.b)(this,S.a.CHANGE,function(t){n.call(r,this.getData(e))},this),this.loadInternal_()):!0===t?setTimeout(function(){n.call(r,this.getData(e))}.bind(this),0):n.call(r,this.getData(e))},t.prototype.getKey=function(){return this.src_},t.prototype.handleError_=function(){this.state=Nt.a.ERROR,this.changed()},t.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=Nt.a.EMPTY,this.changed()},t.prototype.loadInternal_=function(){if(this.state==Nt.a.IDLE)if(this.state=Nt.a.LOADING,this.jsonp_)r(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},t.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var n;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(n)}else this.handleError_()},t.prototype.onXHRError_=function(t){this.handleError_()},t.prototype.load=function(){this.preemptive_&&this.loadInternal_()},t}(Lt.a),Gt=function(n){function t(t){if(n.call(this,{projection:Object(g.d)("EPSG:3857"),state:h.a.LOADING}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=E.d,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)r(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):Object(O.a)(!1,51)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var n;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(t){this.handleTileJSONError()},t.prototype.getTemplate=function(){return this.template_},t.prototype.forDataAtCoordinateAndResolution=function(t,e,n,r){if(this.tileGrid){var i=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(i[0],i[1],i[2],1,this.getProjection()).forDataAtCoordinate(t,n,null,r)}else!0===r?setTimeout(function(){n(null)},0):n(null)},t.prototype.handleTileJSONError=function(){this.setState(h.a.ERROR)},t.prototype.handleTileJSONResponse=function(e){var t,n=Object(g.d)("EPSG:4326"),r=this.getProjection();if(void 0!==e.bounds){var i=Object(g.g)(n,r);t=Object(w.a)(e.bounds,i)}var o=e.minzoom||0,s=e.maxzoom||22,a=Object(d.b)({extent:Object(d.c)(r),maxZoom:s,minZoom:o});this.tileGrid=a,this.template_=e.template;var u=e.grids;if(u){if(this.tileUrlFunction_=Object(E.a)(u,a),void 0!==e.attribution){var l=void 0!==t?t:n.getExtent();this.setAttributions(function(t){return Object(w.F)(l,t.extent)?[e.attribution]:null})}this.setState(h.a.READY)}else this.setState(h.a.ERROR)},t.prototype.getTile=function(t,e,n,r,i){var o=Object(f.d)(t,e,n);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),u=this.tileUrlFunction_(a,r,i),l=new kt(s,void 0!==u?Nt.a.IDLE:Nt.a.EMPTY,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(o,l),l},t.prototype.useTile=function(t,e,n){var r=Object(f.d)(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},t}(Ct.b),zt=n(122),Ut=n(15),Bt=function(x){function E(t,e,n,s,a,r,u,l,i,c,h,p,f,d,o){if(x.call(this,t,e,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=c,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=r,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],r){var g=this.extent=i.getTileCoordExtent(r),y=i.getResolution(o),_=l.getZForResolution(y),v=o!=t[0],m=0;if(l.forEachTileCoord(g,_,function(t){var e=Object(w.B)(g,l.getTileCoordExtent(t)),n=l.getExtent();if(n&&(e=Object(w.B)(e,n,e)),.5<=Object(w.E)(e)/y&&.5<=Object(w.A)(e)/y){++m;var r=t.toString(),i=c[r];if(!i&&!v){var o=u(t,h,p);i=c[r]=new f(t,null==o?Nt.a.EMPTY:Nt.a.IDLE,null==o?"":o,s,a),this.sourceTileListenerKeys_.push(Object(C.a)(i,S.a.CHANGE,d))}!i||v&&i.getState()!=Nt.a.LOADED||(i.consumers++,this.tileKeys.push(r))}}.bind(this)),v&&m==this.tileKeys.length&&this.finishLoading_(),o<=t[0]&&this.state!=Nt.a.LOADED)for(;o>i.getMinZoom();){var b=new E(t,e,n,s,a,r,u,l,i,c,h,p,f,Ut.c,--o);if(b.state==Nt.a.LOADED){this.interimTile=b;break}}}}return x&&(E.__proto__=x),((E.prototype=Object.create(x&&x.prototype)).constructor=E).prototype.disposeInternal=function(){this.state=Nt.a.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var t=0,e=this.tileKeys.length;t<e;++t){var n=this.tileKeys[t],r=this.getTile(n);r.consumers--,0==r.consumers&&(delete this.sourceTiles_[n],r.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(C.e),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(C.e),this.sourceTileListenerKeys_.length=0,x.prototype.disposeInternal.call(this)},E.prototype.getContext=function(t){var e=Object(c.c)(t);return e in this.context_||(this.context_[e]=Object(V.a)()),this.context_[e]},E.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},E.prototype.getReplayState=function(t){var e=Object(c.c)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},E.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},E.prototype.getTile=function(t){return this.sourceTiles_[t]},E.prototype.load=function(){var i=0,o={};this.state==Nt.a.IDLE&&this.setState(Nt.a.LOADING),this.state==Nt.a.LOADING&&this.tileKeys.forEach(function(t){var r=this.getTile(t);if(r.state==Nt.a.IDLE&&(r.setLoader(this.loader_),r.load()),r.state==Nt.a.LOADING){var e=Object(C.a)(r,S.a.CHANGE,function(t){var e=r.getState();if(e==Nt.a.LOADED||e==Nt.a.ERROR){var n=Object(c.c)(r);e==Nt.a.ERROR?o[n]=!0:(--i,delete o[n]),i-Object.keys(o).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(e),++i}}.bind(this)),i-Object.keys(o).length==0&&setTimeout(this.finishLoading_.bind(this),0)},E.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,n=t-1;0<=n;--n){var r=this.getTile(this.tileKeys[n]).getState();r!=Nt.a.LOADED&&--t,r==Nt.a.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(C.e),this.loadListenerKeys_.length=0,this.setState(Nt.a.LOADED)):this.setState(e==this.tileKeys.length?Nt.a.EMPTY:Nt.a.ERROR)},E}(Lt.a);function Yt(t,e){var n=Object(zt.a)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(n)}var Xt=[0,0,4096,4096],qt=function(s){function t(t,e,n,r,i,o){s.call(this,t,e,o),this.consumers=0,this.extent_=null,this.format_=r,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=i,this.url_=n}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=Nt.a.ABORT,this.changed(),s.prototype.disposeInternal.call(this)},t.prototype.getExtent=function(){return this.extent_||Xt},t.prototype.getFormat=function(){return this.format_},t.prototype.getFeatures=function(){return this.features_},t.prototype.getKey=function(){return this.url_},t.prototype.getProjection=function(){return this.projection_},t.prototype.getReplayGroup=function(t,e){return this.replayGroups_[Object(c.c)(t)+","+e]},t.prototype.load=function(){this.state==Nt.a.IDLE&&(this.setState(Nt.a.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},t.prototype.onLoad=function(t,e,n){this.setProjection(e),this.setFeatures(t),this.setExtent(n)},t.prototype.onError=function(){this.setState(Nt.a.ERROR)},t.prototype.setExtent=function(t){this.extent_=t},t.prototype.setFeatures=function(t){this.features_=t,this.setState(Nt.a.LOADED)},t.prototype.setProjection=function(t){this.projection_=t},t.prototype.setReplayGroup=function(t,e,n){this.replayGroups_[Object(c.c)(t)+","+e]=n},t.prototype.setLoader=function(t){this.loader_=t},t}(Lt.a),Vt=function(i){function t(t){var e=t.projection||"EPSG:3857",n=t.extent||Object(d.c)(e),r=t.tileGrid||Object(d.b)({extent:n,maxZoom:t.maxZoom||22,minZoom:t.minZoom,tileSize:t.tileSize||512});i.call(this,{attributions:t.attributions,cacheSize:void 0!==t.cacheSize?t.cacheSize:128,opaque:!1,projection:e,state:t.state,tileGrid:r,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Yt,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.format_=t.format?t.format:null,this.sourceTiles_={},this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:qt,this.tileGrids_={}}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.getOverlaps=function(){return this.overlaps_},t.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},t.prototype.getTile=function(t,e,n,r,i){var o=Object(f.d)(t,e,n);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),u=new Bt(s,null!==a?Nt.a.IDLE:Nt.a.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,a,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(i),this.sourceTiles_,r,i,this.tileClass,this.handleTileChange.bind(this),s[0]);return this.tileCache.set(o,u),u},t.prototype.getTileGridForProjection=function(t){var e=t.getCode(),n=this.tileGrids_[e];if(!n){var r=this.tileGrid;n=this.tileGrids_[e]=Object(d.a)(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0)}return n},t.prototype.getTilePixelRatio=function(t){return t},t.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=Object(It.d)(r.getTileSize(t),this.tmpSize);return[Math.round(i[0]*e),Math.round(i[1]*e)]},t}(Dt.a),Wt={KVP:"KVP",REST:"REST"},Kt=n(84);Kt.a;var Ht=function(i){function t(t){var e=void 0!==t.requestEncoding?t.requestEncoding:Wt.KVP,n=t.tileGrid,r=t.urls;void 0===r&&void 0!==t.url&&(r=Object(E.c)(t.url)),i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:E.d,urls:r,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),r&&0<r.length&&(this.tileUrlFunction=Object(E.b)(r.map(Zt.bind(this))))}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.setUrls=function(t){var e=(this.urls=t).join("\n");this.setTileUrlFunction(Object(E.b)(t.map(Zt.bind(this))),e)},t.prototype.getDimensions=function(){return this.dimensions_},t.prototype.getFormat=function(){return this.format_},t.prototype.getLayer=function(){return this.layer_},t.prototype.getMatrixSet=function(){return this.matrixSet_},t.prototype.getRequestEncoding=function(){return this.requestEncoding_},t.prototype.getStyle=function(){return this.style_},t.prototype.getVersion=function(){return this.version_},t.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var n in this.dimensions_)e[t++]=n+"-"+this.dimensions_[n];return e.join("/")},t.prototype.updateDimensions=function(t){Object(y.a)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},t}(i.a);function Zt(o){var s=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};s==Wt.KVP&&Object(y.a)(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),o=s==Wt.KVP?U(o,n):o.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t});var a=this.tileGrid,u=this.dimensions_;return function(t,e,n){if(t){var r={TileMatrix:a.getMatrixId(t[0]),TileCol:t[1],TileRow:-t[2]-1};Object(y.a)(r,u);var i=o;return i=s==Wt.KVP?U(i,r):i.replace(/\{(\w+?)\}/g,function(t,e){return r[e]})}}}var Jt=n(70),Qt=n(130),$t="default",te="truncated",ee=function(a){function t(t,e,n,r,i,o,s){a.call(this,e,n,r,i,o,s),this.zoomifyImage_=null,this.tileSize_=Object(It.d)(t.getTileSize(e[0]))}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=a.prototype.getImage.call(this);if(this.state!=Nt.a.LOADED)return t;var e=this.tileSize_;if(t.width==e[0]&&t.height==e[1])return this.zoomifyImage_=t;var n=Object(V.a)(e[0],e[1]);return n.drawImage(t,0,0),this.zoomifyImage_=n.canvas,n.canvas},t}(Qt.a),ne=function(x){function t(t){var e=t||{},n=e.size,r=void 0!==e.tierSizeCalculation?e.tierSizeCalculation:$t,i=n[0],o=n[1],s=e.extent||[0,-n[1],n[0],0],h=[],a=e.tileSize||Jt.b,u=a;switch(r){case $t:for(;u<i||u<o;)h.push([Math.ceil(i/u),Math.ceil(o/u)]),u+=u;break;case te:for(var l=i,c=o;u<l||u<c;)h.push([Math.ceil(l/u),Math.ceil(c/u)]),l>>=1,c>>=1;break;default:Object(O.a)(!1,53)}h.push([1,1]),h.reverse();for(var p=[1],f=[0],d=1,g=h.length;d<g;d++)p.push(1<<d),f.push(h[d-1][0]*h[d-1][1]+f[d-1]);p.reverse();var y=new Kt.a({tileSize:a,extent:s,origin:Object(w.C)(s),resolutions:p}),_=e.url;_&&-1==_.indexOf("{TileGroup}")&&-1==_.indexOf("{tileIndex}")&&(_+="{TileGroup}/{z}-{x}-{y}.jpg");var v=Object(E.c)(_);var m=Object(E.b)(v.map(function(c){return function(t,e,n){if(t){var r=t[0],i=t[1],o=-t[2]-1,s=i+o*h[r][0],a=y.getTileSize(r),u=Array.isArray(a)?a[0]:a,l={z:r,x:i,y:o,tileIndex:s,TileGroup:"TileGroup"+((s+f[r])/u|0)};return c.replace(/\{(\w+?)\}/g,function(t,e){return l[e]})}}})),b=ee.bind(null,y);x.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:b,tileGrid:y,tileUrlFunction:m,transition:e.transition})}return x&&(t.__proto__=x),(t.prototype=Object.create(x&&x.prototype)).constructor=t}(i.a);n.d(e,"BingMaps",function(){return o}),n.d(e,"CartoDB",function(){return a}),n.d(e,"Cluster",function(){return m}),n.d(e,"Image",function(){return G}),n.d(e,"ImageArcGISRest",function(){return B}),n.d(e,"ImageCanvas",function(){return X}),n.d(e,"ImageMapGuide",function(){return q}),n.d(e,"ImageStatic",function(){return W}),n.d(e,"ImageWMS",function(){return et}),n.d(e,"OSM",function(){return rt}),n.d(e,"Raster",function(){return bt}),n.d(e,"Source",function(){return M.a}),n.d(e,"Stamen",function(){return Ot}),n.d(e,"Tile",function(){return Ct.b}),n.d(e,"TileArcGISRest",function(){return Rt}),n.d(e,"TileDebug",function(){return Mt}),n.d(e,"TileImage",function(){return i.a}),n.d(e,"TileJSON",function(){return jt}),n.d(e,"TileWMS",function(){return Ft}),n.d(e,"UrlTile",function(){return Dt.a}),n.d(e,"UTFGrid",function(){return Gt}),n.d(e,"Vector",function(){return v.a}),n.d(e,"VectorTile",function(){return Vt}),n.d(e,"WMTS",function(){return Ht}),n.d(e,"XYZ",function(){return s.default}),n.d(e,"Zoomify",function(){return ne})},function(t,e,n){"use strict";n.r(e);var Et=n(2),a=n(32),u=n(29),i=n(123),O=n(28),l=n(17),o=n(66),f=n(1),r=n(53),s="pointermove",c="pointerdown",h="pointerup",p="pointerover",d="pointerout",g="pointerenter",y="pointerleave",_="pointercancel",v=n(76),m=n(75),b=["","unavailable","touch","pen","mouse"];function x(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function E(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function w(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function C(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function S(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function I(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function T(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function R(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var L=function(n){function t(t){var e={MSPointerDown:x,MSPointerMove:E,MSPointerUp:w,MSPointerOut:C,MSPointerOver:S,MSPointerCancel:I,MSGotPointerCapture:R,MSLostPointerCapture:T};n.call(this,t,e),this.pointerMap=t.pointerMap}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=b[t.pointerType]),e},t.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},t}(m.a);function N(t){this.dispatcher.fireNativeEvent(t)}function P(t){this.dispatcher.fireNativeEvent(t)}function M(t){this.dispatcher.fireNativeEvent(t)}function j(t){this.dispatcher.fireNativeEvent(t)}function A(t){this.dispatcher.fireNativeEvent(t)}function F(t){this.dispatcher.fireNativeEvent(t)}function D(t){this.dispatcher.fireNativeEvent(t)}function k(t){this.dispatcher.fireNativeEvent(t)}var G=function(n){function t(t){var e={pointerdown:N,pointermove:P,pointerup:M,pointerout:j,pointerover:A,pointercancel:F,gotpointercapture:k,lostpointercapture:D};n.call(this,t,e)}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(m.a),z=n(21),U=!1,B=function(i){function t(t,e,n){i.call(this,t),this.originalEvent=e;var r=n||{};this.buttons=function(t){var e;if(t.buttons||U)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(r),this.pressure=function(t,e){var n=0;n=t.pressure?t.pressure:e?.5:0;return n}(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(z.a);!function(){try{var t=new MouseEvent("click",{buttons:1});U=1===t.buttons}catch(t){}}();var Y=B,wt=n(10);function X(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function q(t){this.processTouches_(t,this.moveOverOut_)}function V(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function W(t){this.processTouches_(t,this.cancelOut_)}var K=function(r){function t(t,e){var n={touchstart:X,touchmove:q,touchend:V,touchcancel:W};r.call(this,t,n),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},t.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&v.a.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},t.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},t.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},t.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},t.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},t.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.radiusX||0,n.height=e.radiusY||0,n.pressure=e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},t.prototype.processTouches_=function(t,e){var n=Array.prototype.slice.call(t.changedTouches),r=n.length;function i(){t.preventDefault()}for(var o=0;o<r;++o){var s=this.touchToPointer_(t,n[o]);s.preventDefault=i,e.call(this,t,s)}},t.prototype.findTouch_=function(t,e){for(var n=t.length,r=0;r<n;r++){if(t[r].identifier===e)return!0}return!1},t.prototype.vacuumTouches_=function(t){var e=t.touches,n=Object.keys(this.pointerMap),r=n.length;if(r>=e.length){for(var i=[],o=0;o<r;++o){var s=Number(n[o]),a=this.pointerMap[s];s==v.a||this.findTouch_(e,s-2)||i.push(a.out)}for(var u=0;u<i.length;++u)this.cancelOut_(t,i[u])}},t.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},t.prototype.moveOverOut_=function(t,e){var n=e,r=this.pointerMap[n.pointerId];if(r){var i=r.out,o=r.outTarget;this.dispatcher.move(n,t),i&&o!==n.target&&(i.relatedTarget=n.target,n.relatedTarget=o,i.target=o,n.target?(this.dispatcher.leaveOut(i,t),this.dispatcher.enterOver(n,t)):(n.target=o,n.relatedTarget=null,this.cancelOut_(t,n))),r.out=n,r.outTarget=n.target}},t.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},t.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},t.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},t.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var r=[n.clientX,n.clientY];e.push(r),setTimeout(function(){Object(wt.j)(e,r)},this.dedupTimeout_)}},t}(m.a),H=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Z=function(e){function t(t){e.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.registerSources=function(){if(O.f)this.registerSource("native",new G(this));else if(O.e)this.registerSource("ms",new L(this));else{var t=new v.c(this);this.registerSource("mouse",t),O.h&&this.registerSource("touch",new K(this,t))}this.register_()},t.prototype.registerSource=function(t,e){var n=e,r=n.getEvents();r&&(r.forEach(function(t){var e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))}.bind(this)),this.eventSourceList_.push(n))},t.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.addEvents_(n.getEvents())}},t.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.removeEvents_(n.getEvents())}},t.prototype.eventHandler_=function(t){var e=t.type,n=this.eventMap_[e];n&&n(t)},t.prototype.addEvents_=function(t){t.forEach(function(t){Object(f.a)(this.element_,t,this.eventHandler_,this)}.bind(this))},t.prototype.removeEvents_=function(t){t.forEach(function(t){Object(f.c)(this.element_,t,this.eventHandler_,this)}.bind(this))},t.prototype.cloneEvent=function(t,e){for(var n={},r=0,i=H.length;r<i;r++){var o=H[r][0];n[o]=t[o]||e[o]||H[r][1]}return n},t.prototype.down=function(t,e){this.fireEvent(c,t,e)},t.prototype.move=function(t,e){this.fireEvent(s,t,e)},t.prototype.up=function(t,e){this.fireEvent(h,t,e)},t.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(g,t,e)},t.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(y,t,e)},t.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(p,t,e)},t.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(d,t,e)},t.prototype.cancel=function(t,e){this.fireEvent(_,t,e)},t.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},t.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},t.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},t.prototype.makeEvent=function(t,e,n){return new Y(t,n,e)},t.prototype.fireEvent=function(t,e,n){var r=this.makeEvent(t,e,n);this.dispatchEvent(r)},t.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},t.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Object(v.d)(e,this),e)},t.prototype.disposeInternal=function(){this.unregister_(),e.prototype.disposeInternal.call(this)},t}(r.a),J=function(r){function t(t,e){r.call(this),this.map_=t,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*O.b:O.b,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Z(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(f.a)(this.pointerEventHandler_,c,this.handlePointerDown_,this),this.relayedListenerKey_=Object(f.a)(this.pointerEventHandler_,s,this.relayEvent_,this)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.emulateClick_=function(e){var t=new o.a(l.a.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new o.a(l.a.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var t=new o.a(l.a.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},t.prototype.updateActivePointers_=function(t){var e=t;e.type==l.a.POINTERUP||e.type==l.a.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==l.a.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},t.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new o.a(l.a.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(f.e),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},t.prototype.isMouseActionButton_=function(t){return 0===t.button},t.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new o.a(l.a.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Z(document),this.dragListenerKeys_.push(Object(f.a)(this.documentPointerEventHandler_,l.a.POINTERMOVE,this.handlePointerMove_,this),Object(f.a)(this.documentPointerEventHandler_,l.a.POINTERUP,this.handlePointerUp_,this),Object(f.a)(this.pointerEventHandler_,l.a.POINTERCANCEL,this.handlePointerUp_,this)))},t.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new o.a(l.a.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},t.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new o.a(t.type,this.map_,t,e))},t.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(f.e)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(f.e)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(f.e),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),r.prototype.disposeInternal.call(this)},t}(r.a),Q=n(98),$="postrender",tt="movestart",et="moveend",nt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},rt=n(47),it=n(20),ot=n(64),st=n(129),at=n(136),ut=n(19),lt=n(11),ct=n(14),ht=n(4),Ot=n(0),pt=n(15),ft=n(109),dt=n(25),gt=n(105),Ct=n(12);var yt=function(s){function t(t){s.call(this);var e=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,i,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new ft.a({layers:t.layers});o[nt.LAYERGROUP]=s,o[nt.TARGET]=t.target,o[nt.VIEW]=void 0!==t.view?t.view:new at.default,void 0!==t.controls&&(n=Array.isArray(t.controls)?new a.a(t.controls.slice()):(Object(lt.a)("function"==typeof t.controls.getArray,47),t.controls));void 0!==t.interactions&&(r=Array.isArray(t.interactions)?new a.a(t.interactions.slice()):(Object(lt.a)("function"==typeof t.interactions.getArray,48),t.interactions));i=void 0!==t.overlays?Array.isArray(t.overlays)?new a.a(t.overlays.slice()):(Object(lt.a)("function"==typeof t.overlays.getArray,49),t.overlays):new a.a;return{controls:n,interactions:r,keyboardEventTarget:e,overlays:i,values:o}}(t);this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:O.b,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(Ct.c)(),this.pixelToCoordinateTransform_=Object(Ct.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(O.h?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[ht.a.CLICK,ht.a.DBLCLICK,ht.a.MOUSEDOWN,ht.a.TOUCHSTART,ht.a.MSPOINTERDOWN,l.a.POINTERDOWN,ht.a.MOUSEWHEEL,ht.a.WHEEL],r=0,i=n.length;r<i;++r)Object(f.a)(this.overlayContainerStopEvent_,n[r],z.b);for(var o in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new J(this,t.moveTolerance),l.a)Object(f.a)(this.mapBrowserEventHandler_,l.a[o],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,Object(f.a)(this.viewport_,ht.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(f.a)(this.viewport_,ht.a.WHEEL,this.handleBrowserEvent,this),Object(f.a)(this.viewport_,ht.a.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new a.a,this.interactions=e.interactions||new a.a,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new st.a(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(f.a)(this,Object(it.b)(nt.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(f.a)(this,Object(it.b)(nt.VIEW),this.handleViewChanged_,this),Object(f.a)(this,Object(it.b)(nt.SIZE),this.handleSizeChanged_,this),Object(f.a)(this,Object(it.b)(nt.TARGET),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(f.a)(this.controls,u.a.ADD,function(t){t.element.setMap(this)},this),Object(f.a)(this.controls,u.a.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(f.a)(this.interactions,u.a.ADD,function(t){t.element.setMap(this)},this),Object(f.a)(this.interactions,u.a.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(f.a)(this.overlays_,u.a.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(f.a)(this.overlays_,u.a.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(t){this.getControls().push(t)},t.prototype.addInteraction=function(t){this.getInteractions().push(t)},t.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},t.prototype.addOverlay=function(t){this.getOverlays().push(t)},t.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},t.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(f.c)(this.viewport_,ht.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(f.c)(this.viewport_,ht.a.WHEEL,this.handleBrowserEvent,this),Object(f.c)(this.viewport_,ht.a.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(ht.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),s.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var r=this.getCoordinateFromPixel(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==n.layerFilter?n.layerFilter:pt.b;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,i,e,null,o,null)}},t.prototype.getFeaturesAtPixel=function(t,e){var n=null;return this.forEachFeatureAtPixel(t,function(t){(n=n||[]).push(t)},e),n},t.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var r=n||{},i=void 0!==r.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=r.layerFilter||pt.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,null,o,null)}},t.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixel(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:pt.b,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,r,null)},t.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},t.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},t.prototype.getTarget=function(){return this.get(nt.TARGET)},t.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},t.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Object(Ct.a)(e.pixelToCoordinateTransform,t.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(nt.LAYERGROUP)},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Object(Ct.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(nt.SIZE)},t.prototype.getView=function(){return this.get(nt.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getTilePriority=function(t,e,n,r){var i=this.frameState_;if(!(i&&e in i.wantedTiles))return gt.a;if(!i.wantedTiles[e][t.getKey()])return gt.a;var o=n[0]-i.focus[0],s=n[1]-i.focus[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r},t.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new i.a(n,this,t);this.handleMapBrowserEvent(r)},t.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=e.length-1;0<=n;n--){var r=e[n];if(r.getActive())if(!r.handleEvent(t))break}}},t.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,r=n;if(t){var i=t.viewHints;i[ut.a.ANIMATING]&&(n=this.loadTilesWhileAnimating_?8:0,r=2),i[ut.a.INTERACTING]&&(n=this.loadTilesWhileInteracting_?8:0,r=2)}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}!t||!this.hasListener(rt.a.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var n=0,r=e.length;n<r;++n){var i=e[n];if("function"==typeof i.getLayers)return t(i.getLayers().getArray());var o=i.getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(rt.a.RENDERCOMPLETE,t);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},t.prototype.handleSizeChanged_=function(){this.render()},t.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)Object(f.e)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(f.a)(r,ht.a.KEYDOWN,this.handleBrowserEvent,this),Object(f.a)(r,ht.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(ht.a.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(ct.c)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(ht.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(f.e)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(f.e)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(Et.c)(t)),this.viewPropertyListenerKey_=Object(f.a)(t,ot.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(f.a)(t,ht.a.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(f.e),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(f.a)(t,ot.a.PROPERTYCHANGE,this.render,this),Object(f.a)(t,ht.a.CHANGE,this.render,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(t){return this.getControls().remove(t)},t.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},t.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},t.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},t.prototype.renderFrame_=function(t){var e,n=this.getSize(),r=this.getView(),i=Object(Ot.j)(),o=this.frameState_,s=null;if(void 0!==n&&Object(dt.b)(n)&&r&&r.isDef()){for(var a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=this.getLayerGroup().getLayerStatesArray(),l={},c=0,h=u.length;c<h;++c)l[Object(Et.c)(u[c].layer)]=u[c];e=r.getState(this.pixelRatio_),s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:i,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:l,layerStatesArray:u,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:a,wantedTiles:{}}}if(s&&(s.extent=Object(Ot.z)(e.center,e.resolution,e.rotation,s.size,i)),this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o)(!this.previousExtent_||!Object(Ot.H)(this.previousExtent_)&&!Object(Ot.p)(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Q.a(tt,this,o)),this.previousExtent_=Object(Ot.l)(this.previousExtent_));this.previousExtent_&&!s.viewHints[ut.a.ANIMATING]&&!s.viewHints[ut.a.INTERACTING]&&!Object(Ot.p)(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Q.a(et,this,s)),Object(Ot.d)(s.extent,this.previousExtent_))}this.dispatchEvent(new Q.a($,this,s)),setTimeout(this.handlePostRender.bind(this),0)},t.prototype.setLayerGroup=function(t){this.set(nt.LAYERGROUP,t)},t.prototype.setSize=function(t){this.set(nt.SIZE,t)},t.prototype.setTarget=function(t){this.set(nt.TARGET,t)},t.prototype.setView=function(t){this.set(nt.VIEW,t)},t.prototype.skipFeature=function(t){this.skippedFeatureUids_[Object(Et.c)(t)]=!0,this.render()},t.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},t.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[Object(Et.c)(t)],this.render()},t}(it.a);var _t=function(e){function t(t){e.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:pt.c,t.target&&this.setTarget(t.target)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.disposeInternal=function(){Object(ct.c)(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(t){this.map_&&Object(ct.c)(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)Object(f.e)(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==pt.c&&this.listenerKeys.push(Object(f.a)(t,$,this.render,this)),t.render())},t.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},t}(it.a),vt=n(39),mt=n(49);function bt(t){this.updateElement_(t.frameState)}var xt=function(c){function t(t){var e=t||{};c.call(this,{element:document.createElement("div"),render:e.render||bt,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);var n=void 0!==e.className?e.className:"ol-attribution",r=void 0!==e.tipLabel?e.tipLabel:"Attributions",i=void 0!==e.collapseLabel?e.collapseLabel:"Â»";"string"==typeof i?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=i):this.collapseLabel_=i;var o=void 0!==e.label?e.label:"i";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o):this.label_=o;var s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=r,a.appendChild(s),Object(f.a)(a,ht.a.CLICK,this.handleClick_,this);var u=n+" "+vt.d+" "+vt.b+(this.collapsed_&&this.collapsible_?" "+vt.a:"")+(this.collapsible_?"":" ol-uncollapsible"),l=this.element;l.className=u,l.appendChild(this.ulElement_),l.appendChild(a),this.renderedAttributions_=[],this.renderedVisible_=!0}return c&&(t.__proto__=c),((t.prototype=Object.create(c&&c.prototype)).constructor=t).prototype.collectSourceAttributions_=function(t){for(var e={},n=[],r=t.layerStatesArray,i=t.viewState.resolution,o=0,s=r.length;o<s;++o){var a=r[o];if(Object(mt.b)(a,i)){var u=a.layer.getSource();if(u){var l=u.getAttributions();if(l){var c=l(t);if(c)if(this.overrideCollapsible_||!1!==u.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return n},t.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=0<e.length;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(wt.b)(e,this.renderedAttributions_)){Object(ct.b)(this.ulElement_);for(var r=0,i=e.length;r<i;++r){var o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(vt.a),this.collapsed_?Object(ct.d)(this.collapseLabel_,this.label_):Object(ct.d)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t}(_t),St=n(35);function It(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var r="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(vt.c);i||0!==n?i&&0!==n&&this.element.classList.remove(vt.c):this.element.classList.add(vt.c)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=n}}var Tt=function(u){function t(t){var e=t||{};u.call(this,{element:document.createElement("div"),render:e.render||It,target:e.target});var n=void 0!==e.className?e.className:"ol-rotate",r=void 0!==e.label?e.label:"â‡§";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var i=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=i,o.appendChild(this.label_),Object(f.a)(o,ht.a.CLICK,this.handleClick_,this);var s=n+" "+vt.d+" "+vt.b,a=this.element;a.className=s,a.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(vt.c)}return u&&(t.__proto__=u),((t.prototype=Object.create(u&&u.prototype)).constructor=t).prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(0<this.duration_?t.animate({rotation:0,duration:this.duration_,easing:St.b}):t.setRotation(0))},t}(_t),Rt=function(p){function t(t){var e=t||{};p.call(this,{element:document.createElement("div"),target:e.target});var n=void 0!==e.className?e.className:"ol-zoom",r=void 0!==e.delta?e.delta:1,i=void 0!==e.zoomInLabel?e.zoomInLabel:"+",o=void 0!==e.zoomOutLabel?e.zoomOutLabel:"âˆ’",s=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",a=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n+"-in",u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof i?document.createTextNode(i):i),Object(f.a)(u,ht.a.CLICK,this.handleClick_.bind(this,r));var l=document.createElement("button");l.className=n+"-out",l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof o?document.createTextNode(o):o),Object(f.a)(l,ht.a.CLICK,this.handleClick_.bind(this,-r));var c=n+" "+vt.d+" "+vt.b,h=this.element;h.className=c,h.appendChild(u),h.appendChild(l),this.duration_=void 0!==e.duration?e.duration:250}return p&&(t.__proto__=p),((t.prototype=Object.create(p&&p.prototype)).constructor=t).prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},t.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getResolution();if(n){var r=e.constrainResolution(n,t);0<this.duration_?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:r,duration:this.duration_,easing:St.b})):e.setResolution(r)}}},t}(_t);function Lt(){}var Nt=n(135),Pt=n(7),Mt=n(104),jt=n(106),At=n(83),Ft=n(31),Dt=n(94),kt=n.n(Dt),Gt=n(6),zt=n(52);Lt.prototype.getReplay=function(t,e){return Object(Et.b)()},Lt.prototype.isEmpty=function(){return Object(Et.b)()},Lt.prototype.addDeclutter=function(t){return Object(Et.b)()};var Ut=Lt,Bt={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},Yt=n(55),Xt=n(36),qt=n(3),Vt=n(46),Wt=n(119),Kt=n(8);function Ht(t,e,n,r,i,o,s,a){for(var u,l,c,h=[],p=t[e]>t[n-r],f=i.length,d=t[e],g=t[e+1],y=t[e+=r],_=t[e+1],v=0,m=Math.sqrt(Math.pow(y-d,2)+Math.pow(_-g,2)),b="",x=0,E=0;E<f;++E){l=p?f-E-1:E;var w=i.charAt(l),O=o(b=p?w+b:b+w)-x;x+=O;for(var C=s+O/2;e<n-r&&v+m<C;)d=y,g=_,y=t[e+=r],_=t[e+1],v+=m,m=Math.sqrt(Math.pow(y-d,2)+Math.pow(_-g,2));var S=C-v,I=Math.atan2(_-g,y-d);if(p&&(I+=0<I?-Math.PI:Math.PI),void 0!==c){var T=I-c;if(T+=T>Math.PI?-2*Math.PI:T<-Math.PI?2*Math.PI:0,Math.abs(T)>a)return null}var R=S/m,L=Object(Kt.c)(d,y,R),N=Object(Kt.c)(g,_,R);c==I?(p&&(u[0]=L,u[1]=N,u[2]=O/2),u[4]=b):(u=[L,N,(x=O)/2,I,b=w],p?h.unshift(u):h.push(u),c=I),s+=O}return h}var Zt=n(125),Jt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Qt=[Jt.FILL],$t=[Jt.STROKE],te=[Jt.BEGIN_PATH],ee=[Jt.CLOSE_PATH],ne=Jt,re=[Bt.POLYGON,Bt.CIRCLE,Bt.LINE_STRING,Bt.IMAGE,Bt.TEXT,Bt.DEFAULT],ie={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},oe=Object(Ot.j)(),se=Object(Ct.c)(),ae=function(s){function t(t,e,n,r,i,o){s.call(this),this.declutterTree=o,this.tolerance=t,this.maxExtent=e,this.overlaps=i,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(Ct.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.replayTextBackground_=function(t,e,n,r,i,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.replayImage_=function(t,e,n,r,i,o,s,a,u,l,c,h,p,f,d,g,y,_){var v=y||_;e-=i*=p,n-=o*=p;var m,b,x,E,w=d+l>r.width?r.width-l:d,O=a+c>r.height?r.height-c:a,C=g[3]+w*p+g[1],S=g[0]+O*p+g[2],I=e-g[3],T=n-g[0];!v&&0===h||(m=[I,T],b=[I+C,T],x=[I+C,T+S],E=[I,T+S]);var R=null;if(0!==h){var L=e+i,N=n+o;R=Object(Ct.b)(se,L,N,1,1,h,-L,-N),Object(Ot.l)(oe),Object(Ot.r)(oe,Object(Ct.a)(se,m)),Object(Ot.r)(oe,Object(Ct.a)(se,b)),Object(Ot.r)(oe,Object(Ct.a)(se,x)),Object(Ot.r)(oe,Object(Ct.a)(se,E))}else Object(Ot.k)(I,T,I+C,T+S,oe);var P=t.canvas,M=_?_[2]*p/2:0,j=oe[0]-M<=P.width&&0<=oe[2]+M&&oe[1]-M<=P.height&&0<=oe[3]+M;if(f&&(e=Math.round(e),n=Math.round(n)),s){if(!j&&1==s[4])return;Object(Ot.q)(s,oe);var A=j?[t,R?R.slice(0):null,u,r,l,c,w,O,e,n,p]:null;A&&v&&A.push(y,_,m,b,x,E),s.push(A)}else j&&(v&&this.replayTextBackground_(t,m,b,x,E,y,_),Object(Gt.n)(t,R,u,r,l,c,w,O,e,n,p))},t.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},t.prototype.appendFlatCoordinates=function(t,e,n,r,i,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=r);var u,l,c,h=[t[e],t[e+1]],p=[NaN,NaN],f=!0;for(u=e+r;u<n;u+=r)p[0]=t[u],p[1]=t[u+1],f=(c=Object(Ot.i)(a,p))!==l?(f&&(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1]),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],!1):c!==Xt.a.INTERSECTING||(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],!1),h[0]=p[0],h[1]=p[1],l=c;return(i&&f||u===e+r)&&(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1]),s},t.prototype.drawCustomCoordinates_=function(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o],u=this.appendFlatCoordinates(t,e,a,r,!1,!1);i.push(u),e=a}return e},t.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var r,i,o,s,a,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==qt.a.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),s=[];for(var h=t.getEndss(),p=a=0,f=h.length;p<f;++p){var d=[];a=this.drawCustomCoordinates_(r,a,h[p],l,d),s.push(d)}this.instructions.push([ne.CUSTOM,c,s,t,n,Vt.c])}else u==qt.a.POLYGON||u==qt.a.MULTI_LINE_STRING?(o=[],r=u==qt.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),l,o),this.instructions.push([ne.CUSTOM,c,o,t,n,Vt.b])):u==qt.a.LINE_STRING||u==qt.a.MULTI_POINT?(r=t.getFlatCoordinates(),i=this.appendFlatCoordinates(r,0,r.length,l,!1,!1),this.instructions.push([ne.CUSTOM,c,i,t,n,Vt.a])):u==qt.a.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),i=this.coordinates.length,this.instructions.push([ne.CUSTOM,c,i,t,n]));this.endGeometry(t,e)},t.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[ne.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ne.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},t.prototype.finish=function(){},t.prototype.fill_=function(t){if(this.alignFill_){var e=Object(Ct.a)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Gt.r)},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],O.a&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter_=function(t,e){if(t&&5<t.length){var n=t[4];if(1==n||n==t.length-5){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(r)){this.declutterTree.insert(r);for(var i=5,o=t.length;i<o;++i){var s=t[i];s&&(11<s.length&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),Gt.n.apply(void 0,s))}}t.length=5,Object(Ot.l)(t)}}},t.prototype.replay_=function(t,e,n,r,i,o,s){var a;this.pixelCoordinates_&&Object(wt.b)(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Object(zt.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(Ct.g)(this.renderedTransform_,e));for(var u,l,c,h,p,f,d,g,y,_,v,m,b=!Object(Pt.d)(n),x=0,E=r.length,w=0,O=0,C=0,S=null,I=null,T=this.coordinateCache_,R=this.viewRotation_,L={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},N=this.instructions!=r||this.overlaps?0:200;x<E;){var P=r[x];switch(P[0]){case ne.BEGIN_GEOMETRY:_=P[1],b&&n[Object(Et.c)(_)]||!_.getGeometry()?x=P[2]:void 0===s||Object(Ot.F)(s,_.getGeometry().getExtent())?++x:x=P[2]+1;break;case ne.BEGIN_PATH:N<O&&(this.fill_(t),O=0),N<C&&(t.stroke(),C=0),O||C||(t.beginPath(),h=p=NaN),++x;break;case ne.CIRCLE:var M=a[w=P[1]],j=a[w+1],A=a[w+2]-M,F=a[w+3]-j,D=Math.sqrt(A*A+F*F);t.moveTo(M+D,j),t.arc(M,j,D,0,2*Math.PI,!0),++x;break;case ne.CLOSE_PATH:t.closePath(),++x;break;case ne.CUSTOM:w=P[1],u=P[2];var k=P[3],G=P[4],z=6==P.length?P[5]:void 0;L.geometry=k,L.feature=_,x in T||(T[x]=[]);var U=T[x];z?z(a,w,u,2,U):(U[0]=a[w],U[1]=a[w+1],U.length=2),G(U,L),++x;break;case ne.DRAW_IMAGE:w=P[1],u=P[2],y=P[3],l=P[4],c=P[5],g=o?null:P[6];var B=P[7],Y=P[8],X=P[9],q=P[10],V=P[11],W=P[12],K=P[13],H=P[14],Z=void 0,J=void 0,Q=void 0;for(16<P.length?(Z=P[15],J=P[16],Q=P[17]):(Z=Gt.j,J=Q=!1),V&&(W+=R);w<u;w+=2)this.replayImage_(t,a[w],a[w+1],y,l,c,g,B,Y,X,q,W,K,i,H,Z,J?S:null,Q?I:null);this.renderDeclutter_(g,_),++x;break;case ne.DRAW_CHARS:var $=P[1],tt=P[2],et=P[3];g=o?null:P[4];var nt=P[5],rt=P[6],it=P[7],ot=P[8],st=P[9],at=P[10],ut=P[11],lt=P[12],ct=P[13],ht=P[14],pt=Object(Wt.a)(a,$,tt,2),ft=ot(lt);if(nt||ft<=pt){var dt=this.textStates[ct].textAlign,gt=Ht(a,$,tt,2,lt,ot,(pt-ft)*ie[dt],it);if(gt){var yt=void 0,_t=void 0,vt=void 0,mt=void 0,bt=void 0;if(at)for(yt=0,_t=gt.length;yt<_t;++yt)vt=(bt=gt[yt])[4],mt=this.getImage(vt,ct,"",at),l=bt[2]+ut,c=et*mt.height+2*(.5-et)*ut-st,this.replayImage_(t,bt[0],bt[1],mt,l,c,g,mt.height,1,0,0,bt[3],ht,!1,mt.width,Gt.j,null,null);if(rt)for(yt=0,_t=gt.length;yt<_t;++yt)vt=(bt=gt[yt])[4],mt=this.getImage(vt,ct,rt,""),l=bt[2],c=et*mt.height-st,this.replayImage_(t,bt[0],bt[1],mt,l,c,g,mt.height,1,0,0,bt[3],ht,!1,mt.width,Gt.j,null,null)}}this.renderDeclutter_(g,_),++x;break;case ne.END_GEOMETRY:if(void 0!==o){var xt=o(_=P[1]);if(xt)return xt}++x;break;case ne.FILL:N?O++:this.fill_(t),++x;break;case ne.MOVE_TO_LINE_TO:for(w=P[1],u=P[2],v=a[w],d=(m=a[w+1])+.5|0,(f=v+.5|0)===h&&d===p||(t.moveTo(v,m),h=f,p=d),w+=2;w<u;w+=2)f=(v=a[w])+.5|0,d=(m=a[w+1])+.5|0,w!=u-2&&f===h&&d===p||(t.lineTo(v,m),h=f,p=d);++x;break;case ne.SET_FILL_STYLE:S=P,this.alignFill_=P[2],O&&(this.fill_(t),O=0,C&&(t.stroke(),C=0)),t.fillStyle=P[1],++x;break;case ne.SET_STROKE_STYLE:I=P,C&&(t.stroke(),C=0),this.setStrokeStyle_(t,P),++x;break;case ne.STROKE:N?C++:t.stroke(),++x;break;default:++x}}O&&this.fill_(t),C&&t.stroke()},t.prototype.replay=function(t,e,n,r,i){this.viewRotation_=n,this.replay_(t,e,r,this.instructions,i,void 0,void 0)},t.prototype.replayHitDetection=function(t,e,n,r,i,o){return this.viewRotation_=n,this.replay_(t,e,r,this.hitDetectionInstructions,!0,i,o)},t.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,r,i=e.length,o=-1;for(t=0;t<i;++t)(r=(n=e[t])[0])==ne.END_GEOMETRY?o=t:r==ne.BEGIN_GEOMETRY&&(n[2]=t,Object(wt.k)(this.hitDetectionInstructions,o,t),o=-1)},t.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=Object(Yt.a)(r||Gt.b)}else n.fillStyle=void 0;if(e){var i=e.getColor();n.strokeStyle=Object(Yt.a)(i||Gt.k);var o=e.getLineCap();n.lineCap=void 0!==o?o:Gt.d;var s=e.getLineDash();n.lineDash=s?s.slice():Gt.e;var a=e.getLineDashOffset();n.lineDashOffset=a||Gt.f;var u=e.getLineJoin();n.lineJoin=void 0!==u?u:Gt.g;var l=e.getWidth();n.lineWidth=void 0!==l?l:Gt.h;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:Gt.i,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},t.prototype.createFill=function(t,e){var n=t.fillStyle,r=[ne.SET_FILL_STYLE,n];return"string"!=typeof n&&r.push(!0),r},t.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},t.prototype.createStroke=function(t){return[ne.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},t.prototype.updateFillStyle=function(t,e,n){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t,n)),t.currentFillStyle=r)},t.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,r=t.lineCap,i=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,u=t.miterLimit;t.currentStrokeStyle==n&&t.currentLineCap==r&&(i==t.currentLineDash||Object(wt.b)(t.currentLineDash,i))&&t.currentLineDashOffset==o&&t.currentLineJoin==s&&t.currentLineWidth==a&&t.currentMiterLimit==u||(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=u)},t.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[ne.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},t.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(Ot.d)(this.maxExtent),0<this.maxLineWidth)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(Ot.c)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},t}(Zt.a),ue=function(s){function t(t,e,n,r,i,o){s.call(this,t,e,n,r,i,o),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.drawCoordinates_=function(t,e,n,r){return this.appendFlatCoordinates(t,e,n,r,!1,!1)},t.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,r);this.instructions.push([ne.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},t.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,r);this.instructions.push([ne.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},t.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),r=t.getSize(),i=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=i,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=r[0]},t}(ae),le=function(s){function t(t,e,n,r,i,o){s.call(this,t,e,n,r,i,o)}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.drawFlatCoordinates_=function(t,e,n,r){var i=this.coordinates.length,o=this.appendFlatCoordinates(t,e,n,r,!1,!1),s=[ne.MOVE_TO_LINE_TO,i,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n},t.prototype.drawLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],te);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push($t),this.endGeometry(t,e)}},t.prototype.drawMultiLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],te);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(s,u,o[l],a);this.hitDetectionInstructions.push($t),this.endGeometry(t,e)}},t.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push($t),this.reverseHitDetectionInstructions(),this.state=null},t.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push($t),t.lastStroke=this.coordinates.length),t.lastStroke=0,s.prototype.applyStroke.call(this,t),this.instructions.push(te)},t}(ae),ce=n(54),he=n(58),pe=function(s){function t(t,e,n,r,i,o){s.call(this,t,e,n,r,i,o)}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.drawFlatCoordinatess_=function(t,e,n,r){var i=this.state,o=void 0!==i.fillStyle,s=null!=i.strokeStyle,a=n.length;this.instructions.push(te),this.hitDetectionInstructions.push(te);for(var u=0;u<a;++u){var l=n[u],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,l,r,!0,!s),p=[ne.MOVE_TO_LINE_TO,c,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(ee),this.hitDetectionInstructions.push(ee)),e=l}return o&&(this.instructions.push(Qt),this.hitDetectionInstructions.push(Qt)),s&&(this.instructions.push($t),this.hitDetectionInstructions.push($t)),e},t.prototype.drawCircle=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Object(ce.b)(Gt.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var u=[ne.CIRCLE,a];this.instructions.push(te,u),this.hitDetectionInstructions.push(te,u),this.hitDetectionInstructions.push(Qt),void 0!==n.fillStyle&&this.instructions.push(Qt),void 0!==n.strokeStyle&&(this.instructions.push($t),this.hitDetectionInstructions.push($t)),this.endGeometry(t,e)}},t.prototype.drawPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Object(ce.b)(Gt.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},t.prototype.drawMultiPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Object(ce.b)(Gt.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(s,u,o[l],a);this.endGeometry(t,e)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,n=0,r=e.length;n<r;++n)e[n]=Object(he.e)(e[n],t)},t.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},t}(ae);function fe(t,e,n,r,i){var o,s,a,u,l,c,h,p,f,d=n,g=n,y=0,_=0,v=n;for(o=n;o<r;o+=i){var m=e[o],b=e[o+1];void 0!==u&&(p=m-u,f=b-l,a=Math.sqrt(p*p+f*f),void 0!==c&&(_+=s,t<Math.acos((c*p+h*f)/(s*a))&&(y<_&&(y=_,d=v,g=o),_=0,v=o-i)),s=a,c=p,h=f),u=m,l=b}return y<(_+=a)?[v,o]:[d,g]}var de=n(128);var ge={Circle:pe,Default:ae,Image:ue,LineString:le,Polygon:pe,Text:function(s){function t(t,e,n,r,i,o){s.call(this,t,e,n,r,i,o),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Gt.o.prune()}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.drawText=function(t,e){var n=this.textFillState_,r=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(n||r)){var o,s,a=this.coordinates.length,u=t.getType(),l=null,c=2,h=2;if(i.placement===de.a.LINE){if(!Object(Ot.F)(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(l=t.getFlatCoordinates(),h=t.getStride(),u==qt.a.LINE_STRING)p=[l.length];else if(u==qt.a.MULTI_LINE_STRING)p=t.getEnds();else if(u==qt.a.POLYGON)p=t.getEnds().slice(0,1);else if(u==qt.a.MULTI_POLYGON){var f=t.getEndss();for(p=[],o=0,s=f.length;o<s;++o)p.push(f[o][0])}this.beginGeometry(t,e);for(var d,g=i.textAlign,y=0,_=0,v=p.length;_<v;++_){if(null==g){var m=fe(i.maxAngle,l,y,p[_],h);y=m[0],d=m[1]}else d=p[_];for(o=y;o<d;o+=h)this.coordinates.push(l[o],l[o+1]);c=this.coordinates.length,y=p[_],this.drawChars_(a,c,this.declutterGroup_),a=c}this.endGeometry(t,e)}else{var b=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),x=b.width/this.pixelRatio;switch(u){case qt.a.POINT:case qt.a.MULTI_POINT:c=(l=t.getFlatCoordinates()).length;break;case qt.a.LINE_STRING:l=t.getFlatMidpoint();break;case qt.a.CIRCLE:l=t.getCenter();break;case qt.a.MULTI_LINE_STRING:c=(l=t.getFlatMidpoints()).length;break;case qt.a.POLYGON:if(l=t.getFlatInteriorPoint(),!i.overflow&&l[2]/this.resolution<x)return;h=3;break;case qt.a.MULTI_POLYGON:var E=t.getFlatInteriorPoints();for(l=[],o=0,s=E.length;o<s;o+=3)(i.overflow||E[o+2]/this.resolution>=x)&&l.push(E[o],E[o+1]);if(0==(c=l.length))return}c=this.appendFlatCoordinates(l,0,c,h,!1,!1),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(b,a,c),this.endGeometry(t,e)}}},t.prototype.getImage=function(t,e,n,r){var i,o=r+e+t+n+this.pixelRatio;if(!Gt.o.containsKey(o)){var s=r?this.strokeStates[r]||this.textStrokeState_:null,a=n?this.fillStates[n]||this.textFillState_:null,u=this.textStates[e]||this.textState_,l=this.pixelRatio,c=u.scale*l,h=ie[u.textAlign||Gt.l],p=r&&s.lineWidth?s.lineWidth:0,f=t.split("\n"),d=f.length,g=[],y=function(t,e,n){for(var r=e.length,i=0,o=0;o<r;++o){var s=Object(Gt.q)(t,e[o]);i=Math.max(i,s),n.push(s)}return i}(u.font,f,g),_=Object(Gt.p)(u.font),v=_*d,m=y+p,b=Object(ct.a)(Math.ceil(m*c),Math.ceil((v+p)*c));i=b.canvas,Gt.o.set(o,i),1!=c&&b.scale(c,c),b.font=u.font,r&&(b.strokeStyle=s.strokeStyle,b.lineWidth=p,b.lineCap=s.lineCap,b.lineJoin=s.lineJoin,b.miterLimit=s.miterLimit,O.a&&s.lineDash.length&&(b.setLineDash(s.lineDash),b.lineDashOffset=s.lineDashOffset)),n&&(b.fillStyle=a.fillStyle),b.textBaseline="middle",b.textAlign="center";var x,E=.5-h,w=h*i.width/c+E*p;if(r)for(x=0;x<d;++x)b.strokeText(f[x],w+E*g[x],.5*(p+_)+x*_);if(n)for(x=0;x<d;++x)b.fillText(f[x],w+E*g[x],.5*(p+_)+x*_)}return Gt.o.get(o)},t.prototype.drawTextImage_=function(t,e,n){var r=this.textState_,i=this.textStrokeState_,o=this.pixelRatio,s=ie[r.textAlign||Gt.l],a=ie[r.textBaseline],u=i&&i.lineWidth?i.lineWidth:0,l=s*t.width/o+2*(.5-s)*u,c=a*t.height/o+2*(.5-a)*u;this.instructions.push([ne.DRAW_IMAGE,e,n,t,(l-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,r.padding==Gt.j?Gt.j:r.padding.map(function(t){return t*o}),!!r.backgroundFill,!!r.backgroundStroke]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,e,n,t,(l-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,r.padding,!!r.backgroundFill,!!r.backgroundStroke])},t.prototype.drawChars_=function(t,e,n){var r=this.textStrokeState_,i=this.textState_,o=this.textFillState_,s=this.strokeKey_;r&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:i.font,textAlign:i.textAlign||Gt.l,scale:i.scale});var u=this.fillKey_;o&&(u in this.fillStates||(this.fillStates[u]={fillStyle:o.fillStyle}));var l=this.pixelRatio,c=ie[i.textBaseline],h=this.textOffsetY_*l,p=this.text_,f=i.font,d=i.scale,g=r?r.lineWidth*d/2:0,y=this.widths_[f];y||(this.widths_[f]=y={}),this.instructions.push([ne.DRAW_CHARS,t,e,c,n,i.overflow,u,i.maxAngle,function(t){var e=y[t];return(e=e||(y[t]=Object(Gt.q)(f,t)))*d*l},h,s,g*l,p,a,1]),this.hitDetectionInstructions.push([ne.DRAW_CHARS,t,e,c,n,i.overflow,u,i.maxAngle,function(t){var e=y[t];return(e=e||(y[t]=Object(Gt.q)(f,t)))*d},h,s,g,p,a,1/l])},t.prototype.setTextStyle=function(t,e){var n,r,i;if(t){this.declutterGroup_=e;var o=t.getFill();o?(r=(r=this.textFillState_)||(this.textFillState_={})).fillStyle=Object(Yt.a)(o.getColor()||Gt.b):r=this.textFillState_=null;var s=t.getStroke();if(s){i=(i=this.textStrokeState_)||(this.textStrokeState_={});var a=s.getLineDash(),u=s.getLineDashOffset(),l=s.getWidth(),c=s.getMiterLimit();i.lineCap=s.getLineCap()||Gt.d,i.lineDash=a?a.slice():Gt.e,i.lineDashOffset=void 0===u?Gt.f:u,i.lineJoin=s.getLineJoin()||Gt.g,i.lineWidth=void 0===l?Gt.h:l,i.miterLimit=void 0===c?Gt.i:c,i.strokeStyle=Object(Yt.a)(s.getColor()||Gt.k)}else i=this.textStrokeState_=null;n=this.textState_;var h=t.getFont()||Gt.c;Object(Gt.a)(h);var p=t.getScale();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||Gt.m,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Gt.j,n.scale=void 0===p?1:p;var f=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:Object(Et.c)(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Object(Et.c)(r.fillStyle):""}else this.text_=""},t}(ae)},ye=function(a){function t(t,e,n,r,i,o,s){a.call(this),this.declutterTree_=o,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=Object(ct.a)(1,1),this.hitDetectionTransform_=Object(Ct.c)()}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(Ot.j)()).push(1)),e},t.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},t.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var n=this.replaysByZIndex_[e],r=0,i=t.length;r<i;++r)if(t[r]in n)return!0;return!1},t.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var n in e)e[n].finish()}},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o,s){var a,u=2*(r=Math.round(r))+1,l=Object(Ct.b)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),c=this.hitDetectionContext_;c.canvas.width!==u||c.canvas.height!==u?(c.canvas.width=u,c.canvas.height=u):c.clearRect(0,0,u,u),void 0!==this.renderBuffer_&&(a=Object(Ot.j)(),Object(Ot.r)(a,t),Object(Ot.c)(a,e*(this.renderBuffer_+r),a));var h,p,f=function(t){if(void 0!==_e[t])return _e[t];for(var e=2*t+1,n=new Array(e),r=0;r<e;r++)n[r]=new Array(e);var i=t,o=0,s=0;for(;o<=i;)ve(n,t+i,t+o),ve(n,t+o,t+i),ve(n,t-o,t+i),ve(n,t-i,t+o),ve(n,t-i,t-o),ve(n,t-o,t-i),ve(n,t+o,t-i),ve(n,t+i,t-o),0<2*((s+=1+2*++o)-i)+1&&(s+=1-2*(i-=1));return _e[t]=n}(r);function d(t){for(var e=c.getImageData(0,0,u,u).data,n=0;n<u;n++)for(var r=0;r<u;r++)if(f[n][r]&&0<e[4*(r*u+n)+3]){var i=void 0;return h&&(p==Bt.IMAGE||p==Bt.TEXT)&&-1===h.indexOf(t)||(i=o(t)),i||void c.clearRect(0,0,u,u)}}this.declutterTree_&&(h=this.declutterTree_.all().map(function(t){return t.value}));var g,y,_,v,m,b=Object.keys(this.replaysByZIndex_).map(Number);for(b.sort(wt.i),g=b.length-1;0<=g;--g){var x=b[g].toString();for(_=this.replaysByZIndex_[x],y=re.length-1;0<=y;--y)if(void 0!==(v=_[p=re[y]]))if(!s||p!=Bt.IMAGE&&p!=Bt.TEXT){if(m=v.replayHitDetection(c,l,n,i,d,a))return m}else{var E=s[x];E?E.push(v,l.slice(0)):s[x]=[v,l.slice(0)]}}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_,n=e[0],r=e[1],i=e[2],o=e[3],s=[n,r,n,o,i,o,i,r];return Object(zt.c)(s,0,8,2,t,s),s},t.prototype.getReplay=function(t,e){var n=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[n];void 0===r&&(r={},this.replaysByZIndex_[n]=r);var i=r[e];void 0===i&&(i=new ge[e](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),r[e]=i);return i},t.prototype.getReplays=function(){return this.replaysByZIndex_},t.prototype.isEmpty=function(){return Object(Pt.d)(this.replaysByZIndex_)},t.prototype.replay=function(t,e,n,r,i,o,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(wt.i),t.save(),this.clip(t,e);var u,l,c,h,p,f,d=o||re;for(u=0,l=a.length;u<l;++u){var g=a[u].toString();for(p=this.replaysByZIndex_[g],c=0,h=d.length;c<h;++c){var y=d[c];if(f=p[y],void 0!==f)if(!s||y!=Bt.IMAGE&&y!=Bt.TEXT)f.replay(t,e,n,r,i);else{var _=s[g];_?_.push(f,e.slice(0)):s[g]=[f,e.slice(0)]}}}t.restore()},t}(Ut),_e={0:[[!0]]};function ve(t,e,n){var r,i=Math.floor(t.length/2);if(i<=e)for(r=i;r<e;r++)t[r][n]=!0;else if(e<i)for(r=e+1;r<i;r++)t[r][n]=!0}var me=ye,be=n(133),xe=n(13),Ee=.5,we={Point:function(t,e,n,r){var i=n.getImage();if(i){if(i.getImageState()!=xe.a.LOADED)return;var o=t.getReplay(n.getZIndex(),Bt.IMAGE);o.setImageStyle(i,t.addDeclutter(!1)),o.drawPoint(e,r)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),Bt.TEXT);a.setTextStyle(s,t.addDeclutter(!!i)),a.drawText(e,r)}},LineString:function(t,e,n,r){var i=n.getStroke();if(i){var o=t.getReplay(n.getZIndex(),Bt.LINE_STRING);o.setFillStrokeStyle(null,i),o.drawLineString(e,r)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),Bt.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}},Polygon:function(t,e,n,r){var i=n.getFill(),o=n.getStroke();if(i||o){var s=t.getReplay(n.getZIndex(),Bt.POLYGON);s.setFillStrokeStyle(i,o),s.drawPolygon(e,r)}var a=n.getText();if(a){var u=t.getReplay(n.getZIndex(),Bt.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,r)}},MultiPoint:function(t,e,n,r){var i=n.getImage();if(i){if(i.getImageState()!=xe.a.LOADED)return;var o=t.getReplay(n.getZIndex(),Bt.IMAGE);o.setImageStyle(i,t.addDeclutter(!1)),o.drawMultiPoint(e,r)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),Bt.TEXT);a.setTextStyle(s,t.addDeclutter(!!i)),a.drawText(e,r)}},MultiLineString:function(t,e,n,r){var i=n.getStroke();if(i){var o=t.getReplay(n.getZIndex(),Bt.LINE_STRING);o.setFillStrokeStyle(null,i),o.drawMultiLineString(e,r)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),Bt.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}},MultiPolygon:function(t,e,n,r){var i=n.getFill(),o=n.getStroke();if(o||i){var s=t.getReplay(n.getZIndex(),Bt.POLYGON);s.setFillStrokeStyle(i,o),s.drawMultiPolygon(e,r)}var a=n.getText();if(a){var u=t.getReplay(n.getZIndex(),Bt.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,r)}},GeometryCollection:function(t,e,n,r){var i,o,s=e.getGeometriesArray();for(i=0,o=s.length;i<o;++i){(0,we[s[i].getType()])(t,s[i],n,r)}},Circle:function(t,e,n,r){var i=n.getFill(),o=n.getStroke();if(i||o){var s=t.getReplay(n.getZIndex(),Bt.CIRCLE);s.setFillStrokeStyle(i,o),s.drawCircle(e,r)}var a=n.getText();if(a){var u=t.getReplay(n.getZIndex(),Bt.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,r)}}};function Oe(t,e){return parseInt(Object(Et.c)(t),10)-parseInt(Object(Et.c)(e),10)}function Ce(t,e){var n=Se(t,e);return n*n}function Se(t,e){return Ee*t/e}function Ie(t,e,n,r,i,o){var s=!1,a=n.getImage();if(a){var u=a.getImageState();u==xe.a.LOADED||u==xe.a.ERROR?a.unlistenImageChange(i,o):(u==xe.a.IDLE&&a.load(),u=a.getImageState(),a.listenImageChange(i,o),s=!0)}return function(t,e,n,r){var i=n.getGeometryFunction()(e);if(!i)return;var o=i.getSimplifiedGeometry(r);if(n.getRenderer())!function t(e,n,r,i){if(n.getType()==qt.a.GEOMETRY_COLLECTION){for(var o=n.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],r,i);return}var u=e.getReplay(r.getZIndex(),Bt.DEFAULT);u.drawCustom(n,i,r.getRenderer())}(t,o,n,e);else{(0,we[o.getType()])(t,o,n,e)}}(t,e,n,r),s}var Te=function(e){function t(t){e.call(this,t),this.declutterTree_=t.getDeclutter()?kt()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(Ot.j)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(ct.a)(),Object(f.a)(Gt.o,ht.a.CLEAR,this.handleFontsChanged_,this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.disposeInternal=function(){Object(f.c)(Gt.o,ht.a.CLEAR,this.handleFontsChanged_,this),e.prototype.disposeInternal.call(this)},t.prototype.compose=function(t,e,n){var r=e.extent,i=e.pixelRatio,o=n.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,u=s.rotation,l=a.getExtent(),c=this.getLayer().getSource(),h=this.getTransform(e,0),p=n.extent,f=void 0!==p;f&&this.clip(t,e,p);var d=this.replayGroup_;if(d&&!d.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var g,y=this.getLayer(),_=0,v=0,m=1!==n.opacity,b=y.hasListener(rt.a.RENDER);if(m||b){var x=t.canvas.width,E=t.canvas.height;if(u){var w=Math.round(Math.sqrt(x*x+E*E));_=(w-x)/2,v=(w-E)/2,x=E=w}this.context.canvas.width=x,this.context.canvas.height=E,g=this.context}else g=t;var O=g.globalAlpha;m||(g.globalAlpha=n.opacity),g!=t&&g.translate(_,v);var C=e.viewHints,S=!(C[ut.a.ANIMATING]||C[ut.a.INTERACTING]),I=e.size[0]*i,T=e.size[1]*i;if(Object(Gt.s)(g,-u,I/2,T/2),d.replay(g,h,u,o,S),c.getWrapX()&&a.canWrapX()&&!Object(Ot.g)(l,r)){for(var R,L=r[0],N=Object(Ot.E)(l),P=0;L<l[0];)R=N*--P,h=this.getTransform(e,R),d.replay(g,h,u,o,S),L+=N;for(P=0,L=r[2];L>l[2];)R=N*++P,h=this.getTransform(e,R),d.replay(g,h,u,o,S),L-=N}if(Object(Gt.s)(g,u,I/2,T/2),b&&this.dispatchRenderEvent(g,e,h),g!=t){if(m){var M=t.globalAlpha;t.globalAlpha=n.opacity,t.drawImage(g.canvas,-_,-v),t.globalAlpha=M}else t.drawImage(g.canvas,-_,-v);g.translate(-_,-v)}m||(g.globalAlpha=O)}f&&t.restore()},t.prototype.composeFrame=function(t,e,n){var r=this.getTransform(t,0);this.preCompose(n,t,r),this.compose(n,t,e),this.postCompose(n,t,e,r)},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){if(this.replayGroup_){var o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=Object(Et.c)(t);if(!(e in u))return u[e]=!0,r.call(i,t,a)},null)}},t.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(t,e){var i=this.getLayer(),n=i.getSource(),r=t.viewHints[ut.a.ANIMATING],o=t.viewHints[ut.a.INTERACTING],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&o)return!0;var u=t.extent,l=t.viewState,c=l.projection,h=l.resolution,p=t.pixelRatio,f=i.getRevision(),d=i.getRenderBuffer(),g=i.getRenderOrder();void 0===g&&(g=Oe);var y=Object(Ot.c)(u,d*h),_=l.projection.getExtent();if(n.getWrapX()&&l.projection.canWrapX()&&!Object(Ot.g)(_,t.extent)){var v=Object(Ot.E)(_),m=Math.max(Object(Ot.E)(y)/2,v);y[0]=_[0]-m,y[2]=_[2]+m}if(!this.dirty_&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&Object(Ot.g)(this.renderedExtent_,y))return!(this.replayGroupChanged=!1);this.replayGroup_=null,this.dirty_=!1;var b=new me(Se(h,p),y,h,p,n.getOverlaps(),this.declutterTree_,i.getRenderBuffer());n.loadFeatures(y,h,c);var x=function(t){var e,n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,h)),e){var r=this.renderFeature(t,h,p,e,b);this.dirty_=this.dirty_||r}}.bind(this);if(g){var E=[];n.forEachFeatureInExtent(y,function(t){E.push(t)}),E.sort(g);for(var w=0,O=E.length;w<O;++w)x(E[w])}else n.forEachFeatureInExtent(y,x);return b.finish(),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.replayGroup_=b,this.replayGroupChanged=!0},t.prototype.renderFeature=function(t,e,n,r,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var s=0,a=r.length;s<a;++s)o=Ie(i,t,r[s],Ce(e,n),this.handleStyleImageChange_,this)||o;else o=Ie(i,t,r,Ce(e,n),this.handleStyleImageChange_,this);return o},t}(be.a);Te.handles=function(t){return t.getType()===Ft.a.VECTOR},Te.create=function(t,e){return new Te(e)};var Re=Te,Le=n(5),Ne=n(63),Pe=n(9),Me=n(37),je={image:[Bt.POLYGON,Bt.CIRCLE,Bt.LINE_STRING,Bt.IMAGE,Bt.TEXT],hybrid:[Bt.POLYGON,Bt.LINE_STRING]},Ae={image:[Bt.DEFAULT],hybrid:[Bt.IMAGE,Bt.TEXT,Bt.DEFAULT],vector:re},Fe=function(M){function t(t){M.call(this,t,!0),this.declutterTree_=t.getDeclutter()?kt()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(Ct.c)();var e=t.getRenderMode();this.zDirection=e===Ne.a.VECTOR?1:0,e!==Ne.a.VECTOR&&(this.context=Object(ct.a)()),Object(f.a)(Gt.o,ht.a.CLEAR,this.handleFontsChanged_,this)}return M&&(t.__proto__=M),((t.prototype=Object.create(M&&M.prototype)).constructor=t).prototype.disposeInternal=function(){Object(f.c)(Gt.o,ht.a.CLEAR,this.handleFontsChanged_,this),M.prototype.disposeInternal.call(this)},t.prototype.getTile=function(t,e,n,r,i){var o=M.prototype.getTile.call(this,t,e,n,r,i);return o.getState()===Le.a.LOADED&&(this.createReplayGroup_(o,r,i),this.context&&this.renderTileImage_(o,r,i)),o},t.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},t.prototype.prepareFrame=function(t,e){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,M.prototype.prepareFrame.call(this,t,e)},t.prototype.createReplayGroup_=function(y,_,v){var m=this,b=this.getLayer(),t=b.getRevision(),x=b.getRenderOrder()||null,E=y.getReplayState(b);if(E.dirty||E.renderedRevision!=t||E.renderedRenderOrder!=x){for(var w=b.getSource(),O=w.getTileGrid(),C=w.getTileGridForProjection(v).getResolution(y.tileCoord[0]),S=y.extent,e=function(t,e){var n=y.getTile(y.tileKeys[t]);if(n.getState()==Le.a.LOADED){var r=n.tileCoord,i=O.getTileCoordExtent(r),o=Object(Ot.B)(S,i),s=Object(Ot.p)(i,o)?null:Object(Ot.c)(o,b.getRenderBuffer()*C,m.tmpExtent),a=n.getProjection(),u=!1;Object(Pe.c)(v,a)||(u=!0,n.setProjection(v)),E.dirty=!1;var l=new me(0,o,C,_,w.getOverlaps(),m.declutterTree_,b.getRenderBuffer()),c=Ce(C,_),h=function(t){var e,n=t.getStyleFunction()||b.getStyleFunction();if(n&&(e=n(t,C)),e){var r=this.renderFeature(t,c,e,l);this.dirty_=this.dirty_||r,E.dirty=E.dirty||r}},p=n.getFeatures();x&&x!==E.renderedRenderOrder&&p.sort(x);for(var f=0,d=p.length;f<d;++f){var g=p[f];u&&(a.getUnits()==Me.b.TILE_PIXELS&&(a.setWorldExtent(i),a.setExtent(n.getExtent())),g.getGeometry().transform(a,v)),s&&!Object(Ot.F)(s,g.getGeometry().getExtent())||h.call(m,g)}l.finish(),n.setReplayGroup(b,y.tileCoord.toString(),l)}},n=0,r=y.tileKeys.length;n<r;++n)e(n);E.renderedRevision=t,E.renderedRenderOrder=x}},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=e.viewState.resolution,s=e.viewState.rotation;n=null==n?0:n;var a,u,l,c,h=this.getLayer(),p={},f=this.renderedTiles;for(l=0,c=f.length;l<c;++l){var d=f[l];if(a=Object(Ot.c)(d.extent,n*o,a),Object(Ot.f)(a,t))for(var g=0,y=d.tileKeys.length;g<y;++g){var _=d.getTile(d.tileKeys[g]);if(_.getState()==Le.a.LOADED){var v=_.getReplayGroup(h,d.tileCoord.toString());u=u||v.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=Object(Et.c)(t);if(!(e in p))return p[e]=!0,r.call(i,t,h)},null)}}}return u},t.prototype.getReplayTransform_=function(t,e){var n=this.getLayer().getSource().getTileGrid(),r=t.tileCoord,i=n.getResolution(r[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,u=n.getTileCoordExtent(r,this.tmpExtent),l=o.center,c=Object(Ot.C)(u),h=e.size,p=Math.round(s*h[0]/2),f=Math.round(s*h[1]/2);return Object(Ct.b)(this.tmpTransform_,p,f,i/a,i/a,o.rotation,(c[0]-l[0])/i,(l[1]-c[1])/i)},t.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},t.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},t.prototype.postCompose=function(t,e,n){var r=this.getLayer(),i=r.getRenderMode();if(i!=Ne.a.IMAGE){var o,s,a=r.getDeclutter()?{}:null,u=r.getSource(),l=Ae[i],c=e.pixelRatio,h=e.viewState.rotation,p=e.size;h&&(o=Math.round(c*p[0]/2),s=Math.round(c*p[1]/2),Object(Gt.s)(t,-h,o,s)),a&&this.declutterTree_.clear();for(var f=e.viewHints,d=!(f[ut.a.ANIMATING]||f[ut.a.INTERACTING]),g=this.renderedTiles,y=u.getTileGridForProjection(e.viewState.projection),_=[],v=[],m=g.length-1;0<=m;--m){var b=g[m];if(b.getState()!=Le.a.ABORT)for(var x=b.tileCoord,E=y.getTileCoordExtent(x,this.tmpExtent)[0]-b.extent[0],w=void 0,O=0,C=b.tileKeys.length;O<C;++O){var S=b.getTile(b.tileKeys[O]);if(S.getState()==Le.a.LOADED){var I=S.getReplayGroup(r,x.toString());if(I&&I.hasReplays(l)){w=w||this.getTransform(e,E);var T=S.tileCoord[0],R=I.getClipCoords(w);t.save(),t.globalAlpha=n.opacity;for(var L=0,N=_.length;L<N;++L){var P=_[L];T<v[L]&&(t.beginPath(),t.moveTo(R[0],R[1]),t.lineTo(R[2],R[3]),t.lineTo(R[4],R[5]),t.lineTo(R[6],R[7]),t.moveTo(P[6],P[7]),t.lineTo(P[4],P[5]),t.lineTo(P[2],P[3]),t.lineTo(P[0],P[1]),t.clip())}I.replay(t,w,h,{},d,l,a),t.restore(),_.push(R),v.push(T)}}}}a&&function(t,e,n,r){for(var i=Object.keys(t).map(Number).sort(wt.i),o={},s=0,a=i.length;s<a;++s)for(var u=t[i[s].toString()],l=0,c=u.length;l<c;){var h=u[l++],p=u[l++];h.replay(e,p,n,o,r)}}(a,t,h,d),h&&Object(Gt.s)(t,h,o,s)}M.prototype.postCompose.call(this,t,e,n)},t.prototype.renderFeature=function(t,e,n,r){if(!n)return!1;var i=!1;if(Array.isArray(n))for(var o=0,s=n.length;o<s;++o)i=Ie(r,t,n[o],e,this.handleStyleImageChange_,this)||i;else i=Ie(r,t,n,e,this.handleStyleImageChange_,this);return i},t.prototype.renderTileImage_=function(t,e,n){var r=this.getLayer(),i=t.getReplayState(r),o=r.getRevision(),s=je[r.getRenderMode()];if(s&&i.renderedTileRevision!==o){i.renderedTileRevision=o;var a=t.wrappedTileCoord,u=a[0],l=r.getSource(),c=l.getTileGridForProjection(n),h=c.getResolution(u),p=t.getContext(r),f=l.getTilePixelSize(u,e,n);p.canvas.width=f[0],p.canvas.height=f[1];for(var d=c.getTileCoordExtent(a,this.tmpExtent),g=0,y=t.tileKeys.length;g<y;++g){var _=t.getTile(t.tileKeys[g]);if(_.getState()==Le.a.LOADED){var v=e/h,m=Object(Ct.e)(this.tmpTransform_);Object(Ct.f)(m,v,-v),Object(Ct.h)(m,-d[0],-d[3]),_.getReplayGroup(r,t.tileCoord.toString()).replay(p,m,0,{},!0,s)}}}},t}(At.a);Fe.handles=function(t){return t.getType()===Ft.a.VECTOR_TILE},Fe.create=function(t,e){return new Fe(e)};var De=Fe,ke=function(e){function t(t){(t=Object(Pt.a)({},t)).controls||(t.controls=function(t){var e=t||{},n=new a.a;return void 0!==e.zoom&&!e.zoom||n.push(new Rt(e.zoomOptions)),void 0!==e.rotate&&!e.rotate||n.push(new Tt(e.rotateOptions)),void 0!==e.attribution&&!e.attribution||n.push(new xt(e.attributionOptions)),n}()),t.interactions||(t.interactions=Object(Nt.defaults)()),e.call(this,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createRenderer=function(){var t=new jt.a(this);return t.registerLayerRenderers([Mt.a,At.a,Re,De]),t},t}(yt);e.default=ke},function(t,e,n){"use strict";n.r(e);function r(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Object(i.a)(t,t),this.canvas_=this.context_.canvas}var i=n(14);r.prototype.get=function(t){return this.entries_[t]||null},r.prototype.add=function(t,e,n,r,i){for(var o=0,s=this.emptyBlocks_.length;o<s;++o){var a=this.emptyBlocks_[o];if(a.width>=e+this.space_&&a.height>=n+this.space_){var u={offsetX:a.x+this.space_,offsetY:a.y+this.space_,image:this.canvas_};return this.entries_[t]=u,r.call(i,this.context_,a.x+this.space_,a.y+this.space_),this.split_(o,a,e+this.space_,n+this.space_),u}}return null},r.prototype.split_=function(t,e,n,r){var i,o,s=e.width-n;o=e.height-r<s?(i={x:e.x+n,y:e.y,width:e.width-n,height:e.height},{x:e.x,y:e.y+r,width:n,height:e.height-r}):(i={x:e.x+n,y:e.y,width:e.width-n,height:r},{x:e.x,y:e.y+r,width:e.width,height:e.height-r}),this.updateBlocks_(t,i,o)},r.prototype.updateBlocks_=function(t,e,n){var r=[t,1];0<e.width&&0<e.height&&r.push(e),0<n.width&&0<n.height&&r.push(n),this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)};function o(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==s.a?s.a:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new p(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new p(this.currentHitSize_,this.space_)]}var p=r,s=n(101),l=n(15);o.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var n=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,n)},o.prototype.getInfo_=function(t,e){for(var n=0,r=t.length;n<r;++n){var i=t[n].get(e);if(i)return i}return null},o.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},o.prototype.add=function(t,e,n,r,i,o){if(e+this.space_>this.maxSize_||n+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,n,r,o);if(!s)return null;var a=void 0!==i?i:l.c,u=this.add_(!0,t,e,n,a,o);return this.mergeInfos_(s,u)},o.prototype.add_=function(t,e,n,r,i,o){var s,a,u,l,c=t?this.hitAtlases_:this.atlases_;for(u=0,l=c.length;u<l;++u){if(a=(s=c[u]).add(e,n,r,i,o))return a;if(!a&&u===l-1){var h=void 0;t?(h=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=h):(h=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=h),s=new p(h,this.space_),c.push(s),++l}}return null};function a(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new h.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:m.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}var u=o,c=n(100),h=n(74),f=n(113),d=n(112),g=n(88),y=n(108),_=n(81),v=n(45),m=n(128);a.prototype.clone=function(){return new a({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},a.prototype.getOverflow=function(){return this.overflow_},a.prototype.getFont=function(){return this.font_},a.prototype.getMaxAngle=function(){return this.maxAngle_},a.prototype.getPlacement=function(){return this.placement_},a.prototype.getOffsetX=function(){return this.offsetX_},a.prototype.getOffsetY=function(){return this.offsetY_},a.prototype.getFill=function(){return this.fill_},a.prototype.getRotateWithView=function(){return this.rotateWithView_},a.prototype.getRotation=function(){return this.rotation_},a.prototype.getScale=function(){return this.scale_},a.prototype.getStroke=function(){return this.stroke_},a.prototype.getText=function(){return this.text_},a.prototype.getTextAlign=function(){return this.textAlign_},a.prototype.getTextBaseline=function(){return this.textBaseline_},a.prototype.getBackgroundFill=function(){return this.backgroundFill_},a.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},a.prototype.getPadding=function(){return this.padding_},a.prototype.setOverflow=function(t){this.overflow_=t},a.prototype.setFont=function(t){this.font_=t},a.prototype.setMaxAngle=function(t){this.maxAngle_=t},a.prototype.setOffsetX=function(t){this.offsetX_=t},a.prototype.setOffsetY=function(t){this.offsetY_=t},a.prototype.setPlacement=function(t){this.placement_=t},a.prototype.setFill=function(t){this.fill_=t},a.prototype.setRotation=function(t){this.rotation_=t},a.prototype.setScale=function(t){this.scale_=t},a.prototype.setStroke=function(t){this.stroke_=t},a.prototype.setText=function(t){this.text_=t},a.prototype.setTextAlign=function(t){this.textAlign_=t},a.prototype.setTextBaseline=function(t){this.textBaseline_=t},a.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},a.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},a.prototype.setPadding=function(t){this.padding_=t};var b=a;n.d(e,"Atlas",function(){return p}),n.d(e,"AtlasManager",function(){return u}),n.d(e,"Circle",function(){return c.a}),n.d(e,"Fill",function(){return h.a}),n.d(e,"Icon",function(){return f.a}),n.d(e,"IconImage",function(){return d.a}),n.d(e,"Image",function(){return g.a}),n.d(e,"RegularShape",function(){return y.a}),n.d(e,"Stroke",function(){return _.a}),n.d(e,"Style",function(){return v.c}),n.d(e,"Text",function(){return b})},function(t,e,n){"use strict";n.r(e);function r(){this.dataProjection=null,this.defaultFeatureProjection=null}var i=n(11),o=n(48),h=n(7),s=n(2),a=n(9);r.prototype.getReadOptions=function(t,e){var n;return e&&(n={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(n)},r.prototype.adaptOptions=function(t){return Object(h.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},r.prototype.getLastExtent=function(){return null},r.prototype.getType=function(){return Object(s.b)()},r.prototype.readFeature=function(t,e){return Object(s.b)()},r.prototype.readFeatures=function(t,e){return Object(s.b)()},r.prototype.readGeometry=function(t,e){return Object(s.b)()},r.prototype.readProjection=function(t){return Object(s.b)()},r.prototype.writeFeature=function(t,e){return Object(s.b)()},r.prototype.writeFeatures=function(t,e){return Object(s.b)()},r.prototype.writeGeometry=function(t,e){return Object(s.b)()};var u=r;function l(t,e,n){var r,i=n?Object(a.d)(n.featureProjection):null,o=n?Object(a.d)(n.dataProjection):null;if(r=i&&o&&!Object(a.c)(i,o)?Array.isArray(t)?Object(a.i)(t,o,i):(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&n&&void 0!==n.decimals&&!Array.isArray(r)){var s=Math.pow(10,n.decimals);r===t&&(r=t.clone()),r.applyTransform(function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*s)/s;return t})}return r}var c=n(77);function p(t){if("string"!=typeof t)return null!==t?t:null;var e=JSON.parse(t);return e||null}var f=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getType=function(){return c.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(s.b)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(s.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(s.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(p(t))},e.prototype.readProjectionFromObject=function(t){return Object(s.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(s.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(s.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(s.b)()},e}(u),d=n(1),g=n(4),y=n(0),_=n(87),v=n(3);function m(t){for(var e=[],n=0,r=t.length;n<r;++n)e.push(t[n].clone());return e}var b=function(e){function c(t){e.call(this),this.geometries_=t||null,this.listenGeometriesChange_()}return e&&(c.__proto__=e),((c.prototype=Object.create(e&&e.prototype)).constructor=c).prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(d.c)(this.geometries_[t],g.a.CHANGE,this.changed,this)},c.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(d.a)(this.geometries_[t],g.a.CHANGE,this.changed,this)},c.prototype.clone=function(){var t=new c(null);return t.setGeometries(this.geometries_),t},c.prototype.closestPointXY=function(t,e,n,r){if(r<Object(y.e)(this.getExtent(),t,e))return r;for(var i=this.geometries_,o=0,s=i.length;o<s;++o)r=i[o].closestPointXY(t,e,n,r);return r},c.prototype.containsXY=function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)if(n[r].containsXY(t,e))return!0;return!1},c.prototype.computeExtent=function(t){Object(y.l)(t);for(var e=this.geometries_,n=0,r=e.length;n<r;++n)Object(y.q)(t,e[n].getExtent());return t},c.prototype.getGeometries=function(){return m(this.geometries_)},c.prototype.getGeometriesArray=function(){return this.geometries_},c.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(h.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];for(var n=[],r=this.geometries_,i=!1,o=0,s=r.length;o<s;++o){var a=r[o],u=a.getSimplifiedGeometry(t);n.push(u),u!==a&&(i=!0)}if(i){var l=new c(null);return l.setGeometriesArray(n),this.simplifiedGeometryCache[e]=l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},c.prototype.getType=function(){return v.a.GEOMETRY_COLLECTION},c.prototype.intersectsExtent=function(t){for(var e=this.geometries_,n=0,r=e.length;n<r;++n)if(e[n].intersectsExtent(t))return!0;return!1},c.prototype.isEmpty=function(){return 0===this.geometries_.length},c.prototype.rotate=function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)n[r].rotate(t,e);this.changed()},c.prototype.scale=function(t,e,n){var r=n;r=r||Object(y.x)(this.getExtent());for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].scale(t,e,r);this.changed()},c.prototype.setGeometries=function(t){this.setGeometriesArray(m(t))},c.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},c.prototype.applyTransform=function(t){for(var e=this.geometries_,n=0,r=e.length;n<r;++n)e[n].applyTransform(t);this.changed()},c.prototype.translate=function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)n[r].translate(t,e);this.changed()},c.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),e.prototype.disposeInternal.call(this)},c}(_.a),x=n(62),E=n(89),w=n(72),O=n(91),C=n(40),S=n(30),I=function(n){function t(t){var e=t||{};n.call(this),this.dataProjection=Object(a.d)(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Object(a.d)(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.readFeatureFromObject=function(t,e){var n=null,r=T((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new o.default;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&i.setGeometryName(n.geometry_name),i.setGeometry(r),"id"in n&&i.setId(n.id),n.properties&&i.setProperties(n.properties),i},t.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var r=t.features,i=0,o=r.length;i<o;++i)n.push(this.readFeatureFromObject(r[i],e))}else n=[this.readFeatureFromObject(t,e)];return n},t.prototype.readGeometryFromObject=function(t,e){return T(t,e)},t.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=Object(a.d)(n.properties.name):Object(i.a)(!1,36):e=this.dataProjection,e},t.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature",geometry:null,properties:null},r=t.getId();void 0!==r&&(n.id=r);var i=t.getGeometry();i&&(n.geometry=R(i,e));var o=t.getProperties();return delete o[t.getGeometryName()],Object(h.d)(o)||(n.properties=o),n},t.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:n}},t.prototype.writeGeometryObject=function(t,e){return R(t,this.adaptOptions(e))},t}(f);function T(t,e){if(!t)return null;var n;switch(t.type){case v.a.POINT:n=function(t){return new C.a(t.coordinates)}(t);break;case v.a.LINE_STRING:n=function(t){return new x.a(t.coordinates)}(t);break;case v.a.POLYGON:n=function(t){return new S.default(t.coordinates)}(t);break;case v.a.MULTI_POINT:n=function(t){return new w.a(t.coordinates)}(t);break;case v.a.MULTI_LINE_STRING:n=function(t){return new E.a(t.coordinates)}(t);break;case v.a.MULTI_POLYGON:n=function(t){return new O.a(t.coordinates)}(t);break;case v.a.GEOMETRY_COLLECTION:n=function(t,e){var n=t.geometries.map(function(t){return T(t,e)});return new b(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return l(n,!1,e)}function R(t,e){var n,r=(t=l(t,!0,e)).getType();switch(r){case v.a.POINT:n=function(t){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case v.a.LINE_STRING:n=function(t){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case v.a.POLYGON:n=function(t,e){var n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case v.a.MULTI_POINT:n=function(t){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case v.a.MULTI_LINE_STRING:n=function(t){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case v.a.MULTI_POLYGON:n=function(t,e){var n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case v.a.GEOMETRY_COLLECTION:n=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var e=Object(h.a)({},n);return delete e.featureProjection,R(t,e)})}}(t,e);break;case v.a.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return n}e.default=I},function(t,e,n){"use strict";n.r(e);var r=n(109),o=n(1),a=n(20),s=n(14),i=n(50),u=n(8),l=n(7),c=n(47),h=n(113),p=n(45),f="blur",d="gradient",g="radius",y=["#00f","#0ff","#0f0","#ff0","#f00"];var _=function(i){function t(t){var e=t||{},n=Object(l.a)({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.shadow,delete n.weight,i.call(this,n),this.gradient_=null,this.shadow_=void 0!==e.shadow?e.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(o.a)(this,Object(a.b)(d),this.handleGradientChanged_,this),this.setGradient(e.gradient?e.gradient:y),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8),Object(o.a)(this,Object(a.b)(f),this.handleStyleChanged_,this),Object(o.a)(this,Object(a.b)(g),this.handleStyleChanged_,this),this.handleStyleChanged_();var s,r=e.weight?e.weight:"weight";s="string"==typeof r?function(t){return t.get(r)}:r,this.setStyle(function(t,e){var n=s(t),r=void 0!==n?Object(u.a)(n,0,1):1,i=255*r|0,o=this.styleCache_[i];return o||(o=[new p.c({image:new h.a({opacity:r,src:this.circleImage_})})],this.styleCache_[i]=o),o}.bind(this)),this.setRenderOrder(null),Object(o.a)(this,c.a.RENDER,this.handleRender_,this)}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),n=t+e+1,r=2*n,i=Object(s.a)(r,r);i.shadowOffsetX=i.shadowOffsetY=this.shadow_,i.shadowBlur=e,i.shadowColor="#000",i.beginPath();var o=n-this.shadow_;return i.arc(o,o,t,0,2*Math.PI,!0),i.fill(),i.canvas.toDataURL()},t.prototype.getBlur=function(){return this.get(f)},t.prototype.getGradient=function(){return this.get(d)},t.prototype.getRadius=function(){return this.get(g)},t.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(s.a)(1,256),n=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),i=0,o=t.length;i<o;++i)n.addColorStop(i*r,t[i]);return e.fillStyle=n,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},t.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},t.prototype.handleRender_=function(t){for(var e=t.context,n=e.canvas,r=e.getImageData(0,0,n.width,n.height),i=r.data,o=0,s=i.length;o<s;o+=4){var a=4*i[o+3];a&&(i[o]=this.gradient_[a],i[o+1]=this.gradient_[1+a],i[o+2]=this.gradient_[2+a])}e.putImageData(r,0,0)},t.prototype.setBlur=function(t){this.set(f,t)},t.prototype.setGradient=function(t){this.set(d,t)},t.prototype.setRadius=function(t){this.set(g,t)},t}(i.a),v=n(110),m=n(49),b=n(111),x=n(31),E=n(11),w=n(67),O=n(63),C=function(i){function t(t){var e=t||{},n=e.renderMode||O.a.HYBRID;Object(E.a)(null==n||n==O.a.IMAGE||n==O.a.HYBRID||n==O.a.VECTOR,28),e.declutter&&n==O.a.IMAGE&&(n=O.a.HYBRID),e.renderMode=n;var r=Object(l.a)({},e);delete r.preload,delete r.useInterimTilesOnError,i.call(this,r),this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=x.a.VECTOR_TILE}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.getPreload=function(){return this.get(w.a.PRELOAD)},t.prototype.getUseInterimTilesOnError=function(){return this.get(w.a.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setPreload=function(t){this.set(w.a.PRELOAD,t)},t.prototype.setUseInterimTilesOnError=function(t){this.set(w.a.USE_INTERIM_TILES_ON_ERROR,t)},t}(i.a);C.prototype.getSource;var S=C;n.d(e,"Group",function(){return r.a}),n.d(e,"Heatmap",function(){return _}),n.d(e,"Image",function(){return v.a}),n.d(e,"Layer",function(){return m.a}),n.d(e,"Tile",function(){return b.a}),n.d(e,"Vector",function(){return i.a}),n.d(e,"VectorTile",function(){return S})}]);